<div class="content-search" ng-class="{extended: selected}" ng-controller="AggregatehWidgetCtrl">
    <div class="search-container">
        <div class="search-box">
            <input type="text" placeholder="{{ 'Search'|translate }}" ng-model="query">
        </div>

        <div class="filter-list">
            
        </div>
        
        <div class="content-list">
            <div class="desk"  ng-repeat="desk in desks._items">
                <div class="stage" ng-repeat="stage in deskStages[desk._id]" ng-show="total" ng-init="open = true">
                    <div class="stage-header clearfix">
                        <div class="line"></div>
                        <button class="toggle pull-left" ng-class="{closed: !open}" ng-click="open = !open">
                            <i class="icon-chevron-down"></i>
                        </button>
                        <div class="stage-name pull-left">{{desk.name}} : <span>{{stage.name}}</span></div>
                        <span class="label pull-right">{{total}}</span>
                    </div>
                    <div class="stage-content" ng-show="open"
                        sd-stage-items
                        data-stage="stage._id" 
                        data-total="total"
                        data-allowed="true"
                        data-show-empty="false"
                        data-action="preview(item)"
                        data-selected="selected">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div ng-include="'scripts/superdesk-packaging/views/search-widget-preview.html'"></div>

</div>
