<!doctype html>
<html class="no-js">
  <head>
    <meta charset="utf-8">
    <title>Superdesk</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <!-- build:css custom.css -->
    <link rel="stylesheet" href="app/custom.css">
    <!-- endbuild -->

    <!-- build:css vendor.css -->
    <link rel="stylesheet" href="bower_components/jcrop/css/jquery.Jcrop.css">
    <link rel="stylesheet" href="bower_components/jquery-ui/themes/base/slider.css">
    <!-- endbuild -->

  </head>
  <body>

    <div sd-superdesk-view></div>

    <!-- build:js scripts/vendor.js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <script src="bower_components/lodash/lodash.js"></script>
    <script src="bower_components/jquery-ui/jquery-ui.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>

    <script src="bower_components/react/react.js"></script>
    <script src="bower_components/react/react-dom.js"></script>
    <script src="bower_components/classnames/index.js"></script>

    <script src="bower_components/angular/angular.js"></script>
    <script src="bower_components/gridster/dist/jquery.gridster.with-extras.js"></script>
    <script src="bower_components/medium-editor/dist/js/medium-editor.js"></script>
    <script src="bower_components/ment.io/dist/mentio.js"></script>
    <script src="bower_components/rangy/rangy-core.js"></script>
    <script src="bower_components/rangy/rangy-selectionsaverestore.js"></script>
    <script src="bower_components/momentjs/moment.js"></script>
    <script src="bower_components/moment-timezone/builds/moment-timezone-with-data-2010-2020.js"></script>
    <script src="bower_components/langmap/language-mapping-list.js"></script>
    <script src="bower_components/angular-moment/angular-moment.js"></script>
    <script src="bower_components/d3/d3.js"></script>

    <script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
    <script src="bower_components/angular-resource/angular-resource.js"></script>
    <script src="bower_components/angular-route/angular-route.js"></script>
    <script src="bower_components/angular-gettext/dist/angular-gettext.js"></script>
    <script src="bower_components/angular-animate/angular-animate.js"></script>
    <script src="bower_components/ng-file-upload/ng-file-upload.js"></script>
    <script src="bower_components/ng-file-upload/ng-file-upload-shim.js"></script>
    <script src="bower_components/raven-js/dist/raven.js"></script>

    <script src="bower_components/angular-embed/dist/angular-embed.js"></script>
    <script src="bower_components/angular-contenteditable/angular-contenteditable.js"></script>
    <script src="bower_components/angular-vs-repeat/src/angular-vs-repeat.js"></script>

    <script src='bower_components/exif-js/exif.js'></script>
    <!-- endbuild -->

    <!-- build:js app.js -->
    <script src='dist/index.bundle.js' /></script>
    <!-- endbuild -->

    <!-- build:js translations.js -->
    <script src="app/translations.js"></script>
    <!-- endbuild -->

    <script src="templates-cache.js"></script>
    <script src="app-templates-cache.js"></script>

    <!-- build:dev-only -->
    <script src='http://localhost:9000/webpack-dev-server.js' /></script>
    <!-- endbuild -->

    <script>
        var config = <%= grunt.toJSON(config) %>;

        config.features = {
            preview: 1,
            alchemy: 1,
            autopopulateByline: 1
        };

        config.previewSubjectFilterKey = 'patopic';

        //date formats for publish/embargo entry
        config.view = {
            dateformat: 'D/M/YYYY',
            timeformat: 'H:mm'
        };

        config.shortTimeFormat = 'HH:mm';
        config.shortWeekFormat = 'dddd, HH:mm';
        config.shortDateFormat = 'DD/MM';
        config.editor = {
            imageDragging: true
        };
        config.editorEmbedCodeParsers = ['EMBED_PROVIDERS', 'api', function(EMBED_PROVIDERS, api) {
            return [
                {
                    pattern: /src=".*vidible\.tv.*pid=(.+)\/(.+).js/g,
                    name: EMBED_PROVIDERS.vidible,
                    callback: function(match) {
                        return api.get('vidible/bcid/' + match[2] + '/pid/' + match[1])
                        .then(function(data) {
                            return {association: data};
                        });
                    }
                }
            ];
        }];
        config.ui = {
            italicAbstract: false
        };

        var modules = [
            'superdesk',
            'superdesk.settings',
            'superdesk.dashboard',
            'superdesk.users',
            'superdesk.archive',
            'superdesk.archive.directives',
            'superdesk.ingest',
            'superdesk.desks',
            'superdesk.groups',
            'superdesk.products',
            'superdesk.authoring',
            'superdesk.authoring.multiedit',
            'superdesk.packaging',
            'superdesk.editor2',
            'superdesk.editor.spellcheck',
            'superdesk.notification',
            'superdesk.highlights',
            'superdesk.content_filters',
            'superdesk.dictionaries',
            'superdesk.vocabularies',
            'superdesk.searchProviders',

            'superdesk.users.import',
            'superdesk.users.profile',
            'superdesk.users.activity',
            'superdesk.stream',
            'superdesk.publish',
            'superdesk.templates',
            'superdesk.monitoring',

            'superdesk.profiling',

            'superdesk.loading',
            'superdesk.templates-cache'
        ];

        window.bootstrapSuperdesk(config, modules);
    </script>
  </body>
</html>
