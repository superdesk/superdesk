!function(){"use strict";function a(a){a.dispatchEvent(new MouseEvent("click"))}function b(a){for(var b=a.parentNode;a.hasChildNodes();)b.insertBefore(a.childNodes.item(0),a);b.removeChild(a)}function c(a,c){for(var d=a.cloneNode(!0),e=d.getElementsByClassName(c);e.length;)b(e.item(0));return d.normalize(),d}function d(a,b){for(var c,d=document.createTreeWalker(a,NodeFilter.SHOW_TEXT),e=0,f=String.fromCharCode(65279);d.nextNode();){if(d.currentNode.textContent=d.currentNode.textContent.replace(f,""),c=d.currentNode.textContent.length,e+c>=b)return{node:d.currentNode,offset:b-e};e+=c}}function e(a){var b=[],c=-1;this.add=function(a){c+=1,b[c]=a,b.splice(c+1,b.length)},this.selectPrev=function(){c=Math.max(-1,c-1)},this.selectNext=function(){c=null!=b[c+1]?c+1:c},this.get=function(){var d=c>-1?b[c]:a;return d}}function f(a,b,f){function g(a){return c(a,q)}function h(a){var b=i(a);k(a,b,s)}function i(a){var b=[],c=t.settings.findreplace.needle||null;if(!c)return b;for(var d,e,f=document.createTreeWalker(a,NodeFilter.SHOW_TEXT),g=0;f.nextNode();){for(e=f.currentNode.textContent;(d=e.indexOf(c))>-1;)b.push({word:e.substr(d,c.length),index:g+d}),e=e.substr(d+c.length),g+=d+c.length;g+=e.length}return b}function j(b,c){a.errors(b).then(function(a){k(b,a,p,c)})}function k(a,b,c,d){if(!b.length)return void t.resetSelection(a);d||t.storeSelection(a);var e=b.shift();l(a,e,c),f(function(){k(a,b,c,!0)},0,!1)}function l(a,b,c){var e=d(a,b.index),f=d(a,b.index+b.word.length);e.node!==f.node&&(e.node=f.node,e.offset=0);var g=e.node.splitText(e.offset),h=document.createElement("span");h.classList.add(c),h.classList.add(q),g.splitText(f.offset-e.offset),h.textContent=g.textContent,g.parentNode.replaceChild(h,g)}function m(a,b){for(;a.length;){var c=a.item(0),d=document.createTextNode(b);c.parentNode.replaceChild(d,c),d.parentNode.normalize()}}function n(a){for(var b=a.getElementsByClassName("rangySelectionBoundary");b.length;){var c=b.item(0);c.parentNode.removeChild(c),c.parentNode.normalize&&c.parentNode.normalize()}return a}function o(a){var b=a.history.get();null!=b&&(a.node.innerHTML=b,a.model.$setViewValue(b))}this.settings={spellcheck:!0},this.KEY_CODES=Object.freeze({Y:"Y".charCodeAt(0),Z:"Z".charCodeAt(0)}),this.ARROWS=Object.freeze({33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1}),this.META=Object.freeze({16:1,17:1,18:1,20:1,91:1,93:1,224:1}),this.shouldIgnore=function(a){return t.ARROWS[a.keyCode]?!0:t.META[a.keyCode]?!0:a.shiftKey&&(a.ctrlKey||a.metaKey)?!0:!1};var p="sderror",q="sdhilite",r="sdactive",s="sdfindreplace",t=this,u=[];this.registerScope=function(a){u.push(a),a.history=new e(a.model.$viewValue),a.$on("$destroy",function(){var b=u.indexOf(a);u.splice(b,1)})},this.cleanScope=function(a){t.storeSelection(a.node);var b=g(a.node).innerHTML;return b=b.replace("\ufeff",""),a.node.innerHTML=b,t.resetSelection(a.node),b},this.renderScope=function(a,b,c){t.cleanScope(a),t.settings.findreplace?h(a.node):(t.settings.spellcheck||b)&&j(a.node,c)},this.render=function(){u.forEach(t.renderScope)},this.selectNext=function(){for(var a=document.body.getElementsByClassName(q),b=0;b<a.length;b++){var c=a.item(b);if(c.classList.contains(r))return c.classList.remove(r),void a.item((b+1)%a.length).classList.add(r)}a.length&&a.item(0).classList.add(r)},this.selectPrev=function(){for(var a=document.body.getElementsByClassName(q),b=0;b<a.length;b++){var c=a.item(b);if(c.classList.contains(r))return c.classList.remove(r),void a.item(0===b?a.length-1:b-1).classList.add(r)}},this.replace=function(a){u.forEach(function(b){var c=b.node.getElementsByClassName(r);m(c,a,b),t.commitScope(b)})},this.replaceAll=function(a){u.forEach(function(b){var c=b.node.getElementsByClassName(q);m(c,a),t.commitScope(b)})},this.storeSelection=function(){t.selection=window.rangy?window.rangy.saveSelection():null},this.resetSelection=function(a){t.selection&&(window.rangy.restoreSelection(t.selection),t.selection=null),n(a)},this.setSettings=function(a){t.settings=angular.extend({},t.settings,a)},this.isErrorNode=function(a){return a.classList.contains(p)},this.commit=function(){u.forEach(t.commitScope)},this.commitScope=function(a){var b=n(g(a.node)).innerHTML;b!==a.model.$viewValue&&(a.model.$setViewValue(b),a.history.add(a.model.$viewValue))},this.undo=function(a){a.history.selectPrev(),o(a)},this.redo=function(a){a.history.selectNext(),o(a)}}f.$inject=["spellcheck","$rootScope","$timeout"],angular.module("superdesk.editor",["superdesk.editor.spellcheck"]).service("editor",f).directive("sdTextEditor",["editor","spellcheck","$timeout",function(b,c,d){function e(a){function b(a){return a.split("\n").length}for(var c=0;a;)a.childNodes.length&&a.childNodes[0].nodeType===Node.TEXT_NODE?c+=b(a.childNodes[0].wholeText):a.childNodes.length&&(c+=1),a=a.previousSibling;return c}function f(){var a,b,c=window.getSelection();if(c.anchorNode.nodeType===Node.TEXT_NODE){var d=c.anchorNode.wholeText.substring(0,c.anchorOffset),f=c.anchorNode;for(a=d.length+1;"P"!==f.nodeName;)f.previousSibling?(a+=f.previousSibling.wholeText?f.previousSibling.wholeText.length:f.previousSibling.textContent.length,f=f.previousSibling):f=f.parentNode;b=0+e(f)}else b=0+e(c.anchorNode),a=1;return{line:b,column:a}}var g={buttons:["bold","italic","underline","quote","anchor"],anchorInputPlaceholder:gettext("Paste or type a full link"),disablePlaceholders:!0,spellcheck:!1};return{scope:{type:"=",config:"=",language:"="},require:"ngModel",templateUrl:"scripts/superdesk/editor/views/editor.html",link:function(e,h,i,j){function k(a,c,d){b.renderScope(e,a,d),e.node.classList.remove(s),c&&c.preventDefault()}function l(){e.$applyAsync(function(){b.undo(e),b.renderScope(e)})}function m(){e.$applyAsync(function(){b.redo(e),b.renderScope(e)})}function n(){b.commitScope(e)}function o(){d.cancel(r),r=d(k,500,!1)}e.model=j,b.registerScope(e);var p,q,r,s="typing";j.$viewChangeListeners.push(o),j.$render=function(){function i(a){d.cancel(q),e.node.classList.add(s)}var o=angular.extend({},g,e.config||{});c.setLanguage(e.language),p=h.find("preformatted"===e.type?".editor-type-text":".editor-type-html"),p.empty(),p.html(j.$viewValue||""),e.node=p[0],e.model=j,e.medium=new window.MediumEditor(e.node,o),e.$on("spellcheck:run",k),e.$on("key:ctrl:shift:s",k);var r={};r[b.KEY_CODES.Z]=l,r[b.KEY_CODES.Y]=m,p.on("keydown",function(a){b.shouldIgnore(a)||i(a)}),p.on("keyup",function(a){return b.shouldIgnore(a)?void 0:(i(a),a.ctrlKey&&r[a.keyCode]?void r[a.keyCode]():void(q=d(n,800,!1)))}),p.on("contextmenu",function(f){if(b.isErrorNode(f.target)){f.preventDefault();var g=h[0].getElementsByClassName("dropdown-menu")[0],i=h[0].getElementsByClassName("dropdown-toggle")[0];return h.find(".dropdown.open").length&&a(i),e.suggestions=null,c.suggest(f.target.textContent).then(function(b){e.suggestions=b,e.replaceTarget=f.target,d(function(){g.style.left=f.target.offsetLeft+"px",g.style.top=f.target.offsetTop+f.target.offsetHeight+"px",g.style.position="absolute",a(i)},0,!1)}),!1}}),"preformatted"===e.type&&p.on("keydown keyup click",function(){e.$apply(function(){angular.extend(e.cursor,f())})}),e.$on("$destroy",function(){p.off(),c.setLanguage(null)}),e.cursor={},k(null,null,!0)},e.replace=function(a){e.replaceTarget.parentNode.replaceChild(document.createTextNode(a),e.replaceTarget),b.commitScope(e)},e.addWordToDictionary=function(){var a=e.replaceTarget.textContent;c.addWordToUserDictionary(a),b.render()}}}}])}(),function(){"use strict";function a(a){var b=this;a.links().then(function(a){angular.extend(b,a)})}a.$inject=["urls"],angular.module("superdesk.features",["superdesk.api"]).service("features",a)}(),function(){"use strict";return angular.module("superdesk.asset",["superdesk.config"]).provider("asset",["$injector",function(a){this.templateUrl=function(b){var c=a.get("config"),d=b;return/^(https?:\/\/|\/\/|\/|.\/|..\/)/.test(b)||(d="scripts/"+d),!/^(https?:\/\/|\/\/)/.test(b)&&c.paths&&c.paths.superdesk&&(d=c.paths.superdesk+d),d=d.replace(/[^\/]+\/+\.\.\//g,"").replace(/\.\//g,"").replace(/(\w)\/\/(\w)/g,"$1/$2")},this.imageUrl=this.templateUrl,this.$get=function(){return this}}])}(),function(){"use strict";return angular.module("superdesk.imageFactory",[]).factory("imageFactory",function(){return{makeInstance:function(){return new Image}}})}(),function(){"use strict";function a(){return{link:function(a,b,c,d,e){function f(){g&&g.$destroy()}var g;a.$watch("item",function(){f(),g=a.$parent.$parent.$new(),g.item=a.item,g.items=a.items,g.extras=a.extras,g.$index=a.$index,e(g,function(a){b.empty(),b.append(a)})}),a.$on("$destroy",f)}}}var b=angular.module("superdesk.list",["superdesk.keyboard","superdesk.asset"]);return b.directive("sdListView",["$location","keyboardManager","asset",function(a,b,c){return{scope:{select:"&",extras:"=",items:"="},replace:!0,transclude:!0,templateUrl:c.templateUrl("superdesk/list/views/list-view.html"),link:function(c,d,e){function f(a){if(a){var b=_.find(c.items,{_id:a});b&&c.clickItem(b)}}function g(a){return function(){if(c.items){var b=_.indexOf(c.items,c.selected);if(-1===b)return c.clickItem(_.first(c.items));var d=_.max([0,_.min([c.items.length-1,b+a])]);return 0>d?c.clickItem(_.last(c.items)):c.clickItem(c.items[d])}}}function h(a,c){b.bind(a,c)}var i=-1,j=1;h("up",g(i)),h("left",g(i)),h("down",g(j)),h("right",g(j)),c.clickItem=function(a,b){c.selected=a,c.select({item:a}),b&&b.stopPropagation()},c.$watch("items",function(){f(a.search()._id),d.find(".list-view").focus()})}}}]),b.directive("sdSearchbar",["$location","asset",function(a,b){return{scope:!0,templateUrl:b.templateUrl("superdesk/list/views/searchbar.html"),link:function(b,c){var d=c.find("#search-input");b.q=a.search().q||null,b.flags={extended:!!b.q},b.search=function(){a.search("q",b.q||null),a.search("page",null)},b.close=function(){b.q=null,b.search(),d.focus()}}}}]),b.directive("sdListItem",a),b.directive("sdUpdown",["$location","keyboardManager","$anchorScroll",function(a,b,c){return{transclude:!0,template:"<div ng-transclude></div>",scope:{items:"=",select:"&"},link:function(d,e,f){function g(a){if(a){var b=_.find(d.items,{_id:a});b&&k(b)}}function h(b){a.hash(b),c()}function i(b){return function(){if(d.items){var c=_.findIndex(d.items,{_id:a.search()._id});if(-1===c)return k(_.first(d.items));var e=_.max([0,_.min([d.items.length-1,c+b])]);return 0>e?k(_.last(d.items)):(h(d.items[e]._id),k(d.items[e]))}}}function j(a,c){b.bind(a,c)}function k(a,b){d.select({item:a}),b&&b.stopPropagation()}var l=-1,m=1;j("up",i(l)),j("left",i(l)),j("down",i(m)),j("right",i(m)),d.$watch("items",function(){g(a.search()._id),e.find(".list-view").focus()})}}}]),b.directive("sdPagination",["$location","asset",function(a,b){return{templateUrl:b.templateUrl("superdesk/list/views/sdPagination.html"),scope:{items:"="},link:function(b,c,d){function e(){window.scrollTo(0,0)}var f=25;b.pgsizes=[25,50,100],b.$watch("items._meta",function(c){b.total=0,c&&(b.total=c.total,b.page=Number(a.search().page)||1,b.limit=Number(localStorage.getItem("pagesize"))||Number(a.search().max_results)||f,b.lastPage=b.limit?Math.ceil(b.total/b.limit):b.page,b.from=(b.page-1)*b.limit+1,b.to=Math.min(b.total,b.from+b.limit-1),b.pageChanged===!0&&(e(),b.pageChanged=null))}),b.setPage=function(c){a.search("page",c>1?c:null),b.pageChanged=!0},b.setLimit=function(c){localStorage.setItem("pagesize",c),b.setPage(0),a.search("max_results",null!=c?c:f)}}}}]),b.directive("sdPaginationAlt",["asset",function(a){return{templateUrl:a.templateUrl("superdesk/list/views/sdPaginationAlt.html"),scope:{page:"=",maxPage:"="}}}]),b}(),function(){"use strict";return angular.module("superdesk.keyboard",[]).run(["$rootScope","keyboardManager",function(a,b){a.$on("$routeChangeStart",function(){angular.forEach(b.keyboardEvent,function(a,c){a.opt.global||b.unbind(c)})})}]).run(["$rootScope","$document",function(a,b){b.on("keydown",function(b){var c=b.ctrlKey||b.metaKey,d=b.shiftKey,e=c&&d;if(b.target===document.body||e){var f=String.fromCharCode(b.which).toLowerCase(),g="";g+=c?"ctrl:":"",g+=d?"shift:":"",a.$broadcast("key:"+g+f,b)}})}]).service("keyboardManager",["$window","$timeout",function(a,b){var c=[],d={type:"keydown",propagate:!1,inputDisabled:!0,target:a.document,keyCode:!1,global:!1},e={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},f={esc:27,escape:27,tab:9,space:32,"return":13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,"break":19,insert:45,home:36,"delete":46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123};this.keyboardEvent={},this.bind=function(c,g,h){var i,j,k,l;h=angular.extend({},d,h),c=c.toLowerCase(),j=h.target,"string"==typeof h.target&&(j=document.getElementById(h.target)),i=function(d){if(d=d||a.event,h.inputDisabled){var i;if(d.target?i=d.target:d.srcElement&&(i=d.srcElement),3===i.nodeType&&(i=i.parentNode),"INPUT"===i.tagName||"TEXTAREA"===i.tagName||-1!==i.className.indexOf("editor-type-html"))return}d.keyCode?k=d.keyCode:d.which&&(k=d.which);var j=String.fromCharCode(k).toLowerCase();188===k&&(j=","),190===k&&(j=".");for(var m=c.split("+"),n=0,o={shift:{wanted:!1,pressed:d.shiftKey?!0:!1},ctrl:{wanted:!1,pressed:d.ctrlKey?!0:!1},alt:{wanted:!1,pressed:d.altKey?!0:!1},meta:{wanted:!1,pressed:d.metaKey?!0:!1}},p=0,q=m.length;l=m[p],q>p;p++){switch(l){case"ctrl":case"control":n++,o.ctrl.wanted=!0;break;case"shift":case"alt":case"meta":n++,o[l].wanted=!0}l.length>1?f[l]===k&&n++:h.keyCode?h.keyCode===k&&n++:j===l?n++:e[j]&&d.shiftKey&&(j=e[j],j===l&&n++)}return n!==m.length||o.ctrl.pressed!==o.ctrl.wanted||o.shift.pressed!==o.shift.wanted||o.alt.pressed!==o.alt.wanted||o.meta.pressed!==o.meta.wanted||(b(function(){g(d)},1),h.propagate)?void 0:(d.cancelBubble=!0,d.returnValue=!1,d.stopPropagation&&(d.stopPropagation(),d.preventDefault()),!1)},this.keyboardEvent[c]={callback:i,target:j,event:h.type,_callback:g,opt:h,label:c},j.addEventListener?j.addEventListener(h.type,i,!1):j.attachEvent?j.attachEvent("on"+h.type,i):j["on"+h.type]=i},this.push=function(a,b,d){var e=this.keyboardEvent[a.toLowerCase()];e&&(c.push(e),this.unbind(a)),this.bind(a,b,d)},this.pop=function(a){this.unbind(a);var b=_.findLastIndex(c,{label:a.toLowerCase()});-1!==b&&(this.bind(a,c[b]._callback,c[b].opt),c.splice(b,0))},this.unbind=function(a){a=a.toLowerCase();var b=this.keyboardEvent[a];if(delete this.keyboardEvent[a],b){var c=b.event,d=b.target,e=b.callback;d.detachEvent?d.detachEvent("on"+c,e):d.removeEventListener?d.removeEventListener(c,e,!1):d["on"+c]=!1}}}])}(),function(){"use strict";function a(a,b,c){var d={};this.privileges=d,a.privileges=d,this.userHasPrivileges=function(a){for(var b in a)if(a[b]&&!d[b])return!1;return!0},this.setUserPrivileges=function(a){for(var b in a)a[b]?d[b]=1:d[b]=0;return d},this.loaded=c.getPrivileges().then(this.setUserPrivileges)}a.$inject=["$rootScope","$q","preferencesService"],angular.module("superdesk.privileges",["superdesk.preferences"]).service("privileges",a)}(),function(){"use strict";function a(a,b,c,d,e){var f=null,g=-1,h=5500,i=["user_disabled","user_inactivated","user_role_changed","user_type_changed","user_privileges_revoked","role_privileges_revoked","desk_membership_revoked","desk","stage","stage_visibility_updated"];if(b.server.ws){var j=function(){f||(f=new WebSocket(b.server.ws),l())},k=function(){f&&(f.close(),f=null)},l=function(){f.onmessage=function(b){var c=angular.fromJson(b.data);a.$broadcast(c.event,c.extra),_.contains(i,c.event)&&a.$broadcast("reload",c)},f.onerror=function(a){console.error(a)},f.onopen=function(b){c.cancel(g),a.$broadcast("connected")},f.onclose=function(b){a.$broadcast("disconnected"),c.cancel(g),g=c(function(){f&&d.sessionId&&j()},h,0,!1)}};j(),a.$on(e.LOGOUT,k),a.$on(e.LOGIN,j)}}function b(a,b,c,d){var e,f,g=this;g.message=null,a.$on("disconnected",function(a){g.message="Disconnected to Notification Server, attempting to reconnect ...",d.cancel(f),f=d(function(){b.error(c(g.message))},100)}),a.$on("connected",function(a){g.message="Connected to Notification Server!",d.cancel(e),e=d(function(){b.success(c(g.message))},100)})}function c(a,b,c,d,e){var f=this;f.userDesks=[],f.result=null,f.activeDesk=null,d.fetchCurrentUserDesks().then(function(a){f.userDesks=a._items,f.activeDesk=d.active.desk});var g={user_disabled:"User is disabled",user_inactivated:"User is inactivated",user_role_changed:"User role is changed",user_type_changed:"User type is changed",user_privileges_revoked:"User privileges are revoked"},h={role_privileges_revoked:"Role role_privileges_revoked"},i={desk_membership_revoked:"User removed from desk",desk:"Desk is deleted/updated"},j={stage:"Stage is created/updated/deleted",stage_visibility_updated:"Stage visibility change"};b.$on("reload",function(a,b){f.result=f.reloadIdentifier(b),f.reload(f.result)}),this.reload=function(b){b.reload&&(null!=a.location.hash&&null!=a.location.hash.match("/authoring/")?f.broadcast(e(b.message)):a.location.reload(!0))},this.broadcast=function(a){b.$broadcast("savework",a)},this.reloadIdentifier=function(b){var d={reload:!1,message:null};return _.has(g,b.event)&&null!=b.extra.user_id&&-1!==b.extra.user_id.indexOf(c.identity._id)&&(d.message=g[b.event],d.reload=!0),_.has(h,b.event)&&-1!==b.extra.role_id.indexOf(c.identity.role)&&(d.message=h[b.event],d.reload=!0),_.has(i,b.event)&&null!=b.extra.desk_id&&null!=b.extra.user_ids&&null!=_.find(f.userDesks,{_id:b.extra.desk_id})&&-1!==b.extra.user_ids.indexOf(c.identity._id)&&(d.message=i[b.event],d.reload=!0),_.has(j,b.event)&&null!=b.extra.desk_id&&("stage_visibility_updated"===b.event?null!=_.find(f.userDesks,{_id:b.extra.desk_id})||null==a.location.hash.match("/search")&&null==a.location.hash.match("/authoring/")||(d.message=j[b.event],d.reload=!0):"stage"===b.event&&null!=_.find(f.userDesks,{_id:b.extra.desk_id})&&f.activeDesk===b.extra.desk_id&&(d.message=j[b.event],d.reload=!0)),d}}return a.$inject=["$rootScope","config","$interval","session","SESSION_EVENTS"],b.$inject=["$rootScope","notify","gettext","$timeout"],c.$inject=["$window","$rootScope","session","desks","gettext"],angular.module("superdesk.notification",["superdesk.desks"]).service("reloadService",c).service("notifyConnectionService",b).run(a)}(),function(){"use strict";var a={endpoint:"search",pageSize:25,page:1,sort:[{_updated:"desc"}]};angular.module("superdesk.itemList",["superdesk.search"]).service("itemListService",["api","$q","search",function(b,c,d){function e(a){var c={source:{query:{filtered:{}}}};if(a.sortField&&a.sortDirection){var e={};e[a.sortField]=a.sortDirection,a.sort=[e]}if(a.repo&&(a.repos=[a.repo]),(a.types||a.notStates||a.states||a.creationDateBefore||a.creationDateAfter||a.modificationDateBefore||a.modificationDateAfter||a.provider||a.source||a.urgency||a.savedSearch)&&(c.source.query.filtered.filter={and:[]}),c.source.size=a.pageSize,c.source.from=(a.page-1)*a.pageSize,c.source.sort=a.sort,a.repos&&(c.repo=a.repos.join(",")),a.types&&c.source.query.filtered.filter.and.push({terms:{type:a.types}}),a.notStates&&_.each(a.notStates,function(a){c.source.query.filtered.filter.and.push({not:{term:{state:a}}})}),a.states){var f=[];_.each(a.states,function(a){f.push({term:{state:a}})}),c.source.query.filtered.filter.and.push({or:f})}var g={creationDate:"_created",modificationDate:"_updated"},h=null;_.each(g,function(b,d){(a[d+"Before"]||a[d+"After"])&&(h={},h[b]={lte:a[d+"Before"]||void 0,gte:a[d+"After"]||void 0},c.source.query.filtered.filter.and.push({range:h}))}),_.each(["provider","source","urgency"],function(b){if(a[b]){var d={};d[b]=a[b],c.source.query.filtered.filter.and.push({term:d})}});var i={headline:"headline",subject:"subject.name",keyword:"slugline",uniqueName:"unique_name",body:"body_html"},j=[];if(_.each(i,function(b,c){a[c]&&j.push(b+":(*"+a[c]+"*)")}),j.length&&(c.source.query.filtered.query={query_string:{query:j.join(" "),lenient:!1,default_operator:"AND"}}),a.related===!0){var k=[],l=[];l=a.keyword.split(" ");var m=l.length;k.push('slugline:("'+a.keyword+'")');for(var n=0;m>n;n++)a.keyword&&k.push("slugline:("+l[n]+")");k.length&&(c.source.query.filtered.query={query_string:{query:k.join(" "),lenient:!1,default_operator:"OR"}})}if(a.search){var o=[];_.each(_.values(i),function(b){o.push(b+":(*"+a.search+"*)")}),c.source.query.filtered.query={query_string:{query:o.join(" "),lenient:!1,default_operator:"OR"}}}return a.savedSearch&&a.savedSearch._links?b.get(a.savedSearch._links.self.href).then(function(a){var b=d.query(a.filter.query).getCriteria();return c.source.query.filtered.filter.and=c.source.query.filtered.filter.and.concat(b.query.filtered.filter.and),c.source.post_filter=b.post_filter,c}):c}this.fetch=function(d){return d=_.extend({},a,d),c.when(e(d)).then(function(a){return b(d.endpoint,d.endpointParam||void 0).query(a)})}}]).provider("ItemList",function(){this.$get=["itemListService",function(b){var c=function(){this.listeners=[],this.options=_.clone(a),this.result={},this.maxPage=0};return c.prototype.setOptions=function(a){return this.options=_.extend(this.options,a),this},c.prototype.addListener=function(a){return this.listeners.push(a),this},c.prototype.removeListener=function(a){return _.remove(this.listeners,function(b){return b===a}),this},c.prototype.fetch=function(){var a=this;return b.fetch(this.options).then(function(b){return a.result=b,a.maxPage=Math.ceil(b._meta.total/a.options.pageSize)||0,_.each(a.listeners,function(a){a(b)}),b})},c}]}).factory("itemPinService",["preferencesService",function(a){var b="pinned:items",c={items:null,listeners:{ingest:[],archive:[]},load:function(){var c=this;return a.get(b).then(function(a){c.items=a}).then(function(){c.updateListeners()})},save:function(){var c=this;this.items=_.uniq(this.items,function(a){return a._id});var d={};return d[b]=this.items,a.update(d,b).then(function(){c.updateListeners()})},get:function(a){return _.filter(this.items,{_type:a})},add:function(a,b){var c=this;b._type=a,this.load().then(function(){return c.items.push(b),c.save()}).then(function(){c.updateListeners()})},remove:function(a){var b=this;this.load().then(function(){return _.remove(b.items,{_id:a._id}),b.save()}).then(function(){b.updateListeners()})},isPinned:function(a,b){return!!_.find(this.items,{_type:a,_id:b._id})},addListener:function(a,b){this.listeners[a].push(b),b(this.get(a))},removeListener:function(a,b){_.remove(this.listeners[a],function(a){return a===b})},updateListeners:function(){var a=this;_.each(this.listeners,function(b,c){_.each(b,function(b){b(a.get(c))})})}};return c.load(),c}]).directive("sdItemListWidget",["ItemList","notify","itemPinService","gettext","$timeout",function(a,b,c,d,e){return{scope:{options:"=",itemListOptions:"=",actions:"="},templateUrl:"scripts/superdesk/itemList/views/item-list-widget.html",link:function(f,g,h){function i(){e.cancel(j),j=e(function(){l.fetch()},100,!1)}f.items=null,f.processedItems=null,f.maxPage=1,f.pinnedItems=[],f.selected=null;var j,k=null,l=new a;f.view=function(a){f.selected=a},f.toggleItemType=function(a){f.itemListOptions.types.indexOf(a)>-1?f.itemListOptions.types=_.without(f.itemListOptions.types,a):f.itemListOptions.types.push(a)},f.isItemTypeEnabled=function(a){return f.itemListOptions.types.indexOf(a)>-1},f.pin=function(a){c.add(f.options.pinMode,_.clone(a))},f.unpin=function(a){c.remove(a)},f.isPinned=function(a){return c.isPinned(f.options.pinMode,a)};var m=function(){f.items&&(f.options.pinEnabled?f.processedItems=f.pinnedItems.concat(f.items._items):f.processedItems=f.items._items)},n=function(){f.maxPage=l.maxPage,f.items=l.result,m()},o=function(a){f.pinnedItems=a,_.each(f.pinnedItems,function(a){a.pinnedInstance=!0}),m()};l.addListener(n),c.addListener(f.options.pinMode,o),f.$on("$destroy",function(){l.removeListener(n),c.removeListener(o)}),f.$watch("itemListOptions",function(){l.setOptions(f.itemListOptions),i()},!0),f.$watch("options.similar",function(){f.options.similar&&f.options.item?f.options.item.slugline?(k=f.itemListOptions.search,f.itemListOptions.search=f.options.item.slugline):(b.error(d("Error: Keywords required.")),f.options.similar=!1):f.itemListOptions.search=k||null})}}}]).directive("sdRelatedItemListWidget",["ItemList","notify","itemPinService","gettext",function(a,b,c,d){return{scope:{options:"=",itemListOptions:"=",actions:"="},templateUrl:"scripts/superdesk/itemList/views/relatedItem-list-widget.html",link:function(e,f,g){e.items=null,e.processedItems=null,e.maxPage=1,e.pinnedItems=[],e.selected=null;var h=null,i=new a,j=function(){i.fetch()},k=_.debounce(j,100);e.view=function(a){e.selected=a},e.toggleItemType=function(a){e.itemListOptions.types.indexOf(a)>-1?e.itemListOptions.types=_.without(e.itemListOptions.types,a):e.itemListOptions.types.push(a)},e.isItemTypeEnabled=function(a){return e.itemListOptions.types.indexOf(a)>-1},e.pin=function(a){c.add(e.options.pinMode,_.clone(a))},e.unpin=function(a){c.remove(a)},e.isPinned=function(a){return c.isPinned(e.options.pinMode,a)};var l=function(){e.items&&(e.options.pinEnabled?e.processedItems=e.pinnedItems.concat(e.items._items):e.processedItems=e.items._items)},m=function(){e.maxPage=i.maxPage,e.items=i.result,l()},n=function(a){e.pinnedItems=a,_.each(e.pinnedItems,function(a){a.pinnedInstance=!0}),l()};i.addListener(m),c.addListener(e.options.pinMode,n),e.$on("$destroy",function(){i.removeListener(m),c.removeListener(n)}),e.$watch("itemListOptions",function(){i.setOptions(e.itemListOptions),i.setOptions({related:e.options.related}),k()},!0),e.$watch("options.related",function(){e.options.related&&e.options.item?e.options.item.slugline?(h=e.itemListOptions.keyword,e.itemListOptions.keyword=e.options.item.slugline):(b.error(d("Error: Keywords required.")),e.options.related=!1):e.itemListOptions.keyword=h||null})}}}])}(),function(){"use strict";function a(){this.flags={menu:!1,notifications:!1}}angular.module("superdesk.menu",["superdesk.menu.notifications","superdesk.asset","superdesk.api"]).service("superdeskFlags",a).directive("sdSuperdeskView",["asset",function(a){function b(a){this.flags=a.flags}return b.$inject=["superdeskFlags"],{templateUrl:a.templateUrl("superdesk/menu/views/superdesk-view.html"),controller:b,controllerAs:"superdesk"}}]).directive("sdMenuWrapper",["$route","superdesk","betaService","userNotifications","asset","lodash",function(a,b,c,d,e,f){return{require:"^sdSuperdeskView",templateUrl:e.templateUrl("superdesk/menu/views/menu.html"),link:function(e,g,h,i){function j(a){return b.getMenu(b.MENU_SETTINGS).then(function(b){return b.length||f.remove(a,{_settings:1}),a})}function k(a){f.each(e.menu,function(b){b.isActive=a&&a.href&&a.href.substr(0,b.href.length)===b.href})}e.currentRoute=null,e.flags=i.flags,e.menu=[],b.getMenu(b.MENU_MAIN).then(j).then(function(b){e.menu=b,k(a.current)}),e.toggleMenu=function(){i.flags.menu=!i.flags.menu},e.toggleNotifications=function(){i.flags.notifications=!i.flags.notifications},e.toggleBeta=function(){c.toggleBeta()},e.$on("$locationChangeStart",function(){i.flags.menu=!1}),e.$watch(function(){return a.current},function(a){e.currentRoute=a||null,k(e.currentRoute),i.flags.workspace=a?!!a.sideTemplateUrl:!1}),e.notifications=d}}}])}(),function(){"use strict";function a(a,b,c,d){function e(){var a={},b="read."+d.identity._id||"all";return a[b]={$exists:!0},"user"===d.identity.user_type&&(a.user={$exists:!0},a.item={$exists:!0}),a}function f(a){var b=a._dest||{};return d.identity&&!b[d.identity._id]}var g=1e3,h=500;this._items=null,this.unread=0,this.reload=function(){if(!d.identity)return this._items=null,void(this.unread=0);var a={where:e(),embedded:{user:1,item:1},max_results:8};return c.query("activity",a).then(angular.bind(this,function(a){this._items=a._items,this.unread=0;var b=d.identity||{};_.each(this._items,function(a){var c=a.read||{};a._unread=!c[b._id],this.unread+=a._unread?1:0},this)}))},this.markAsRead=function(a){var b=angular.extend({},a),e=a.read;return e[d.identity._id]=1,c("activity").save(b,{read:e}).then(angular.bind(this,function(){this.unread=_.max([0,this.unread-1]),a._unread=null}))};var i=angular.bind(this,this.reload);d.getIdentity().then(function(){b(i,g,!1),a.$on("activity",function(a,c){f(c)&&b(i,h,!1)})})}function b(a,b){var c=5e3;return{link:function(d){if(d.notification._unread){var e=b(function(){a.markAsRead(d.notification)},c);d.$on("$destroy",function(){b.cancel(e)})}}}}a.$inject=["$rootScope","$timeout","api","session"],b.$inject=["userNotifications","$timeout"],angular.module("superdesk.menu.notifications",["superdesk.asset"]).service("userNotifications",a).directive("sdMarkAsRead",b).directive("sdNotifications",["asset",function(a){return{require:"^sdSuperdeskView",templateUrl:a.templateUrl("superdesk/menu/notifications/views/notifications.html"),link:function(a,b,c,d){a.flags=d.flags}}}])}(),function(){"use strict";function a(a,b,c,d,e,f){function g(b){return a.save("archive",b)}var h="text";this.createItem=function(a){var b={type:a||h,version:0};return f.addTaskToArticle(b),g(b)},this.createPackageItem=function(a){var b=a?{items:[a],version:0}:{version:0};return e.createEmptyPackage(b)},this.createItemFromTemplate=function(a){var b=_.pick(a,c.TEMPLATE_METADATA);return g(b).then(function(b){return c.addRecentTemplate(d.activeDeskId,a._id),b})}}function b(a,b,c,d,e,f){return{scope:!0,templateUrl:"scripts/superdesk-workspace/content/views/sd-content-create.html",link:function(a){function g(a){e.edit(a)}var h=5;a.create=function(a){d.createItem(a).then(g)},a.createPackage=function(){d.createPackageItem().then(g)},a.createFromTemplate=function(a){d.createItemFromTemplate(a).then(g)},a.openUpload=function(){f.intent("upload","media")},a.contentTemplates=null,a.$watch(function(){return b.activeDeskId},function(){c.getRecentTemplates(b.activeDeskId,h).then(function(b){a.contentTemplates=b})}),a.$on("key:ctrl:m",function(b,c){c&&c.preventDefault(),a.create()})}}}function c(a,b,c){var d=10;return{templateUrl:"scripts/superdesk-workspace/content/views/sd-template-select.html",scope:{selectAction:"=",open:"="},link:function(a){a.maxPage=1,a.options={keyword:null,page:1},a.templates=null,a.close=function(){a.open=!1},a.select=function(b){a.selectAction(b),a.close()};var e=function(){c.fetchTemplates(a.options.page,d,"create",b.activeDeskId,a.options.keyword).then(function(b){a.maxPage=Math.ceil(b._meta.total/d),a.templates=b})};a.$watchCollection("options",e),a.$watch(function(){return b.activeDeskId},e)}}}angular.module("superdesk.workspace.content",["superdesk.api","superdesk.archive","superdesk.templates","superdesk.packaging"]).service("content",a).directive("sdContentCreate",b).directive("sdTemplateSelect",c),a.$inject=["api","superdesk","templates","desks","packages","archiveService"],b.$inject=["api","desks","templates","content","authoringWorkspace","superdesk"],c.$inject=["api","desks","templates"]}(),function(){"use strict";function a(a,b,c,d){this.statuses=[{_id:"todo",name:gettext("To Do")},{_id:"in_progress",name:gettext("In Progress")},{_id:"done",name:gettext("Done")}],this.save=function(a,b){return b.task.due_time&&(b.task.due_date=d.mergeDateTime(b.task.due_date,b.task.due_time).format()),delete b.task.due_time,b.task.user||delete b.task.user,c("tasks").save(a,b).then(function(a){return a})},this.buildFilter=function(c){var d=[],e=this;if(d.push({not:{term:{package_type:"takes"}}}),a.getCurrentDeskId()?d.push({term:{"task.desk":a.getCurrentDeskId()}}):d.push({term:{"task.user":b.currentUser._id}}),c)d.push({term:{"task.status":c}});else{var f=[];_.each(e.statuses,function(a){f.push({term:{"task.status":a._id}})}),d.push({or:f})}var g={and:d};return g},this.fetch=function(a,b){return b||(b=this.buildFilter(a)),c("tasks").query({source:{size:200,sort:[{_updated:"desc"}],filter:b}})}}function b(a,b,c,d,e,f,g,h,i){
function j(){e.fetchDeskStages(e.getCurrentDeskId()).then(function(b){a.stages=b})}function k(){b.cancel(n),n=b(function(){var b={bool:{must:{term:{"task.desk":e.getCurrentDeskId()}},must_not:{terms:{state:["published","spiked"]}}}},d={source:{size:200,sort:[{_updated:"desc"}],filter:b}};c.query("tasks",d).then(function(b){a.stageItems=_.groupBy(b._items,function(a){return a.task.stage})})},300,!1)}function l(){var b={bool:{must:{term:{"task.desk":e.getCurrentDeskId()}},must_not:{term:{package_type:"takes"}}}};c.query("published",{source:{filter:b}}).then(function(b){a.published=b})}function m(){function b(a){return a.milliseconds(0),a.toISOString().replace(".000Z","+0000")}var d=h().hours(0).minutes(0).seconds(0),f=h().hours(23).minutes(59).seconds(59),g={template_desk:e.getCurrentDeskId(),next_run:{$gte:b(d),$lte:b(f)}};c.query("content_templates",{where:g,sort:"next_run"}).then(function(b){a.scheduled=b})}var n,o="kanban";a.selected={},a.newTask=null,a.tasks=null,a.view=o,a.statuses=f.statuses,a.activeStatus=a.statuses[0]._id,a.$watch(function(){return e.getCurrentDeskId()},function(a){a&&(k(),j(),l(),m())}),a.preview=function(b){a.selected.preview=b},a.create=function(){a.newTask={},i.addTaskToArticle(a.newTask,e.getCurrentDesk());var b=new Date;a.newTask.task.due_date=g("formatDateTimeString")(b),a.newTask.task.due_time=g("formatDateTimeString")(b,"HH:mm:ss")},a.save=function(){f.save({},a.newTask).then(function(b){d.success(gettext("Item saved.")),a.close()})},a.close=function(){a.newTask=null},a.setView=function(b){a.view!==b&&(a.view=b,a.tasks=null,k())},a.selectStatus=function(b){a.activeStatus!==b&&(a.activeStatus=b,a.tasks=null,k())},a.$on("task:new",k),a.$on("task:stage",function(a,b){var c=e.getCurrentDeskId();(c===b.old_desk||c===b.new_desk)&&k()})}function c(a,b,c,d){var e=b.initialize();return{templateUrl:"scripts/superdesk-dashboard/workspace-tasks/views/task-preview.html",scope:{item:"=",close:"&onclose"},link:function(f){var g;f.task=null,f.task_details=null,f.editmode=!1,e.then(function(){f.desks=b.deskLookup,f.users=b.userLookup}),f.$watch("item._id",function(a){a&&f.reset()}),f.save=function(){f.task.task=_.extend(f.task.task,f.task_details),a.save(g,f.task).then(function(a){c.success(gettext("Item saved.")),f.editmode=!1})},f.edit=function(){f.editmode=!0},f.reset=function(){f.editmode=!1,f.task=_.create(f.item),f.task_details=_.extend({},f.item.task),f.task_details.due_date=f.task_details.due_date?d("formatDateTimeString")(f.task_details.due_date):null,f.task_details.due_time=f.task_details.due_time?d("formatDateTimeString")(f.task_details.due_time,"HH:mm:ss"):null,g=f.item}}}}function d(){return{templateUrl:"scripts/superdesk-dashboard/workspace-tasks/views/kanban-board.html",scope:{items:"=",label:"@",cssClass:"@",selected:"="},link:function(a){a.preview=function(b){a.selected&&(a.selected.preview=b)}}}}function e(a){var b=a.initialize();return{templateUrl:"scripts/superdesk-dashboard/workspace-tasks/views/assignee-view.html",scope:{task:"=",name:"=",avatarSize:"@"},link:function(c){b.then(function(){var b=angular.extend({desk:null,user:null},c.task),d=a.deskLookup[b.desk]||{},e=a.userLookup[b.user]||{};c.deskName=d.name||null,c.userName=e.display_name||null,c.userPicture=e.picture_url||null})}}}function f(a,b){var c=b.initialize();return function(a){var d=this;c.then(function(){d.stages=null,d.selected=null,d.select=function(a){var c=a?a._id:null;d.selected=a||null,b.setCurrentStageId(c)},d.reload=function(a){d.stages=a?b.deskStages[a]:null,d.select(_.find(d.stages,{_id:b.activeStageId}))},a.$watch(function(){return b.getCurrentDeskId()},function(){d.reload(b.getCurrentDeskId())})})}}function g(){return{templateUrl:"scripts/superdesk-dashboard/workspace-tasks/views/desk-stages.html"}}a.$inject=["desks","$rootScope","api","datetimeHelper"],b.$inject=["$scope","$timeout","api","notify","desks","tasks","$filter","moment","archiveService"],c.$inject=["tasks","desks","notify","$filter"],d.$inject=[],e.$inject=["desks"],f.$inject=["api","desks"],angular.module("superdesk.workspace.tasks",[]).factory("StagesCtrl",f).directive("sdTaskPreview",c).directive("sdAssigneeView",e).directive("sdDeskStages",g).directive("sdTaskKanbanBoard",d).controller("TasksController",b).service("tasks",a).config(["superdeskProvider",function(a){a.activity("/workspace/tasks",{label:gettext("Workspace"),controller:b,templateUrl:"scripts/superdesk-dashboard/workspace-tasks/views/workspace-tasks.html",topTemplateUrl:"scripts/superdesk-dashboard/views/workspace-topnav.html",sideTemplateUrl:"scripts/superdesk-workspace/views/workspace-sidenav.html",filters:[{action:"view",type:"task"}]}),a.activity("pick.task",{label:gettext("Pick task"),icon:"pick",controller:["data","superdesk",function(a,b){return b.intent("edit","item",a.item)}],filters:[{action:a.ACTION_EDIT,type:"task"}]})}])}(),function(){"use strict";function a(a){return angular.isDefined(a.data._issues)&&angular.isDefined(a.data._issues["validator exception"])?"Error: "+a.data._issues["validator exception"]:angular.isDefined(a.data._message)?"Error: "+a.data._message:"Error. Privileges not updated."}function b(a,b,c){var d={};return d.usernamePattern=/^[A-Za-z0-9_.'-]+$/,d.phonePattern=/^(?:(?:0?[1-9][0-9]{8})|(?:(?:\+|00)[1-9][0-9]{9,11}))$/,d.signOffPattern=/^[a-zA-Z0-9]+$/,d.save=function(b,c){return a.save("users",b,c).then(function(a){return angular.extend(b,c),angular.extend(b,a),b})},d.changePassword=function(b,c,d){return a.changePassword.create({username:b.username,old_password:c,new_password:d}).then(function(a){})},d.resetPassword=function(b){return a.resetPassword.create({email:b.email}).then(function(a){})},d.isActive=function(a){return a&&a.is_active},d.isPending=function(a){return a&&a.needs_activation},d.toggleStatus=function(a,b){return this.save(a,{is_active:b})},d.isLoggedIn=function(a){return a&&_.size(a.session_preferences)>0},d}function c(a,b,c){function d(a,b,c){return a+"_"+b+"_"+c}var e={},f=c("userList"),g="_nosearch",h=1,i=20;return e.getAll=function(){function c(b,i){return b=b||h,i=i||[],a("users").query({max_results:200,page:b}).then(function(a){i=i.concat(a._items),a._links.next?(b++,d=d.then(c(b,i))):(f.put(g,i),e.resolve(i))}),e.promise}var d=b.when(),e=b.defer();return d=c(),d.then(function(a){return a})},e.get=function(c,e,j){e=e||h;var k=c||g;j=j||i,k=d(k,e,j);var l=f.get(k);if(l)return b.when(l);var m={max_results:e*j};return c&&(m.where=JSON.stringify({$or:[{display_name:{$regex:c,$options:"-i"}},{username:{$regex:c,$options:"-i"}},{first_name:{$regex:c,$options:"-i"}},{last_name:{$regex:c,$options:"-i"}},{email:{$regex:c,$options:"-i"}}]})),a("users").query(m).then(function(a){return f.put(k,a),a})},e.getUser=function(b,c){return a("users").getById(b,void 0,!c)},e.clearCache=function(){f.removeAll()},e}function d(a,b,c){function d(a,b){return angular.isUndefined(b)?!1:_.find(a,function(a){return a._links.self.href===b._links.self.href})}function e(){var c=b.search(),d={max_results:Number(c.max_results)||i};return(c.q||a.online_users)&&(d.where=f(c.q,a.online_users)),c.page&&(d.page=parseInt(c.page,10)),c.sort?d.sort=h(c.sort[0],c.sort[1]):d.sort=h("full_name","asc"),d}function f(a,b){var c=null,d=null;return a&&(c={$or:[{username:{$regex:a,$options:"-i"}},{display_name:{$regex:a,$options:"-i"}},{email:{$regex:a,$options:"-i"}}]}),b&&(d={session_preferences:{$exists:!0,$nin:[null,{}]}}),a&&b?JSON.stringify({$and:[c,d]}):a?JSON.stringify(c):b?JSON.stringify(d):null}function g(b){c.users.query(b).then(function(b){a.users=b,a.createdUsers=[]})}function h(a,b){var c="asc"===b?1:-1;switch(a){case"full_name":return'[("first_name", '+c+'), ("last_name", '+c+")]";default:return'[("'+encodeURIComponent(a)+'", '+c+")]"}}var i=25;a.selected={user:null},a.createdUsers=[],a.online_users=!1,c("roles").query().then(function(b){a.roles=_.indexBy(b._items,"_id"),a.noRolesWarning=0===b._items.length}),a.preview=function(b){a.selected.user=b},a.createUser=function(){a.intent("create","user").then(g)},a.$on("intent:create:user",function(){a.preview({})}),a.closePreview=function(){a.preview(null)},a.afterDelete=function(b){a.selected.user&&b.item&&b.item.href===a.selected.user.href&&(a.selected.user=null),g(e())},a.render=function(b){d(a.users._items,b)||d(a.createdUsers,b)||a.createdUsers.unshift(b)},a.$watchCollection(e,g)}function e(a,b,c,d,e){a.user=d,a.profile=a.user._id===e.identity._id}function f(a,b,c,d,e){a.methods=[{id:"upload",label:gettext("Upload from computer")},{id:"camera",label:gettext("Take a picture")},{id:"web",label:gettext("Use a Web URL")}],e.isBeta().then(function(b){b||(a.methods=_.reject(a.methods,{beta:!0}))}),a.activate=function(b){a.active=b,a.preview={},a.progress={width:0}},a.activate(a.methods[0]),a.upload=function(c){var e={};if(e.CropLeft=Math.round(Math.min(c.cords.x,c.cords.x2)),e.CropRight=Math.round(Math.max(c.cords.x,c.cords.x2)),e.CropTop=Math.round(Math.min(c.cords.y,c.cords.y2)),e.CropBottom=Math.round(Math.max(c.cords.y,c.cords.y2)),c.img)e.media=c.img;else{if(!c.url)return;e.URL=c.url}return d.resource("upload").then(function(c){return b.start({url:c,method:"POST",data:e}).then(function(b){if("ERR"!==b.data._status){var c=b.data.renditions.viewImage.href;return a.locals.data.picture_url=c,a.locals.data.avatar=b.data._id,a.resolve(c)}},null,function(b){a.progress.width=Math.round(b.loaded/b.total*100)})})}}function g(a,b,c,d,e,f,g){var h=b.item;return f.save(h,{is_enabled:!0,is_active:!0}).then(function(a){g.$broadcast("user:updated",a)},function(a){angular.isDefined(a.data._issues)&&angular.isDefined(a.data._issues["validator exception"])?d.error(e("Error: "+a.data._issues["validator exception"])):angular.isDefined(a.data._message)?d.error(e("Error: "+a.data._message)):d.error(e("Error. User Profile cannot be enabled."))})}function h(a,b,c,d,e,f){var g=b.item;return a.users.remove(g).then(function(b){return a.users.getById(g._id).then(function(a){return g=angular.extend(g,a),f.$broadcast("user:updated",g),g})},function(a){angular.isDefined(a.data._issues)&&angular.isDefined(a.data._issues["validator exception"])?d.error(e("Error: "+a.data._issues["validator exception"])):angular.isDefined(a.data._message)?d.error(e("Error: "+a.data._message)):d.error(e("Error. User Profile cannot be disabled."))})}function i(a,b,c,d,e){return a.users.getById(b.current.params._id).then(null,function(a){return 404===a.status&&(e.path("/users/"),c.error(d("User was not found, sorry."),5e3)),a})}function j(a,b,c,d,e){return{scope:!0,templateUrl:"scripts/superdesk-users/views/settings-roles.html",link:function(f){function g(b){var c=_.find(f.roles,function(a){return a._id!==b._id&&a.is_default});c&&a("roles").getById(c._id).then(function(a){_.extend(c,{_etag:a._etag,is_default:!1})})}function h(){return d.confirm(b("Are you sure you want to delete user role?"))}var i=null;f.editRole=null,a("roles").query().then(function(a){f.roles=e("sortByName")(a._items)}),f.edit=function(a){f.editRole=_.create(a),i=a,f.defaultRole=a.is_default},f.save=function(d){var e=d._id?!1:!0;a("roles").save(i,d).then(function(){e?(f.roles.push(i),c.success(b("User role created."))):c.success(b("User role updated.")),d.is_default&&g(d),f.cancel()},function(a){400===a.status&&"undefined"!=typeof a.data._issues.name&&1===a.data._issues.name.unique?c.error(b("I'm sorry but a role with that name already exists.")):"undefined"!=typeof a.data._issues["validator exception"]?c.error(a.data._issues["validator exception"]):c.error(b("I'm sorry but there was an error when saving the role."))})},f.cancel=function(){f.editRole=null},f.remove=function(d){h().then(function(){a("roles").remove(d).then(function(a){_.remove(f.roles,d)},function(a){angular.isDefined(a.data._message)?c.error(b("Error: "+a.data._message)):c.error(b("There is an error. Role cannot be deleted."))})})}}}}function k(b,c,d,e,f){return{scope:!0,templateUrl:"scripts/superdesk-users/views/settings-privileges.html",link:function(g){b("roles").query().then(function(a){g.roles=f("sortByName")(a._items)}),b("privileges").query().then(function(a){g.privileges=a._items}),g.saveAll=function(f){var h=[];_.each(g.roles,function(a){h.push(b.save("roles",a,_.pick(a,"privileges")).then(function(a){},function(a){console.log(a)}))}),e.all(h).then(function(){d.success(c("Privileges updated.")),f.$setPristine()},function(b){d.error(c(a(b)))})}}}}function l(a){}return b.$inject=["api","$q","notify"],c.$inject=["api","$q","$cacheFactory"],d.$inject=["$scope","$location","api"],e.$inject=["$scope","server","superdesk","user","session"],f.$inject=["$scope","upload","session","urls","betaService"],g.$inject=["api","data","$q","notify","gettext","usersService","$rootScope"],h.$inject=["api","data","$q","notify","gettext","$rootScope"],i.$inject=["api","$route","notify","gettext","$location"],j.$inject=["api","gettext","notify","modal","$filter"],k.$inject=["api","gettext","notify","$q","$filter"],l.$inject=["$scope"],angular.module("superdesk.users",["superdesk.activity","superdesk.asset"]).controller("UserEditController",e).service("usersService",b).factory("userList",c).factory("userPopup",["$compile","$timeout","userList",function(a,b,c){function d(){var a=i.get();a&&a.hide()}function e(){var a=i.get();a&&a.html("")}function f(){b.cancel(i.status)}function g(){i.status=b(d,j,!1)}function h(b,c){var d=i.get();d.html('<div class="avatar-holder"><figure class="avatar big"><img sd-user-avatar data-src="user.picture_url"></figure></div><div class="title">{{user.display_name}}</div><div class="actions"><a href="#/users/{{user._id}}">go to profile</a></div>');var e=c.$new(!0);e.user=b,a(d)(e)}var i={},j=300;return i.get=function(a){return!i.element&&a&&(i.element=$('<div class="user-popup"></div>'),i.element.appendTo("BODY"),i.element.hover(f,g),i.element.click(d)),i.element},i.set=function(a,b,d){f(),e();var g=i.get(!0),j=b.offset();g.css({left:j.left+b.outerWidth(),top:j.top+b.outerHeight()}),c.getUser(a).then(function(a){h(a,d)},function(a){console.log(a)}),g.show()},i.close=function(){var a=i.get();a&&g()},i}]).config(["superdeskProvider",function(a){a.permission("users-manage",{label:gettext("Manage users"),permissions:{users:{write:!0}}}).permission("users-read",{label:gettext("Read users"),permissions:{users:{read:!0}}}).permission("user-roles-manage",{label:gettext("Manage user roles"),permissions:{user_roles:{write:!0}}}).permission("user-roles-read",{label:gettext("Read user roles"),permissions:{user_roles:{read:!0}}})}]).config(["superdeskProvider","assetProvider",function(a,b){a.activity("/users/",{label:gettext("User management"),description:gettext("Find your colleagues"),controller:d,templateUrl:b.templateUrl("superdesk-users/views/list.html"),category:a.MENU_MAIN,adminTools:!0,reloadOnSearch:!1,filters:[{action:a.ACTION_PREVIEW,type:"user"},{action:"list",type:"user"}],privileges:{users:1}}).activity("/users/:_id",{label:gettext("Users profile"),priority:100,controller:"UserEditController",templateUrl:b.templateUrl("superdesk-users/views/edit.html"),resolve:{user:i},filters:[{action:"detail",type:"user"}],privileges:{users:1}}).activity("/settings/user-roles",{label:gettext("User Roles"),templateUrl:b.templateUrl("superdesk-users/views/settings.html"),controller:l,category:a.MENU_SETTINGS,priority:-500,privileges:{roles:1}}).activity("delete/user",{label:gettext("Disable user"),icon:"trash",confirm:gettext("Please confirm that you want to disable a user."),controller:h,filters:[{action:a.ACTION_EDIT,type:"user"}],condition:function(a){return a.is_enabled},privileges:{users:1}}).activity("restore/user",{label:gettext("Enable user"),icon:"revert",controller:g,filters:[{action:a.ACTION_EDIT,type:"user"}],condition:function(a){return!a.is_enabled},privileges:{users:1}}).activity("edit.avatar",{label:gettext("Change avatar"),modal:!0,cssClass:"upload-avatar modal-static modal-large",controller:f,templateUrl:b.templateUrl("superdesk-users/views/change-avatar.html"),filters:[{action:"edit",type:"avatar"}]})}]).config(["apiProvider",function(a){a.api("users",{type:"http",backend:{rel:"users"}}),a.api("roles",{type:"http",backend:{rel:"roles"}}),a.api("resetPassword",{type:"http",backend:{rel:"reset_user_password"}}),a.api("changePassword",{type:"http",backend:{rel:"change_user_password"}})}]).config(["$compileProvider",function(a){a.directive("compile",["$compile",function(a){return function(b,c,d){var e=b.$eval(d.compile);c.html(e);var f=b.$new(!0);_.each(b.$eval(d.data),function(a,b){f[b]=a}),a(c.contents())(f)}}])}]).directive("sdUserRoles",j).directive("sdRolesPrivileges",k).directive("sdInfoItem",function(){return{link:function(a,b){b.addClass("item"),b.find("input, select").addClass("info-value info-editable")}}}).directive("sdValidError",function(){return{link:function(a,b){b.addClass("validation-error")}}}).directive("sdValidInfo",function(){return{link:function(a,b){b.addClass("validation-info")}}}).directive("sdUserDetailsPane",["$timeout",function(a){return{replace:!0,transclude:!0,template:'<div class="user-details-pane" ng-transclude></div>',link:function(b,c,d){a(function(){$(".user-details-pane").addClass("open")},0,!1),b.closePane=function(){$(".user-details-pane").removeClass("open")}}}}]).directive("sdUserEdit",["api","gettext","notify","usersService","userList","session","$location","$route","superdesk","features","asset","privileges","desks","keyboardManager",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return{templateUrl:k.templateUrl("superdesk-users/views/edit-form.html"),scope:{origUser:"=user",onsave:"&",oncancel:"&",onupdate:"&"},link:function(k,o){function p(a){return k.dirty=!1,e.getUser(a._id,!0).then(function(a){k.error=null,k.origUser=a,k.user=_.create(a),k.confirm={password:null},k.show={password:!1},k._active=d.isActive(a),k._pending=d.isPending(a),k.profile=k.user._id===f.identity._id,k.userDesks=[],angular.isDefined(a)&&angular.isDefined(a._links)&&m.fetchUserDesks(a).then(function(a){k.userDesks=a._items})})}k.privileges=l.privileges,k.features=j,k.usernamePattern=d.usernamePattern,k.phonePattern=d.phonePattern,k.signOffPattern=d.signOffPattern,k.dirty=!1,k.errorMessage=null,p(k.origUser),k.$watchCollection("user",function(a){_.each(a,function(b,c){""===b&&("phone"!==c||"byline"!==c?a[c]=null:delete a[c])}),k.dirty=!angular.equals(a,k.origUser)}),a("roles").query().then(function(a){k.roles=a._items}),k.cancel=function(){p(k.origUser),k.origUser.Id||k.oncancel()},k.focused=function(){n.unbind("down"),n.unbind("up")},k.editPicture=function(){i.intent("edit","avatar",k.user).then(function(a){k.user.picture_url=a})},k.save=function(){return k.error=null,c.info(b("saving..")),d.save(k.origUser,k.user).then(function(a){k.origUser=a,p(k.origUser),c.pop(),c.success(b("user saved.")),k.onsave({user:k.origUser}),k.user._id===f.identity._id&&f.updateIdentity(k.origUser),e.clearCache()},function(a){if(c.pop(),404===a.status)"/users/"===g.path()?h.reload():g.path("/users/"),c.error(b("User is not found. It might be deleted."));else{var d=b("There was an error when saving user. ");if(a.data&&a.data._issues){angular.isDefined(a.data._issues["validator exception"])&&(d=b("Error: "+a.data._issues["validator exception"])),k.error=a.data._issues,k.error.message=d;for(var e in a.data._issues)if(k.userForm[e]){k.error[e]&&(k.error[e].format=!0,k.error.message=null);for(var f in a.data._issues[e])a.data._issues[e][f]&&(k.userForm[e].$setValidity(f,!1),k.error.message=null)}}c.error(d)}})},k.toggleStatus=function(a){d.toggleStatus(k.origUser,a).then(function(){p(k.origUser),k.onupdate({user:k.origUser})})},k.$on("user:updated",function(a,b){p(b)})}}}]).directive("sdUserPreferences",["api","session","preferencesService","notify","asset","metadata","modal","$timeout","$q","userList",function(a,b,c,d,e,f,g,h,i,j){return{templateUrl:e.templateUrl("superdesk-users/views/user-preferences.html"),link:function(a,e,k){function l(b){var c,d;a.preferences={},_.each(b,function(b,c){b.label&&b.category&&(a.preferences[c]=_.create(b))}),c=["cities","categories","default_categories","locators"],d=c.some(function(a){var b=f.values||{};return angular.isUndefined(b[a])}),d?f.initialize().then(function(){m(f.values,b)}):m(f.values,b)}function m(b,c){a.cities=b.cities,a.defaultCategories={},b.default_categories.forEach(function(b){a.defaultCategories[b.qcode]=!0}),a.categories=[],b.categories.forEach(function(b){var d=_.create(b),e=c["categories:preferred"].selected;d.selected=!!e[b.qcode],a.categories.push(d)}),a.locators=b.locators}function n(){var b,c,d;return(d=a.categories.some(function(a){return a.selected}))?i.when():(c=["No preferred categories selected. Should you ","choose to proceed with your choice, a default ","set of categories will be selected for you."].join(""),c=gettext(c),b=g.confirm(c).then(function(){a.checkDefault()}))}function o(){var b={};return _.each(p,function(c,d){if("dateline:located"===d){var f=e.find(".input-term > input");a.changeDatelinePreview(a.preferences[d],f[0].value)}"categories:preferred"===d&&(c.selected={},a.categories.forEach(function(a){c.selected[a.qcode]=!!a.selected})),b[d]=_.extend(c,a.preferences[d])}),b}var p;c.get(null,!0).then(function(c){p=c,l(p),a.datelineSource=b.identity.dateline_source,a.datelinePreview=a.preferences["dateline:located"].located}),a.cancel=function(){a.userPrefs.$setPristine(),l(p),a.datelinePreview=a.preferences["dateline:located"].located},j.getUser(a.user._id,!0).then(function(b){a.user=b}),a.save=function(){n().then(function(){var b=o();return c.update(b).then(function(){j.getUser(a.user._id,!0).then(function(b){a.user=b})})},function(){return i.reject("canceledByModal")}).then(function(){d.success(gettext("User preferences saved")),a.cancel()},function(a){"canceledByModal"!==a&&d.error(gettext("User preferences could not be saved..."))})},a.changeDatelinePreview=function(b,c){""===c&&(b.located=null),h(function(){a.datelinePreview=b.located})},a.checkAll=function(){a.categories.forEach(function(a){a.selected=!0}),a.userPrefs.$setDirty()},a.checkNone=function(){a.categories.forEach(function(a){a.selected=!1}),a.userPrefs.$setDirty()},a.checkDefault=function(){a.categories.forEach(function(b){b.selected=!!a.defaultCategories[b.qcode]}),a.userPrefs.$setDirty()},a.articleDefaultsChanged=function(b){a.userPrefs.$setDirty()}}}}]).directive("sdUserPrivileges",["api","gettext","notify","userList",function(b,c,d,e){return{scope:{user:"="},templateUrl:"scripts/superdesk-users/views/user-privileges.html",link:function(f){e.getUser(f.user._id,!0).then(function(a){f.user=a}),b("privileges").query().then(function(a){f.privileges=a._items}),b("roles").getById(f.user.role).then(function(a){f.role=a},function(a){console.log(a)}),f.origPrivileges=angular.copy(f.user.privileges),f.save=function(){b.save("users",f.user,_.pick(f.user,"privileges")).then(function(){f.origPrivileges=angular.copy(f.user.privileges),f.userPrivileges.$setPristine(),d.success(c("Privileges updated."))},function(b){d.error(c(a(b)))})},f.cancel=function(){f.user.privileges=angular.copy(f.origPrivileges),f.userPrivileges.$setPristine()}}}}]).directive("sdChangePassword",["usersService","notify","gettext",function(a,b,c){return{link:function(d,e){d.$watch("user",function(){d.oldPasswordInvalid=!1}),d.changePassword=function(e,f){return a.changePassword(d.user,e,f).then(function(a){d.oldPasswordInvalid=!1,b.success(c("The password has been changed."),3e3),d.show.change_password=!1},function(a){d.oldPasswordInvalid=!0})}}}}]).directive("sdResetPassword",["usersService","notify","gettext",function(a,b,c){return{link:function(d,e){d.$watch("user",function(){d.oldPasswordInvalid=!1}),d.resetPassword=function(){return a.resetPassword(d.user).then(function(a){d.oldPasswordInvalid=!1,b.success(c("The password has been reset."),3e3),d.show.reset_password=!1},function(a){d.oldPasswordInvalid=!0})}}}}]).directive("sdUserUnique",["$q","api",function(a,b){return{require:"ngModel",scope:{exclude:"="},link:function(c,d,e,f){function g(d,f){var g=d||f;if(g&&e.uniqueField){var h={where:{}};return h.where[e.uniqueField]=g,b.users.query(h).then(function(b){return!b._items.length||c.exclude._id&&b._items[0]._id===c.exclude._id?b:a.reject(b)})}return a.when()}f.$asyncValidators.unique=g}}}]).directive("sdPasswordConfirm",[function(){var a="confirm";return{require:"ngModel",scope:{password:"="},link:function(b,c,d,e){function f(a,b){return!a||a===b}e.$validators[a]=function(a,c){var d=a||c;return f(b.password,d)},b.$watch("password",function(b){e.$setValidity(a,f(b,e.$viewValue))})}}}]).directive("sdUserList",["keyboardManager","usersService","asset",function(a,b,c){return{templateUrl:c.templateUrl("superdesk-users/views/user-list-item.html"),scope:{roles:"=",users:"=",selected:"=",done:"="},link:function(c,d,e){function f(){g(),a.bind("down",h),a.bind("up",i)}function g(){a.unbind("down"),a.unbind("up")}function h(){var a=j();-1!==a&&c.select(c.users[_.min([c.users.length-1,a+1])])}function i(){var a=j();-1!==a&&c.select(c.users[_.max([0,a-1])])}function j(){return _.findIndex(c.users,c.selected)}c.active=function(a){return b.isActive(a)},c.pending=function(a){return b.isPending(a)},c.select=function(a){c.selected=a,f()},c.$watch("selected",function(a){null==a&&f()}),c.isLoggedIn=function(a){return b.isLoggedIn(a)}}}}]).directive("sdUserListItem",["asset",function(a){return{templateUrl:a.templateUrl("superdesk-users/views/user-list-item.html")}}]).directive("sdActivity",["asset",function(a){return{templateUrl:a.templateUrl("superdesk-users/views/activity-list.html")}}]).directive("sdUserMentio",["userList","asset",function(a,b){return{templateUrl:b.templateUrl("superdesk-users/views/mentions.html"),link:function(b,c){b.users=[],b.fetching=!1,b.prefix="";var d=c.children()[0];c.children().bind("scroll",function(){d.scrollTop+d.offsetHeight>=d.scrollHeight-3&&(d.scrollTop=d.scrollTop-3,b.fetchNext())}),b.fetchNext=function(){if(!b.fetching){var c=b.users.length/10+1;b.fetching=!0,a.get(b.prefix,c,10).then(function(a){_.each(_.sortBy(a._items.slice(10*(c-1),10*c),"username"),function(a){b.users.push(a)}),b.fetching=!1})}},b.searchUsers=function(c){return b.prefix=c,a.get(c,1,10).then(function(a){b.users=_.sortBy(a._items,"username")})},b.selectUser=function(a){return"@"+a.username},b.$watchCollection(function(){return $(".users-list-embed>li.active")},function(a){a.hasClass("active")&&$(".mentio-menu").scrollTop(a.position().top)})}}}]).directive("sdUserInfo",["userPopup",function(a){return{link:function(b,c,d){c.addClass("user-link"),c.hover(function(){a.set(d.user,c,b)},function(){a.close()})}}}]).filter("username",["session",function(a){return function(a){return a?a.display_name||a.username:null}}])}(),function(){"use strict";function a(a){var b="activity";this.getUserActivity=function(c,d,e){var f={where:{user:c._id},sort:"[('_created',-1)]",embedded:{user:1,item:1}};return d&&(f.max_results=d),e>1&&(f.page=e),a.query(b,f)},this.getAllUsersActivity=function(c,d){var e={sort:"[('_created',-1)]",where:{user:{$exists:!0},item:{$exists:!0}},embedded:{user:1,item:1}};return c&&(e.max_results=c),d>1&&(e.page=d),a.query(b,e)}}a.$inject=["api"],angular.module("superdesk.users.profile",["superdesk.api","superdesk.users"]).service("profileService",a).config(["superdeskProvider","assetProvider",function(a,b){a.activity("/profile/",{label:gettext("My Profile"),controller:"UserEditController",templateUrl:b.templateUrl("superdesk-users/views/edit.html"),resolve:{user:["session","api",function(a,b){return a.getIdentity().then(function(a){return b.get(a._links.self.href)})}]}})}]).directive("sdUserActivity",["profileService","asset",function(a,b){return{restrict:"A",replace:!0,templateUrl:b.templateUrl("superdesk-users/views/activity-feed.html"),scope:{user:"="},link:function(b,c,d){var e=1,f=5;b.max_results=f,b.$watch("user",function(){a.getUserActivity(b.user,f).then(function(a){b.activityFeed=a})}),b.loadMore=function(){e++,a.getUserActivity(b.user,f,e).then(function(a){Array.prototype.push.apply(b.activityFeed._items,a._items),b.activityFeed._links=a._links,b.max_results+=f})}}}}])}(),function(){"use strict";angular.module("superdesk.users.activity",["superdesk.users","superdesk.dashboard.widgets","superdesk.asset"]).config(["widgetsProvider","assetProvider",function(a,b){a.widget("activity",{label:"Activity Stream",multiple:!0,max_sizex:2,max_sizey:2,sizex:1,sizey:2,thumbnail:b.imageUrl("superdesk-users/activity/thumbnail.svg"),template:b.templateUrl("superdesk-users/activity/widget-activity.html"),configurationTemplate:b.templateUrl("superdesk-users/activity/configuration.html"),configuration:{maxItems:5},description:"Activity stream widget",icon:"stream"})}]).controller("ActivityController",["$scope","profileService",function(a,b){function c(c){e=c,b.getAllUsersActivity(c.maxItems).then(function(b){a.activityFeed=b,a.max_results=parseInt(c.maxItems,10)}),a.loadMore=function(){d++,b.getAllUsersActivity(c.maxItems,d).then(function(b){Array.prototype.push.apply(a.activityFeed._items,b._items),a.activityFeed._links=b._links,a.max_results+=parseInt(c.maxItems,10)})}}var d=1,e=null;a.max_results=0,a.$on("changes in activity",function(){e&&c(e)}),a.$watch("widget.configuration",function(a){d=1,a&&c(a)},!0)}]).controller("ActivityConfigController",["$scope",function(a){a.notIn=function(a){return function(b){return-1===a.indexOf(b)}}}])}(),function(){"use strict";function a(a,b){function c(a,c){var d={};return d[a]=1,d.message=c,b.reject(d)}this.importUser=function(b){return a.save("import_profile",b).then(null,function(a){var b=a.data;return 404===a.status?c("profile_to_import",b._message):400===a.status?c(b._issues.profile_to_import?"profile_to_import":"credentials",b._message):c("credentials",b._message)})}}function b(a,b){a.model={},a.error=null,a.importUser=function(c){a.error=null,b.importUser(c).then(function(b){a.resolve(b)},function(b){a.error=b})}}a.$inject=["api","$q"],b.$inject=["$scope","userImport"],angular.module("superdesk.users.import",["superdesk.activity","superdesk.api"]).service("userImport",a).config(["superdeskProvider",function(a){a.activity("import.user",{label:gettext("Import user"),modal:!0,controller:b,templateUrl:"scripts/superdesk-users/import/views/import-user.html",filters:[{action:"create",type:"user"}],features:{import_profile:1}})}])}(),function(){"use strict";function a(a,b){b.initialize().then(function(){a.groups=b.groups})}function b(a,b,c,d,e,f,g){a.modalActive=!1,a.step={current:null},a.group={edit:null},a.openGroup=function(b,c){a.modalActive=!0,a.step.current=b,a.group.edit=c},a.cancel=function(){a.modalActive=!1,a.step.current=null,a.group.edit=null},a.remove=function(e){g.confirm(b("Are you sure you want to delete group?")).then(function(){d.groups.remove(e).then(function(){_.remove(a.groups._items,e),c.success(b("Group deleted."),3e3)})})}}function c(a,b,c){return{link:function(d,e,f){function g(a){a.data&&a.data._issues&&a.data._issues.name&&a.data._issues.name.unique?d._errorUniqueness=!0:d._error=!0,d.message=null}function h(){(d._errorUniqueness||d._error||d._errorLimits)&&(d._errorUniqueness=null,d._error=null,d._errorLimits=null)}var i={group:40};d.limits=i,d.$watch("step.current",function(a){"general"===a&&(d.edit(d.group.edit),d.message=null)}),d.edit=function(a){d.group.edit=_.create(a)},d.save=function(e){d.message=a("Saving...");var f=e._id?!1:!0;b.groups.save(d.group.edit,e).then(function(){if(f)d.edit(d.group.edit),d.groups._items.unshift(d.group.edit);else{var a=_.find(d.groups._items,{_id:d.group.edit._id});_.extend(a,d.group.edit)}c.wizard("usergroups").next()},g)},d.handleEdit=function(a){h(),null!=d.group.edit.name&&(d._errorLimits=d.group.edit.name.length>d.limits.group?!0:null)}}}}function d(a,b,c,d){return{link:function(e,f,g){e.$watch("step.current",function(a,b){"people"===a&&(e.search=null,e.groupMembers=[],e.users=[],e.message=null,e.group.edit&&e.group.edit._id?d.initialize().then(function(){e.groupMembers=d.groupMembers[e.group.edit._id]||[],
e.users=d.users._items}):c.wizard("usergroups").goTo(b))}),e.add=function(a){e.groupMembers.push(a)},e.remove=function(a){_.remove(e.groupMembers,a)},e.previous=function(){c.wizard("usergroups").previous()},e.save=function(){var f=_.map(e.groupMembers,function(a){return{user:a._id}});b.groups.save(e.group.edit,{members:f}).then(function(a){_.extend(e.group.edit,a),d.groupMembers[e.group.edit._id]=e.groupMembers;var b=_.find(d.groups._items,{_id:e.group.edit._id});_.extend(b,e.group.edit),c.wizard("usergroups").finish()},function(b){e.message=a("There was a problem, members not saved.")})}}}}var e=angular.module("superdesk.groups",["superdesk.users"]);return e.config(["superdeskProvider",function(b){b.activity("/settings/groups",{label:gettext("Groups"),controller:a,templateUrl:"scripts/superdesk-groups/views/settings.html",category:b.MENU_SETTINGS,priority:-800,beta:!0,privileges:{groups:1}})}]).config(["apiProvider",function(a){a.api("groups",{type:"http",backend:{rel:"groups"}})}]).factory("groups",["$q","api","storage","userList",function(a,b,c,d){var e={groups:null,users:null,groupLookup:{},userLookup:{},groupMembers:{},loading:null,fetchGroups:function(){var a=this;return b.groups.query({max_results:500}).then(function(b){a.groups=b,_.each(b._items,function(b){a.groupLookup[b._id]=b})})},fetchUsers:function(){var a=this;return d.get(null,1,500).then(function(b){a.users=b,_.each(b._items,function(b){a.userLookup[b._id]=b})})},generateGroupMembers:function(){var b=this;return _.each(this.groups._items,function(a){b.groupMembers[a._id]=[],_.each(a.members,function(c,d){var e=_.find(b.users._items,{_id:c.user});e&&b.groupMembers[a._id].push(e)})}),a.when()},fetchUserGroups:function(a){return b.users.getByUrl(a._links.self.href+"/groups")},getCurrentGroupId:function(){return c.getItem("groups:currentGroupId")||null},setCurrentGroupId:function(a){c.setItem("groups:currentGroupId",a)},fetchCurrentGroup:function(){return b.groups.getById(this.getCurrentGroupId())},setCurrentGroup:function(a){this.setCurrentGroupId(a?a._id:null)},getCurrentGroup:function(a){return this.groupLookup[this.getCurrentGroupId()]},initialize:function(){return this.loading||(this.loading=this.fetchGroups().then(angular.bind(this,this.fetchUsers)).then(angular.bind(this,this.generateGroupMembers))),this.loading}};return e}]).directive("sdGroupeditBasic",c).directive("sdGroupeditPeople",d).directive("sdGroupsConfig",function(){return{controller:b}}).directive("sdGroupsConfigModal",function(){return{require:"^sdGroupsConfig",templateUrl:"scripts/superdesk-groups/views/groups-config-modal.html",link:function(a,b,c,d){}}}),a.$inject=["$scope","groups"],b.$inject=["$scope","gettext","notify","api","groups","WizardHandler","modal"],c.$inject=["gettext","api","WizardHandler"],d.$inject=["gettext","api","WizardHandler","groups"],e}(),function(){"use strict";function a(a,b){var c=b.privileges;a.showSubscribers=Boolean(c.subscribers),a.showFilterConditions=Boolean(c.publish_filters)}function b(a,b){var c=function(b,c){return a[b].query(c)},d={fetchSubscribers:function(a){return a=a||{},c("subscribers",a)},fetchSubscribersByKeyword:function(a){return this.fetchSubscribers({where:JSON.stringify({$or:[{name:{$regex:a,$options:"-i"}}]})})},fetchSubscribersByIds:function(a){var b=[];return _.each(a,function(a){b.push({_id:a})}),this.fetchSubscribers({where:JSON.stringify({$or:b})})},fetchPublishErrors:function(){var a={io_type:"publish"};return c("io_errors",a)}};return d}function c(a){return{templateUrl:"scripts/superdesk-publish/views/destination.html",scope:{destination:"=",actions:"="},link:function(b){b.types=a}}}function d(a,b){function c(){var a=a||{};return a.max_results=200,b.consistency.query(a)}a.consistency_records=null,a.reload=function(){c().then(function(b){a.consistency_records=b._items,a.lastRefreshedAt=new Date})},a.reload()}function e(a,b,c,d,e,f){function g(){h().then(function(b){var c=b._items;_.forEach(c,function(a){angular.extend(a,{selected:!1})}),a.publish_queue=c,a.lastRefreshedAt=new Date,a.showResendBtn=!1,a.showCancelBtn=!1,a.maxPage=Math.ceil(b._meta.total/a.pageSize)})}function h(){var b=b||{};b.max_results=a.pageSize,b.page=a.page;var d=null;_.isEmpty(a.searchQuery)||(d={$or:[{headline:{$regex:a.searchQuery,$options:"-i"}},{unique_name:a.searchQuery}]});var e=[];null!=a.selectedFilterSubscriber&&e.push({subscriber_id:a.selectedFilterSubscriber._id}),null!=a.selectedFilterStatus&&e.push({state:a.selectedFilterStatus});var f=[];return _.each(e,function(a){f.push(a)}),null!==d&&f.push(d),_.isEmpty(f)||(b.where=JSON.stringify({$and:f})),c.publish_queue.query(b)}function i(b){var c=_.find(a.publish_queue,{_id:b.queue_id});if(c){var d=["error_message","completed_at","state"];angular.extend(c,_.pick(b,d)),a.$apply()}}function j(){var b=_.find(a.publish_queue,{_id:f.search()._id})||null;b?c.archive.getById(b.item_id).then(function(b){a.selected.preview=b}):a.selected.preview=null}a.subscribers=null,a.subscriberLookup={},a.publish_queue=[],a.selectedFilterSubscriber=null,a.multiSelectCount=0,a.selectedQueueItems=[],a.showResendBtn=!1,a.showCancelBtn=!1,a.queueSearch=!1,a.selected={},a.publish_queue_statuses=["pending","in-progress","success","error"],a.pageSize=25,a.page=1,a.$watch("page",a.reload);var k=[];k.push(b.fetchSubscribers().then(function(b){a.subscribers=b._items,_.each(b._items,function(b){a.subscriberLookup[b._id]=b})})),a.search=function(b){a.searchQuery=b,a.page=1,a.reload()},a.reload=function(){d.all(k).then(function(){g(),j()})},a.buildNewSchedule=function(a){var b=["item_id","item_version","publishing_action","formatted_item","headline","content_type","subscriber_id","unique_name","destination"],c=_.pick(a,b);return c},a.scheduleToSend=function(b){var d=[];angular.isDefined(b)?d.push(a.buildNewSchedule(b)):a.multiSelectCount>0&&_.forEach(a.selectedQueueItems,function(b){d.push(a.buildNewSchedule(b))}),c.publish_queue.save([],d).then(function(b){a.reload(),a.cancelSelection(!1)},function(a){angular.isDefined(a.data._issues)?angular.isDefined(a.data._issues["validator exception"])&&e.error(gettext("Error: "+a.data._issues["validator exception"])):e.error(gettext("Error: Failed to re-schedule"))})},a.filterSchedule=function(b,c){"subscriber"===c&&(a.selectedFilterSubscriber=b),g(),a.multiSelectCount=0,a.selectedQueueItems=[],a.page=1},a.filterStatus=function(b,c){"status"===c&&(a.selectedFilterStatus=b),g(),a.multiSelectCount=0,a.selectedQueueItems=[],a.page=1},a.selectQueuedItem=function(b){b.selected?a.selectedQueueItems=_.union(a.selectedQueueItems,[b]):a.selectedQueueItems=_.without(a.selectedQueueItems,b);var c=_.findIndex(a.selectedQueueItems,function(a){return"pending"===a.state||"in-progress"===a.state||"canceled"===a.state});-1===c?(a.showResendBtn=!0,a.showCancelBtn=!1):(c=_.findIndex(a.selectedQueueItems,function(a){return"success"===a.state||"in-progress"===a.state||"canceled"===a.state||"error"===a.state}),-1===c?(a.showResendBtn=!1,a.showCancelBtn=!0):(a.showResendBtn=!1,a.showCancelBtn=!1)),a.multiSelectCount=a.selectedQueueItems.length},a.cancelSelection=function(b){(angular.isUndefined(b)||_.isNull(b)||b)&&(a.selectedFilterSubscriber=null),a.selectedQueueItems=[],a.multiSelectCount=0,a.filterSchedule()},a.preview=function(a){f.search("_id",a?a._id:a)},a.$on("$routeUpdate",j),a.$on("publish_queue:update",function(a,b){i(b)}),a.reload()}function f(a,b,c,d,e,f,g,h,i){return{templateUrl:"scripts/superdesk-publish/views/subscribers.html",link:function(e){function j(){d.fetchSubscribers().then(function(a){a._items=i("sortByName")(a._items),e.subscribers=a})}function k(){return d.fetchPublishErrors().then(function(a){e.all_errors=a._items[0].all_errors})}e.subscriber=null,e.origSubscriber=null,e.subscribers=null,e.newDestination=null,e.contentFilters=null,e.geoRestrictions=null,e.subTypes=null,angular.isDefined(f.values.geographical_restrictions)?(e.geoRestrictions=f.values.geographical_restrictions,e.subTypes=f.values.subscriber_types):f.fetchMetadataValues().then(function(){e.geoRestrictions=f.values.geographical_restrictions,e.subTypes=f.values.subscriber_types});var l=function(){return c.query("content_filters").then(function(a){e.contentFilters=a._items})},m=function(){e.subscriber&&(e.subscriber.global_filters||(e.subscriber.global_filters={}),_.each(e.globalFilters,function(a){a._id in e.subscriber.global_filters||(e.subscriber.global_filters[a._id]=!0)}))},n=function(){return g.getGlobalContentFilters().then(function(a){e.globalFilters=a})};e.addNewDestination=function(){e.newDestination={}},e.cancelNewDestination=function(){e.newDestination=null},e.saveNewDestination=function(){e.destinations.push(e.newDestination),e.newDestination=null},e.deleteDestination=function(a){_.remove(e.destinations,a)},e.save=function(){e.subscriber.content_filter&&""===e.subscriber.content_filter.filter_id&&(e.subscriber.content_filter=null),e.subscriber.destinations=e.destinations,c.subscribers.save(e.origSubscriber,e.subscriber).then(function(){b.success(a("Subscriber saved.")),e.cancel()},function(c){angular.isDefined(c.data._issues)?angular.isDefined(c.data._issues["validator exception"])?b.error(a("Error: "+c.data._issues["validator exception"])):angular.isDefined(c.data._issues.name)&&angular.isDefined(c.data._issues.name.unique)?b.error(a("Error: Subscriber with Name "+e.subscriber.name+" already exists.")):angular.isDefined(c.data._issues.destinations)&&b.error(a("Error: Subscriber must have at least one destination.")):b.error(a("Error: Failed to save Subscriber."))}).then(j)},e.edit=function(c){var d=[];d.push(k()),d.push(l()),d.push(n()),h.all(d).then(function(){e.origSubscriber=c||{},e.subscriber=_.create(e.origSubscriber),e.subscriber.critical_errors=e.origSubscriber.critical_errors,e.subscriber.content_filter=e.origSubscriber.content_filter||{},e.subscriber.global_filters=e.origSubscriber.global_filters||{},e.subscriber.content_filter.filter_type=e.subscriber.content_filter.filter_type||"blocking",e.destinations=[],angular.isDefined(e.subscriber.destinations)&&!_.isNull(e.subscriber.destinations)&&e.subscriber.destinations.length>0&&(e.destinations=_.clone(e.subscriber.destinations,!0)),e.subscriberType=e.subscriber.subscriber_type||"",e.changeFormats(e.subscriberType),m()},function(){b.error(a("Subscriber could not be initialized!"))})},e.cancel=function(){e.origSubscriber=null,e.subscriber=null,e.newDestination=null},e.changeFormats=function(c){var d=_.result(_.find(e.subTypes,{value:c}),"formats");if(e.destinations.length>0&&""!==e.subscriberType&&e.subscriberType!==c){var f=_.result(_.find(e.subTypes,{value:e.subscriberType}),"formats");_.isEqual(f,d)||(b.error(a("Error: Please re-assign new format for each destination as the changed subscriber type has formats which are not supported by existing destination(s).")),_.each(e.destinations,function(a){a.format=null}))}e.subscriberType=e.subscriber.subscriber_type,e.formats=d},j()}}}var g=angular.module("superdesk.publish",["superdesk.users","superdesk.content_filters"]);return g.value("transmissionTypes",{ftp:{label:"FTP",templateUrl:"scripts/superdesk-publish/views/ftp-config.html"},email:{label:"Email",templateUrl:"scripts/superdesk-publish/views/email-config.html"},ODBC:{label:"ODBC",templateUrl:"scripts/superdesk-publish/views/odbc-config.html"},File:{label:"File",templateUrl:"scripts/superdesk-publish/views/file-config.html"},pull:{label:"Pull"},http_push:{label:"HTTP Push",templateUrl:"scripts/superdesk-publish/views/http-push-config.html"}}),a.$inject=["$scope","privileges"],b.$inject=["api","$q"],c.$inject=["transmissionTypes"],d.$inject=["$scope","api"],e.$inject=["$scope","adminPublishSettingsService","api","$q","notify","$location"],f.$inject=["gettext","notify","api","adminPublishSettingsService","modal","metadata","contentFilters","$q","$filter"],g.service("adminPublishSettingsService",b).directive("sdAdminPubSubscribers",f).directive("sdDestination",c).controller("publishQueueCtrl",e),g.config(["superdeskProvider",function(b){b.activity("/settings/publish",{label:gettext("Publish"),templateUrl:"scripts/superdesk-publish/views/settings.html",controller:a,category:b.MENU_SETTINGS,privileges:{subscribers:1},priority:2e3,beta:!0}).activity("/publish_queue",{label:gettext("Publish Queue"),templateUrl:"scripts/superdesk-publish/views/publish-queue.html",topTemplateUrl:"scripts/superdesk-dashboard/views/workspace-topnav.html",sideTemplateUrl:"scripts/superdesk-workspace/views/workspace-sidenav.html",controller:e,category:b.MENU_MAIN,adminTools:!1,privileges:{publish_queue:1}})}]).config(["apiProvider",function(a){a.api("subscribers",{type:"http",backend:{rel:"subscribers"}}),a.api("publish_queue",{type:"http",backend:{rel:"publish_queue"}}),a.api("consistency",{type:"http",backend:{rel:"consistency"}}),a.api("legal_publish_queue",{type:"http",backend:{rel:"legal_publish_queue"}}),a.api("io_errors",{type:"http",backend:{rel:"io_errors"}})}]),g}(),function(){"use strict";function a(a){}function b(a,b,c,d){var e=10,f="templates:recent";this.TEMPLATE_METADATA=["headline","slugline","abstract","dateline","byline","subject","genre","type","language","anpa_category","anpa_take_key","keywords","priority","urgency","pubstatus","description","body_html","body_text","place","located","creditline","ednote","language"],this.types=[{_id:"kill",label:c("Kill")},{_id:"create",label:c("Create")},{_id:"highlights",label:c("Highlights")}],this.fetchTemplates=function(b,c,d,f,g){b=b||1,c=c||e;var h={};void 0!==d&&(h.template_type=d),void 0!==f&&(h.template_desk=f),g&&(h.template_name={$regex:g,$options:"-i"});var i={max_results:c,page:b};return _.isEmpty(h)||(i.where=JSON.stringify({$and:[h]})),a.content_templates.query(i).then(function(a){return a})},this.fetchTemplatesByIds=function(c){if(!c.length)return b.when();var d={max_results:e,page:1,where:JSON.stringify({_id:{$in:c}})};return a.content_templates.query(d).then(function(a){return a&&a._items&&a._items.sort(function(a,b){return c.indexOf(a._id)-c.indexOf(b._id)}),a})},this.addRecentTemplate=function(a,b){return d.get().then(function(c){return c=c||{},c[f]=c[f]||{},c[f][a]=c[f][a]||[],_.remove(c[f][a],function(a){return a===b}),c[f][a].unshift(b),d.update(c)})},this.getRecentTemplateIds=function(a,b){return b=b||e,d.get().then(function(c){return c&&c[f]&&c[f][a]?_.take(c[f][a],b):[]})},this.getRecentTemplates=function(a,b){return b=b||e,this.getRecentTemplateIds(a,b).then(this.fetchTemplatesByIds)}}function c(a,b,c,d,e,f,g,h){return{templateUrl:"scripts/superdesk-templates/views/templates.html",link:function(i){function j(){d.fetchTemplates(1,50).then(function(a){a._items=h("sortByName")(a._items,"template_name"),i.content_templates=a})}i.weekdays=g,i.content_templates=null,i.origTemplate=null,i.template=null,i.desks=null,f.initialize().then(function(){i.desks=f.desks}),i.getTemplateDesk=function(a){return _.find(i.desks._items,{_id:a.template_desk})},i.getTemplateStage=function(a){return _.find(f.stages._items,{_id:a.template_stage})},i.getTime=function(a){if(a){var b=new Date;return b.setUTCHours(a.substr(0,2)),b.setUTCMinutes(a.substr(2,2)),b}},i.types=d.types,i.save=function(){delete i.template._datelinedate,delete i.template.hasCrops,c.content_templates.save(i.origTemplate,i.template).then(function(){b.success(a("Template saved.")),i.cancel()},function(c){angular.isDefined(c.data._issues)&&angular.isDefined(c.data._issues["validator exception"])?b.error(a("Error: "+c.data._issues["validator exception"])):b.error(a("Error: Failed to save template."))}).then(j)},i.edit=function(a){i.origTemplate=a||{type:"text"},i.template=_.create(i.origTemplate),i.template.schedule=i.origTemplate.schedule||{},i.item=i.template,i._editable=!0,i.updateStages(i.template.template_desk)},i.remove=function(d){e.confirm(a("Are you sure you want to delete the template?")).then(function(){return c.content_templates.remove(d)}).then(function(a){_.remove(i.templates,d)},function(c){angular.isDefined(c.data._message)?b.error(a("Error: "+c.data._message)):b.error(a("There is an error. Template cannot be deleted."))}).then(j)},i.cancel=function(){i.origTemplate=null,i.template=null,i.vars=null},i.updateStages=function(a){i.stages=a?f.deskStages[a]:null},j()}}}function d(a,b,c,d,e){function f(){d.fetchCurrentUserDesks().then(function(a){h.desks=a._items})}function g(){var d=angular.extend({template_name:h.name,template_type:h.type,template_desk:h.desk},_.pick(a,b.TEMPLATE_METADATA));return c.save("content_templates",d).then(function(a){return h._issues=null,a},function(a){return h._issues=a.data._issues,e.reject(h._issues)})}var h=this;this.type="create",this.name=a.slugline||null,this.desk=d.active.desk||null,this.types=b.types,this.save=g,f()}function e(a){function b(b){a.open({templateUrl:"scripts/superdesk-templates/views/create-template.html",controller:"CreateTemplateController",controllerAs:"template",resolve:{item:function(){return b}}})}this.create=b}function f(b,c){b.activity("/settings/templates",{label:gettext("Templates"),templateUrl:"scripts/superdesk-templates/views/settings.html",controller:a,category:b.MENU_SETTINGS,privileges:{content_templates:1},priority:2e3,beta:!0}),c.api("templates",{type:"http",backend:{rel:"templates"}}),c.api("content_templates",{type:"http",backend:{rel:"content_templates"}})}a.$inject=["$scope"],b.$inject=["api","$q","gettext","preferencesService"],c.$inject=["gettext","notify","api","templates","modal","desks","weekdays","$filter"],d.$inject=["item","templates","api","desks","$q"],e.$inject=["$modal"],angular.module("superdesk.templates",["superdesk.activity","superdesk.authoring","superdesk.preferences"]).service("templates",b).directive("sdTemplates",c).controller("CreateTemplateController",d).controller("TemplateMenu",e).config(f),f.$inject=["superdeskProvider","apiProvider"]}(),angular.module("superdesk.templates-cache",[]),angular.module("superdesk.templates-cache").run(["$templateCache",function(a){"use strict";a.put("scripts/superdesk-archive/archive-widget/configuration.html",'<div class="widget-config"><form class="form-horizontal"><fieldset><div class="field"><label translate>Widget label</label><div class="control"><input type="text" ng-model="configuration.label"></div></div><div class="field"><label translate>Search</label><div class="control" sd-saved-search-select><select class="input-medium" ng-model="configuration.savedSearch" ng-options="item.name for item in searches track by item._id"><option value="" translate>Choose saved search</option></select></div></div><div class="field"><label>{{\'Number of items\'|translate}}</label><div class="control"><select ng-model="configuration.maxItems" class="input-mini"><option value="5">5</option><option value="10">10</option><option value="25">25</option><option value="50">50</option></select></div></div></fieldset></form></div>'),a.put("scripts/superdesk-archive/archive-widget/item-list.html",'<div sd-item-list-widget data-options="options" data-item-list-options="itemListOptions" data-actions="actions"></div>'),a.put("scripts/superdesk-archive/archive-widget/item-preview.html",'<div><div class="content-container"><div class="composite-nav" ng-if="item.type === \'composite\'"><div class="top"><span><i class="filetype-icon-large-composite"></i> {{ \'Package preview\' | translate }}</span></div></div><p class="title" ng-if="item.headline">{{ item.headline }}</p><div class="state-label state-{{item.state}}" ng-class="{state_embargo: item.embargo}">{{item.state}}</div><div class="core-content"><p ng-if="item.is_spiked" class="alert alert-warning expires"><span translate>expires</span> <time sd-datetime data-date="item.expiry"></time></p><div ng-if="item.type == \'picture\'" class="picture-preview"><div><span translate>Original</span><div sd-item-rendition data-item="item" data-rendition="viewImage"></div></div><div sd-item-crops data-item="item"></div></div><div ng-if="item.type == \'audio\'"><audio controls sd-sources data-renditions="item.renditions"></audio></div><div ng-if="item.type == \'video\'"><video controls sd-sources data-renditions="item.renditions"></video></div><div class="text abstract" ng-show="item.abstract" sd-html-preview="item.abstract"></div><div class="text" ng-show="item.body_html" sd-html-preview="item.body_html"></div><div class="composite-preview" ng-if="item.type === \'composite\'"><div sd-package data-item="item"></div></div></div></div></div>'),a.put("scripts/superdesk-archive/archive-widget/widget-archive.html",'<div ng-controller="ArchiveController" ng-init="extras=widget" ng-include="\'scripts/superdesk-archive/archive-widget/item-list.html\'"></div>'),a.put("scripts/superdesk-archive/related-item-widget/relatedItem-list.html",'<div sd-related-item-list-widget data-options="options" data-item-list-options="itemListOptions" data-actions="actions"></div>'),a.put("scripts/superdesk-archive/related-item-widget/widget-relatedItem.html",'<div ng-controller="relatedItemController" ng-init="extras=widget" ng-include="\'scripts/superdesk-archive/related-item-widget/relatedItem-list.html\'"></div>'),a.put("scripts/superdesk-archive/views/fetched-desks.html",'<dl ng-if="desks.length"><dt translate>fetched in</dt><dd ng-repeat="desk in desks track by desk.desk._id"><a ng-if="$first" ng-click="selectFetched(desk)">{{desk.desk.name.substring(0,10)}}{{desk.desk.name.length>10 ? \'...\' : \'\'}} ({{desk.count}})</a></dd><dd ng-if="desks.length>1" class="dropdown dropup more-actions" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots"></i></button><div class="dropdown-menu"><ul><li ng-repeat="desk in desks track by desk.desk._id"><a ng-if="!$first" ng-click="selectFetched(desk)">{{desk.desk.name}} ({{desk.count}})</a></li></ul></div></dd></dl>'),a.put("scripts/superdesk-archive/views/inline-meta.html",'<div class="row"><input type="text" placeholder="{{placeholder}}" ng-model="item" ng-focus="showmeta = true" ng-blur="showmeta = false"> <button class="btn-mini" ng-focus="showmeta = true" ng-blur="showmeta = false" ng-show="item.length" ng-click="setmeta()"><i class="icon-expand-thin"></i></button></div>'),a.put("scripts/superdesk-archive/views/item-crops.html",'<ul class="cropItems"><li ng-repeat="crop in crop_sizes track by crop.name" ng-if="item.renditions[crop.name]"><span translate>{{crop.name}}<span><div class="rendition" sd-item-rendition data-item="item" data-ratio="ratio" data-rendition="{{:: crop.name}}"></div></span></span></li></ul>'),a.put("scripts/superdesk-archive/views/item-lock.html",'<div class="item-locked" ng-if="lock.user && !lock.lockbyme"><div class="locked-content"><span class="lock-sign"><i class="icon-lock red"></i></span> <span class="text"><em translate>Locked by</em> {{ lock.user | username }}</span> <button class="btn btn-light pull-left" ng-click="unlock()" ng-if="can_unlock()" translate>Unlock</button></div><time sd-datetime data-date="item.lock_time"></time></div><div class="item-locked" ng-if="lock.lockbyme"><div class="locked-content"><span class="lock-sign"><i class="icon-lock red"></i></span> <span class="text"><em translate>Locked by you in another browser</em></span> <button class="btn btn-light pull-left" ng-click="unlock()" translate>Unlock</button></div><time sd-datetime data-date="item.lock_time"></time></div>'),a.put("scripts/superdesk-archive/views/item-rendition.html",'<figure class="media" ng-if="item.renditions[rendition]"><small ng-if="item.renditions[rendition].href" title="{{ item.headline }}">{{item.headline | limitTo: 90}}</small> <span ng-if="item.renditions[rendition].href" sd-item-container data-item="item" class="container"></span></figure>'),a.put("scripts/superdesk-archive/views/list.html",'<div class="subnav"><div class="button-stack right-stack"><div class="navbtn dropdown strict" dropdown ng-if="type === \'archive\'"><button tooltip="{{ :: \'Create\' | translate }}" tooltip-placement="left" class="dropdown-toggle sd-create-btn" dropdown-toggle></button><ul class="dropdown-menu pull-right" sd-content-create></ul></div></div><div class="desk-stages"><div class="navbtn toggle-list" sd-desk-stages></div></div></div><div sd-media-view data-item="selected.view" data-items="items._items" ng-if="selected.view" data-close="closeLightbox()"></div><section sd-search-container class="archive main-section search-page-container" ng-class="{\'sidebar-open\': flags.facets}"><div sd-search-facets class="archive-sidebar" data-items="items" data-desk="selected.desk"></div><div sd-content-results class="archive-content"></div></section>'),a.put("scripts/superdesk-archive/views/media-box-grid.html",'<div class="archiving-progress" style="width:{{ _progress }}%" ng-if="_progress"></div><div ng-click="clickAction(item)"><div class="error-box" ng-show="item.archiveError"><p class="message" translate>There was an error archiving this item</p><div class="buttons"></div></div><div class="media multi" ng-show="item.type == \'text\' || item.type == \'composite\' || item.type == \'preformatted\' || item.type == \'picture\'" ng-mouseenter="hover=true" ng-mouseleave="hover=false"><div sd-item-rendition data-item="item" data-rendition="thumbnail"></div><span class="text"><small title="{{ item.headline }}">{{item.headline | limitTo: 90}}</small> <span sd-item-container data-item="item" class="container"></span></span><div class="selectbox" ng-if="item._type !== \'legal_archive\'" ng-show="hover || item.selected"><span sd-check ng-model="item.selected" ng-change="toggleSelected(item)"></span></div></div><div class="media" ng-show="item.type == \'audio\' || item.type == \'video\'"><i class="filetype-icon-large-{{ item.type}}"></i></div><div class="media-info"><h5><span ng-show="item.slugline">{{ item.slugline }}</span> <span ng-show="!item.slugline">{{ item.type | translate }}</span></h5><dl><dt class="source"><span translate>source:</span></dt><dd class="provider" sd-meta-ingest data-item="item"></dd><dt translate>updated</dt><dd><time datetime="{{ item.versioncreated }}" title="{{ item.versioncreated|date:\'medium\' }}">{{ item.versioncreated|reldate }}</time></dd><dt ng-show="item.is_spiked" translate>expires</dt><dd ng-if="item.is_spiked"><time title="{{ item.expiry | date:\'medium\' }}">{{ item.expiry | reldate }}</time></dd></dl><div ng-if="item.marked_for_not_publication" class="state-label not-for-publication" translate>Not for publication</div><div ng-if="item.archived" class="fetched-desk"><div sd-fetched-desks data-item="item"></div></div><div class="highlights-box" ng-if="item.highlights" sd-highlights-title data-item="item"></div></div><span class="type-icon"><i class="filetype-icon-{{item.type}}"></i></span> <span class="urgency-label"><i class="urgency-icon-{{item.priority}}"></i></span> <span class="priority-label"><span class="output-item-label label-{{item.urgency}}">{{ item.urgency }}</span></span> <span class="broadcast-status" tooltip="{{item.broadcast.status}}" ng-if="item.broadcast.status">!</span><div class="state-label state-{{item.state}}" ng-class="{state_embargo: item.embargo}">{{item.state}}</div><div class="item-right toolbox" sd-item-actions-menu data-item="item" data-active="focused"></div></div>'),a.put("scripts/superdesk-archive/views/media-box-list.html",'<div class="archiving-progress" style="width:{{ _progress }}%" ng-if="_progress"></div><div ng-click="clickAction(item)"><span class="state-border"></span><div class="list-field type-icon" ng-if="item._type === \'legal_archive\'"><i class="filetype-icon-{{ :: item.type}}" ng-hide="hover || item.selected"></i></div><div class="list-field type-icon" ng-if="item._type !== \'legal_archive\'" ng-mouseenter="hover = true" ng-mouseleave="hover = false"><i class="filetype-icon-{{ :: item.type}}" ng-hide="hover || item.selected"></i> <span sd-check ng-model="item.selected" ng-change="toggleSelected(item)" ng-show="hover || item.selected"></span></div><div class="list-field urgency"><i class="urgency-icon-{{item.priority}}"></i> <span ng-if="item.urgency" class="output-item-label label-{{item.urgency}}">{{ item.urgency }}</span></div><div class="item-info"><div class="line"><span class="word-count">{{ item.word_count }}</span> <span class="keyword" title="{{ item.slugline }}" ng-if="item.slugline">{{ item.slugline | limitTo: 40}}</span><div class="highlights-box" ng-if="item.highlights" sd-highlights-title data-item="item"></div><span class="item-heading" id="title" title="{{ item.headline }}">{{ item.headline | limitTo: 90 || item.type }}</span> <time sd-datetime data-date="item.versioncreated"></time></div><div class="line"><div class="takekey" ng-if="item.anpa_take_key">{{ item.anpa_take_key }}</div><span class="signal" ng-if="item.signal">{{ item.signal }}</span><div class="state-label state-{{item.state}}" ng-class="{state_embargo: item.embargo}" ng-hide="viewType !== undefined && viewType !== null && viewType !== \'deskOutput\'">{{item.state}}</div><span class="broadcast-status" tooltip="{{item.broadcast.status}}" ng-if="item.broadcast.status">!</span><div ng-if="item.marked_for_not_publication" class="state-label not-for-publication" translate>Not For Publication</div><div class="category" ng-if="item[\'anpa_category\'].name">{{ item[\'anpa_category\'].name }}</div><div class="provider" sd-meta-ingest data-item="item"></div><div class="expires" ng-if="item.is_spiked"><span translate>expires</span> {{ item.expiry | reldate }}</div><div ng-if="item.archived"><div sd-fetched-desks data-item="item"></div></div><span sd-item-container data-item="item" title="{{ item.container }}" class="container" ng-hide="viewType"></span></div></div></div><div class="item-right toolbox" sd-item-actions-menu data-item="item" data-active="focused"></div>'),a.put("scripts/superdesk-archive/views/media-box.html",'<div id="{{ :: item._id }}" class="media-box media-{{ :: item.type}}" ng-class="{selected: item._id === selected._id, archived: item.archived || item.created, locked: lock.isLocked}" ng-mouseenter="focused=true" ng-mouseleave="focused=false" ng-include="itemTemplate"></div>'),a.put("scripts/superdesk-archive/views/media-view.html",'<div class="modal lightbox-preview fade in"><!-- package items list --><div class="lightbox-composite" ng-show="packageItem" ng-class="{\'open\': compositeOpen}" ng-init="compositeOpen = true"><div class="toggle-composite" ng-click="compositeOpen = !compositeOpen"><i class="svg-icon-right inverse"></i></div><div class="header" ng-click="setSingleItem(packageItem)"><span ng-if="!nested()"><i class="filetype-icon-large-composite icon-white"></i></span> <span ng-if="nested()" ng-click="previousPackage(); $event.stopPropagation();"><i class="backlink white"></i></span><h5>{{ packageItem.headline }}</h5></div><div class="content"><ul ng-if="packageItem"><div sd-package data-item="packageItem" data-setitem="setPackageSingle(selected)"></div></ul></div></div><!-- preview pane --><section class="lightbox-left" ng-class="{\'composite\' : item.type === \'composite\', \'open\' : compositeOpen}"><div sd-single-item data-item="singleItem" data-setitem="setPackageSingle(selected)"></div><button class="navigation left" ng-click="prev()" ng-if="prevEnabled" title="{{ \'previous\' | translate }}"><i class="arrow-icon-large-left"></i></button> <button class="navigation right" ng-click="next()" ng-if="nextEnabled" title="{{ \'next\' | translate }}"><i class="arrow-icon-large-right"></i></button></section><!-- end of preview pane --><section class="lightbox-right"><header><h5 class="lightbox-title">{{ singleItem.headline }}</h5><button class="lightbox-close" ng-click="close()"><i class="icon-close-small"></i></button> <span class="lightbox-modified-info">{{ \'Created:\'|translate }} {{ singleItem.firstcreated|date:\'medium\' }}</span> <span class="lightbox-modified-info">{{ \'Modified:\'|translate }} {{ singleItem.versioncreated|date:\'medium\' }}</span> <span class="lightbox-media-type filetype-icon-{{singleItem.type}}"></span><div class="lightbox-actions"><button class="btn pull-left" ng-show><i class="icon-list-alt"></i> {{ \'Edit metadata\'|translate }}</button></div></header><div class="lightbox-media-data"><div class="lightbox-descritpion"></div><div sd-toggle-box data-title="{{ \'Details\' | translate }}" data-open="true"><div sd-media-metadata data-item="singleItem"></div></div></div></section></div>'),
a.put("scripts/superdesk-archive/views/metadata-view.html",'<div class="metadata-view"><div><dl><dt translate>Slugline</dt><dd>{{ item.slugline }}</dd></dl><dl><dt translate>Urgency</dt><dd>{{ item.urgency }}</dd></dl><dl><dt translate>Priority</dt><dd>{{ item.priority }}</dd></dl><dl><dt translate>Word Count</dt><dd>{{ item.word_count }}</dd></dl><dl ng-if="item.keywords && item.keywords.length > 0"><dt translate>Keywords</dt><dd>{{ item.keywords | mergeWords}}</dd></dl><dl ng-if="item.original_source"><dt translate>Original source</dt><dd>{{ item.original_source }}</dd></dl><dl><dt translate>Source</dt><dd sd-meta-ingest data-item="item"></dd></dl><dl><dt translate>Take key</dt><dd>{{ item.anpa_take_key }}</dd></dl><dl ng-if="item.signal"><dt translate>Signal</dt><dd>{{ item.signal }}</dd></dl><dl><dt translate>ANPA category</dt><dd ng-if="item[\'anpa_category\']">{{ item[\'anpa_category\'] | mergeWords:\'name\' }}</dd></dl><dl><dt translate>Subject</dt><dd ng-if="item.subject && item.subject.length > 0">{{ item.subject | mergeWords:\'name\'}}</dd></dl><dl ng-if="item.embargo"><dt translate>Embargo Timestamp</dt><dd sd-reldate-complex ng-model="item.embargo"></dd></dl><dl ng-if="item.ednote"><dt translate>Editorial Note</dt><dd>{{ item.ednote }}</dd></dl><dl ng-if="item.genre  && item.genre.length > 0"><dt translate>Genre</dt><dd>{{ item.genre | mergeWords:\'name\'}}</dd></dl><dl><dt translate>Dateline</dt><dd>{{ item.dateline.text }}</dd></dl><dl ng-if="item.place && item.place.length > 0"><dt translate>Place</dt><dd>{{ item.place | mergeWords:\'name\'}}</dd></dl><dl><dt translate>Byline</dt><dd>{{ item.byline }}</dd></dl><dl><dt translate>Sign-off</dt><dd>{{ item.sign_off }}</dd></dl></div><div><dl ng-if="item._current_version"><dt translate>Version</dt><dd>{{ item._current_version }}</dd></dl><dl ng-if="item.firstcreated"><dt translate>Created</dt><dd sd-reldate-complex ng-model="item.firstcreated"></dd></dl><dl ng-if="item.versioncreated"><dt translate>Last updated</dt><dd sd-reldate-complex ng-model="item.versioncreated"></dd></dl><dl ng-if="item.expiry"><dt translate>Expiry</dt><dd sd-reldate-complex ng-model="item.expiry"></dd></dl><dl ng-if="originalCreator"><dt translate>Original creator</dt><dd>{{ originalCreator }}</dd></dl><dl ng-if="versionCreator"><dt translate>Version creator</dt><dd>{{ versionCreator }}</dd></dl></div><div><!-- Story details --><dl ng-if="item.language"><dt translate>Language</dt><dd>{{ item.language }}</dd></dl><dl><dt translate>PubStatus</dt><dd ng-if="item.pubstatus">{{ item.pubstatus }}</dd></dl><dl ng-if="item.ingest_provider_sequence"><dt translate>Ingest provider sequence</dt><dd>{{ item.ingest_provider_sequence }}</dd></dl><!-- publish schedule data --><dl ng-if="item.publish_schedule"><dt translate>Publish Schedule</dt><dd sd-reldate-complex ng-model="item.publish_schedule"></dd></dl><dl ng-if="item.targeted_for"><dt translate>Targeted For</dt><dd>{{item.targeted_for | mergeTargets}}</dd></dl><!-- file specific data --><dl ng-if="item.FileMeta"><dt translate>Aperture</dt><dd>{{ item.FileMeta.Aperture }}</dd><dt translate>Exposure time</dt><dd>{{ item.FileMeta[\'Exposure time\'] }}</dd><dt translate>Focal length</dt><dd>{{ item.FileMeta[\'Focal length\'] }}</dd><dt translate>Iso</dt><dd>{{ item.FileMeta[\'ISO speed\'] }}</dd><dt translate>Flash</dt><dd>{{ item.FileMeta.Flash }}</dd></dl></div><div ng-if="item.copyrightholder || item.copyrightholder || item.usageterms"><!-- copyright details details --><dl><dt translate>Copyright holder</dt><dd ng-if="item.copyrightholder">{{ item.copyrightholder }}</dd></dl><dl><dt translate>Copyright notice</dt><dd ng-if="item.copyrightnotice">{{ item.copyrightnotice }}</dd></dl><dl><dt translate>Usageterms</dt><dd ng-if="item.usageterms">{{ item.usageterms }}</dd></dl></div><dl><dt translate>State</dt><dd><div class="state-label state-{{item.state}}" ng-class="{state_embargo: item.embargo}">{{item.state}}</div><div ng-if="item.marked_for_not_publication" class="state-label not-for-publication" translate>Not For Publication</div></dd></dl><dl ng-if="item.guid"><dt translate>GUID</dt><dd>{{ item.guid }}</dd></dl><dl ng-if="item.unique_name"><dt translate>Unique ID</dt><dd>{{ item.unique_name }}</dd></dl><dl><dt translate>Type</dt><dd>{{ item.type }}</dd></dl></div>'),a.put("scripts/superdesk-archive/views/preview.html",'<div><div class="content-container"><div class="composite-nav" ng-if="selected.preview.type === \'composite\'"><div class="top"><span><i class="filetype-icon-large-composite"></i> {{ selected.preview.slugline }}</span></div></div><div ng-hide="hideActions()" class="action-menu"><div sd-item-actions-menu data-item="selected.preview" data-active="selected.preview"></div></div><div id="locked" class="clearfix" sd-item-lock data-item="selected.preview"></div><div class="rewrite" ng-if="selected.preview.rewrite_id">{{ :: \'This story has been rewritten by: \' | translate }}<a ng-click="previewRewriteStory()" class="open-item"><i class="icon-external"></i></a></div><p class="title preview-headline" ng-if="selected.preview.headline" ng-class="{condensed: !lock}">{{ selected.preview.headline }}</p><p class="nav-space" ng-if="!selected.preview.headline && !lock"></p><div class="state-label state-{{selected.preview.state}}" ng-class="{state_embargo: item.embargo}">{{selected.preview.state}}</div><div ng-if="selected.preview.highlights" sd-highlights-title data-item="selected.preview"></div><div class="core-content"><p ng-if="selected.preview.is_spiked" class="alert alert-warning expires"><span translate>expires</span> <time sd-datetime data-date="selected.preview.expiry"></time></p><!-- item rendition --><div ng-if="selected.preview.type == \'picture\'" class="picture-preview"><div><span translate>Original</span><div sd-item-rendition data-item="selected.preview" data-rendition="viewImage"></div></div><div sd-item-crops data-item="selected.preview"></div></div><div ng-if="selected.preview.type == \'audio\'"><audio controls sd-sources data-renditions="selected.preview.renditions"></audio></div><div ng-if="selected.preview.type == \'video\'"><video controls sd-sources data-renditions="selected.preview.renditions"></video></div><div class="text abstract" ng-show="selected.preview.abstract" sd-html-preview="selected.preview.abstract"></div><div class="text body-text" ng-show="selected.preview.type !== \'preformatted\' && selected.preview.body_html" sd-html-preview="selected.preview.body_html"></div><div class="text body-text" ng-show="selected.preview.type === \'preformatted\' && selected.preview.body_html" sd-html-preview="\'<pre class=wrap>\' + selected.preview.body_html + \'</pre>\'"></div><div class="composite-preview" ng-if="selected.preview.type === \'composite\'"><div sd-package data-item="selected.preview" data-setitem="openSingleItem(selected)"></div></div></div></div></div>'),a.put("scripts/superdesk-archive/views/provider-menu.html",'<button class="dropdown-toggle" dropdown-toggle>{{ selected || \'Show all\' | translate}} <span class="caret"></span></button><ul class="dropdown-menu pull-right"><li ng-repeat="provider in items._facets.provider.terms"><a href="" ng-click="setProvider(provider.term)">{{ provider.term }} <i>({{ provider.count }})</i></a></li><li class="divider" ng-show="selected"></li><li ng-show="selected"><a href="" ng-click="setProvider(null)" translate>Show All</a></li></ul>'),a.put("scripts/superdesk-archive/views/related-view.html",'<div class="related-item-view"><ul><li ng-repeat="relatedItem in relatedItems._items"><div class="related-item" ng-click="open(relatedItem)"><i class="type-icon filetype-icon-{{relatedItem.type}}"></i> <span class="keyword" ng-if="relatedItem.slugline">{{ relatedItem.slugline }}</span> <span sd-item-container data-item="relatedItem" class="container"></span> <span class="state-label state-{{relatedItem.state}}">{{ relatedItem.state }}</span><div class="item"><span ng-href="" title="{{ relatedItem.headline }}" class="headline">{{ relatedItem.headline || relatedItem.description}}</span></div></div></li></ul></div>'),a.put("scripts/superdesk-archive/views/single-item-preview.html",'<div class="condensed-preview"><!-- audio preview --><div class="full-preview" ng-if="item.type == \'audio\'"><audio controls sd-sources data-renditions="item.renditions"></audio></div><!-- picture preview --><div class="full-preview" ng-if="item.type == \'picture\'" sd-ratio-calc><div class="rendition" sd-item-rendition data-item="item" data-ratio="ratio" data-rendition="baseImage"></div></div><!-- text preview --><div class="lightbox-paper" ng-show="item.type == \'text\'"><div class="lightbox-text"><div class="lightbox-title">{{ item.headline }}</div><div class="lightbox-fulltext"><small ng-show="item.slugline">{{ item.slugline || item.headline }}</small><div ng-show="item.body_html" class="lightbox-fullcontent" sd-html-preview="item.body_html"></div></div></div></div><!-- composite preview --><div class="full-preview composite" ng-show="item.type == \'composite\'"><div sd-package data-item="item" data-mode="flat" data-setitem="setitem({selected: selected})"></div></div><div class="lightbox-caption">{{ item.headline }}</div></div>'),a.put("scripts/superdesk-archive/views/upload.html",'<div class="modal-header"><h3 class="pull-left">{{ activity.label|translate }}</h3><button type="button" class="close" ng-click="cancel()" ng-hide="saving"><i class="icon-close-small"></i></button></div><div class="modal-body" ng-init="dragshow = false"><div class="drag-area" ng-show="!items.length || dragshow" ng-file-drop="addFiles($files)" ng-class="{compact: dragshow && items.length}"><div class="title" translate>Drag Your Files Here</div><div class="upload-manual"><div class="or-label" translate>or</div><label class="btn" for="images-input">{{ \'Select them from folder\' | translate }}</label><input id="images-input" type="file" ng-file-select="addFiles($files)" multiple class="hide"></div></div><div class="upload-error" ng-show="failed"><span translate>There are failed uploads.</span><span class="action" ng-click="tryAgain()" translate>Try again</span></div><div class="upload-edit" ng-show="items.length" ng-class="{compact: dragshow, error: failed}"><div class="upload-error" ng-if="errorMessage"><span class="action" translate>Error: {{ :: errorMessage}}</span></div><ul class="upload-thumbs"><li ng-repeat="item in items"><div class="thumb" sd-image-preview="item.url" data-file="item.file"><div class="holder"><i class="filetype-icon-large-{{item.cssType}}" ng-hide="item.url && item.cssType === \'image\'"></i> <img ng-src="{{ item.url }}" ng-if="item.cssType === \'image\'"><div class="failed" ng-if="item.model === false"></div></div><span class="remove" ng-click="cancelItem(item, $index)"><i class="icon-close-small"></i></span></div><div class="info"><div class="upload-progress" ng-show="item.progress"><div class="bar" style="width:{{ item.progress }}%"></div></div><div class="row"><input type="text" placeholder="Add a headline *" ng-model="item.meta.headline"></div><div class="other-info"><div class="row"><input type="text" placeholder="Add a description *" ng-model="item.meta.description"></div><div class="row"><input type="text" placeholder="Add a slugline *" ng-model="item.meta.slugline"></div><div class="row"><input type="text" placeholder="Add author / photographer" ng-model="item.meta.byline"></div></div></div></li></ul></div><div class="optional-drag-holder" ng-class="{open: dragshow}" ng-show="items.length"><div class="optional-drag" ng-click="dragshow = !dragshow"><i class="icon-chevron-up-thin" ng-show="!dragshow"></i> <i class="icon-chevron-down-thin" ng-show="dragshow"></i> <span class="add-more-files" translate>Add more files</span></div></div></div><div class="modal-footer"><span class="pull-left">* fields are required</span> <button class="btn btn-primary pull-right" ng-click="save()" ng-disabled="saving || !enableSave">Save</button> <button class="btn btn-default pull-right" ng-click="cancel()" ng-disabled="saving || !enableSave" translate>Cancel</button></div>'),a.put("scripts/superdesk-authoring/comments/views/comments-widget.html",'<div class="notification-list-box" ng-controller="CommentsWidgetCtrl"><ul class="notification-list white"><li ng-repeat="comment in comments" ng-class="{active: comment._id === active}"><figure class="avatar"><img sd-user-avatar data-src="comment.user.picture_url" data-initials="comment.user.display_name"></figure><div class="content"><div class="text" sd-comment-text data-comment="comment" data-name="{{comment.user.display_name || comment.user.username}}" data-text="{{comment.text}}"></div><span class="date" sd-reldate ng-model="comment._created"></span></div></li><li class="alert alert-info" ng-show="comments.length === 0" translate>No comments so far. Be the first..</li><li class="alert alert-info" ng-show="comments === null" translate>Loading..</li></ul><div class="add-comment"><form name="commentsForm"><div sd-user-mentio></div><textarea class="new-comment" sd-auto-height ng-model="text" mentio id="mentio-users" ng-keyup="saveOnEnter($event)"></textarea><div class="actions"><div class="pull-left post"><input type="checkbox" ng-model="saveEnterFlag"> <span translate>Post on \'Enter\'</span></div><button class="btn btn-info pull-right" ng-click="save()" ng-show="!saveEnterFlag" translate>Post</button> <button class="btn pull-right" ng-click="cancel()" ng-show="!saveEnterFlag" translate>Cancel</button></div></form></div></div>'),a.put("scripts/superdesk-authoring/editor/views/find-replace.html",'<div><form><fieldset sd-find-replace><div class="form-group field"><label for="find-replace-what" translate>Find</label><input type="text" class="form-control" id="find-replace-what" ng-model="from" ng-model-options="{debounce: 500}"></div><div class="form-group field"><label for="find-replace-with" translate>Replace with</label><input type="text" class="form-control" id="find-replace-with" ng-model="to"></div><div class="btn-group pull-right" role="group"><button class="btn btn-default" ng-click="prev()" ng-disabled="!from">&laquo;</button> <button class="btn btn-default" ng-click="next()" ng-disabled="!from">&raquo;</button></div><div class="btn-group pull-left" role="group"><button class="btn btn-default" ng-click="replace()" ng-disabled="!from" translate>Replace</button> <button class="btn btn-default" ng-click="replaceAll()" ng-disabled="!from" translate>Replace All</button></div><div class="field clearfix"></div><button class="btn btn-default" ng-click="closeWidget(widget)" translate>Done</button></fieldset></form></div>'),a.put("scripts/superdesk-authoring/macros/views/macros-widget.html",'<div class="widget" ng-controller="Macros"><h3>Macros</h3><ul class="link-list"><li ng-repeat="macro in macros"><button class="btn" ng-click="call(macro)">{{ macro.label }}</button></li></ul></div>'),a.put("scripts/superdesk-authoring/metadata/views/metadata-dropdown.html",'<div class="dropdown" ng-class="{\'dropright\': icon, \'dropdown-noarrow\': !icon}" dropdown sd-dropdown-position><button class="dropdown-toggle line-input" dropdown-toggle ng-if="(field !== \'place\' && field !== \'genre\') && !icon">{{ item[field].name || item[field] ? item[field].name || item[field] : "none" | translate }} <b class="caret"></b></button> <button class="dropdown-toggle line-input" dropdown-toggle ng-if="(field === \'place\' || field === \'genre\') && !icon">{{ item[field].length > 0 ? item[field][0].name : "none" | translate }} <b class="caret"></b></button> <button class="dropdown-toggle line-input" dropdown-toggle ng-if="icon"><i class="{{icon}}-{{item[field]}}"><span ng-if="field === \'urgency\'">{{item[field] ? item[field] : 0}}</span></i> <b class="caret"></b></button><ul class="dropdown-menu"><li ng-if="label"><div class="menu-label">{{label}}</div></li><li ng-click="select()" translate><button ng-disabled="disabled">None</button></li><li ng-repeat="item in list" ng-click="select(item)" ng-if="field !== \'place\'"><button ng-disabled="disabled"><i ng-if="icon" class="{{icon}}-{{item.name}}"><span ng-if="field === \'urgency\'">{{item.name}}</span></i> {{::item.name}}</button></li><li class="place-dropdown" ng-repeat="(region, placelist) in places" ng-if="field === \'place\'">{{ ::region }} <button ng-repeat="item in placelist" ng-click="select(item)">{{ ::item.name }}</button></li></ul></div>'),a.put("scripts/superdesk-authoring/metadata/views/metadata-locators.html",'<div class="term-editor data visible locators" ng-show="!header"><div sd-typeahead items="locators" term="selectedTerm" search="searchLocator(term)" select="selectLocator(item)" data-blur="selectLocator(item)" data-disabled="disabled"><ul><li typeahead-item="t" ng-repeat="t in locators ">{{ :: t.city }}<div class="country_state_info">{{:: t.state}}, {{:: t.country}}</div></li></ul></div></div>'),a.put("scripts/superdesk-authoring/metadata/views/metadata-terms.html",'<div class="term-editor data visible" ng-show="!header"><div sd-typeahead items="terms" term="selectedTerm" search="searchTerms(term)" select="selectTerm(item)" data-disabled="disabled"><ul><li typeahead-item="t" ng-repeat="t in terms ">{{ :: t.name }}</li></ul></div></div><div class="dropdown dropright dropdown-bigger dropdown-terms" dropdown sd-dropdown-position><button class="dropdown-toggle" dropdown-toggle ng-disabled="disabled" ng-if="header && !disabled"><i class="icon-white icon-plus-large"></i></button><ul class="dropdown-menu nested-menu pull-right"><li ng-show="!activeTerm && header"><ul sd-typeahead items="terms" term="selectedTerm" search="searchTerms(term)" select="selectTerm(item)" always-visible="header" data-disabled="disabled"><li typeahead-item="t" ng-repeat="t in terms" ng-if="!activeTree.length || activeList"><button>{{ :: t.name }}</button></li></ul></li><li class="levelup" ng-if="activeTerm"><i class="backlink" ng-click="openParent(activeTerm, $event)"></i> <button ng-click="selectTerm(activeTerm)"><b class="category">{{ activeTerm.name }}</b> <b class="category-hover">{{ :: "Choose entire category" | translate }}</b></button></li><li class="main-list" ng-if="activeTree.length && !activeList && header" ng-class="{active: activeTerm}"><ul sd-shadow><li ng-repeat="term in activeTree track by term.qcode"><button ng-if="tree[term.qcode]" class="nested-toggle" ng-click="openTree(term, $event)">{{ :: term.name }} <i class="icon-chevron-right-thin submenu-icon"></i></button> <button ng-if="!tree[term.qcode]" ng-click="selectTerm(term)">{{ :: term.name }}</button></li></ul></li></ul></div><div class="terms-list" ng-if="item[field].length"><ul><li ng-if="!disabled" class="pull-left" ng-repeat="t in item[field]" ng-click="removeTerm(t)">{{ :: t.name}}<i class="icon-close-small"></i></li><li ng-if="disabled" class="pull-left disabled" ng-repeat="t in item[field]">{{ :: t.name}}</li></ul></div>'),a.put("scripts/superdesk-authoring/metadata/views/metadata-widget.html",'<ul class="nav nav-tabs"><li ng-class="{active: tab === \'metadata\' || !tab}"><button ng-click="tab = \'metadata\'" translate>Metadata</button></li><li ng-class="{active: tab === \'task-detail\'}"><button ng-click="tab = \'task-detail\'" translate>Task Details</button></li></ul><div class="content" ng-controller="MetadataWidgetCtrl"><div ng-if="tab === \'metadata\' || !tab"><ul class="basic-list"><li ng-if="_isInProductionStates"><label ng-if="_editable" translate>Not For Publication</label><span ng-if="_editable"><span ng-if="_editable" sd-switch ng-model="item.marked_for_not_publication"></span></span><label ng-if="!_editable" translate><span class="state-label not-for-publication" ng-show="item.marked_for_not_publication" translate>Not For Publication</span> <span class="state-label for-publication" ng-show="!item.marked_for_not_publication" translate>For Publication</span></label></li><li><label translate>Usageterms</label><div class="data"><input class="line-input" type="text" ng-model="item.usageterms" ng-disabled="!_editable" ng-change="autosave(item)"></div></li><li class="terms-box"><label translate>Keywords</label><div sd-meta-words-list data-item="item" data-field="keywords" data-change="autosave(item)" data-header="_editable" data-list="metadata.keywords" data-disabled="!_editable"></div></li><li><label translate>Language</label><div class="data"><input class="line-input" type="text" ng-model="item.language" ng-disabled="!_editable" ng-change="autosave(item)"></div></li><li ng-if="item.pubstatus"><label translate>Pubstatus</label><div class="data">{{item.pubstatus}}</div></li><li ng-if="item.original_source"><label translate>Original source</label><div class="data">{{ item.original_source}}</div></li><li ng-if="item.copyrightholder"><label translate>Copyright</label><div class="data">{{item.copyrightholder}}</div></li><li ng-if="item.creditline"><label translate>Credit</label><div class="data">{{item.creditline}}</div></li><li><label translate>State</label><div class="data"><div class="state-label state-{{item.state}}" ng-class="{state_embargo: item.embargo}">{{item.state}}</div></div></li><li class="terms-box"><label translate>Targeted For</label><div ng-if="metadata.targeted_for"><span sd-check ng-model="item.negation" tooltip="Adds Negation" tooltip-placement="right" ng-disabled="!_editable"></span><select id="targeted_for_list" ng-model="item.targeted_for_value" ng-disabled="!_editable"><option value=""></option><option value="{{g.name}}" ng-repeat="g in metadata.targeted_for track by g.name">{{:: g.name}}</option></select><button class="btn btn-small btn-primary" type="button" ng-click="addTargeted()" ng-disabled="disableAddingTargetedFor()" translate>Add</button><div class="terms" ng-if="item[\'targeted_for\'].length"><ul><li ng-repeat="t in item[\'targeted_for\']" ng-click="removeTargeted(t)">{{ :: t[\'allow\'] == false ? \'Not \' + t.name : t.name}}<i class="icon-close-small"></i></li></ul></div></div></li><li ng-if="item.ingest_provider_sequence"><label translate>Provider sequence</label><div class="data">{{item.ingest_provider_sequence}}</div></li><li ng-if="item.expiry"><label translate>Expiry</label><div class="data" sd-reldate-complex ng-model="item.expiry"></div></li><li class="auto"><label translate>GUID</label><div class="data" id="guid">{{item.guid}}</div></li><li><label translate>Unique name</label><div class="data"><input class="line-input" type="text" ng-model="item.unique_name" ng-change="autosave(item)" ng-disabled="!_editable || !unique_name_editable"></div></li></ul></div><div ng-if="tab === \'task-detail\'"><ul class="basic-list task-info"><li ng-if="item.slugline" class="auto"><label translate>Title</label><div class="data">{{item.slugline}}</div></li><li ng-if="item.description" class="auto"><label translate>Description</label><div>{{item.description}}</div></li><li ng-if="item.task.status"><label translate>Status</label><div class="data">{{item.task.status}}</div></li><li ng-if="item.task.due_date" class="wider"><label translate>Due date</label><div class="data" sd-reldate-complex ng-model="item.task.due_date"></div></li><li ng-if="item.task.desk"><label translate>Desk</label><div class="data">{{deskLookup[item.task.desk].name || item.task.desk}}</div></li><li ng-if="item.task.user"><label translate>Assignee</label><div class="data">{{userLookup[item.task.user].display_name || item.task.user}}</div></li></ul></div></div>'),a.put("scripts/superdesk-authoring/metadata/views/metadata-words-list.html",'<div class="term-editor data visible" ng-show="header"><div sd-typeahead items="words" term="selectedTerm" search="search(term)" select="select(item)" data-disabled="disabled"><ul><li typeahead-item="t" ng-repeat="t in words">{{ :: t.name }}</li></ul></div></div><div class="terms" ng-if="item[field].length"><ul><li ng-if="!disabled" ng-repeat="t in item[field] track by t" ng-click="removeTerm(t)">{{ t }}<i class="icon-close-small"></i></li><li ng-if="disabled" ng-repeat="t in item[field] track by t">{{ t }}</li></ul></div>'),a.put("scripts/superdesk-authoring/multiedit/views/multiedit.html",'<div class="subnav"><h3 class="page-nav-title" translate>Multiedit</h3><button class="close-multiedit" ng-click="closeMulti()"><i class="icon-close-small"></i></button></div><div class="multiedit-screen main-section"><div class="boards-list"><div ng-repeat="board in boards" class="board" style="width:{{ 100 / boards.length }}%"><div class="navbtn dropdown" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="icon-collapse"></i></button><div class="dropdown-menu"><ul class="multiedit-menu" sd-multiedit-inner-dropdown data-board="{{$index}}"></ul><ul ng-if="boards.length > minBoards"><li class="divider"></li><li><button ng-click="closeBoard($index)"><i class="icon-close-small"></i> {{ \'Remove panel\' | translate }}</button></li></ul></div></div><div sd-multiedit-article data-article="board.article" data-focus="$first" class="board-article" ng-if="board.article"></div></div></div><div class="boards-create" ng-if="boards.length > 0" sd-multiedit-float-menu><i class="icon-plus"></i><div class="navbtn dropdown multiedit-float"><ul class="dropdown-menu multiedit-menu" id="multiedit-float" sd-multiedit-inner-dropdown data-board="{{boards.length}}"></ul></div></div></div>'),a.put("scripts/superdesk-authoring/multiedit/views/sd-multiedit-article.html",'<article class="main-article" tabindex="0"><form name="articleEdit"><div class="editbar clearfix"><button class="btn btn-info pull-right" type="button" ng-click="save(item, articleEdit)" ng-disabled="articleEdit.$pristine && !item._autosave" translate>Save</button> <button class="btn btn-light pull-right" type="button" ng-click="remove(item)" translate>Remove Item</button></div><fieldset sd-article-edit></fieldset></form></article>'),a.put("scripts/superdesk-authoring/multiedit/views/sd-multiedit-dropdown.html",'<div class="multiedit-menu"><ul><li ng-repeat="item in items"><button ng-click="toggle(item._id); $event.stopPropagation();" ng-class="{disabled: item._id === current}"><span ng-show="item.headline">{{ item.headline }}</span> <span ng-show="!item.headline">{{ :: \'Untitled\' | translate }}</span> <i class="icon-ok" ng-if="selected(item._id)"></i></button></li><li ng-if="items.length === 0"><button translate>NO SUGGESTIONS.</button></li></ul></div><div class="fieldset"><button class="btn btn-info btn-medium" ng-click="open(); $event.stopPropagation();" translate>Ok</button> <button class="btn btn-medium" translate>Cancel</button></div>'),a.put("scripts/superdesk-authoring/multiedit/views/sd-multiedit-inner-dropdown.html",'<li ng-repeat="item in items" ng-if="items.length"><button ng-click="open(item._id);"><span ng-show="item.headline">{{ item.headline }}</span> <span ng-show="!item.headline">{{ :: \'Untitled\' | translate }}</span></button></li><li ng-if="!items.length" class="msg" translate>No items to add!</li>'),a.put("scripts/superdesk-authoring/packages/views/packages-widget.html",'<div ng-controller="PackagesWidgetCtrl"><div class="packages-content"><ul><li ng-repeat="pitem in contentItems" ng-if="pitem._id !== item._id"><div class="package-preview"><i class="filetype-icon-composite"></i><div class="title" ng-show="pitem.headline || pitem.slugline"><a ng-click="openPackage(pitem)" title="{{ pitem.headline || pitem.slugline}}"><div ng-show="pitem.headline || pitem.slugline">{{ pitem.headline || pitem.slugline | uppercase}}</div><div ng-hide="pitem.headline || pitem.slugline" translate>Blank headline received</div></a></div></div></li></ul></div></div>'),a.put("scripts/superdesk-authoring/versioning/history/views/history.html",'<div class="article-versions" ng-controller="HistoryWidgetCtrl"><ul class="history-list"><li class="item" ng-class="{selected: selected === version}" ng-repeat="version in versions track by version._current_version"><div ng-if="version.operation == \'create\'" ng-click="openVersion(version)">{{ :: version.typeName }} <b>{{ :: version.unique_id }}</b> <span ng-if="version.stage">({{version.desk}}/{{version.stage}})</span> {{ :: \'Created by\' | translate }} {{ version.creator }} <em>on <time sd-absdate ng-model="version.versioncreated"></time></em></div><div ng-if="version.operation == \'duplicate\'" ng-click="openVersion(version)">{{ :: \'Copied to\' | translate }} <b>{{ :: version.unique_id }}</b> <span ng-if="version.stage">({{version.desk}}/{{version.stage}})</span> {{ :: \'by\' | translate }} {{ version.creator }} <em>on <time sd-absdate ng-model="version.versioncreated"></time></em></div><div ng-if="version.operation == \'update\'" ng-click="openVersion(version)">{{ :: \'Updated by\' | translate }} {{ version.creator }} <em>on <time sd-absdate ng-model="version.versioncreated"></time></em></div><div ng-if="version.operation == \'restore\'" ng-click="openVersion(version)">{{ :: \'Restored by\' | translate }} {{ version.creator }} <em>on <time sd-absdate ng-model="version.versioncreated"></time></em></div><div ng-if="version.operation == \'send\' || version.operation === \'move\'" ng-click="openVersion(version)">{{ :: \'Moved to\' | translate }} {{ version.desk }}/{{ version.stage }} by {{ version.creator }} <em>on <time sd-absdate ng-model="version.versioncreated"></time></em></div><div ng-if="version.operation == \'spike\'" ng-click="openVersion(version)">{{ :: \'Spiked from\' | translate }} {{ version.desk }}/{{ version.stage }} by {{ version.creator }} <em>on <time sd-absdate ng-model="version.versioncreated"></time></em></div><div ng-if="version.operation == \'unspike\'" ng-click="openVersion(version)">{{ :: \'Unspiked to\' | translate }} {{ version.desk }}/{{ version.stage }} by {{ version.creator }} <em>on <time sd-absdate ng-model="version.versioncreated"></time></em></div><div ng-if="version.operation == \'fetch\'" ng-click="openVersion(version)">{{ :: \'Fetched as\' | translate }} <b>{{ :: version.unique_id }}</b> to {{ version.desk }}/{{ version.stage }} {{ :: \'by\' | translate }} {{ version.creator }} <em>on <time sd-absdate ng-model="version.versioncreated"></time></em></div><div ng-if="version.operation == \'publish\'" ng-click="openVersion(version)">{{ :: \'Published by\' | translate }} {{ version.creator }} <em>on <time sd-absdate ng-model="version.versioncreated"></time></em><div sd-transmission-details data-item="version" class="queued"></div></div><div ng-if="version.operation == \'correct\'" ng-click="openVersion(version)">{{ :: \'Correction issued by\' | translate }} {{ version.creator }} <em>on <time sd-absdate ng-model="version.versioncreated"></time></em><div sd-transmission-details data-item="version" class="queued"></div></div><div ng-if="version.operation == \'kill\'" ng-click="openVersion(version)">{{ :: \'Killed by\' | translate }} {{ version.creator }} <em>on <time sd-absdate ng-model="version.versioncreated"></time></em><div sd-transmission-details data-item="version" class="queued"></div></div></li></ul></div>'),a.put("scripts/superdesk-authoring/versioning/history/views/publish_queue.html",'<div><a ng-href="" ng-if="!show_transmission_details" ng-click="showOrHideTransmissionDetails()"><i class="icon-plus-small true"></i> {{ :: \'Show sent/queued items\' | translate }}</a> <a ng-href="" ng-if="show_transmission_details" ng-click="showOrHideTransmissionDetails()"><i class="icon-minus-small true"></i> {{ :: \'Hide sent/queued items\' | translate }}</a><ul ng-if="show_transmission_details"><li ng-repeat="queuedItem in queuedItems track by queuedItem._id" ng-click="showFormattedItem(queuedItem)"><div ng-if="queuedItem.state !== \'error\'">{{ :: \'Sent/Queued as\' | translate }} <b>{{ queuedItem.unique_name }}</b> {{ :: \'on\' | translate }} {{ queuedItem.destination.name }} {{ :: \'at\' | translate }} <em><time sd-absdate ng-model="queuedItem.completed_at"></time></em></div><div ng-if="queuedItem.state === \'error\'">{{ :: \'Error sending as\' | translate }} <b>{{ queuedItem.unique_name }}</b> {{ :: \'on\' | translate }} {{ queuedItem.destination.name }} {{ :: \'at\' | translate }} <em><time sd-absdate ng-model="queuedItem.completed_at"></time></em></div></li></ul><div sd-modal data-model="transmitted_item" class="subscriber-modal modal-big moz-scroll-fix"><div class="modal-header"><a href="" class="close" ng-click="hideFormattedItem()"><i class="icon-close-small"></i></a><h3 translate>Item sent to Subscriber</h3></div><div class="modal-body">{{transmitted_item }}</div></div></div>'),
a.put("scripts/superdesk-authoring/versioning/versions/views/versions.html",'<div class="article-versions" ng-controller="VersioningWidgetCtrl"><ul class="versions-list card-list"><li class="item draft" ng-class="{selected: selected === item._autosave}" ng-if="item._autosave" ng-click="openAutosave()"><div class="header"><time title="{{ item._autosave._updated | date:\'medium\' }}">{{ item._autosave._updated | reldate }}</time></div><h6 ng-class="{\'no-title\': !item._autosave.headline}">{{ :: item._autosave.headline || (\'Untitled\' | translate) }}</h6><div class="footer"><em translate>autosave</em></div></li><li class="item" ng-class="{selected: selected === version}" ng-repeat="version in versions" ng-click="openVersion(version)"><div class="header"><time title="{{ :: version.versioncreated | date:\'medium\' }}">{{ version.versioncreated|reldate }}</time> <span class="user">{{ :: \'by\' | translate }} {{ version.creator }}</span></div><h6 ng-class="{\'no-title\': !version.headline }">{{ :: version.headline || (\'Untitled\' | translate) }}</h6><div class="desk-details"><span ng-show="version.desk">{{ :: \'desk:\' | translate }} {{version.desk}}</span> <span class="pull-right" ng-show="version.stage">{{ :: \'stage:\' | translate }} {{version.stage}}</span></div><div class="footer"><em>{{ :: \'version\' | translate }}: {{ version._current_version }}</em><div class="state-label state-{{ :: version.state}}">{{ :: version.state }}</div><button class="btn btn-light btn-mini pull-right" ng-show="canRevert && !$first" ng-click="revert(version)" translate>revert</button></div></li></ul></div>'),a.put("scripts/superdesk-authoring/versioning/views/versioning.html",'<ul class="nav nav-tabs"><li ng-class="{active: tab === \'versions\' || !tab}"><button ng-click="tab = \'versions\'" translate>Versions</button></li><li ng-class="{active: tab === \'history\'}"><button ng-click="tab = \'history\'" translate>Item history</button></li></ul><div class="content"><div ng-if="tab === \'versions\' || !tab" sd-versioning-version></div><div ng-if="tab === \'history\'" sd-versioning-history></div></div>'),a.put("scripts/superdesk-authoring/views/article-edit.html",'<div class="field" ng-class="{\'limit-error\': item.headline.length > limits.headline}"><label translate>Headline</label><span sd-character-count data-item="item.headline" data-html="true" data-limit="limits.headline"></span><div id="title" class="headline" sd-text-editor data-config="{disableToolbar: true, disableReturn: true}" data-language="item.language" ng-model="item.headline" ng-change="autosave(item)" ng-if="_editable" ng-trim="false"></div><div class="headline" ng-if="!_editable">{{item.headline}}</div></div><div class="field" class="abstract" ng-class="{\'limit-error\': item.abstract.length > limits.abstract}"><label translate>Abstract</label><span sd-character-count data-item="item.abstract" data-html="true" data-limit="limits.abstract"></span><div id="abstract" class="abstract" sd-text-editor data-config="{disableToolbar: true}" data-language="item.language" ng-model="item.abstract" ng-change="autosave(item)" ng-if="_editable" ng-trim="false"></div><div class="abstract" ng-if="!_editable">{{item.abstract}}</div></div><div class="field"><label translate>By</label><input type="text" class="byline" id="byline" ng-model="item.byline" ng-change="autosave(item)" ng-if="_editable"><div ng-if="!_editable">{{item.byline}}</div></div><div class="field"><label translate>Dateline</label><div class="dateline"><div sd-meta-locators class="dateline-city" ng-disabled="!_editable" data-list="metadata.cities" data-item="item" data-fieldprefix="dateline" data-field="located" data-postprocessing="updateDateline(item, city)" data-change="autosave(item)"></div><div class="dateline-date"><select id="datelineMonth" ng-options="monthName for (monthName, monthValue) in monthNames" ng-disabled="!item.dateline.located || !_editable" ng-change="resetNumberOfDays(true)" ng-model="datelineMonth"><option value=""></option></select><select id="datelineDay" ng-options="day for day in daysInMonth" ng-disabled="!item.dateline.located || !_editable" ng-change="modifyDatelineDate()" ng-model="datelineDay"><option value=""></option></select></div></div></div><div class="field body" ng-if="!isMediaType"><label translate>Body</label><span sd-word-count data-item="item.body_html" data-html="true"></span><div id="bodyhtml" sd-text-editor ng-model="item.body_html" ng-if="_editable" ng-change="autosave(item)" data-language="item.language" data-type="item.type"></div><div class="text-editor" sd-html-preview="item.body_html" ng-if="!_editable"></div></div><div ng-if="isMediaType" class="field abstract"><label translate>Description</label><textarea class="abstract" sd-auto-height ng-model="item.description" ng-change="autosave(item)" ng-if="_editable" ng-trim="false"></textarea><div class="abstract" ng-if="!_editable">{{item.description}}</div></div><div class="field" ng-if="isMediaType"><div ng-if="item.type == \'picture\'" class="full-preview" sd-ratio-calc><div><span translate>Original</span><div sd-item-rendition data-item="item" data-rendition="baseImage"></div></div><div sd-item-crops data-item="item"></div><button id="btnCrop" class="btn btn-medium pull-right" ng-click="applyCrop()" ng-if="metadata.crop_sizes"><span ng-if="!item.hasCrops" translate>APPLY CROPS</span> <span ng-if="item.hasCrops" translate>EDIT CROPS</span></button></div><div ng-if="item.type == \'audio\'"><audio controls sd-sources data-renditions="item.renditions"></audio></div><div ng-if="item.type == \'video\'"><video controls sd-sources data-renditions="item.renditions"></video></div></div><div class="composite-preview" ng-if="item.type === \'composite\'"><div sd-package-items-edit ng-model="item.groups" ng-if="_editable"></div><div sd-package data-item="item" class="composite-preview" ng-if="!_editable"></div></div><div class="field pull-left" ng-if="item.sign_off"><label translate>Sign-Off</label><div>{{item.sign_off}}</div></div>'),a.put("scripts/superdesk-authoring/views/authoring-container.html",'<div class="authoring-embedded" ng-class="authoring.state"><div class="embedded-auth-view" ng-if="authoring.item"><div sd-authoring-embedded data-item="authoring.item" data-action="authoring.action"></div></div></div>'),a.put("scripts/superdesk-authoring/views/authoring-topbar.html",'<div id="subnav" class="subnav" ng-class="{\'auth-sendto\': views.send}"><div class="dropdown dropright lock-avatar pull-left" ng-if="item._locked" dropdown><figure class="avatar small avatar-with-info" dropdown-toggle><div class="logged-info"></div><div class="user-image"><img sd-user-avatar data-src="item.lock_user.picture_url" data-initials="item.lock_user | username"></div></figure><div class="dropdown-menu"><div class="menu-label" translate>Locked by</div><figure class="avatar large"><div class="user-image"><img sd-user-avatar data-src="item.lock_user.picture_url" data-initials="item.lock_user | username"></div></figure><div class="lock-text">{{ item.lock_user | username }}</div><button class="btn btn-medium pull-left" ng-if="item._locked && !item.sendTo && can_unlock() && itemActions.save" ng-click="unlock()" ng-disabled="unlockClicked" translate>Unlock</button></div></div><div class="authoring-topbar clearfix pull-left" ng-class="{\'has-highlights\': item.highlights}"><button class="stage" ng-show="stage" ng-if="item._type !== \'legal_archive\'" ng-click="openStage()"><b>{{deskName}}</b> / {{ stage.name }}</button> <span class="stage" ng-show="stage" ng-if="item._type === \'legal_archive\'"><b>{{deskName}}</b> / {{ stage }}</span><div ng-if="item.more_coming === true" class="state-label state-in_progress" translate>More coming</div><span ng-if="item.highlights" sd-highlights-title data-item="item" data-orientation="\'bottom\'"></span></div><div class="button-stack right-stack"><button id="Edit" class="btn btn-medium pull-left" ng-if="item._type !== \'legal_archive\'" ng-show="action === \'view\' && !item._locked && itemActions.edit" ng-click="edit()" translate>Edit</button> <button class="btn btn-medium pull-left" ng-show="action === \'view\' && !item._locked && itemActions.deschedule" ng-click="deschedule()" translate>Deschedule</button> <button class="btn btn-medium btn-info pull-left" ng-if="item._type !== \'legal_archive\'" ng-show="action === \'view\' && !item._locked && itemActions.correct" ng-click="openAction(\'correct\')" translate>Edit and Correct</button> <button class="btn btn-medium btn-info pull-left" ng-if="item._type !== \'legal_archive\'" ng-show="action === \'view\' && !item._locked && itemActions.kill" ng-click="openAction(\'kill\')" translate>Edit and Kill</button> <button class="btn btn-medium pull-left" id="closeAuthoringBtn" ng-click="close()" translate>CLOSE</button> <button class="btn btn-medium btn-info pull-left" type="submit" ng-click="saveTopbar(item)" ng-show="_editable" ng-if="itemActions.save && action === \'edit\'" ng-disabled="!save_enabled() || saveDisabled" translate>SAVE</button> <button id="export" class="btn btn-medium btn-info pull-left" ng-click="exportHighlight(item)" ng-disabled="!_editable" ng-if="highlight" translate>Export</button> <button class="navbtn navbtn-hover strict" ng-if="!item._locked" title="{{ :: \'Minimize\' | translate }}" ng-click="minimize()"><i class="big-icon-minimize"></i></button><div ng-if="item._type !== \'legal_archive\' && itemActions.multi_edit && !item._locked" class="navbtn dropdown strict multiedit-dropdown pull-left strict" title="{{ :: \'Multiedit\' | translate }}" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="big-icon-multiedit"></i></button><div class="dropdown-menu pull-right" sd-multiedit-dropdown></div></div><div id="authoring-extra-dropdown" ng-if="item._type !== \'legal_archive\'" class="navbtn dropdown pull-left strict" title="{{ :: \'More actions\' | translate }}" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots-vertical"></i></button><div class="dropdown-menu pull-right"><ul ng-controller="TemplateMenu as templateMenu"><li><span class="menu-label" translate>Templates</span></li><li><button type="button" ng-click="templateMenu.create(item)" translate>Save as template</button></li></ul><ul ng-if="item.task.desk && itemActions.mark_item" title="{{ :: \'Mark item\' | translate }}"><li class="divider"></li><li><span class="menu-label" translate>Highlights</span></li><li><div class="dropdown highlights-toggle" dropdown><button class="dropdown-toggle" dropdown-toggle>{{ :: \'Mark item\' | translate }} <i class="icon-chevron-right-thin submenu-icon"></i></button><ul class="dropdown-menu right-submenu" sd-mark-highlights-dropdown></ul></div></li></ul><ul ng-if="_editable" ng-controller="SpellcheckMenu as spellcheckMenu"><li class="divider"></li><li><span class="menu-label" translate>Spell Checker</span></li><li><span><span class="pull-right" sd-switch ng-model="spellcheckMenu.isAuto" ng-change="spellcheckMenu.pushSettings()"></span> <span translate>Run automatically</span></span></li><li><button type="button" ng-click="spellcheckMenu.spellcheck()" ng-disabled="spellcheckMenu.isAuto" translate><span class="shortcut pull-right">Ctrl+Shift+S</span> Check spelling</button></li></ul></div></div><button id="send-to-btn" ng-show="_editable" class="navbtn navbtn-hover" title="{{ :: \'Send to / Publish\' | translate }}" ng-click="views.send = !views.send"><i class="svg-icon-sendto"></i></button></div></div>'),a.put("scripts/superdesk-authoring/views/authoring.html",'<div sd-authoring class="auth-screen" ng-if="origItem"><div sd-authoring-topbar></div><section class="main-section" ng-class="{\'auth-sendto\': views.send, \'packaging-screen\': item.type === \'composite\'}"><div sd-authoring-widgets data-item="item"><div class="page-content-container" ng-click="views.send = false"><div class="theme-controls"><button class="proofread-toggle btn" ng-class="{active: proofread}" ng-click="proofread = !proofread" title="{{:: \'Toggle theme\' | translate}}"><i class="icon-adjust"></i></button> <span sd-theme-select ng-if="proofread" data-key="proofreadTheme"></span> <span sd-theme-select ng-if="!proofread" data-key="theme"></span></div><header class="authoring-header" sd-header-info ng-class="{active: !toggleHeader}"></header><article class="theme-container" ng-class="{preview: !_editable}"><div ng-if="item.type !== \'composite\'" class="fieldset" sd-article-edit></div><div ng-if="item.type === \'composite\'" sd-package-edit></div></article></div></div></section><div sd-send-item id="send-item-container" ng-if="views.send" data-item="item" data-view="views.send" data-before-send="beforeSend" data-editable="_editable" data-publish="publish" data-action="action" data-mode="authoring"></div></div>'),a.put("scripts/superdesk-authoring/views/change-image.html",'<div class="modal-header"><h3 class="pull-left">{{ activity.label|translate }}</h3><button type="button" class="close" ng-click="close()"><i class="icon-close-small"></i></button></div><div class="modal-body"><section class="main"><div id="dynBoxId2" class="preview"><div class="original"><div class="crop-area image"><ul><li ng-repeat="cropsize in data.cropsizes track by cropsize.name"><label class="field-label" translate>ASPECT RATIO: {{cropsize.name.replace(\'-\', \'/\')}}</label><label class="cords-label">{{preview[cropsize.name].cords}}</label><div sd-image-crop data-show-min-size-error="true" data-src="data.renditions.original.href" data-cords="preview[cropsize.name].cords" data-box-width="800" data-box-height="600" data-aspect-ratio="cropsize.aspectRatio" data-minimum-size="[cropsize.width, cropsize.height]" data-crop-select="data.renditions[cropsize.name]"></div><br></li></ul></div></div></div></section></div><div class="modal-footer"><button type="button" class="btn btn-medium btn-info" ng-click="done()" ng-disabled="!preview || !preview.progress || !data.isDirty" translate>Save</button></div>'),a.put("scripts/superdesk-authoring/views/dashboard-articles.html",'<div class="workqueue-list"><ul class="card-list"><li ng-repeat="article in workqueue.items track by article._id" sd-dashboard-card><a ng-href="{{ $root.link(\'edit.text\', article) }}"><div class="title" ng-show="article.headline">{{ article.headline }}</div><div class="title" ng-show="!article.headline">{{ \'Untitled\' | translate }}</div><div><div class="created" sd-reldate-complex ng-model="article.versioncreated"></div><div class="subInfo"><div class="type-icon"><i title="{{article.type}}" class="filetype-icon-{{article.type}}"></i></div><div class="state-label state-{{article.state}}">{{article.state}}</div></div></div><span sd-item-container data-item="article" class="container"></span></a> <span class="close" ng-click="closeItem(article)"><i class="icon-close-small"></i></span></li></ul></div>'),a.put("scripts/superdesk-authoring/views/dashboard.html",'<div class="subnav"><h3 class="page-nav-title" translate>Currently working on:</h3><div class="button-stack right-stack"><div class="navbtn dropdown strict" dropdown><button class="dropdown-toggle sd-create-btn" dropdown-toggle></button><ul class="dropdown-menu pull-right" sd-content-create></ul></div></div></div><section class="main-section authoring-dashboard"><div sd-dashboard-articles></div></section>'),a.put("scripts/superdesk-authoring/views/header-info.html",'<div class="authoring-header__holder" ng-controller="MetadataWidgetCtrl" ng-if="loaded"><div class="authoring-header__short"><label translate>Created</label><time sd-datetime data-date="item.firstcreated"></time><label ng-if="userLookup[item.original_creator]" translate>by</label><b>{{userLookup[item.original_creator].display_name}}</b><div ng-if="item.versioncreated"><label translate>Modified</label><time sd-datetime data-date="item.versioncreated"></time></div></div><div class="authoring-header__general-info"><div><i class="filetype-icon-{{ :: item.type }}" title="{{ :: \'Article Type\' | translate }}"></i></div><div ng-if="item.type === \'text\'"><label class="word-count"><b>{{ item.word_count || 0 }}</b> <span translate translate-n="item.word_count" translate-plural="WORDS">WORD</span></label></div><div ng-if="item.signal"><span class="signal">{{ item.signal}}</span></div><div><label translate>SOURCE</label><div class="data" sd-meta-ingest data-item="item"></div></div><div><label translate>RELATED</label><div class="data"><a href="" ng-click="activateWidget()">{{relatedItems._items.length}}</a></div></div><div><label translate>GENRE</label><div sd-meta-dropdown class="data" data-item="item" data-field="genre" data-list="metadata.genre" ng-disabled="!_editable || item.broadcast.master_id" data-change="autosave(item)"></div></div><div ng-if="item.broadcast.master_id"><label translate ng-class="{\'broadcast-status\': item.broadcast.status !== \'\'}" tooltip="{{item.broadcast.status}}">MASTER<b ng-if="item.broadcast.status">!</b></label><div class="data"><a id="preview-master" ng-click="previewMasterStory()" title="{{ :: \'Preview master story\' | translate }}" class="open-item"><i class="icon-external"></i></a></div></div></div><div class="authoring-header__detailed"><div class="item-wrapper"><div class="item"><label translate>SLUGLINE</label><input type="text" sd-autofocus class="line-input slugline" id="slugline" ng-model="item.slugline" ng-change="autosave(item)" ng-disabled="!_editable" ng-trim="false"></div><div class="item"><label translate>TAKEKEY</label><input type="text" class="line-input" id="anpa_take_key" ng-model="item.anpa_take_key" ng-change="autosave(item)" ng-disabled="!_editable" ng-trim="false"></div></div><div class="item-wrapper"><div class="item" ng-if="metadata.locators"><label translate>PLACE</label><div sd-meta-dropdown class="data" data-item="item" data-field="place" data-list="metadata.locators" ng-disabled="!_editable" data-change="autosave(item)"></div></div><div class="item"><div class="item"><label translate>PRIORITY</label><div sd-meta-dropdown data-item="item" data-field="priority" data-list="metadata.priority" data-icon="urgency-icon" data-label="Priority" ng-disabled="!_editable" data-change="autosave(item)"></div></div><div class="item"><label translate>URGENCY</label><div sd-meta-dropdown data-item="item" data-field="urgency" data-list="metadata.urgency" data-icon="output-item-label label" data-label="Urgency" ng-disabled="!_editable" data-change="autosave(item)"></div></div></div></div><div class="item-wrapper" ng-if="metadata.categories" id="category-setting"><label translate>CATEGORY</label><div sd-meta-terms class="data" ng-disabled="!_editable" data-item="item" data-field="anpa_category" data-unique="qcode" data-list="availableCategories" data-header="true" data-change="autosave(item)"></div></div><div class="item-wrapper" ng-if="metadata.subjectcodes"><label translate>SUBJECT</label><div sd-meta-terms class="data" data-item="item" data-field="subject" data-unique="qcode" data-list="metadata.subjectcodes" ng-disabled="!_editable" data-header="true" data-change="autosave(item)"></div></div><div class="item-wrapper"><label translate>ED. NOTE</label><textarea class="line-input ed-note" ng-model="item.ednote" ng-disabled="!_editable" ng-change="autosave(item)"></textarea></div></div></div><button ng-class="{active: toggleHeader}" ng-click="toggleHeader = !toggleHeader" tabindex="-1"><i class="icon-chevron-up-thin"></i></button>'),a.put("scripts/superdesk-authoring/views/opened-articles.html",'<div class="opened-articles"><div class="quick-actions pull-left"><button ng-click="openDashboard()" title="{{ :: \'All opened items\' | translate }}"><i class="icon-th-large icon-white"></i></button></div><ul ng-if="workqueue.items.length" class="list" ng-class="{\'full-width\': !multiEdit.items.length}"><li ng-repeat="article in workqueue.items track by article._id " ng-class="{active: article === active}" style="width:{{ 100 / workqueue.items.length }}%"><a class="title" ng-click="edit(article, $event)" ng-href="{{ :: link(article) }}"><span ng-show="article.headline">{{ article.headline }}</span> <span ng-show="!article.headline" translate>Untitled</span></a> <button class="close" ng-click="closeItem(article)"><i class="icon-close-small icon-white"></i></button></li></ul><ul ng-if="multiEdit.items.length" class="multiedit-item"><li ng-class="{active: isMultiedit}"><a ng-href="" class="title" ng-click="openMulti()"><span translate>Multiedit</span></a> <button class="close" ng-click="closeMulti()"><i class="icon-close-small icon-white"></i></button></li></ul></div>'),a.put("scripts/superdesk-authoring/views/sd-highlight-create.html",'<li ng-repeat="highlight_config in highlight_configs"><button ng-click="content.createHighlight(highlight_config)"><i class="icon-plus-small icon-round icon-white"></i> {{ :: highlight_config.name }}</button></li>'),a.put("scripts/superdesk-authoring/views/send-item.html",'<div class="slide-pane slide-pane--dark content-item-preview" ng-show="isActive" ng-class="{open: isActive, \'slide-pane--inset\': mode === \'authoring\'}"><div class="slide-pane__header"><h3 ng-show="mode === \'authoring\' && itemActions.publish" translate>Send to / Publish</h3><h3 ng-show="mode === \'authoring\' && !itemActions.publish" translate>Send to</h3><h3 ng-show="mode !== \'authoring\'" translate>Fetch To</h3><div class="close" ng-click="close()"><i class="icon-close-small icon-white"></i></div></div><div class="slide-pane__content"><div sd-toggle-box ng-if="showSendButtonAndDestination()" data-title="{{ :: \'Destination\' | translate }}" data-open="true" data-style="dark"><div class="dropdown dropdown-noarrow dropdown--dark" dropdown><button class="dropdown-toggle" dropdown-toggle><span ng-show="!selectedDesk" translate>Select desk</span> <span ng-show="selectedDesk">{{selectedDesk.name}}</span> <b class="caret white"></b></button><ul class="dropdown-menu"><li ng-repeat="desk in desks._items track by desk._id"><button ng-click="selectDesk(desk)">{{::desk.name}}</button></li></ul></div><ul class="btn-list" ng-if="stages"><li ng-repeat="stage in stages track by stage._id"><button class="btn__check" ng-class="{active: stage._id === selectedStage._id}" ng-disabled="stage._id === item.task.stage" ng-click="selectStage(stage)">{{::stage.name}}</button></li></ul></div><div sd-toggle-box id="embargoTimestamp" ng-if="mode === \'authoring\' && showEmbargo()" data-title="Embargo" data-open="true" data-style="dark"><label class="label--lite" translate>Embargo</label><ul class="btn-list"><li class="datepicker-input--dark"><div sd-datepicker ng-model="item.embargo_date" ng-disabled="!isEmbargoEditable()"></div></li><li class="timepicker-input--dark"><div sd-timepicker ng-model="item.embargo_time" ng-disabled="!isEmbargoEditable()"></div></li></ul></div><div sd-toggle-box id="publishScheduleTimestamp" ng-if="mode === \'authoring\' && showPublishSchedule()" data-title="Publishing" data-open="true" data-style="dark"><label class="label--lite" translate>Publish Schedule</label><ul class="btn-list"><li class="datepicker-input--dark"><div sd-datepicker ng-model="item.publish_schedule_date" ng-disabled="!_editable"></div></li><li class="timepicker-input--dark"><div sd-timepicker ng-model="item.publish_schedule_time" ng-disabled="!_editable"></div></li></ul></div></div><div class="slide-pane__footer"><ul class="btn-list"><li ng-if="mode === \'authoring\' && canSendAndContinue() && itemActions.send && itemActions.new_take"><button class="btn btn-info" ng-click="sendAndContinue()" ng-disabled="item.embargo || disableSendButton()" translate>send and continue</button></li><li ng-if="showSendButtonAndDestination()"><button class="btn btn-info" ng-click="send()" ng-disabled="disableSendButton()" translate>{{mode !== \'authoring\' ? \'fetch\' : \'send\'}}</button></li><li ng-if="showSendButtonAndDestination() && mode !== \'authoring\'"><button class="btn btn-info" ng-click="send(true)" translate>fetch and open</button></li><li class="full-width" ng-if="mode === \'authoring\' && (itemActions.publish || itemActions.kill || itemActions.correct)"><button type="submit" class="btn btn-info" ng-show="_editable" ng-click="_publish()" translate>{{_action === \'edit\' ? \'publish\' : _action}}</button></li></ul></div></div>'),a.put("scripts/superdesk-authoring/views/theme-select.html",'<div class="dropdown theme-select pull-right" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="icon-chevron-down-thin"></i></button><div class="dropdown-menu pull-right" ng-click="$event.stopPropagation()"><ul class="normal-theme-list"><li><i class="theme-status" ng-class="{active: key === \'theme\'}"></i><div class="menu-label" translate>Choose Normal Theme</div></li><li><div class="btn-group"><button type="button" class="btn" ng-class="{active: large.theme === false}" ng-click="changeSize(\'theme\', false)" translate>Normal font</button> <button type="button" class="btn" ng-class="{active: large.theme === true}" ng-click="changeSize(\'theme\', true)" translate>Large font</button></div></li><li ng-repeat="t in themes"><button ng-click="changeTheme(\'theme\', t)" class="theme-btn {{t.cssClass}}">{{:: t.label}} <i class="icon-ok" ng-if="theme === t"></i></button></li></ul><ul class="proofread-theme-list"><li><i class="theme-status" ng-class="{active: key === \'proofreadTheme\'}"></i><div class="menu-label" translate>Choose Proofread Theme</div></li><li><div class="btn-group"><button type="button" class="btn" ng-class="{active: large.proofreadTheme === false}" ng-click="changeSize(\'proofreadTheme\', false)" translate>Normal font</button> <button type="button" class="btn" ng-class="{active: large.proofreadTheme  === true}" ng-click="changeSize(\'proofreadTheme\', true)" translate>Large font</button></div></li><li ng-repeat="t in themes"><button ng-click="changeTheme(\'proofreadTheme\', t)" class="theme-btn {{t.cssClass}}">{{:: t.label}} <i class="icon-ok" ng-if="proofreadTheme === t"></i></button></li></ul></div></div>'),a.put("scripts/superdesk-authoring/widgets/views/authoring-widgets.html",'<div class="widget-wrapper" ng-class="{\n        \'active-right\': active,\n        \'right-extended\': active.extended\n    }"><div class="tablist right-tablist" ng-if="item"><ul class="navigation-tabs"><li ng-repeat="widget in widgets | orderBy:\'order\'" ng-class="{active: widget === active}"><button class="btn" type="submit" ng-click="activate(widget)" ng-disabled="isLocked(widget)" id="{{ :: widget.label }}" tooltip="{{ :: widget.label }}" tooltip-placement="left"><i class="big-icon-{{ :: widget.icon }}"></i></button></li></ul></div><div class="tabpane right-tabpane open-tabpane widget-{{active._id}}" ng-if="active && !isLocked(active)"><section class="tabcontent" ng-init="widget=active"><div sd-widget data-widget="active"><div ng-include="active.template"></div></div></section></div><div ng-transclude></div></div>'),a.put("scripts/superdesk-content-filters/views/filter-search-result.html",'<div ng-if="searchResult.length > 0 && !loading" class="pull-left-20"><div class="content"><div sd-shadow><table><thead><tr><th translate>Subscriber</th><th translate>Filter</th></tr></thead><tbody><tr><td class="column-width"><div class="content"><ul class="pills-list provider-list"><li ng-repeat="subscriber in searchResult track by subscriber._id" class="clearfix"><div class="header"><h6>{{:: subscriber.name }} <span class="label offProvider" ng-if="!subscriber.is_active" translate>Not Active</span></h6><div class="actions"><button ng-click="edit(subscriber)" title="{{:: \'Edit Subscriber\' | translate }}"><i class="icon-pencil"></i></button></div></div></li></ul></div></td><td class="column-width"><div class="content"><ul class="pills-list provider-list"><li ng-repeat="subscriber in searchResult track by subscriber._id" class="clearfix"><div class="header"><h6>{{:: contentFiltersLookup[subscriber.content_filter.filter_id].name }}</h6><i>{{:: subscriber.global_filters[subscriber.content_filter.filter_id]?\'[Global]\':\'\' }}</i> <i>{{:: subscriber.content_filter.filter_id != null?\'\':\'[Global]\' }}</i><div class="actions"><button ng-show="subscriber.content_filter.filter_id != null" ng-click="editFilter(getFilter(subscriber.content_filter.filter_id))" title="{{:: \'Edit Content Filter\' | translate }}"><i class="icon-pencil"></i></button></div></div></li></ul></div></td></tr></tbody></table></div></div></div>'),a.put("scripts/superdesk-content-filters/views/filter-search.html",'<div ng-controller="FilterSearchCtrl"><div class="panel-search"><form name="searchForm" ng-submit="search()"><fieldset><div class="field"><label translate>Field</label><select class="input" ng-change="resetValues()" required ng-model="filterCondition.field"><option value="{{parameter.field}}" ng-selected="parameter.field === filterCondition.field" ng-repeat="parameter in filterConditionParameters track by $index">{{:: parameter.field | translate}}</option></select></div><div class="field"><label translate>Operator</label><select class="input" ng-change="resetValues()" required ng-model="filterCondition.operator"><option value="{{operator}}" ng-selected="operator === filterCondition.operator" ng-repeat="operator in operatorLookup[filterCondition.field] track by $index">{{:: operator | translate}}</option></select></div><div class="field"><label translate>Values</label><input ng-if="!isListValue()" required ng-model="filterCondition.value"><div ng-if="isListValue()"><div class="term-editor" ng-keypress="handleKey($event)" sd-meta-terms data-item="filterCondition" data-field="values" data-unique="qcode" data-list="valueLookup[filterCondition.field]"></div></div></div><div class="pull-right"><button class="btn btn-primary" ng-disabled="!(filterCondition.value || filterCondition.values.length > 0)" ng-click="search()" translate>Search</button></div></fieldset></form></div><div class="panel-search-result" ng-if="searchResult"><div ng-include="\'scripts/superdesk-content-filters/views/filter-search-result.html\'"></div><div sd-admin-pub-subscribers></div><div sd-manage-filters-tab></div></div></div>'),a.put("scripts/superdesk-content-filters/views/manage-filter-conditions.html",'<div ng-controller="FilterConditionsCtrl"><div class="split-content"><div class="header"><h2 translate>Filter Conditions</h2><button class="btn btn-info pull-right" ng-click="edit()"><i class="icon-plus-sign icon-white"></i> <span translate>Add New Filter Condition</span></button></div><div class="content"><ul class="pills-list provider-list"><li ng-repeat="filterCondition in filterConditions track by filterCondition._id" class="clearfix"><div class="header"><div><h6>{{ filterCondition.name }}</h6><span class="pull-right-20">({{filterCondition.field + \' \' + filterCondition.operator + \' \' + filterCondition.value}})</span></div><div class="actions"><button ng-click="edit(filterCondition)" title="{{:: \'Edit Filter Condition\' | translate }}"><i class="icon-pencil"></i></button> <button ng-click="remove(filterCondition)" title="{{:: \'Remove Filter Condition\' | translate }}"><i class="icon-trash"></i></button></div></div></li></ul></div></div><div sd-modal data-model="filterCondition" class="filter-condition-modal modal-large"><div class="modal-header"><a href="" class="close" ng-click="cancel()"><i class="icon-close-small"></i></a><h3 translate ng-show="filterCondition._id" translate>Edit Filter Condition "{{ origFilterCondition.name }}"</h3><h3 translate ng-hide="filterCondition._id" translate>Add New Filter Condition</h3></div><div class="modal-body"><form name="editForm" ng-submit="save()"><fieldset><div class="field"><label for="filterCondition-name" translate>Name</label><input type="text" id="filterCondition-name" required ng-model="filterCondition.name"></div><div class="field"><label translate>Field</label><select class="input" required ng-model="filterCondition.field"><option value="{{parameter.field}}" ng-selected="parameter.field === filterCondition.field" ng-repeat="parameter in filterConditionParameters">{{:: parameter.field}}</option></select></div><div class="field"><label translate>Operator</label><select class="input" required ng-model="filterCondition.operator"><option value="{{operator}}" ng-selected="operator === filterCondition.operator" ng-repeat="operator in operatorLookup[filterCondition.field]">{{operator}}</option></select></div><div class="field"><label translate>Values</label><input ng-if="!isListValue()" required ng-model="filterCondition.value"><div ng-if="isListValue()"><div sd-meta-terms data-item="filterCondition" data-field="values" data-unique="qcode" data-list="valueLookup[filterCondition.field]"></div></div></div></fieldset></form></div><div class="modal-footer"><button class="btn btn-default" ng-click="cancel()" translate>Cancel</button> <button class="btn btn-primary" ng-click="save()" ng-disabled="!editForm.$valid" translate>Save</button></div></div></div>'),
a.put("scripts/superdesk-content-filters/views/manage-filters.html",'<div class="manage-filters-page"><div ng-hide="hideList"><div class="split-content"><div class="header"><h2 translate>Content Filters</h2><button class="btn btn-info pull-right" ng-click="editFilter()"><i class="icon-plus-sign icon-white"></i> <span translate>Add New Content Filter</span></button></div><div class="content"><ul class="pills-list provider-list"><li ng-repeat="filter in contentFilters track by filter._id" class="clearfix"><div class="header"><h6>{{ filter.name }}</h6><i>{{ filter.is_global?\'[Global]\':\'\' }}</i><div class="actions"><button ng-click="productionTest(filter)" title="{{:: \'Test Filter Against Content\' | translate }}"><i class="icon-ok"></i></button> <button ng-click="editFilter(filter)" title="{{:: \'Edit Content Filter\' | translate }}"><i class="icon-pencil"></i></button> <button ng-click="remove(filter)" title="{{:: \'Remove Content Filter\' | translate }}"><i class="icon-trash"></i></button></div></div></li></ul></div></div><div sd-modal data-model="contentFilter" class="content-filter-modal modal-large"><div class="modal-header"><a href="" class="close" ng-click="close()"><i class="icon-close-small"></i></a><h3 translate ng-show="contentFilter._id">Edit Content Filter <span>"{{:: origContentFilter.name }}"</span></h3><h3 translate ng-hide="contentFilter._id">Add New Content Filter</h3></div><div class="modal-body"><form name="editForm" ng-submit="saveFilter()"><fieldset><div class="field"><label for="contentFilter-name" translate>Name</label><input type="text" id="contentFilter-name" required ng-model="contentFilter.name"></div><div class="field"><label class="right">{{:: \'Global\' | translate }} <span tooltip="{{ contentFilter.is_global ? \'Global\' : \'Parochial\'  | translate }}" tooltip-placement="right"><span class="pull-right" sd-switch ng-model="contentFilter.is_global"></span></span></label></div><div class="filter-tags" ng-repeat="filterRow in contentFilter.content_filter"><div class="flex-header"><div class="flex-header-name" translate>Filter Statement <span class="lighten-text">{{$index+1}}</span></div><div class="flex-space"></div><a href="" class="close" ng-click="removeStatement($index)"><i class="icon-close-small"></i></a></div><div class="row"><div class="row-50"><label translate>Filter Conditions</label><select class="input" ng-model="filterRow.selected"><option value=""></option><option value="{{filter._id}}" ng-repeat="filter in filterConditions track by filter._id">{{:: filter.name}}</option></select><button class="btn" type="button" ng-click="addFilter(filterRow, \'fc\')" translate>Add</button></div><div class="row-50"><label translate>Content Filters</label><select class="input" ng-model="filterRow.selected"><option value=""></option><option ng-if="filter._id!==contentFilter._id" value="{{filter._id}}" ng-repeat="filter in contentFilters track by filter._id">{{:: filter.name}}</option></select><button class="btn" type="button" ng-click="addFilter(filterRow, \'pf\')" translate>Add</button></div></div><div class="row"><div class="inline-tag-list"><ul><li ng-repeat="filter in filterRow.expression.fc"><div class="inline-tag"><span>FC:</span>{{filterConditionLookup[filter].name}}<button type="button" ng-click="removeFilter(filterRow, filter, \'fc\')"><i class="icon-close-small"></i></button></div></li><li ng-repeat="filter in filterRow.expression.pf"><div class="inline-tag tag-darker"><span>PF:</span>{{contentFiltersLookup[filter].name}}<button type="button" ng-click="removeFilter(filterRow, filter, \'pf\')"><i class="icon-close-small"></i></button></div></li></ul></div></div></div></fieldset></form><div class="row"><label for="contentFilter-preview" translate>Filter Preview</label><textarea id="contentFilter-preview" readonly ng-model="preview"></textarea></div><div class="test-row"><label for="contentFilter-test" translate>Filter Test</label><input type="text" id="contentFilter-test" required ng-model="test.article_id" ng-change="test.test_result=null"> <button type="button" class="btn btn-default" ng-click="test()" translate>Test</button> <span>{{test.test_result}}</span></div></div><div class="modal-footer"><button class="btn btn-default" type="button" ng-click="addStatement()" translate>Add Filter Statement</button> <button class="btn btn-default" ng-click="close()" translate>Cancel</button> <button class="btn btn-primary" ng-click="saveFilter()" ng-disabled="!editForm.$valid" translate>Save</button></div></div><div><div ng-if="productionTest" ng-include="\'scripts/superdesk-content-filters/views/production-test.html\'"></div></div></div></div>'),a.put("scripts/superdesk-content-filters/views/production-test-view.html",'<section class="main-section.filter"><div class="preview-layout" ng-class="{closed: !selected.preview}"><div class="list-pane"><header><div class="sortbar pull-left"><span ng-repeat="type in resultType"><input type="radio" ng-click="fetchResults()" name="type" value="{{ :: type.value}}" data-ng-model="model.selectedType"> {{ :: type.id}}</span></div></header><div class="content"><div sd-shadow><table class="table styled-table"><thead><tr><th></th><th translate>State</th><th translate>Unique Name</th><th translate>Headline</th><th translate>Keywords</th><th translate>Source</th><th translate>ANPA Category</th><th translate>View</th></tr></thead><tbody><tr ng-class="{active: result_item === selectedItem, archived: result_item.archived || result_item.created,\n                            locked: lock.isLocked}" tabindex="1" ng-keyup="handleKeyEvent($event)" ng-repeat="result_item in testResult track by result_item._id" ng-click="preview(result_item);"><td><i class="filetype-icon-{{result_item.type}}" ng-hide="hover || item.selected"></i></td><td><div class="state-label state-{{result_item.state}}">{{ :: result_item.state}}</div></td><td>{{ :: result_item.unique_name}}</td><td>{{ :: result_item.headline | limitTo: 60}} <span sd-item-container data-item="result_item" title="{{ result_item.container }}" class="container"></span></td><td>{{ :: result_item.slugline | limitTo: 40}}</td><td>{{ :: result_item.source}}</td><td>{{ :: result_item[\'anpa_category\'] | mergeWords:\'name\' }}</td><td><i ng-click="openView(result_item)" class="icon-fullscreen true" title="Open in new tab"></i></td></tr></tbody></table></div></div></div><div class="preview-pane content-item-preview" ng-show="selected.preview" ng-init="tab = \'content\'"><header><ul class="nav nav-tabs"><li ng-class="{active: tab === \'content\'}"><button ng-click="tab = \'content\'"><span translate>Content</span></button></li><li ng-class="{active: tab === \'metadata\'}"><button ng-click="tab = \'metadata\'"><span translate>Metadata</span></button></li></ul><button ng-click="preview(null)" class="close-preview"><i class="icon-close-small"></i></button></header><div class="content" ng-if="selected.preview"><div ng-if="tab === \'content\'" sd-media-preview></div><div ng-if="tab === \'metadata\'" sd-media-metadata data-item="selected.preview"></div></div></div></div></section><div sd-media-view data-item="selected.view" data-items="items._items" ng-if="selected.view" data-close="closeLightbox()"></div>'),a.put("scripts/superdesk-content-filters/views/production-test.html",'<div ng-controller="ProductionTestCtrl"><div sd-modal data-model="testResult" class="filter-result-modal modal-responsive"><div class="modal-header"><a href="" class="close" ng-click="close()"><i class="icon-close-small"></i></a><h3 translate>Filter Test Results</h3></div><div class="modal-body filter-result-body"><div ng-if="productionTest" ng-include="\'scripts/superdesk-content-filters/views/production-test-view.html\'"></div></div><div class="modal-footer"><button class="btn btn-default" ng-click="close()" translate>Close</button></div></div></div>'),a.put("scripts/superdesk-content-filters/views/settings.html",'<div id="content-filters-settings" sd-settings-view><div class="split-content"><ul class="nav nav-tabs"><li ng-class="{active: ctrl.activeTab === \'filters\'}"><button ng-click="ctrl.changeTab(\'filters\')" translate>Filters</button></li><li ng-class="{active: ctrl.activeTab === \'filter_conditions\'}"><button ng-click="ctrl.changeTab(\'filter_conditions\')" translate>Filter Conditions</button></li><li ng-class="{active: ctrl.activeTab === \'filter_search\'}"><button ng-click="ctrl.changeTab(\'filter_search\')" translate>Filter Search</button></li></ul><div class="content" ng-switch="ctrl.activeTab"><div ng-switch-when="filter_conditions"><div ng-include="ctrl.TEMPLATES_DIR +\n                             \'/manage-filter-conditions.html\'"></div></div><div ng-switch-when="filters"><div sd-manage-filters-tab></div></div><div ng-switch-when="filter_search"><div ng-include="ctrl.TEMPLATES_DIR + \'/filter-search.html\'" data-search="search"></div></div></div></div></div>'),a.put("scripts/superdesk-dashboard/grid/views/grid-item.html",'<div class="widget-resize-width" ng-show="status"><div class="resize-left" ng-click="resizeWidget(widget, \'left\')"></div><div class="resize-right" ng-click="resizeWidget(widget, \'right\')"></div></div><div class="widget-resize-height" ng-show="status"><div class="resize-up" ng-click="resizeWidget(widget, \'up\')"></div><div class="resize-down" ng-click="resizeWidget(widget, \'down\')"></div></div><div class="widget-close" ng-click="removeWidget()" ng-show="status"></div><div class="r{{widget.sizex}}{{widget.sizey}}" ng-transclude></div>'),a.put("scripts/superdesk-dashboard/grid/views/grid.html",'<div class="gridster" ng-class="{editmode: status}"><ul class="dash-grid"><li ng-repeat="widget in widgets" sd-grid-item class="gs_w"><div sd-widget data-widget="widget" data-save="save()"><div ng-include="widget.template"></div></div></li></ul></div>'),a.put("scripts/superdesk-dashboard/views/configuration.html",'<div ng-if="!widget.custom" class="modal-header"><a class="close" ng-click="$close()"><i class="icon-close-small"></i></a><h3>{{ widget.label|translate }} {{ \'Configuration\'|translate }}</h3></div><div ng-if="!widget.custom" class="modal-body widget-config-modal"><div ng-include="widget.configurationTemplate"></div></div><div ng-if="!widget.custom" class="modal-footer"><button class="btn" ng-click="saveConfig()"><span translate>Save</span></button></div><div ng-if="widget.custom" ng-include="widget.configurationTemplate" class="modal-strech"></div>'),a.put("scripts/superdesk-dashboard/views/widget.html",'<div class="sd-widget {{ widget._id }} gs_w" ng-class="{\'remove-header\': widget.removeHeader}"><div class="widget-line"></div><div class="widget-header" ng-if="!widget.removeHeader"><span ng-show="widget.icon" class="widget-icon"><i class="icon-{{ widget.icon }}"></i></span><div class="widget-title" translate>{{ widget.configuration.label || widget.label }}</div></div><div class="widget-content clearfix" ng-transclude></div><div class="widget-settings" ng-if="widget.configurationTemplate"><a href="" class="single-btn" ng-click="openConfiguration()"><i class="icon-settings"></i></a></div></div>'),a.put("scripts/superdesk-dashboard/views/workspace-topnav.html","<div sd-desk-dropdown></div>"),a.put("scripts/superdesk-dashboard/views/workspace.html",'<div class="subnav"><h3 class="page-nav-title" translate>Dashboard {{ dashboard.current.name }}</h3><div class="button-stack right-stack"><button class="navbtn" ng-click="dashboard.edit = true" ng-show="dashboard.widgets.length && !dashboard.edit"><i class="svg-icon-move"></i> <span class="title" translate>Rearrange widgets</span></button> <button class="navbtn navbtn-info" ng-click="dashboard.save()" ng-show="dashboard.edit"><i class="svg-icon-ok inverse"></i> <span class="title" translate>Save</span></button> <button class="navbtn sd-create-btn" ng-disabled="dashboard.edit" ng-click="dashboard.add = true"></button><div class="dropdown-menu pull-right" sd-multiedit-dropdown ng-if="dashboard.current.name !== \'personal\' && dashboard.current._id && !dashboard.current.desk"></div><div class="navbtn dropdown pull-left" dropdown ng-if="dashboard.current.name !== \'personal\' && dashboard.current._id && !dashboard.current.desk"><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots-vertical"></i></button><div class="dropdown-menu pull-right"><ul><li><span class="menu-label" translate>Workspace</span></li><li><button type="button" ng-click="dashboard.rename()"><i class="icon-pencil"></i> <span translate>Rename workspace</span></button></li><li><button type="button" ng-click="dashboard.delete()"><i class="icon-trash"></i> <span translate>Delete workspace</span></button></li></ul></div></div></div></div><div sd-edit-workspace data-workspace="edited" data-done="afterRename"></div><div class="dashboard-container" ng-if="dashboard.current"><div class="content clearfix"><div sd-grid data-status="dashboard.edit" data-widgets="dashboard.widgets" data-save="dashboard.save()"></div><div class="empty-dashboard" ng-show="dashboard.widgets.length === 0" translate>Dashboard is empty.</div><div class="empty-dashboard loading" ng-show="dashboard.widgets == null" translate>Loading..</div></div></div><div ng-if="dashboard.add"><div class="modal-backdrop in"></div><div class="widget-select modal-big modal in"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h3 class="pull-left" translate>Add new widget</h3><button class="close" ng-click="dashboard.add = false"><i class="icon-close-small"></i></button></div><div class="modal-body" ng-if="!dashboard.selectedWidget"><div class="nav-tabs"></div><div class="modal-screen"><ul class="widget-list"><li ng-repeat="widget in dashboard.availableWidgets" ng-click="dashboard.selectWidget(widget)" ng-class="{selected: dashboard.isSelected(widget)}" class="widget {{ widget._id }}"><div class="thumbnail"><img ng-src="{{ :: widget.thumbnail }}"></div><div class="title">{{ :: widget.label }}</div></li></ul></div></div><div class="modal-body" ng-if="dashboard.selectedWidget"><div class="nav-tabs"><button class="backlink" ng-click="dashboard.selectWidget()" translate>Back</button></div><div class="modal-screen widget-detail"><div class="thumbnail-box {{ dashboard.selectedWidget._id }}"><img ng-src="{{ :: dashboard.selectedWidget.thumbnail }}"></div><div class="content-box"><div class="title">{{ :: dashboard.selectedWidget.label }}</div><div class="description">{{ :: dashboard.selectedWidget.description }}</div><button class="btn btn-primary btn-large" ng-click="dashboard.addWidget(dashboard.selectedWidget)" ng-disabled="!dashboard.selectedWidget" translate>Add This Widget</button></div></div></div><div class="modal-footer" ng-if="!dashboard.selectedWidget"><button class="btn btn-primary" ng-click="dashboard.add = false" translate>Done</button></div><div class="modal-footer" ng-if="dashboard.selectedWidget"></div></div></div></div></div>'),a.put("scripts/superdesk-dashboard/workspace-tasks/views/assignee-view.html",'<div><figure class="avatar {{avatarSize}}"><img sd-user-avatar data-src="userPicture" data-initials="userName"></figure><div class="assignee-name" ng-if="name"><span ng-show="task.desk">{{deskName}} /</span> <span ng-show="task.user">{{userName}}</span> <span ng-hide="task.user" translate>Unassigned</span></div></div>'),a.put("scripts/superdesk-dashboard/workspace-tasks/views/desk-stages.html",'<ul class="stages-list"><li ng-click="stageSelect()" class="stage-label" ng-class="{active: !stages.selected && !spike && !published}" style="max-width:{{100/(stages.stages.length + 3)}}%" ng-if="stages.stages.length"><a href="" translate>any</a></li><li ng-repeat="stage in stages.stages" ng-click="stageSelect(stage)" ng-class="{active: stage == stages.selected && !spike && !published}" class="stage-label" style="max-width:{{100/(stages.stages.length + 3)}}%" ng-if="stages.stages.length"><a href="">{{ stage.name }}</a></li><li ng-if="type === \'archive\'" class="stage-label" ng-class="{active: spike}" style="max-width:{{100/(stages.stages.length + 3)}}%"><a href="" ng-click="toggleSpike()" translate>Spiked</a></li><li ng-if="type === \'archive\' && stages.stages.length" class="stage-label" ng-class="{active: published}" style="max-width:{{100/(stages.stages.length + 3)}}%"><a href="" ng-click="togglePublished()" translate>Published</a></li></ul>'),a.put("scripts/superdesk-dashboard/workspace-tasks/views/kanban-board.html",'<div class="board"><header class="{{ :: cssClass }}">{{ label }}</header><ul class="card-list"><li ng-repeat="item in items" ng-class="{selected: item === selected.preview}" ng-click="preview(item)"><div sd-assignee-view data-task="item.task" data-avatar-size="small"></div><div class="title">{{ item.slugline || item.headline }}</div><div class="info"><ul class="task-labels clearfix"><li ng-if="item.task.due_date"><i class="icon-desk-time"></i> <time sd-datetime data-date="item.task.due_date"></time></li><li ng-if="item.next_run"><i class="icon-desk-time"></i> <time sd-datetime data-date="item.next_run"></time></li></ul></div><div class="action" ng-if="!item.next_run && item.state !== \'published\'"><ul class="item-functions" sd-activity-list data-item="item" data-type="task" data-action="edit"></ul></div></li><ul></ul></ul></div>'),a.put("scripts/superdesk-dashboard/workspace-tasks/views/task-preview.html",'<header><p class="pull-left">{{ :: \'Created on\' | translate}} <span sd-reldate-complex ng-model="task._created"></span> {{ :: \'by\' | translate}} {{ users[task.original_creator].display_name }}</p><button ng-click="close()" class="close-preview"><i class="icon-close-small"></i></button></header><div class="content"><form name="taskForm"><div class="action-bar clearfix" ng-class="{show: editmode}"><button class="btn btn-info pull-right" ng-click="save()" translate>Save</button> <button class="btn pull-right" ng-click="reset()" translate>Cancel</button></div><div class="action-menu"><button ng-click="edit()" class="change"><i class="icon-pencil"></i></button><div class="dropdown dropdown-big pull-right" dropdown><button class="dropdown-toggle condensed" dropdown-toggle><i class="icon-dots-vertical"></i></button><div class="dropdown-menu pull-right" sd-activity-list data-item="item" data-type="task" data-action="edit"></div></div></div><ul class="task-labels clearfix" ng-if="!editmode"><li><i class="icon-desk-time"></i> <time sd-datetime data-date="task_details.due_date"></time></li></ul><div ng-if="editmode" class="time-edit"><div class="field"><label translate>Due date</label><div sd-datepicker ng-model="task_details.due_date"></div></div><div class="field"><label translate>Due time</label><div sd-timepicker ng-model="task_details.due_time"></div></div></div><div class="assignee-container" ng-if="!editmode"><figure ng-if="!editmode" class="avatar"><img sd-user-avatar data-src="users[task_details.user].picture_url" data-initials="users[task_details.user].display_name"></figure><div class="assignee-name"><span ng-show="task_details.desk">{{desks[task_details.desk].name}} /</span> <span ng-show="task_details.user">{{users[task_details.user].display_name}}</span> <span ng-hide="task_details.user" translate>Unassigned</span></div></div><div ng-if="editmode" sd-assignee-box data-desk-id="task_details.desk" data-user-id="task_details.user"></div><div ng-if="!editmode" class="title">{{ task.slugline }}</div><textarea ng-if="editmode" class="title" sd-auto-height ng-model="task.slugline" placeholder="{{ :: \'Add title\' | translate }}" required></textarea><textarea ng-if="editmode" class="description" sd-auto-height ng-model="task.description_text" placeholder="{{ :: \'Add description\' | translate }}"></textarea><div ng-if="!editmode" class="description">{{ task.description_text }}</div></form></div>'),a.put("scripts/superdesk-dashboard/workspace-tasks/views/workspace-tasks.html",'<div class="subnav"><div class="button-stack right-stack"><button class="navbtn sd-create-btn" ng-click="create()"></button></div></div><section class="main-section workspace-tasks"><div class="preview-layout" ng-class="{closed: !selected.preview}"><div class="list-pane task-list"><header></header><div class="content"><div class="stages"><div class="board-holder" sd-task-kanban-board data-items="scheduled._items" data-label="{{ :: \'UPCOMING\' | translate }}" data-css-class="todo"></div><div class="board-holder" ng-repeat="stage in stages track by stage._id" sd-task-kanban-board data-items="stageItems[stage._id]" data-label="{{ :: stage.name }}" data-css-class="in_progress" data-selected="selected"></div><div class="board-holder" sd-task-kanban-board data-items="published._items" data-label="{{ :: \'DONE\' | translate }}" data-css-class="done" data-selected="selected"></div></div></div></div><div class="preview-pane" ng-if="selected.preview" sd-task-preview data-item="selected.preview" data-onclose="preview()"></div></div></section><div sd-modal data-model="newTask" class="create-task-popup modal-static modal-body-grey"><div class="modal-header"><button class="close" ng-click="close()"><i class="icon-close-small"></i></button><h3 translate>Create New Task</h3></div><div class="modal-body" ng-if="newTask"><form><fieldset class="full"><textarea sd-autoexpand class="title" ng-model="newTask.slugline" placeholder="{{ :: \'Add content slugline\' | translate}}" tabindex="1" sd-autofocus></textarea></fieldset><fieldset><textarea sd-autoexpand class="description" ng-model="newTask.description_text" placeholder="{{ :: \'Add task description\' | translate}}" tabindex="2"></textarea><div class="assignee-focus" sd-assignee-box data-desk-id="newTask.task.desk" data-user-id="newTask.task.user" tabindex="3"></div></fieldset><fieldset class="due"><div class="break"></div><label translate>Due</label><div class="clear field"><div sd-datepicker ng-model="newTask.task.due_date"></div></div><div class="field"><div sd-timepicker ng-model="newTask.task.due_time"></div></div></fieldset></form></div><div class="modal-footer"><button class="btn btn-default" ng-click="close()" translate>Cancel</button> <button class="btn btn-primary" ng-disabled="!newTask.task.desk || !newTask.slugline" ng-click="save()" translate>Save</button></div></div>'),a.put("scripts/superdesk-dashboard/world-clock/configuration.html",'<div ng-controller="WorldClockConfigController" class="widget-config world-clock"><form class="form-horizontal"><fieldset><tabset><tab heading="Your clock"><div class="field"><label>{{\'Clock type\'|translate}}</label><div class="control"><div class="btn-group"><button type="button" class="btn btn-default" ng-class="{active: !configuration.digital}" ng-click="configuration.digital=false">Analog</button> <button type="button" class="btn btn-default" ng-class="{active: configuration.digital}" ng-click="configuration.digital=true">Digital</button></div></div></div><div class="field"><label>{{\'Your clock\'|translate}}</label><div class="control"><ul class="list-group"><li class="list-group-item" ng-repeat="zone in configuration.zones"><a href="">{{ zone.replace(\'_\', \' \') }}</a> <a href="" class="pull-right" ng-click="configuration.zones.splice($index, 1);notify(\'remove\', zone)"><i class="icon-close-small"></i></a></li></ul><div class="alert alert-info" ng-hide="configuration.zones.length" translate>No clock here!</div></div></div></tab><tab heading="Available clocks"><div class="field"><label>{{\'Available clock\'|translate}}</label><div class="control"><div class="input-append" style="margin-bottom:10px"><input type="text" class="input-large" ng-model="search" placeholder="{{ \'Search for clock\'|translate }}"> <button class="btn btn-default" ng-disabled="!search" ng-click="search=\'\'" translate>Clear</button></div><ul class="list-group"><li class="list-group-item" ng-repeat="zone in availableZones|filter:notIn(configuration.zones)|filter:search" ng-click="configuration.zones.push(zone);notify(\'add\', zone)"><a href="">{{ zone.replace(\'_\', \' \') }}</a></li></ul></div></div></tab></tabset></fieldset></form></div>'),a.put("scripts/superdesk-dashboard/world-clock/widget-worldclock.html",'<div><div class="clock-container clearfix" ng-controller="WorldClockController"><div ng-repeat="zone in widget.configuration.zones track by $index"><div class="clock-box" ng-class="{digital: widget.configuration.digital}"><header>{{ zone.split(\'/\')[1].replace(\'_\', \' \') }}</header><div class="wclock" sd-clock data-utc="utc" data-tz="{{ zone }}" ng-if="!widget.configuration.digital"></div><time>{{ utc.tz(zone).format(\'HH:mm\') }}</time><div class="date">{{ utc.tz(zone).format(\'dddd\') }}</div></div></div></div><div class="widget-footer"></div></div>'),a.put("scripts/superdesk-desks/aggregate-widget/aggregate-widget.html",'<div class="widget-container" ng-controller="AggregateCtrl as agg" ng-init="agg.setWidget(widget)"><div class="main-list" ng-class="{wrap: agg.selected}"><div class="search-box"><input type="text" placeholder="{{ :: \'Search\' | translate }}" ng-model="query" ng-model-options="{debounce: 500}" ng-change="agg.search(query)"></div><div class="content-list-holder"><div sd-shadow><div class="content-list" ng-if="!agg.state.solo"><div class="desk" ng-repeat="group in agg.cards track by group._id"><div class="stage" ng-show="total"><div sd-stage-header></div><div class="stage-content" ng-style="agg.getMaxHeightStyle(group.max_items)" ng-show="agg.getExpandedState(group._id) || agg.state.solo" sd-stage-items data-stage="group" data-total="total" data-allowed="true" data-show-empty="false" data-max-items="group.max_items" data-action="agg.preview(item)" data-selected="agg.selected" data-filter="group.query"></div></div></div></div><div class="content-list" ng-if="agg.state.solo"><div class="desk" ng-init="group = agg.state.solo"><div class="stage" ng-show="total"><div sd-stage-header></div><div class="stage-content" ng-show="agg.getExpandedState(group._id) || agg.state.solo" sd-stage-items data-stage="group" data-total="total" data-allowed="true" data-show-empty="false" data-max-items="100" data-action="agg.preview(item)" data-selected="agg.selected" data-filter="group.query"></div></div></div></div></div></div></div><div class="preview preview-widget" ng-init="contenttab = true" ng-class="{wrap: !agg.selected}"><div class="nav"><button class="backlink" href="" ng-click="agg.preview()" translate=""><span class="ng-scope">Back</span></button></div><ul class="nav nav-tabs"><li ng-class="{active: contenttab}"><button ng-click="contenttab = true" translate>Content</button></li><li ng-class="{active: !contenttab}"><button ng-click="contenttab = false" translate>Metadata</button></li></ul><div class="content-item-preview" ng-if="agg.selected"><div class="content" ng-if="contenttab" sd-media-preview-widget data-item="agg.selected"></div><div ng-if="!contenttab" sd-media-metadata data-item="agg.selected"></div></div></div></div>'),a.put("scripts/superdesk-desks/aggregate-widget/configuration.html",'<div ng-controller="AggregateCtrl as agg" ng-init="agg.setWidget(widget)"><div ng-if="!agg.loading" ng-init="agg.edit()" class="wrapped" sd-aggregate-settings data-desks="agg.desks" data-desk-stages="agg.deskStages" data-searches="agg.searches" data-desk-lookup="agg.deskLookup" data-stage-lookup="agg.stageLookup" data-search-lookup="agg.searchLookup" data-groups="agg.groups" data-edit-groups="agg.editGroups" data-onclose="$close()" data-widget="widget"></div></div>'),a.put("scripts/superdesk-desks/views/actionpicker.html",'<div class="multiple"><div class="field"><label for="desk" translate>Desk</label><select id="desk" name="desk" ng-options="d._id as d.name for d in desks" ng-model="desk"><option value=""></option></select></div><div class="field"><label for="stage" translate>Stage</label><select id="stage" name="stage" ng-options="s._id as s.name for s in deskStages[desk]" ng-model="stage"><option value=""></option></select></div><div class="field"><label for="macro" translate>Macro</label><select id="macro" name="macro" ng-options="m.name as m.label for m in deskMacros" ng-model="macro"><option value=""></option></select></div></div>'),a.put("scripts/superdesk-desks/views/aggregate-settings-configuration.html",'<div class="aggregate-widget-config modal-wrapper" ng-if="widget" ng-include="\'scripts/superdesk-desks/views/aggregate-settings.html\'"></div><div ng-if="!widget" sd-modal data-model="modalActive" class="wrapped aggregate-widget-config"><div class="modal-wrapper" ng-include="\'scripts/superdesk-desks/views/aggregate-settings.html\'"></div></div>'),a.put("scripts/superdesk-desks/views/aggregate-settings.html",'<div class="modal-header"><a href="" class="close" ng-click="cancel()"><i class="icon-close-small"></i></a><h3 translate>Monitoring settings</h3></div><div class="modal-body aggregate-settings" sd-wizard data-name="aggregatesettings" data-current-step="step.current" data-finish="cancel()"><div sd-wizard-step data-title="{{ :: \'Desks\' | translate }}" data-code="desks"><div class="content"><div ng-if="widget"><span class="pull-right" sd-character-count data-item="widget.configuration.label" data-limit="30"></span><div class="field"><label translate>View name</label><input type="text" class="fullwidth-input" ng-model="widget.configuration.label" ng-keyup="handleEdit($event);" required></div></div><div class="legend" translate>Select desks for view</div><div class="desk" ng-repeat="desk in desks | orderBy: \'name\'"><div class="desk-title">{{desk.name}} <span sd-switch class="pull-right" ng-model="editGroups[desk._id].selected" ng-click="setDeskInfo(desk._id)"></span></div><ul class="stages clearfix" ng-if="editGroups[desk._id].selected"><li ng-repeat="stage in deskStages[desk._id]"><span sd-check ng-model="editGroups[stage._id].selected" ng-click="setStageInfo(stage._id)"></span> {{stage.name}}</li><li><span sd-check ng-model="editGroups[desk._id + \':output\'].selected" ng-click="setDeskOutputInfo(desk._id + \':output\')"></span> Output/Published</li></ul></div><div class="desk"><div class="desk-title" translate>Personal <span sd-switch class="pull-right" ng-model="editGroups[\'personal\'].selected" ng-click="setPersonalInfo()"></span></div></div><div ng-show="" class="legend" translate>Select saved searches to view</div></div></div><div sd-wizard-step data-title="{{ :: \'Saved Searches\' | translate }}" data-code="searches"><div class="content"><div class="legend" translate>Select saved searches for view. <span sd-switch class="pull-right" ng-model="showAllSavedSearches" ng-click="initSavedSearches(showAllSavedSearches)" title="{{\'Show all saved searches\'}} | translate"></span></div><div class="desk" ng-repeat="search in currentSavedSearches | orderBy: \'name\'"><div class="desk-title">{{search.name}} <span sd-switch class="pull-right" ng-model="editGroups[search._id].selected" ng-click="setSearchInfo(search._id)"></span></div></div><div ng-show="" class="legend" translate>Select saved searches for view</div></div></div><div sd-wizard-step data-title="{{ :: \'Reorder Sections\' | translate }}" data-code="reorder"><div class="content"><div class="legend" translate>Reorder stages and saved searches for view</div><ul class="groups draggable-list" sd-sort-groups><li class="sort-item clearfix" ng-repeat="item in getValues()"><div class="group-title" ng-if="item.type === \'stage\'">{{deskLookup[stageLookup[item._id].desk].name}} : <span>{{stageLookup[item._id].name}}</span></div><div class="group-title" ng-if="item.type === \'deskOutput\'">{{item.name}} : <span translate>Desk Output</span></div><div class="group-title" ng-if="item.type === \'search\'">{{searchLookup[item._id].name}}</div><div class="group-title" ng-if="item.type === \'personal\'" translate>Personal</div></li></ul></div></div><div sd-wizard-step data-title="{{ :: \'Items Count\' | translate }}" data-code="maxitems"><div class="content"><div class="legend" translate>Set maximum items per stages and saved searches for view</div><div class="groups"><div ng-repeat="max in getValues()" class="clearfix"><div class="desk-title pull-left" ng-if="max.type === \'stage\'">{{deskLookup[stageLookup[max._id].desk].name}} : <span>{{stageLookup[max._id].name}}</span></div><div class="desk-title pull-left" ng-if="max.type === \'deskOutput\'">{{max.name}} : <span translate>Desk Output</span></div><div class="desk-title pull-left" ng-if="max.type === \'search\'">{{searchLookup[max._id].name}}</div><div class="desk-title pull-left" ng-if="max.type === \'personal\'" translate>Personal</div><div class="pull-right"><input type="number" id="maxItems" ng-model="max.max_items" min="1" max="25" required></div></div></div></div></div></div><div class="modal-footer"><button id="previousBtn" class="btn pull-left" ng-if="step.current !== \'desks\'" ng-click="previous()" translate>Previous</button> <button id="nextBtn" class="btn" ng-if="step.current !== \'maxitems\'" ng-click="next()" translate>Next</button> <button class="btn btn-primary" ng-click="save()" translate>Done</button></div>'),
a.put("scripts/superdesk-desks/views/content-expiry.html",'<label ng-if="preview">{{ContentExpiry.Header | translate}} {{ ContentExpiry.Hours}} <span translate>hr</span> {{ ContentExpiry.Minutes}} <span translate>min</span></label><div class="field" ng-if="!preview"><label>{{ContentExpiry.Header | translate}}</label><input type="number" class="input-mini" ng-model="ContentExpiry.Hours" min="0" required> <span translate>hr</span> <input type="number" class="input-mini" ng-model="ContentExpiry.Minutes" min="0" max="59" required> <span translate>min</span></div>'),a.put("scripts/superdesk-desks/views/desk-config-modal.html",'<div sd-modal data-model="modalActive" class="add-desk-popup modal-large modal-static"><div class="modal-header"><a href="" class="close" ng-click="cancel()"><i class="icon-close-small"></i></a><h3 ng-show="!desk.edit._id" translate>Add New Desk</h3><h3 ng-show="desk.edit._id" translate>Edit "{{desk.edit.name}}" Desk</h3></div><div class="modal-body" sd-wizard data-name="desks" data-current-step="step.current" data-finish="cancel()"><div sd-wizard-step data-title="{{ \'General\' | translate }}" data-code="general"><div sd-deskedit-basic><form name="generalStep"><div class="content"><fieldset><span class="pull-right" sd-character-count data-item="desk.edit.name" data-limit="limits.desk"></span><div class="field"><label translate>Desk name</label><input type="text" class="fullwidth-input" ng-model="desk.edit.name" ng-keyup="handleEdit($event);" required></div><div class="field"><label translate>Desk description</label><textarea class="fullwidth-input" ng-model="desk.edit.description"></textarea></div><div class="field"><label translate>Source for User Created Articles</label><input type="text" class="fullwidth-input" ng-model="desk.edit.source" ng-keyup="handleEdit($event);" required></div><ul class="expiry"><li><div sd-content-expiry data-item="desk.edit" data-preview="false" data-expiryfield="spike_expiry" data-header="Spike Expiry"></div></li><li><div sd-content-expiry data-item="desk.edit" data-preview="false" data-expiryfield="published_item_expiry" data-header="Published Item Expiry"></div></li></ul><div class="field desk-type"><label translate>Desk Type</label><select id="deskType" ng-model="desk.edit.desk_type" ng-options="deskType.value as deskType.name for deskType in deskTypes" required><option value=""></option></select></div></fieldset><span class="alert-danger" ng-show="_errorLimits" translate>Character limit exceeded, desk can not be created/updated.</span> <span class="alert-danger" ng-show="_error" translate>{{ _errorMessage }}</span></div><div class="modal-footer"><button id="next-general" class="btn btn-primary" ng-click="save(desk.edit)" ng-disabled="!generalStep.$valid || _errorLimits" translate>Next</button></div></form></div></div><div sd-wizard-step data-title="{{ :: \'Stages\' | translate }}" data-code="stages"><div sd-deskedit-stages><div class="content stages"><div class="col"><a class="btn btn-info add" sd-focus-element data-target="#insert-stage" ng-click="edit({}); selected = null" ng-disabled="editStage"><i class="icon-plus-small icon-white"></i></a><div class="header" translate>Work stages</div><div class="content"><div class="stages-list clearfix" ng-class="{\'edit-mode\': editStage}"><div ng-repeat="stage in stages track by stage._id"><span ng-if="isActive(stage)" sd-character-count data-item="editStage.name" data-limit="limits.stage"></span><div class="stage" ng-click="select(stage)" ng-class="{active: selected === stage, editable: isActive(stage)}"><span ng-if="!isActive(stage)">{{ stage.name }}<label class="label globalread" ng-if="!(stage.is_visible || stage.is_visible == null)" translate>GLOBAL READ OFF</label></span> <span ng-if="isActive(stage)"><input type="text" id="edit-stage" ng-model="editStage.name" ng-keyup="handleEdit($event);" required></span><div class="actions" ng-if="!editStage"><button ng-click="edit(stage)" sd-focus-element data-target="#edit-stage"><i class="icon-pencil"></i></button> <button ng-if="!stage.working_stage && !stage.default_incoming" ng-click="remove(stage)"><i class="icon-trash"></i></button></div></div></div><span ng-if="editStage && !editStage._id" sd-character-count data-item="editStage.name" data-limit="limits.stage"></span><div class="stage editable" ng-show="editStage && !editStage._id"><span><input type="text" id="insert-stage" ng-model="editStage.name" required ng-keyup="handleEdit($event);"></span></div></div><div ng-if="editStage"><button class="btn" ng-click="cancel()" translate>Cancel</button> <button class="btn btn-primary" ng-click="save()" ng-disabled="!enableSave()" translate>Save</button></div><p ng-if="message">{{ message }}</p><p ng-show="_errorUniqueness" translate>Stage with name "{{ editStage.name }}"" already exists.</p><p ng-show="_errorLimits" translate>Character limit exceeded, stage can not be created/updated.</p><span ng-show="_error" translate>There was a problem, stage not created/updated.</span></div></div><div class="col"><div class="row" ng-if="selected && !editStage"><div class="header" translate>Stage Details</div><label class="label globalread" ng-if="selected.working_stage === null || selected.working_stage">{{:: \'Working Stage\' }}</label><label class="label globalread" ng-if="selected.default_incoming === null || selected.default_incoming">{{:: \'Incoming Stage\' }}</label><label translate>Global Read:<label class="label globalread">{{(selected.is_visible == null || selected.is_visible) ? \'ON\' : \'OFF\'}}</label></label><label translate>Stage description: {{ selected.description}}</label><label translate>Content expiry:</label><div sd-content-expiry data-item="selected" data-preview="true" data-expiryfield="content_expiry"></div><label translate>Incoming Rule: {{selected.incoming_macro}}</label><label translate>Outgoing Rule: {{selected.outgoing_macro}}</label></div><div class="row" ng-if="editStage"><div class="header" translate>Stage Details</div><div class="field"><label translate>Global Read</label><span sd-switch ng-model="editStage.is_visible"></span></div><div class="field"><label>{{:: \'Working Stage\' | translate }}</label><span sd-switch ng-model="editStage.working_stage"></span></div><div class="field"><label>{{:: \'Incoming Stage\' | translate }}</label><span sd-switch ng-model="editStage.default_incoming"></span></div><div class="field"><label translate>Stage description</label><textarea class="fullwidth-input" ng-model="editStage.description"></textarea></div><div class="field"><label translate>Content expiry</label><div sd-content-expiry data-item="editStage" data-preview="false" data-expiryfield="content_expiry"></div></div><div class="field"><label translate>Incoming Rule</label><select ng-model="editStage.incoming_macro"><option value=""></option><option ng-repeat="macro in macros" ng-selected="editStage.incoming_macro === macro.name" value="{{macro.name}}">{{macro.label}}</option></select></div><div class="field"><label translate>Outgoing Rule</label><select ng-model="editStage.outgoing_macro"><option value=""></option><option ng-repeat="macro in macros" ng-selected="editStage.outgoing_macro === macro.name" value="{{macro.name}}">{{macro.label}}</option></select></div></div></div></div><div class="modal-footer"><button class="btn pull-left" ng-click="previous()" translate>Previous</button> <button id="next-stages" class="btn btn-primary" ng-disabled="message != null" ng-click="next()" translate>Next</button></div></div></div><div sd-wizard-step data-title="{{ \'People\' | translate }}" data-code="people"><div sd-deskedit-people><div class="content people-stage"><div class="header" sd-user-select-list data-exclude="deskMembers" data-onchoose="add(user)"></div><div class="content"><p ng-if="message">{{ message }}</p><div class="member-list clearfix"><ul><li ng-repeat="user in deskMembers track by user._id | orderBy: \'display_name\'" ng-class="{\'inactive\' : !user.is_enabled || !user.is_active}"><i class="icon-close-small" ng-click="remove(user)"></i><figure class="avatar"><img sd-user-avatar data-src="user.picture_url" data-initials="user.display_name"></figure><div class="name">{{:: user.display_name}}</div></li></ul></div></div></div><div class="modal-footer"><button class="btn pull-left" ng-click="previous()" translate>Previous</button> <button id="next-people" class="btn btn-primary" ng-click="save()" ng-disabled="message != null" translate>Next</button></div></div></div><div sd-wizard-step data-title="{{ \'Macros\' | translate }}" data-code="macros"><div sd-deskedit-macros><div sd-shadow><ul class="pills-list"><li ng-repeat="macro in macros"><h6 class="pull-left">{{ macro.label }}</h6></li></ul></div><div class="modal-footer"><button class="btn pull-left" ng-click="previous()" translate>Previous</button> <button id="save" class="btn btn-primary" ng-click="save()" translate>Done</button></div></div></div></div></div>'),a.put("scripts/superdesk-desks/views/desk-tasks.html",'<div class="desk-header"><div class="desk-name pull-left">{{ desk.name }} <span class="view" ng-if="isMemberOf(desk)" ng-click="openDeskView(desk, \'task\')" title="{{ \'Open desk content\' | translate}}"><i class="icon-external"></i></span></div><div class="desk-action pull-right dropdown" dropdown ng-if="privileges.desks"><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots"></i></button><ul class="dropdown-menu"><li><button ng-click="openDesk(\'general\', desk)"><i class="icon-pencil"></i> {{ \'Edit desk\' | translate }}</button></li></ul></div></div><div class="desk-content"><div class="stage tasks" ng-repeat="status in statuses"><div class="stage-header clearfix"><div class="stage-name pull-left {{status._id}}">{{status.name}}</div><span class="label pull-right">{{total}}</span></div><div class="stage-content" sd-task-status-items data-status="status._id" data-desk="desk._id" data-total="total"></div></div></div>'),a.put("scripts/superdesk-desks/views/desk.html",'<div class="desk-header"><div class="desk-name pull-left">{{ desk.name }} <span class="view" ng-if="isMemberOf(desk)" ng-click="openDeskView(desk, \'content\')" title="{{ \'Open desk content\' | translate}}"><i class="icon-external"></i></span></div><div class="desk-action pull-right dropdown" dropdown ng-if="privileges.desks"><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots"></i></button><ul class="dropdown-menu"><li><button ng-click="openDesk(\'general\', desk)"><i class="icon-pencil"></i> {{ \'Edit desk\' | translate }}</button></li></ul></div></div><div class="desk-content"><div class="stage" ng-repeat="stage in deskStages[desk._id]"><div class="stage-header clearfix"><div class="stage-name pull-left">{{ :: stage.name}}</div><span class="label pull-right">{{ total }}</span></div><div class="stage-content" sd-stage-items data-stage="stage" data-total="total" data-allowed="isMemberOf(desk)" data-show-empty="true" data-selected="selected"></div></div></div>'),a.put("scripts/superdesk-desks/views/desk_users.html",'<div class="desk-header"><div class="desk-name pull-left">{{ desk.name }} <span class="view" ng-if="isMemberOf(desk)" ng-click="openDeskView(desk, \'task\')" title="{{ :: \'Open desk content\' | translate }}"><i class="icon-external"></i></span></div><div class="desk-action pull-right dropdown" dropdown ng-if="privileges.desks"><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots"></i></button><ul class="dropdown-menu"><li><button ng-click="openDesk(\'general\', desk)"><i class="icon-pencil"></i> {{ :: \'Edit desk\' | translate }}</button></li></ul></div></div><div class="desk-content"><div class="stage tasks" ng-repeat="role in roles" ng-show="total"><div class="stage-header clearfix"><div class="stage-name pull-left {{ :: role._id}}">{{ :: role.name}}</div><span class="label pull-right">{{total}}</span></div><div class="stage-content" sd-user-role-items data-role="role._id" data-desk="desk._id" data-total="total" data-online="online_users" data-privilege="privileges.users"></div></div></div>'),a.put("scripts/superdesk-desks/views/main.html",'<div class="subnav"><div class="navbtn toggle-list desk-tabs"><ul><li ng-repeat="v in views" ng-class="{active: v === view}"><a href="" id="{{v}}" ng-click="setView(v)" translate>{{v}}</a><div class="online-users" ng-if="v === view && view === \'users\'"><p><span sd-check ng-model="online_users" name="online_users" id="online_users" ng-change="changeOnlineUsers(online_users)"></span></p><label translate>show only online users</label></div></li></ul></div></div><section class="main-section master-desk-view" sd-desk-config><div class="main-desk-container"><div class="desk-container" ng-if="view === \'content\'" ng-repeat="desk in desks._items | orderBy: \'name\'"><div class="desk" ng-include="\'scripts/superdesk-desks/views/desk.html\'"></div></div><div class="desk-container" ng-if="view === \'tasks\'" ng-repeat="desk in desks._items | orderBy: \'name\'"><div class="desk" ng-include="\'scripts/superdesk-desks/views/desk-tasks.html\'"></div></div><div class="desk-container" ng-if="view === \'users\'" ng-repeat="desk in desks._items | orderBy: \'name\'"><div class="desk" ng-include="\'scripts/superdesk-desks/views/desk_users.html\'"></div></div></div><div sd-desk-config-modal data-active="modalActive" data-desk="desk" data-desks="desks" data-step="step" data-cancel="cancel()"></div></section>'),a.put("scripts/superdesk-desks/views/settings.html",'<div sd-settings-view><div class="split-content" sd-desk-config><div class="header"><h2 translate>Desk management</h2><button id="add-new-desk" class="btn btn-info pull-right" ng-click="openDesk(\'general\')"><i class="icon-plus-sign icon-white"></i> {{ :: \'Add New Desk\' | translate }}</button></div><div class="content desk-settings"><div sd-shadow><div class="flex-grid box wrap-items small-2 medium-4 large-6"><div class="flex-item card-box" ng-repeat="desk in desks._items track by desk._id"><div class="card-box__header"><div class="dropdown" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots-vertical"></i></button><ul class="dropdown-menu more-activity-menu pull-right"><li><div class="menu-label" translate>Actions</div></li><li class="divider"></li><li><button ng-click="openDesk(\'general\', desk)" title="{{:: \'Edit desk\'| translate }}"><i class="icon-pencil"></i>{{:: \'Edit\'| translate}}</button></li><li><button ng-click="remove(desk)" title="{{:: \'Remove desk\'| translate }}"><i class="icon-trash"></i>{{:: \'Remove\'| translate}}</button></li></ul></div><div class="card-box__heading">{{ desk.name }}</div></div><div class="card-box__content"><ul class="card-box__content-list"><li><h4>{{ :: \'Stages\' | translate }}<span class="label">{{getDeskStages(desk).length}}</span></h4><span ng-repeat="stage in getDeskStages(desk) track by stage._id">{{stage.name}}<span ng-if="$index < getDeskStages(desk).length-1">,</span></span></li><li><h4>{{ :: \'People\' | translate }}<span class="label">{{getDeskUsers(desk).length}}</span></h4><span ng-repeat="user in getDeskUsers(desk) track by user._id" ng-if="$index < numberOfUsers">{{user.display_name}}<span ng-if="$index < numberOfUsers-1">,</span> <span ng-if="getDeskUsers(desk).length > numberOfUsers && $index === numberOfUsers-1" ng-click="openDesk(\'people\', desk)" class="button__view-all">... {{ :: \'view all\' | translate }}</span></span></li><li><h4>{{ :: \'Desk Type\' | translate }}</h4><span>{{ desk.desk_type }}</span></li></ul></div></div></div></div></div><div sd-desk-config-modal data-active="modalActive" data-desk="desk" data-desks="desks" data-step="step" data-cancel="cancel()"></div></div></div>'),a.put("scripts/superdesk-desks/views/stage-header.html",'<div class="stage-header clearfix"><button class="toggle" ng-if="agg.state.solo._id !== group._id" ng-class="{closed: !agg.getExpandedState(group._id)}" ng-click="agg.switchExpandedState(group._id)"><i class="icon-chevron-down-thin"></i></button> <span class="stage-name"><a href="" ng-show="agg.state.solo._id !== group._id" ng-click="agg.setSoloGroup(group)">{{ :: group.header }} <span ng-show="group.subheader">/ {{ :: group.subheader }} {{ :: group.type}}</span></a> <a href="" ng-click="agg.setSoloGroup()" ng-show="agg.state.solo._id === group._id"><i class="backlink"></i> {{ :: group.header }} <span ng-show="group.subheader">/ {{ :: group.subheader }} {{ :: group.type}}</span></a></span><div class="line" ng-if="agg.state.solo._id !== group._id"></div><span class="label label-total">{{ total}}</span></div>'),a.put("scripts/superdesk-desks/views/stage-item-list.html",'<div ng-if="loading" class="loading"></div><div ng-if="!loading && !items.length && showEmpty" class="no-items" translate>No items in this stage</div><div tabindex="0"><ul ng-if="items.length" class="inline-content-items"><li ng-repeat="item in items track by item._id" class="item" ng-click="action({item: item})" ng-class="{locked: item.lock_user, shifted: allowed, active: item._id === selected._id}"><div id="{{item._id}}"><div class="type"><i class="filetype-icon-{{item.type}}"></i></div><div class="urgency"><i class="urgency-icon-{{item.urgency}}"></i></div><div class="text"><time sd-datetime data-date="item.versioncreated" class="pull-right"></time> <span class="keywords">{{item.slugline}}</span> <span id="title" class="headline">{{item.headline}}</span></div><div class="action" ng-if="allowed"><button ng-click="preview(item); $event.stopPropagation();" tooltip="Preview" tooltip-placement="{{$last ? \'left\' : \'bottom\'}}"><i class="icon-external"></i></button> <button ng-click="edit(item); $event.stopPropagation();" tooltip="Edit" tooltip-placement="{{$last ? \'left\' : \'bottom\'}}"><i class="icon-pencil"></i></button></div></div></li></ul></div>'),a.put("scripts/superdesk-desks/views/task-status-items.html",'<div ng-if="loading" class="loading"></div><div ng-if="!loading && !items.length" class="no-items" translate>No items with this status</div><ul ng-if="!loading && items.length" class="inline-content-items content-tasks"><li ng-repeat="item in items" class="item" ng-click="action({item: item})" ng-class="{locked: item.lock_user, shifted: allowed, active: item._id === selected._id}"><figure class="avatar small" title="{{users[item.task.user].display_name}}"><img sd-user-avatar data-src="users[item.task.user].picture_url" data-initials="users[item.task.user].display_name"></figure><div class="text">{{item.slugline}}</div></li></ul>'),a.put("scripts/superdesk-desks/views/user-role-items.html",'<ul ng-if="!loading && items.length" class="inline-content-items content-tasks"><li ng-repeat="item in items track by item._id" class="item" ng-if="!online || isLoggedIn(item)"><figure class="avatar avatar-with-info small" title="{{item.display_name}}" ng-class="{\'user-logged\': isLoggedIn(item)}"><div class="logged-info"></div><div class="user-image"><img sd-user-avatar data-src="item.picture_url" data-initials="item.display_name"></div></figure><div class="text pull-left">{{item.display_name}}</div><div class="pull-right dropdown" dropdown ng-if="privilege"><button class="dropdown-toggle animate-icon" dropdown-toggle><i class="icon-dots-vertical"></i></button><ul class="dropdown-menu"><li><button ng-click="openEditUser(item)"><i class="icon-pencil"></i> {{ :: \'Edit user\' | translate }}</button></li></ul></div></li></ul><div sd-modal data-model="user" class="highlights-config-popup responsive-popup hide child-shadow"><section class="main-section user-profile-page"><div class="form-content"><div class="user-details-pane"><header><div class="modal-header"><a href="" class="close" ng-click="closeEditUser()"><i class="icon-close-small"></i></a><h3 translate>Edit user</h3></div></header><div class="content"><div sd-user-edit data-user="user" data-oncancel="closeEditUser()" data-onsave="closeEditUser()"></div></div></div></div></section></div>'),a.put("scripts/superdesk-desks/views/user-select.html",'<form><input type="text" ng-model="search" class="searchbar searchbar-large"></form><div class="search-result" ng-show="search"><ul class="users-list-embed"><li ng-repeat="user in users._items" ng-class="{active: user === selected, \'inactive\' : !user.is_enabled || !user.is_active}" ng-click="choose(user)"><figure class="avatar small"><img sd-user-avatar data-src="user.picture_url" data-initials="user.display_name"></figure><div class="name">{{user.display_name}}</div></li></ul></div>'),a.put("scripts/superdesk-dictionaries/views/dictionary-config-modal.html",'<form name="editForm"><div sd-modal data-model="dictionary" class="add-dictionary-popup"><div class="modal-header"><a href="" class="close" ng-click="cancel()"><i class="icon-close-small"></i></a><h3 ng-show="!dictionary._id" translate>Add New Dictionary</h3><h3 ng-show="dictionary._id" translate>Edit Dictionary</h3></div><div class="modal-body"><div class="upload-progress" ng-if="progress.width"><div class="bar" style="width: {{ progress.width }}%"></div></div><ng-form name="dictionaryForm"><fieldset><div class="field"><label class="right">{{ :: \'Active\' | translate }} <span sd-switch ng-model="dictionary.is_active"></span></label></div><div class="field"><label for="dict-name" translate>Dictionary name</label><input id="dict-name" type="text" ng-if="!dictionary.user" ng-model="dictionary.name" required><div ng-if="dictionary.user">{{ :: \'Personal\' | translate }}</div></div><div class="field"><label for="dict-lang-code" translate>Language code</label><input id="dict-lang-code" type="text" ng-model="dictionary.language_id" required></div><div class="field"><label for="dict-file" translate>Dictionary file</label><input id="dict-file" name="upload" type="file" accept="text/plain" file-upload ng-model="file" sd-file-type-validator><div class="error" ng-show="editForm.$error.fileType" translate>Please use plain text dictionary.</div></div></fieldset><p ng-if="message">{{ message }}</p><span ng-show="_errorUniqueness && !dictionary.user" translate>Dictionary with name "{{ dictionary.name }}" already exists.</span> <span ng-show="_errorUniqueness && dictionary.user" translate>Personal dictionary for language "{{ dictionary.language_id }}" already exists.</span><p ng-show="_errorLimits" translate>Character limit exceeded, dictionary can not be created/updated.</p><span ng-show="_error" translate>There was a problem, dictionary not created/updated.</span></ng-form><ng-form ng-if="dictionary._id"><fieldset><label for="words-search">{{ :: \'Search\' | translate }} (<span translate translate-n="wordsCount" translate-plural="{{ $count }} words">{{ wordsCount }} word</span>)</label><div class="multiple"><div class="field"><input id="words-search" type="text" ng-model="search" ng-model-options="{debounce: 500}" ng-change="filterWords(search)"></div><button class="btn flex-field no-shrink" type="submit" ng-disabled="!isNew" ng-click="addWord(search)" translate>ADD WORD</button></div><ul class="words-list" ng-show="words.length"><li ng-repeat="word in words track by word"><button class="btn btn-light btn-mini pull-right" ng-click="removeWord(word, search)"><i class="icon-small icon-trash"></i></button> {{ :: word }}</li></ul></fieldset></ng-form></div><div class="modal-footer"><button id="save-edit-btn" type="submit" class="btn btn-info pull-right" ng-click="save()" ng-disabled="editForm.$invalid || progress.width" translate>Save</button> <button id="cancel-edit-btn" type="button" class="btn pull-right" ng-click="cancel()" translate>Cancel</button></div></div></form>'),a.put("scripts/superdesk-dictionaries/views/settings.html",'<div sd-settings-view><div class="split-content" sd-dictionary-config><div class="header"><h2 translate>Dictionary management</h2><button id="createPersonalDictionary" class="btn btn-info pull-right" ng-click="createPersonalDictionary()"><i class="icon-plus-sign icon-white"></i> {{ :: \'Add New Personal Dictionary\' | translate }}</button> <button id="createDictionary" class="btn btn-info pull-right" ng-click="createDictionary()"><i class="icon-plus-sign icon-white"></i> {{ :: \'Add New Dictionary\' | translate }}</button></div><div class="content dictionary-settings"><div sd-shadow><ul class="pills-list"><li ng-repeat="dictionary in dictionaries._items track by dictionary._id" ng-class="{inactive: dictionary.is_active === \'false\'}"><div ng-if="!dictionary.user"><h6>{{ dictionary.name }}</h6>&nbsp;<em><strong>({{ :: dictionary.language_id }})</strong></em></div><div ng-if="dictionary.user"><h6 id="{{dictionary.language_id}}">{{ :: \'Personal\' | translate }}</h6>&nbsp;<em><strong>({{ :: dictionary.language_id }})</strong></em></div><div class="actions"><button ng-click="openDictionary(dictionary)" title="{{:: \'Edit dictionary\' | translate }}"><i class="icon-pencil"></i></button> <button ng-click="remove(dictionary)" title="{{:: \'Remove dictionary\' | translate }}"><i class="icon-trash"></i></button></div></li></ul></div></div><div sd-dictionary-config-modal ng-if="dictionary"></div></div></div>'),a.put("scripts/superdesk-groups/views/groups-config-modal.html",'<div sd-modal data-model="modalActive" class="add-group-popup modal-large modal-static"><div class="modal-header"><a href="" class="close" ng-click="cancel()"><i class="icon-close-small"></i></a><h3 ng-show="!group.edit._id" translate>Add New Group</h3><h3 ng-show="group.edit._id" translate>Edit "{{group.edit.name}}" Group</h3></div><div class="modal-body" sd-wizard data-name="usergroups" data-current-step="step.current" data-finish="cancel()"><div sd-wizard-step data-title="{{ \'General\' | translate }}" data-code="general"><div sd-groupedit-basic><form name="generalStep"><div class="content"><fieldset><span class="pull-right" sd-character-count data-item="group.edit.name" data-limit="limits.group"></span><div class="field"><label translate>Group name</label><input type="text" class="fullwidth-input" ng-model="group.edit.name" ng-keyup="handleEdit($event);" required></div><div class="field"><label translate>Group description</label><textarea class="fullwidth-input" ng-model="group.edit.description"></textarea></div></fieldset><p ng-if="message">{{ message }}</p><span ng-show="_errorUniqueness" translate>Group with name "{{ group.edit.name }}" already exists.</span><p ng-show="_errorLimits" translate>Character limit exceeded, group can not be created/updated.</p><span ng-show="_error" translate>There was a problem, group not created/updated.</span></div><div class="modal-footer"><button class="btn btn-primary" ng-click="save(group.edit)" ng-disabled="!generalStep.$valid || _errorLimits" translate>Next</button></div></form></div></div><div sd-wizard-step data-title="{{ \'People\' | translate }}" data-code="people" data-disabled="!group.edit._id"><div sd-groupedit-people><div class="content people-stage"><div class="header" sd-user-select-list data-exclude="groupMembers" data-onchoose="add(user)"></div><div class="content"><p ng-if="message">{{ message }}</p><div class="member-list clearfix"><ul><li ng-repeat="user in groupMembers" ng-class="{\'inactive\' : !user.is_enabled || !user.is_active}"><i class="icon-close-small" ng-click="remove(user)"></i><figure class="avatar"><img sd-user-avatar data-src="user.picture_url" data-initials="user.display_name"></figure><div class="name">{{user.display_name}}</div></li></ul></div></div></div><div class="modal-footer"><button class="btn pull-left" ng-click="previous()" translate>Previous</button> <button class="btn btn-primary" ng-click="save()" translate>Done</button></div></div></div></div></div>'),a.put("scripts/superdesk-groups/views/settings.html",'<div sd-settings-view><div class="split-content" sd-groups-config><div class="header"><h2 translate>Group management</h2><button class="btn btn-info pull-right" ng-click="openGroup(\'general\')"><i class="icon-plus-sign icon-white"></i> {{ :: \'Add New Group\' | translate }}</button></div><div class="content"><div sd-shadow><ul class="pills-list"><li ng-repeat="group in groups._items"><h6 class="pull-left">{{ group.name }}</h6><div class="actions"><button ng-click="openGroup(\'general\', group)" title="{{:: \'Edit group\' | translate }}"><i class="icon-pencil"></i></button> <button ng-click="remove(group)" title="{{:: \'Remove group\' | translate }}"><i class="icon-trash"></i></button></div></li></ul></div></div><div sd-groups-config-modal></div></div></div>'),a.put("scripts/superdesk-highlights/views/create_highlights_button_directive.html",'<div id="createHighlight"><button id="create" class="btn btn-medium btn-info pull-right" ng-click="createHighlight(null)" tooltip="{{ :: \'Create highlight\' | translate }}" tooltip-placement="left" translate>Create</button></div>'),a.put("scripts/superdesk-highlights/views/highlights_config_modal.html",'<div sd-modal data-model="modalActive" class="highlights-config-popup moz-scroll-fix responsive-popup hide"><div class="modal-header"><a href="" class="close" ng-click="cancel()"><i class="icon-close-small"></i></a><h3 ng-show="!configEdit._id" translate>Create highlight configuration</h3><h3 ng-show="configEdit._id" translate>Edit highlight configuration</h3></div><div class="modal-body"><form name="highlightForm"><fieldset><div class="field"><label translate>Configuration name</label><input type="text" class="fullwidth-input" ng-model="configEdit.name" required></div><div class="field"><label translate>Template</label><select ng-model="configEdit.template" name="template" id="template"><option id="default" value="" ng-selected="!configEdit.template" translate>default template</option><option id="{{template.template_name}}" ng-repeat="template in templates" value="{{template._id}}" ng-selected="configEdit.template === template._id">{{ template.template_name }}</option></select></div><div class="field"><label translate>Assigned desks</label><div class="multi-select"><ul><li ng-repeat="desk in assignedDesks"><span sd-check ng-model="desk.included"></span> <span class="text" ng-click="desk.included = !desk.included">{{desk.name}}</span></li></ul></div></div><div class="field" tooltip="{{ :: \'When creating a highlights package\' | translate }}"><label translate>Automatically insert items from:</label><select ng-model="configEdit.auto_insert" class="input-small"><option value="{{ :: auto.day }}" ng-selected="configEdit.auto_insert === auto.day" translate>Today</option><option value="{{ :: auto.week }}" ng-selected="configEdit.auto_insert === auto.week" translate>This week</option><option ng-repeat="hour in hours" value="{{ :: getHourVal(hour) }}" ng-selected="configEdit.auto_insert === getHourVal(hour)" translate>Last {{ hour }} hours</option></select></div><div class="field"><label translate>Package groups</label><button class="btn btn-info add" sd-focus-element data-target="#insert-group" ng-click="editGroup(\'\'); selectedGroup = null" ng-disabled="editingGroup"><i class="icon-plus-small icon-white"></i> Add group</button><div class="content"><ul class="pills-list pills-editable clearfix"><li ng-repeat="group in configEdit.groups" ng-class="{editable: isActiveGroup(group)}"><h6 ng-if="!isActiveGroup(group)">{{ group }}</h6><span ng-if="isActiveGroup(group)" sd-character-count data-item="editingGroup.name" data-limit="limits"></span> <span><input type="text" ng-if="isActiveGroup(group)" id="edit-group" ng-model="editingGroup.name" ng-keyup="handleGroupEdit($event);"></span><div class="actions" ng-if="!editingGroup"><button ng-click="editGroup(group)" sd-focus-element data-target="#edit-group"><i class="icon-pencil"></i></button> <button ng-click="removeGroup(group)"><i class="icon-trash"></i></button></div></li><span ng-if="editingGroup && !editingGroup.id" sd-character-count data-item="editingGroup.name" data-limit="limits"></span><div class="editable" ng-show="editingGroup && !editingGroup.id"><span><input type="text" id="insert-group" ng-model="editingGroup.name" ng-keyup="handleGroupEdit($event);"></span></div><div ng-if="editingGroup"><button class="btn" ng-click="cancelGroup()" translate>Cancel</button> <button class="btn btn-primary" ng-click="saveGroup()" ng-disabled="_errorLimits" translate>Save</button></div><p ng-show="_errorLimits" translate>Character limit exceeded, group can not be created/updated.</p></ul></div></div></fieldset><p ng-if="message">{{ message }}</p></form></div><div class="modal-footer"><button class="btn" ng-click="cancel()" translate>Cancel</button> <button class="btn btn-primary" ng-click="save()" ng-disabled="!highlightForm.$valid || editingGroup" translate>Save</button></div></div>'),
a.put("scripts/superdesk-highlights/views/highlights_title_directive.html",'<div class="highlights-list dropdown" dropdown dropdown-append-to-body ng-if="highlights.length>0" on-toggle="toggleClass(open)"><button class="dropdown-toggle" dropdown-toggle><i ng-class="{\'icon-star red\': highlights.length === 1, \'icon-multi-star red\': highlights.length > 1}"></i></button><ul class="dropdown-menu highlights-list-menu" ng-class="{open: open}" ng-click="$event.stopPropagation()"><li><div class="menu-label" translate>Marked For</div><button class="close-button" dropdown-toggle><i class="icon-close-small icon-white"></i></button></li><li ng-repeat="highlight in highlights track by highlight._id">{{ :: highlight.name }} <button class="btn btn-mini" ng-click="unmarkHighlight(highlight._id)" translate>REMOVE</button></li><li class="none" ng-show="highlights.length === 0" translate>None</li></ul></div>'),a.put("scripts/superdesk-highlights/views/mark_highlights_dropdown.html","<div sd-mark-highlights-dropdown></div>"),a.put("scripts/superdesk-highlights/views/mark_highlights_dropdown_directive.html",'<ul><li ng-if="highlights.length" ng-repeat="h in highlights"><button ng-disabled="isMarked(h)" option="{{ h.name }}" ng-click="markItem(h);"><i class="icon-star"></i>{{ h.name }}</button></li><li ng-if="!highlights.length"><button ng-disabled="true">{{::\'No available highlights\'|translate}}</button></li></ul>'),a.put("scripts/superdesk-highlights/views/package_highlights_dropdown_directive.html",'<div id="highlightPackage" title="{{ :: \'Highlights\' | translate }}"><button class="dropdown-toggle" ng-click="hideMonitoring(currentRoute.href === \'/workspace/highlights\', $event)" dropdown-toggle><i class="big-icon-marked-star"></i></button><ul class="dropdown-menu pull-left"><li><div class="menu-label">Choose highlight list</div></li><li ng-if="hasHighlights" ng-repeat="h in highlights track by h._id"><button option="{{ h.name }}" ng-click="listHighlight(h);">{{ h.name }}</button></li><li ng-if="!hasHighlights"><button ng-disabled="true">{{::\'No available highlights\'|translate}}</button></li></ul></div>'),a.put("scripts/superdesk-highlights/views/search_highlights_dropdown_directive.html",'<div id="search-highlights" ng-show="highlights" ng-if="hasHighlights()"><div class="dropdown more-actions" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots-vertical"></i></button><ul class="dropdown-menu pull-right"><li><button option="NO FILTER" ng-click="selectHighlight();" translate>No Filter</button></li><li ng-repeat="h in highlights"><button option="{{ h.name }}" ng-click="selectHighlight(h);">{{ h.name }}</button></li></ul></div></div>'),a.put("scripts/superdesk-highlights/views/settings.html",'<div sd-settings-view><div class="split-content" sd-highlights-config><div class="header"><h2 translate>Highlights configurations</h2><button class="btn btn-info pull-right" ng-click="edit({})"><i class="icon-plus-sign icon-white"></i> {{ \'Create configuration\' | translate }}</button></div><div class="content desk-settings"><div sd-shadow><ul class="pills-list"><li ng-repeat="config in configurations._items"><h6 class="pull-left">{{ config.name }}</h6><div class="actions"><button ng-click="edit(config)" title="{{:: \'Edit configuration\' | translate }}"><i class="icon-pencil"></i></button> <button ng-click="remove(config)" title="{{:: \'Remove configuration\' | translate }}"><i class="icon-trash"></i></button></div></li></ul></div></div><div sd-highlights-config-modal></div></div></div>'),a.put("scripts/superdesk-ingest/ingest-stats-widget/configuration.html",'<div ng-controller="IngestStatsConfigController" class="widget-config"><form class="form-horizontal"><fieldset><div class="field"><label translate>Select source</label><div class="control"><select ng-model="configuration.source" class="input-medium"><option value="source" translate>Source stats</option><option value="urgency" translate>Urgency stats</option><option value="type" translate>Item type stats</option></select></div></div><div class="field"><label translate>Select color</label><div class="control"><select class="input-medium" ng-model="configuration.colorScheme" ng-options="scheme.name as scheme.name for scheme in schemes"></select></div></div></fieldset></form></div>'),a.put("scripts/superdesk-ingest/ingest-stats-widget/widget-ingeststats.html",'<div><div ng-controller="IngestStatsController"><div sd-pie-chart-dashboard data-terms="items._aggregations[widget.configuration.source].buckets" data-colors="widget.configuration.colorScheme"></div></div></div>'),a.put("scripts/superdesk-ingest/ingest-widget/widget-ingest.html",'<div ng-controller="IngestController" ng-init="extras=widget" ng-include="\'scripts/superdesk-archive/archive-widget/item-list.html\'"></div>'),a.put("scripts/superdesk-ingest/views/dashboard/dashboard.html",'<div class="subnav"><h3 class="page-nav-title" translate>Ingest Dashboard</h3><div class="button-stack right-stack"><div id="ingest-dashboard-dropdown" class="navbtn dropdown strict" dropdown><button class="dropdown-toggle sd-create-btn" dropdown-toggle></button><ul class="dropdown-menu pull-right source-list" sd-user-ingest-dashboard-drop-down data-items="items" data-set-user-preferences="setUserPreferences(true)"></ul></div></div></div><section class="main-section ingest-dashboard"><div sd-user-ingest-dashboard-list data-items="dashboard_items" data-set-user-preferences="setUserPreferences()"></section>'),a.put("scripts/superdesk-ingest/views/dashboard/ingest-dashboard-widget-list.html",'<div class="ingest-dashboard-list"><ul class="card-list"><li ng-repeat="item in items track by item._id"><div sd-user-ingest-dashboard data-item="item" data-set-user-preferences="setUserPreferences()"></div></li></ul></div>'),a.put("scripts/superdesk-ingest/views/dashboard/ingest-dashboard-widget.html",'<div class="header"><div class="title">{{item.name}}</div><div class="sub-title"><span translate>Source Type:</span> <span class="text">{{item.source}}</span></div><div class="sub-title"><span translate>Update Cycle:</span> <span class="text">{{item.update_schedule | scheduleFilter}}</span></div></div><div ng-show="item.show_status" class="status" ng-class="{closed: item.is_closed, opened: !item.is_closed}"><div ng-show="item.is_closed"><div><span class="uppercase" translate>Closed</span><span>by {{item.last_closed.display_name || \'System\'}}</span></div><div class="time" ng-show="item.last_closed && item.last_closed.closed_at" translate>on {{item.last_closed.closed_at | dateTimeString}}</div><div ng-show="item.last_closed && item.last_closed.message">{{item.last_closed.message}}</div></div><div ng-show="!item.is_closed"><div><span class="uppercase" translate>Opened</span><span>by {{item.last_opened.display_name || \'System\'}}</span></div><div class="time" ng-show="item.last_opened && item.last_opened.opened_at" translate>since {{item.last_opened.opened_at | dateTimeString}}</div></div></div><div ng-show="item.show_ingest_count" class="ingested-count"><div class="count">{{ingested_count}}</div><div class="text">items in last 24 hours.</div></div><div ng-show="item.show_time" class="update-time"><div ng-show="item.show_time"><div class="text" translate>Last Time Updated</div><div class="time">{{item.last_updated | reldate}}</div></div><div ng-show="item.last_item_update"><div class="text" translate>Last Item Arrived</div><div class="time">{{item.last_item_update | reldate}}</div></div><div ng-show="isIdle()" class="error"><em translate>Channel has gone strangely quiet.</em></div></div><div sd-toggle-box data-title="{{ \'Log Messages\' | translate }}" ng-if="item.show_log_messages"><ul><li ng-repeat="message in log_messages track by message._id"><div>{{message._created | reldate}}</div><div ng-class="{true:\'error\'}[message.name == \'error\']"><b>{{ message.user.display_name || \'System\' }}</b><span sd-activity-message data-activity="message"></span></div><div ng-if="!$last" class="divider"></div></li></ul></div><div class="dropdown strict" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="icon-white icon-dots-vertical"></i></button><ul class="dropdown-menu pull-right"><li class="menu-label" translate>Show</li><li class="divider"></li><li><div><span class="pull-right" sd-switch ng-model="item.show_status" ng-click="setUserPreferences()"></span><label translate>Status</label></div></li><li class="divider"></li><li><div><span class="pull-right" sd-switch ng-model="item.show_ingest_count" ng-click="setUserPreferences()"></span><label translate>Number of items</label><span class="info" translate>in the last 24 hours.</span></div></li><li class="divider"></li><li><div><span class="pull-right" sd-switch ng-model="item.show_time" ng-click="setUserPreferences()"></span><label translate>Time</label><span class="info" translate>last update and last item arrived.</span></div></li><li class="divider"></li><li><div><span class="pull-right" sd-switch ng-model="item.show_log_messages" ng-click="setUserPreferences()"></span><label translate>Log Messages</label><ul><li><div><label translate><input type="radio" name="{{item._id}}_messages" value="all" ng-model="item.log_messages" ng-change="filterLogMessages()"> Show all messages</label></div></li><li><div><label translate><input type="radio" name="{{item._id}}_messages" value="error" ng-model="item.log_messages" ng-change="filterLogMessages()"> Show error messages</label></div></li></ul></div></li><li class="divider"></li><li ng-if="showIngest"><a class="uppercase" ng-href="#/settings/ingest?_id={{item._id}}" translate><i class="icon-pencil"></i>Edit Ingest Source</a></li></ul></div>'),a.put("scripts/superdesk-ingest/views/dashboard/ingest-sources-list.html",'<li class="menu-label" translate>Add Ingest Sources</li><li ng-repeat="item in items"><span>{{item.name}} <span class="pull-right" sd-switch ng-model="item.dashboard_enabled" ng-click="setUserPreferences()"></span></span></li><li class="divider"></li><li ng-if="showIngest"><a ng-href="#/settings/ingest" class="uppercase" translate><i class="icon-pencil"></i>Edit Ingest Sources</a></li>'),a.put("scripts/superdesk-ingest/views/settings/aapConfig.html",'<div class="field"><label translate>Server Folder</label><input type="text" placeholder="{{ \'path to folder\'|translate }}" ng-model="provider.config.path" required ng-change="$parent.setConfig(provider)"></div>'),a.put("scripts/superdesk-ingest/views/settings/afpConfig.html",'<div class="field"><label translate>Server Folder</label><input type="text" placeholder="{{ \'path to folder\'|translate }}" ng-model="provider.config.path" required ng-change="$parent.setConfig(provider)"></div>'),a.put("scripts/superdesk-ingest/views/settings/dpaConfig.html",'<div class="field"><label translate>Server Folder</label><input type="text" placeholder="{{ \'path to folder\'|translate }}" ng-model="provider.config.path" required ng-change="$parent.setConfig(provider)"></div>'),a.put("scripts/superdesk-ingest/views/settings/emailConfig.html",'<div class="field"><label for="email-server" translate>Email Server</label><input type="text" id="email-server" placeholder="{{:: \'Email Server\'|translate }}" ng-model="provider.config.server" required ng-change="$parent.setConfig(provider)"></div><div class="field"><label for="email-server-port" translate>Email Server Port</label><input type="text" id="email-server-port" placeholder="{{:: \'Email Server Port\'|translate }}" ng-model="provider.config.port" required ng-change="$parent.setConfig(provider)"></div><div class="field"><label for="email-server-user" translate>User</label><input type="text" id="email-user" placeholder="{{:: \'Email User\'|translate }}" ng-model="provider.config.user" required ng-change="$parent.setConfig(provider)"></div><div class="field"><label for="email-server-password" translate>Password</label><input type="password" id="email-user=password" placeholder="{{:: \'Email Password\'|translate }}" ng-model="provider.config.password" required ng-change="$parent.setConfig(provider)"></div><div class="field"><label for="email-server-mailbox" translate>Mailbox</label><input type="text" id="email-user=mailbox" placeholder="{{:: \'Email mailbox\'|translate }}" ng-model="provider.config.mailbox" required ng-change="$parent.setConfig(provider)"></div><div class="field"><label for="email-formatted" translate>Formatted Email Parser</label><span sd-switch ng-model="provider.config.formatted"></span></div><div class="field"><label for="email-server-filter" translate>Filter</label><input type="text" id="email-user=filter" placeholder="{{:: \'Email Filter\'|translate }}" ng-model="provider.config.filter" required ng-change="$parent.setConfig(provider)"></div>'),a.put("scripts/superdesk-ingest/views/settings/ftp-config.html",'<div class="field"><label for="ftp_host" translate>Host</label><input type="text" id="ftp_host" placeholder="{{ :: \'FTP Server URL\'|translate }}" ng-model="provider.config.host" required ng-change="$parent.setConfig(provider)"></div><div class="field"><label for="ftp_username" translate>Username</label><input type="text" id="ftp_username" placeholder="{{ :: \'Username\'|translate }}" ng-model="provider.config.username" ng-change="$parent.setConfig(provider)"></div><div class="field"><label for="ftp_password" translate>Password</label><input type="text" id="ftp_password" placeholder="{{ :: \'Password\'|translate }}" ng-model="provider.config.password" ng-change="$parent.setConfig(provider)"></div><div class="field"><label for="ftp_path" translate>Path</label><input type="text" id="ftp_path" placeholder="{{ :: \'FTP Server Path\'|translate }}" ng-model="provider.config.path" ng-change="$parent.setConfig(provider)"></div><div class="field"><label for="ftp_dest_path" translate>Local Path</label><input type="text" id="ftp_dest_path" placeholder="{{ :: \'Local Path\'|translate }}" ng-model="provider.config.dest_path" required ng-change="$parent.setConfig(provider)"></div><div class="field"><label translate>Passive</label><span sd-switch ng-model="provider.config.passive"></span></div>'),a.put("scripts/superdesk-ingest/views/settings/ingest-routing-action.html",'<div class="action-tab"><div class="field"><label><span translate>Fetch</span> <a class="btn btn-info add" ng-click="showNewFetch = true;"><i class="icon-plus-small icon-white"></i></a></label><ul class="pills-list clearfix"><li class="pull-left" ng-repeat="fetchAction in rule.actions.fetch"><div>{{deskLookup[fetchAction.desk].name}} / {{stageLookup[fetchAction.stage].name}} / {{macroLookup[fetchAction.macro].label}}</div><div class="actions"><button ng-click="removeFetch(fetchAction)" title="{{:: \'Remove fetch action\' | translate }}"><i class="icon-trash"></i></button></div></li></ul><div ng-show="showNewFetch" sd-action-picker data-desk="newFetch.desk" data-stage="newFetch.stage" data-macro="newFetch.macro" class="split"></div><button ng-show="showNewFetch" class="btn" ng-click="addFetch();showNewFetch = false" ng-disabled="!newFetch.desk || !newFetch.stage" translate>Add</button> <button ng-show="showNewFetch" class="btn" ng-click="showNewFetch = false" translate>Cancel</button></div><div class="field"><label><span translate>Publish</span> <a class="btn btn-info add" ng-click="showNewPublish = true;"><i class="icon-plus-small icon-white"></i></a></label><ul class="pills-list clearfix"><li class="pill-small pull-left" ng-repeat="publishAction in rule.actions.publish"><div>{{deskLookup[publishAction.desk].name}} / {{stageLookup[publishAction.stage].name}} / {{macroLookup[publishAction.macro].label}}</div><div class="actions"><button ng-click="removePublish(publishAction)" title="{{:: \'Remove publish action\' | translate }}"><i class="icon-trash"></i></button></div></li></ul><div ng-show="showNewPublish" sd-action-picker data-desk="newPublish.desk" data-stage="newPublish.stage" data-macro="newPublish.macro" class="split"></div><button ng-show="showNewPublish" class="btn" ng-click="addPublish();showNewPublish = false" ng-disabled="!newPublish.desk || !newPublish.stage" translate>Add</button> <button ng-show="showNewPublish" class="btn" ng-click="showNewPublish = false" translate>Cancel</button></div><div class="field"><label translate>Exit</label><span sd-switch ng-model="rule.actions.exit"></span></div><div class="field"><label translate>Preserve Desk</label><span sd-switch ng-model="rule.actions.preserve_desk"></span></div></div>'),a.put("scripts/superdesk-ingest/views/settings/ingest-routing-content.html",'<div class="split-content"><div class="header"><h2 translate>Ingest Routing Schemes</h2><button class="btn btn-info pull-right" ng-click="edit({})"><i class="icon-plus-sign icon-white"></i> <span translate>Add New Routing Scheme</span></button></div><div class="content"><ul class="pills-list ruleset-list"><li ng-repeat="scheme in schemes"><div class="header"><div class="name">{{scheme.name}}</div><div class="actions"><button ng-click="edit(scheme)" title="{{:: \'Edit scheme\' | translate }}"><i class="icon-pencil"></i></button> <button ng-click="remove(scheme)" title="{{:: \'Remove scheme\' | translate }}"><i class="icon-trash"></i></button></div></div></li></ul></div></div><div sd-modal data-model="editScheme" class="add-scheme-modal modal-strech modal-big"><div class="modal-header"><a href="" class="close" ng-click="cancel()"><i class="icon-close-small"></i></a><h3 translate ng-show="editScheme._id" translate>Edit Scheme</h3><h3 translate ng-hide="editScheme._id" translate>Add New Scheme</h3></div><div class="modal-body"><form name="schemeForm"><div class="split-content"><div class="header"><fieldset><div class="field"><label for="name" translate>Scheme name</label><input type="text" id="name" class="fullwidth-input" placeholder="{{ \'Scheme name\'|translate }}" ng-model="editScheme.name" required></div></fieldset></div><div class="content"><fieldset><div class="rules"><div class="col-left"><div class="field"><label translate>Scheme rules</label></div><ul sd-sortrules class="pills-list rule-list"><li ng-repeat="schemeRule in editScheme.rules" class="clearfix" ng-class="{highlight: schemeRule === rule}" ng-click="editRule(schemeRule)"><div class="header"><h6>{{schemeRule.name}}</h6></div></li></ul><button class="btn btn-info btn-full" ng-click="addRule()" ng-disabled="!schemeForm.$valid"><i class="icon-plus-sign icon-white"></i> <span translate>Add New Rule</span></button></div><div class="col-right"><div ng-if="rule"><ul class="nav nav-tabs" ng-init="tab = \'general\'"><li ng-class="{active: tab === \'general\'}"><button ng-click="tab = \'general\'" translate>General</button></li><li ng-class="{active: tab === \'filter\'}"><button ng-click="tab = \'filter\'" translate>Filter</button></li><li ng-class="{active: tab === \'action\'}"><button ng-click="tab = \'action\'" translate>Action</button></li><li ng-class="{active: tab === \'schedule\'}"><button ng-click="tab = \'schedule\'" translate>Schedule</button></li></ul><div class="content"><div sd-ingest-routing-general ng-if="tab === \'general\'" data-rule="rule" data-remove-action="removeRule"></div><div sd-ingest-routing-filter ng-if="tab === \'filter\'" data-rule="rule" data-content-filters="contentFilters"></div><div sd-ingest-routing-action ng-if="tab === \'action\'" data-rule="rule"></div><div sd-ingest-routing-schedule ng-if="tab === \'schedule\'" data-rule="rule"></div></div></div></div></div></fieldset></div></div></form></div><div class="modal-footer"><button class="btn btn-default" ng-click="cancel()" translate>Cancel</button> <button class="btn btn-primary" ng-click="save()" ng-disabled="!schemeForm.$valid || !(editScheme.rules.length || rule)" translate>Save</button></div></div>'),a.put("scripts/superdesk-ingest/views/settings/ingest-routing-filter.html",'<div class="filter-tab"><div class="field"><label><span translate>Content Filter</span> <a class="btn btn-info add" ng-click="showNewFilter = true;" ng-show="!selectedFilter"><i class="icon-plus-small icon-white"></i></a></label><ul class="pills-list clearfix" ng-if="selectedFilter"><li class="pull-left"><div class="name right-pad">{{selectedFilter.name}}</div><div class="actions"><button ng-click="clearSelectedFilter()" title="{{:: \'Remove filter\' | translate }}"><i class="icon-trash"></i></button></div></li></ul><div sd-typeahead ng-show="showNewFilter" items="matchingFilters" term="filterSearchTerm" search="searchFilters(term)" select="selectFilter(item);showNewFilter = false"><ul><li typeahead-item="filter" ng-repeat="filter in matchingFilters track by filter._id">{{::filter.name}}</li></ul></div><button ng-show="showNewFilter" class="btn" ng-click="showNewFilter = false" translate>Cancel</button></div></div>'),a.put("scripts/superdesk-ingest/views/settings/ingest-routing-general.html",'<div class="general-tab"><fieldset><div class="field"><label translate>Rule name</label><input type="text" class="half-input" placeholder="{{ \'Rule name\'|translate }}" ng-model="rule.name" required> <button class="btn btn-info" ng-click="remove()"><i class="icon-trash icon-white"></i> <span translate>Delete Rule</span></button></div><div class="field"><label translate>Summary</label><fieldset><div class="multiple summary"><div class="field"><label translate>Filter</label><div ng-show="rule.filter"><span class="title" translate>Name</span>: {{rule.filterName}}</div><div ng-show="!rule.filter"><span translate>[none]</span></div></div><div class="field"><label translate>Action</label><div ng-show="rule.actions.fetch"><span class="title" translate>Fetch</span>:<ul><li ng-repeat="fetchAction in rule.actions.fetch">- {{deskLookup[fetchAction.desk].name}} / {{stageLookup[fetchAction.stage].name}} / {{macroLookup[fetchAction.macro].label}}</li></ul></div><div ng-show="rule.actions.publish"><span class="title" translate>Publish</span>:<ul><li ng-repeat="publishAction in rule.actions.publish">- {{deskLookup[publishAction.desk].name}} / {{stageLookup[publishAction.stage].name}}</li></ul></div><div><span class="title" translate>Exit</span>: <span ng-show="rule.actions.exit" translate>On</span> <span ng-hide="rule.actions.exit" translate>Off</span></div></div><div class="field"><label translate>Schedule</label><div ng-show="rule.schedule.day_of_week"><span class="title" translate>Days</span>:<ul><li ng-repeat="day in rule.schedule.day_of_week">- <span translate>{{dayLookup[day]}}</span></li></ul></div><div><span class="title" translate>Start time</span>: <span translate>{{rule.schedule.hour_of_day_from|insert:2:\':\'}}</span></div><div><span class="title" translate>End time</span>: <span translate>{{rule.schedule.hour_of_day_to|insert:2:\':\'}}</span></div></div></div></fieldset></div></fieldset></div>'),a.put("scripts/superdesk-ingest/views/settings/ingest-routing-schedule.html",'<div class="schedule-tab"><div class="field"><label translate>Days</label><div class="day-filter-box clearfix" sd-weekday-picker data-model="rule.schedule.day_of_week"></div></div><div class="field"><label translate>Start Time (inclusive)</label><span sd-timepicker-alt no-utc-convert="true" data-model="rule.schedule.hour_of_day_from"></span></div><div class="field"><label translate>End Time (exclusive)</label><span sd-timepicker-alt no-utc-convert="true" data-model="rule.schedule.hour_of_day_to"></span></div><div class="field"><label translate>Time Zone</label><div class="control" ng-hide="rule.schedule.time_zone"><ul sd-typeahead items="matchingTimeZones" term="tzSearchTerm" search="searchTimeZones(term)" select="selectTimeZone(item)" always-visible="tzSearchTerm"><li typeahead-item="tz" ng-repeat="tz in matchingTimeZones track by tz">{{ ::tz }}</li><li ng-show="tzSearchTerm && matchingTimeZones.length === 0" class="no-match" translate>(no matches)</li></ul><p class="discreet" translate>If not set, the UTC+0 time zone is assumed.</p></div><ul class="pills-list clearfix" ng-show="rule.schedule.time_zone"><li class="pull-left"><div class="name right-pad">{{rule.schedule.time_zone}}</div><div class="actions"><button ng-click="clearSelectedTimeZone()" title="{{:: \'Clear\' | translate }}"><i class="icon-trash"></i></button></div></li></ul></div></div>'),a.put("scripts/superdesk-ingest/views/settings/ingest-rules-content.html",'<div class="split-content"><div class="header"><h2 translate>Ingest Rule sets</h2><button class="btn btn-info pull-right" ng-click="edit({})"><i class="icon-plus-sign icon-white"></i> <span translate>Add New Ruleset</span></button></div><div class="content"><ul class="pills-list ruleset-list"><li ng-repeat="ruleset in rulesets"><div class="header"><div class="name">{{ruleset.name}}</div><div class="actions"><button ng-click="edit(ruleset)" title="{{:: \'Edit rule set\' | translate }}"><i class="icon-pencil"></i></button> <button ng-click="remove(ruleset)" title="{{:: \'Remove rule set\' | translate }}"><i class="icon-trash"></i></button></div></div></li></ul></div></div><div sd-modal data-model="editRuleset" class="ruleset-modal modal-strech"><div class="modal-header"><a href="" class="close" ng-click="cancel()"><i class="icon-close-small"></i></a><h3 translate ng-show="editRuleset._id" translate>Edit Rule set</h3><h3 translate ng-hide="editRuleset._id" translate>Add New Rule Set</h3></div><div class="modal-body"><form name="rulesetForm"><div class="split-content"><header><input type="text" class="input-xlarge" placeholder="{{ \'Rule set name\'|translate }}" ng-model="editRuleset.name" required> <button class="btn btn-info pull-right" ng-disabled="!rulesetForm.$valid" ng-click="addRule()"><i class="icon-plus-small icon-white"></i> {{:: \'Add rule\' | translate}}</button></header><div class="content"><ul sd-sortrules class="rule-list"><li ng-repeat="rule in editRuleset.rules"><div class="order">#{{$index}}</div><fieldset><div class="multiple"><div class="field"><input type="text" placeholder="old" ng-model="rule.old" required></div><div class="field"><input type="text" placeholder="new" ng-model="rule.new"></div></div></fieldset><div class="actions"><button ng-click="removeRule(rule)"><i class="icon-trash"></i></button></div></li></ul><p ng-if="!editRuleset.rules" translate>No rules defined in a set.</p></div></div></form></div><div class="modal-footer"><button class="btn btn-default" ng-click="cancel()" translate>Cancel</button> <button class="btn btn-primary" ng-click="save(editRuleset)" ng-disabled="!rulesetForm.$valid" translate>Save</button></div></div>'),a.put("scripts/superdesk-ingest/views/settings/ingest-sources-content.html",'<div class="split-content"><div class="header"><h2 translate>Ingest sources</h2><button class="btn btn-info pull-right" ng-click="edit()"><i class="icon-plus-sign icon-white"></i> <span translate>Add New Source</span></button></div><div class="content"><ul class="pills-list provider-list"><li ng-repeat="provider in providers._items" class="clearfix"><div class="header"><h6>{{ provider.name }}<span class="label offProvider" ng-if="provider.is_closed" translate>closed</span></h6><div class="last-updated" ng-if="provider.last_updated"><span translate>Last updated</span> {{ provider.last_updated | reldate }}</div><div class="actions"><button ng-click="gotoIngest(provider.source)" title="{{:: \'Go to items\' | translate }}"><i class="icon-external"></i> <button ng-click="edit(provider)" title="{{:: \'Edit source\' | translate }}"><i class="icon-pencil"></i></button> <button ng-click="remove(provider)" ng-show="!provider.last_item_update" title="{{:: \'Remove source\' | translate }}"><i class="icon-trash"></i></button></button></div></div></li></ul></div></div><div sd-modal data-model="provider" class="ingestsource-modal moz-scroll-fix modal-large"><div class="modal-header"><a href="" class="close" ng-click="cancel()"><i class="icon-close-small"></i></a><h3 translate ng-show="provider._id" translate>Edit Source "{{ origProvider.name }}"</h3><h3 translate ng-hide="provider._id" translate>Add New Source</h3></div><div class="modal-body"><form name="editForm" ng-submit="save()"><fieldset><tabset><tab heading="General" class="TabContent"><div class="field"><label class="right">{{:: \'Status\' | translate }} <span tooltip="{{ provider.is_closed ? \'Open\' : \'Close\'  | translate }}" tooltip-placement="right"><span sd-switch-inverted ng-model="provider.is_closed"></span></span></label></div><div class="field"><label for="provider-type" translate>Source Type</label><select id="provider-type" required ng-model="provider.type" ng-options="key as val.label for (key, val) in types"></select></div><div class="field"><label for="provider-name" translate>Provider Name</label><input type="text" id="provider-name" ng-model="provider.name" required></div><div class="field"><label for="source-name" translate>Source Name</label><input type="text" id="source-name" ng-model="provider.source" required></div><div class="field"><label for="schedule-minutes" translate>Update every</label><select id="schedule-minutes" class="input-mini" ng-model="provider.update_schedule.minutes" ng-options="min as min for min in minutes"></select><span translate>min</span><select class="input-mini" ng-model="provider.update_schedule.seconds" ng-options="sec as sec for sec in seconds"></select><span translate>sec</span></div><div class="field"><label for="idle-hours" translate>Notify when idle for more than</label><select id="idle-hours" class="input-mini" ng-model="provider.idle_time.hours" ng-options="hrs as hrs for hrs in hours"></select><span translate>hrs</span><select id="idle-minutes" class="input-mini" ng-model="provider.idle_time.minutes" ng-options="min as min for min in minutes"></select><span translate>min</span></div><div sd-content-expiry data-item="provider" data-preview="false" data-expiryfield="content_expiry" data-header="Content Expiry"></div><div class="field credentials"><div ng-include="types[provider.type].templateUrl"></div></div><div class="field"><label for="ruleset" translate>Ruleset</label><select id="ruleset" ng-model="provider.rule_set" ng-options="r._id as r.name for r in rulesets"><option value=""></option></select></div><div class="field"><label for="routing" translate>Routing Scheme</label><select id="routing" ng-model="provider.routing_scheme" ng-options="rs._id as rs.name for rs in routingScheme"><option value=""></option></select></div></tab><tab heading="Notification" class="TabContent"><div class="field"><label>{{ :: \'Update\' | translate}} <span sd-switch ng-model="provider.notifications.on_update"></span></label></div><div class="field"><label>{{ :: \'Close\' | translate}} <span sd-switch ng-model="provider.notifications.on_close"></span></label></div><div class="field"><label>{{ :: \'Open\' | translate}} <span sd-switch ng-model="provider.notifications.on_open"></span></label></div><div class="field"><label>{{ :: \'Error\' | translate}} <span sd-switch ng-model="provider.notifications.on_error"></span></label></div></tab><tab heading="Critical Errors" class="TabContent" ng-show="provider.type" ng-click="fetchSourceErrors()"><div class="content privileges-settings"><div class="horizontal"><div class="roles-list"><div ng-repeat="(key, val) in provider.source_errors | orderBy:name" class="field"><label>{{key}}: {{val}} <span sd-switch ng-model="provider.critical_errors[key]"></span></label></div></div></div></div></tab></tabset></fieldset></form></div><div class="modal-footer"><button class="btn btn-default" ng-click="cancel()" translate>Cancel</button> <button class="btn btn-primary" ng-click="save()" ng-disabled="!editForm.$valid" translate>Save</button></div></div>'),a.put("scripts/superdesk-ingest/views/settings/reutersConfig.html",'<div class="field"><label for="reuters_username" translate>Username</label><input type="text" id="reuters_username" placeholder="{{ \'username\'|translate }}" ng-model="provider.config.username" required ng-change="$parent.setConfig(provider)"></div><div class="field"><label for="reuters_password" translate>Password</label><input type="text" id="reuters_password" placeholder="{{ \'password\'|translate }}" ng-model="provider.config.password" required ng-change="$parent.setConfig(provider)"></div>'),
a.put("scripts/superdesk-ingest/views/settings/rssConfig.html",'<div class="field"><label for="rss_url" translate>Host</label><input type="url" id="rss_url" placeholder="{{:: \'RSS Feed URL\'|translate }}" ng-model="provider.config.url" required ng-change="$parent.setConfig(provider)"></div><div class="field"><label for="auth_required" translate><input type="checkbox" id="auth_required" ng-model="provider.config.auth_required" ng-change="$parent.setRssConfig(provider)">Requires Authentication</label></div><fieldset ng-show="provider.config.auth_required" class="separated"><legend translate>Authentication Info</legend><div class="field"><label for="feed_username" translate>Username</label><input type="text" id="feed_username" placeholder="{{:: \'Username\'|translate }}" ng-model="provider.config.username" ng-required="provider.config.auth_required" ng-change="$parent.setConfig(provider)"></div><div class="field"><label for="feed_password" translate>Password</label><input type="password" id="feed_password" placeholder="{{:: \'Password\'|translate }}" ng-model="provider.config.password" ng-required="provider.config.auth_required" ng-change="$parent.setConfig(provider)"></div></fieldset><fieldset class="separated rss-config"><legend translate>Content Field Aliases</legend><div ng-show="fieldAliases.length == 0">{{:: \'No field aliases defined.\'|translate }}</div><div class="multiple header" ng-show="fieldAliases.length > 0"><div class="field"><label for="" translate>Content Field Name</label></div><div class="field"><label for="" translate>Field Alias</label></div><div class="field empty"></div></div><div class="multiple" ng-repeat="item in fieldAliases"><div class="field"><select ng-options="fieldName for fieldName in\n                      (availableFieldOptions(item.fieldName) | orderBy)" ng-model="item.fieldName" ng-change="fieldSelectionChanged()"></select></div><div class="field"><input type="text" id="" placeholder="{{:: \'Enter field alias\'|translate }}" ng-model="item.alias"></div><button type="button" class="btn btn-small btn-remove" ng-click="removeFieldAlias($index)" tooltip="{{:: \'Remove\'|translate}}" tooltip-placement="bottom" tooltip-popup-delay="500"><i class="icon-close-small"></i></button></div><div ng-show="fieldAliases.length < contentFields.length"><button type="button" class="btn btn-info btn-small" ng-click="addFieldAlias()" tooltip="{{:: \'Add alias\'|translate}}" tooltip-placement="right" tooltip-popup-delay="500"><i class="svg-icon-plus"></i></button></div></fieldset>'),a.put("scripts/superdesk-ingest/views/settings/searchConfig.html",'<div class="field"><label for="reuters_username" translate>Username</label><input type="text" id="reuters_username" placeholder="{{ \'username\'|translate }}" ng-model="provider.config.username" ng-change="$parent.setConfig(provider)"></div><div class="field"><label for="reuters_password" translate>Password</label><input type="text" id="reuters_password" placeholder="{{ \'password\'|translate }}" ng-model="provider.config.password" ng-change="$parent.setConfig(provider)"></div>'),a.put("scripts/superdesk-ingest/views/settings/settings.html",'<div id="ingest-settings" sd-settings-view ng-init="tab = \'sources\'"><div class="split-content"><ul class="nav nav-tabs"><li ng-class="{active: tab === \'sources\'}" ng-show="showIngest"><button ng-click="tab = \'sources\'" translate>Sources</button></li><li ng-class="{active: tab === \'rulesets\'}" ng-show="showRuleset"><button ng-click="tab = \'rulesets\'" translate>Rule sets</button></li><li ng-class="{active: tab === \'routing\'}" ng-show="showRouting"><button ng-click="tab = \'routing\'" translate>Routing</button></li></ul><div class="content"><div ng-if="tab === \'sources\'" sd-ingest-sources-content></div><div ng-if="tab === \'rulesets\'" sd-ingest-rules-content></div><div ng-if="tab === \'routing\'" sd-ingest-routing-content></div></div></div></div>'),a.put("scripts/superdesk-ingest/views/settings/teletypeConfig.html",'<div class="field"><label translate>Server Folder</label><input type="text" placeholder="{{ \'path to folder\'|translate }}" ng-model="provider.config.path" required ng-change="$parent.setConfig(provider)"></div>'),a.put("scripts/superdesk-legal-archive/views/legal_archive.html",'<section class="search main-section search-page-container" ng-class="{\'sidebar-open\': openAdvanceSearch}"><div class="archive-sidebar"><!-- Search widget --><div class="header"><div class="icon"><i class="icon-filter-large"></i></div><ul><li translate>Search</li></ul><div class="doopen" ng-click="openAdvanceSearch = false"><i class="icon-backward-thin"></i></div></div><div class="content"><div data-context="context"><form><fieldset><div class="field"><label for="search-story-id">{{:: \'Story Id\' | translate}}</label><div class="control"><input type="text" id="search-story-id" ng-model="criteria._id" tabindex="1"></div></div><div class="field"><label for="search-headline">{{:: \'Headline\' | translate}}</label><div class="control"><input type="text" id="search-headline" ng-model="criteria.headline" tabindex="2"></div></div><div class="field"><label for="search-slugline">{{:: \'Slugline\' | translate}}</label><div class="control"><input type="text" id="search-slugline" ng-model="criteria.slugline" tabindex="3"></div></div><div class="field"><label for="search-storytext">{{:: \'Story Text\' | translate}}</label><div class="control"><input type="text" id="search-storytext" ng-model="criteria.body_html" tabindex="4"></div></div><div class="field" sd-date-param data-location="criteria.published_before"><label for="published_before" translate>Published before</label><div sd-datepicker id="published_before" ng-model="criteria.published_before"></div></div><div class="field" sd-date-param data-location="criteria.published_after"><label for="published_after" translate>Published after</label><div sd-datepicker id="published_after" ng-model="criteria.published_after"></div></div></fieldset></form><div class="actions"><button class="btn btn-info pull-right" ng-click="search()" tabindex="7" translate>Go</button> <button class="btn btn-info pull-right" ng-click="clear()" tabindex="8" translate>Clear</button></div></div></div></div><div class="archive-content"><div class="preview-layout" ng-class="{closed: !selected.preview}"><div class="list-pane {{ view || \'list\' }}-view"><header class="search-page-header"><div class="filter-trigger" ng-click="openAdvanceSearch = true" ng-class="{hidden: openAdvanceSearch}"><i class="icon-filter-large"></i></div><div sd-legal-item-sortbar></div><div sd-pagination data-items="items"></div><div class="searchbar-flex-handler"></div><div class="view-select"><button tooltip="{{ :: \'switch to grid view\' | translate }}" tooltip-placement="left" ng-show="view !== \'mgrid\'" ng-click="setview(\'mgrid\')"><i class="icon-th"></i></button> <button tooltip="{{ :: \'switch to list view\' | translate }}" tooltip-placement="left" ng-show="view !== \'compact\'" ng-click="setview(\'compact\')"><i class="icon-th-list"></i></button></div></header><div class="content" sd-updown data-items="items._items" data-select="preview(item)"><div class="loading-indicator" ng-show="loading" translate>loading</div><div sd-shadow><ul class="{{view}}-view list-view"><li ng-repeat="item in items._items" class="list-item-view" ng-class="{active: item === selected.preview || item._id === selected.fetch}"><div sd-media-box></div></li></ul></div></div></div><div id="item-preview" class="preview-pane content-item-preview" ng-show="selected.preview" ng-init="tab = \'content\'"><header><ul class="nav nav-tabs"><li ng-class="{active: tab === \'content\'}"><button ng-click="tab = \'content\'"><span translate>Content</span></button></li><li ng-class="{active: tab === \'metadata\'}"><button ng-click="tab = \'metadata\'"><span translate>Metadata</span></button></li></ul><button ng-click="preview(null)" class="close-preview"><i class="icon-close-small"></i></button></header><div class="content" ng-if="selected.preview"><div ng-if="tab === \'content\'" sd-media-preview></div><div ng-if="tab === \'metadata\'" sd-media-metadata data-item="selected.preview"></div></div></div></div></div></section><div sd-media-view data-item="selected.view" data-items="items._items" ng-if="selected.view" data-close="closeLightbox()"></div>'),a.put("scripts/superdesk-monitoring/views/highlights-view.html","<div sd-monitoring-view data-type=\"'highlights'\"></div>"),a.put("scripts/superdesk-monitoring/views/item-actions-menu.html",'<div class="item-actions-menu more-activity-dropdown dropdown-big" dropdown dropdown-append-to-body on-toggle="toggleActions(open)" sd-dropdown-position-right><button class="more-activity-toggle condensed dropdown-toggle" ng-click="stopEvent($event)" ng-dblclick="stopEvent($event)" ng-show="active || open" dropdown-toggle><i class="icon-dots-vertical"></i></button><ul class="dropdown dropdown-menu more-activity-menu" ng-class="{open: open}"><li><div class="menu-label" translate>Actions</div></li><li class="divider"></li><li ng-repeat="activity in actions.default" sd-activity-item></li><li class="divider" ng-if="actions.packaging"></li><li ng-if="actions.packaging"><div class="menu-label" translate>Packaging</div></li><li ng-repeat="activity in actions.packaging" sd-activity-item></li><li class="divider" ng-if="actions.highlights"></li><li ng-if="actions.highlights"><div class="menu-label" translate>Highlights</div></li><li ng-repeat="activity in actions.highlights" sd-activity-item></li><li ng-if="actions.corrections" class="divider"></li><li ng-if="actions.corrections"><div class="menu-label" translate>Corrections</div></li><li ng-repeat="activity in actions.corrections" sd-activity-item></li></ul></div>'),a.put("scripts/superdesk-monitoring/views/monitoring-group-header.html",'<div class="stage-header clearfix"><span class="stage-name"><a href="" ng-click="viewSingleGroup(group)">{{ :: group.header }} <span ng-show="group.subheader">/ {{ :: group.subheader }}</span> {{ :: group.type}}</a></span> <span class="label label-total">{{ total }}</span></div>'),a.put("scripts/superdesk-monitoring/views/monitoring-group.html",'<div class="stage"><div sd-monitoring-group-header ng-if="group.header"></div><div class="stage-content group" ng-class="{limited: limited}" tabindex="0"><ul class="inline-content-items compact-view list-view" ng-class="{\'list-without-items\' : total === 0}"><li ng-if="total === 0" translate>There are currently no items in this group</li><li ng-repeat="item in items track by uuid(item)" class="list-item-view" tabindex="0"><div sd-media-box data-view-type="viewType" ng-class="{active: item === selected, archived: item.archived || item.created, locked: lock.isLocked}" ng-dblclick="edit(item, true)" ng-click="select(item)"></div></li></ul></div></div>'),a.put("scripts/superdesk-monitoring/views/monitoring-view.html",'<div class="monitoring" ng-controller="AggregateCtrl as aggregate"><div class="subnav"><span class="flat-searchbar monitoring-backlink" ng-if="monitoring.singleGroup"><button tooltip="{{ :: \'Back to original view\' | translate }}" tooltip-placement="right" class="backlink" ng-click="monitoring.viewSingleGroup(null)"></button><div class="separator-handler"></div></span><div class="flat-searchbar monitoring-flat-searchbar" ng-class="{extended: aggregate.monitoringSearch}"><div class="search-handler"><label for="search-input" class="trigger-icon" ng-click="aggregate.monitoringSearch = !aggregate.monitoringSearch"></label><input id="search-input" type="text" placeholder="{{ :: \'Search\' | translate }}" ng-model="query" ng-model-options="{debounce: 500}" ng-change="aggregate.search(query)"> <button class="search-close" ng-click="aggregate.search(query = null)" ng-class="{visible: query}"><i class="icon-close-small"></i></button></div><div class="separator-handler"></div></div><h3 class="page-nav-title"><span ng-if="!monitoring.singleGroup && type === \'monitoring\'" translate>Monitoring</span> <span ng-if="type === \'spike\'" translate>Spiked Items</span> <span ng-if="type === \'personal\'" translate>Personal Items</span><div ng-if="type === \'highlights\'" sd-highlight-label data-highlight="monitoring.queryParam.highlight"></div><span ng-if="monitoring.singleGroup">{{monitoring.singleGroup.header}} / {{monitoring.singleGroup.subheader}} {{monitoring.singleGroup.type}}</span></h3><div sd-multi-action-bar></div><div class="button-stack right-stack"><div class="pull-left-10x" ng-if="type === \'highlights\'" sd-create-highlights-button data-highlight="monitoring.queryParam.highlight"></div><div class="dropdown navbtn strict" ng-if="type === \'monitoring\'" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots-vertical"></i></button><ul class="dropdown-menu pull-right"><li><button ng-click="aggregate.edit()"><i class="icon-settings"></i> {{ :: \'Settings\' | translate }}</button></li></ul></div><div class="dropdown navbtn strict" ng-if="!state.opened" title="{{ :: \'Create\' | translate }}" dropdown><button class="dropdown-toggle sd-create-btn" dropdown-toggle></button><ul class="dropdown-menu pull-right" sd-content-create></ul></div></div></div><section class="main-section search-page-container" ng-class="monitoring.state"><div class="subnav"><ul class="filtertype-icon-list"><li ng-repeat="fileType in aggregate.fileTypes" ng-click="aggregate.setFileType(fileType)" ng-class="{active: aggregate.hasFileType(fileType)}" title="{{fileType}}"><a href="" ng-if="fileType==\'all\'" class="filetype-icon-{{fileType}}" translate>all</a> <i ng-if="fileType!=\'all\'" class="filetype-icon-{{fileType}}"></i></li></ul><div sd-item-sortbar></div></div><div class="preview-layout monitoring-preview-layout"><div class="content-list" ng-if="!aggregate.loading"><div ng-if="!monitoring.singleGroup && type === \'monitoring\'"><div ng-repeat="group in aggregate.groups track by group._id" sd-monitoring-group data-group="group" data-num-items="group.max_items" data-view-type="group.type === \'deskOutput\' ? \'deskOutput\' : \'monitoring\'"></div></div><div ng-if="type === \'spike\'"><div ng-repeat="group in aggregate.spikeGroups track by group._id | orderBy: name" sd-monitoring-group data-group="group" data-view-type="\'spiked\'"></div></div><div ng-if="monitoring.singleGroup"><div sd-monitoring-group class="single-group" data-group="monitoring.singleGroup" data-num-items="10" data-view-type="\'single_monitoring\'"></div></div><div ng-if="type === \'personal\'"><div sd-monitoring-group data-group="{\'type\': \'personal\', \'query\': query, \'fileType\': aggregate.getSelectedFileTypes()}"></div></div><div ng-if="type === \'highlights\'"><div sd-monitoring-group data-group="{\'type\': \'highlights\', \'query\': query, \'fileType\': aggregate.getSelectedFileTypes()}" data-view-type="\'highlights\'"></div></div></div><div sd-item-preview data-item="monitoring.previewItem" data-close="monitoring.closePreview()"></div><div sd-send-item data-mode="{{type}}"></div></div><div sd-aggregate-settings data-modal-active="aggregate.modalActive" data-desks="aggregate.desks" data-desk-stages="aggregate.deskStages" data-searches="aggregate.searches" data-desk-lookup="aggregate.deskLookup" data-stage-lookup="aggregate.stageLookup" data-search-lookup="aggregate.searchLookup" data-groups="aggregate.groups" data-edit-groups="aggregate.editGroups" data-onclose="aggregate.refreshGroups()"></div></section></div>'),a.put("scripts/superdesk-monitoring/views/monitoring.html",'<div sd-monitoring-view data-type="\'monitoring\'" data-state="authoring.state"></div>'),a.put("scripts/superdesk-monitoring/views/personal.html","<div sd-monitoring-view data-type=\"'personal'\"></div>"),a.put("scripts/superdesk-monitoring/views/spike-monitoring.html","<div sd-monitoring-view data-type=\"'spike'\"></div>"),a.put("scripts/superdesk-packaging/views/add-to-package.html","<div sd-add-package-dropdown></div>"),a.put("scripts/superdesk-packaging/views/sd-add-package-dropdown.html",'<ul><li ng-repeat="group in groupList track by $index"><button option="{{::group}}" ng-click="select(group);"><i class="icon-plus"></i>{{::group}}</button></li></ul>'),a.put("scripts/superdesk-packaging/views/sd-package-edit.html",'<header class="package-header"><div class="inputs"><div class="field" ng-class="{\'limit-error\': item.slugline.length > limits.slugline}"><label translate>Slugline</label><span sd-character-count data-item="item.slugline" data-limit="limits.slugline"></span> <input type="text" class="keyword" id="slugline" ng-model="item.slugline" ng-change="autosave(item)" ng-if="_editable" ng-trim="false"><div class="keyword" ng-if="!_editable">{{item.slugline}}</div></div><div class="field" ng-class="{\'limit-error\': item.headline.length > limits.headline}"><label translate>Headline</label><span sd-character-count data-item="item.headline" data-limit="limits.headline"></span><textarea class="title" id="title" sd-auto-height ng-model="item.headline" ng-change="autosave(item)" ng-if="_editable" ng-trim="false"></textarea><div class="title" ng-if="!_editable">{{item.headline}}</div></div></div></header><div class="field composite-preview"><div sd-package-items-edit ng-model="item.groups" ng-if="_editable"></div><div sd-package data-item="item" class="composite-preview" ng-if="!_editable"></div></div><div class="field body" ng-if="item.package_type===\'takes\' && _isInPublishedStates"><label translate>Body</label><span sd-word-count data-item="item.body_html" data-html="true"></span><div class="text-editor" sd-html-preview="item.body_html"></div></div>'),a.put("scripts/superdesk-packaging/views/sd-package-item-preview.html",'<div class="item {{ :: data.type }}" ng-class="{locked: isLocked, published: isPublished}"><div class="info"><figure class="icons-holder" ng-if="data.type === \'composite\' || data.type === \'text\'"><i class="filetype-icon-large-{{ :: data.type }}"></i></figure><div class="holder" ng-if="data.type !== \'composite\' && data.type !== \'text\'"><div class="loading" ng-show="data == null && error == null"></div><div class="error-icon" ng-show="error != null"><i class="filetype-icon-large-{{data.type}}"></i></div><div ng-if="data.type === \'picture\'" sd-item-rendition data-item="data" data-rendition="thumbnail"></div><audio ng-if="data.type === \'audio\'" controls sd-sources data-renditions="data.renditions" ng-show="data"></audio><div ng-if="data.type === \'video\'"><i class="filetype-icon-large-video"></i></div></div><div class="item-headline"><div ng-show=":: data.headline || data.slugline || data.description">{{ :: data.headline || data.slugline || data.description}}</div><div ng-hide=":: data.headline || data.slugline || data.description" translate>Blank headline received</div></div><a ng-if="data.guid && !error" ng-click="open(data)" title="{{ :: \'Open item\' | translate }}" class="open-item"><i class="icon-external"></i></a><div class="package-details" ng-if="data.type === \'composite\'"><i class="svg-icon-right"></i></div><div class="alert-error" ng-show="error" translate>Problems occurred while fetching data.</div></div></div>'),a.put("scripts/superdesk-packaging/views/sd-package-item.html",'<div ng-repeat="v in item" ng-if="v.childId !== \'_items\'"><div sd-package-item-proxy data-id="v.childId" data-item="v.childData[0]" data-setitem="setitem({selected: selected})" data-mode="mode"></div></div><div ng-if="id && id !== \'root\' && mode === \'tree\'" sd-toggle-box data-title="{{id}}" data-open="true"><ul><li ng-repeat="child in item.childData"><div sd-package-ref data-item="child" data-setitem="setitem({selected: selected})"></div></li></ul></div><div ng-if="id && id !== \'root\' && mode === \'flat\'"><div ng-repeat="child in item.childData"><div sd-package-ref data-item="child" data-setitem="setitem({selected: selected})"></div></div></div>'),a.put("scripts/superdesk-packaging/views/sd-package-items-edit.html",'<div class="package-edit-container"><ul class="package-edit" sd-sort-package-items><li ng-repeat="group in list"><div class="group-info"><h6>{{ group.id }}</h6></div><ul id="{{ group.id | uppercase}}" class="package-edit-items clearfix" data-group="{{group.id}}"><li class="sort-item clearfix" ng-repeat="item in group.items"><div class="item-container"><div sd-package-item-preview></div><button class="remove" ng-click="remove(group.id, item.residRef)"><i class="icon-close-small"></i></button></div></li><li class="fake clearfix"><div></div></li></ul></li></ul></div>'),a.put("scripts/superdesk-packaging/views/sd-package-ref.html",'<div ng-click="setitem({selected: item})"><div sd-package-item-preview></div></div>'),a.put("scripts/superdesk-packaging/views/sd-package.html",'<div sd-package-item data-id="\'root\'" data-item="tree" data-setitem="setitem({selected: selected})" data-mode="mode"></div>'),a.put("scripts/superdesk-packaging/views/search-widget-preview.html",'<div class="preview-container" ng-init="contenttab = true"><header><ul class="nav nav-tabs"><li ng-class="{active: contenttab}"><button ng-click="contenttab = true" translate>Content</button></li><li ng-class="{active: !contenttab}"><button ng-click="contenttab = false" translate>Metadata</button></li></ul><button ng-click="preview()" class="close-preview"><i class="icon-close-small"></i></button></header><div class="content-item-preview" ng-if="selected"><div class="content" ng-if="contenttab" sd-media-preview-widget data-item="selected"></div><div ng-if="!contenttab" sd-media-metadata data-item="selected"></div></div></div>'),a.put("scripts/superdesk-packaging/views/search.html",'<div class="content-search" ng-class="{extended: selected}" ng-controller="SearchWidgetCtrl"><div class="search-container"><div class="search-box"><input type="text" placeholder="{{ \'Search\'|translate }}" ng-model="query"><div ng-show="highlight" align="right" left sd-search-highlights data-highlight="highlight"></div></div><div class="filter-list"><div class="dropdown group-select pull-right" ng-if="multiSelected.length" dropdown><div class="btn dropdown-toggle" dropdown-toggle><i class="icon-package-plus"></i> {{\'Add items\' | translate}}</div><ul class="dropdown-menu pull-right"><li ng-repeat="t in groupList"><button option="{{ t | uppercase  }}" ng-click="addMultiItemsToGroup(t);" translate>{{ t | uppercase }}</button></li></ul></div></div><div class="content-list"><ul><li ng-repeat="pitem in contentItems" ng-class="{active: pitem === selected, added: itemInPackage(pitem), \'multi-select\': pitem.multi}" ng-if="pitem._id !== item._id" sd-widget-prevent-preview><div class="select-box"><i class="filetype-icon-{{pitem.type}}"></i> <span ng-if="!itemInPackage(pitem)" ng-click="addToSelected(pitem)" class="select" sd-check ng-model="pitem.multi"></span></div><div class="state-label state-{{pitem.state}}">{{pitem.state}}</div><p><span class="keyword" ng-if="pitem.slugline">{{ pitem.slugline }}</span>{{pitem.headline || pitem.type}}</p><ul class="item-functions" ng-if="!itemInPackage(pitem) && !pitem.multi"><li class="dropdown group-select" dropdown><button title="Add to package" class="dropdown-toggle" dropdown-toggle><i class="icon-package-plus"></i></button><ul class="dropdown-menu pull-right"><li ng-repeat="t in groupList"><button option="{{ t | uppercase  }}" ng-click="addItemToGroup(t, pitem);">{{ t | uppercase }}</button></li></ul></li></ul></li></ul></div></div><div ng-include="\'scripts/superdesk-packaging/views/search-widget-preview.html\'"></div></div>'),a.put("scripts/superdesk-planning/views/assignee-box.html",'<div class="assignee-box" ng-click="open = true;"><div class="assignee" ng-class="{\'open\': open}" ng-init="hoveractive = false"><div class="toggle" ng-mouseenter="hoveractive = true" ng-mouseleave="hoveractive = false"><div class="avatar" ng-class="{desk : desk && !user }"><img sd-user-avatar data-src="user.picture_url" data-initials="user.display_name"></div><div class="add"><i class="icon-plus-large icon-white"></i></div></div><div class="tooltip right fade in" ng-show="hoveractive && !open"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-show="user || desk"><p class="dark" translate>Assigned to:</p><p class="name">{{desk.name}}<span ng-show="user">/ {{user.display_name}}</span></p><p translate>Click to reassign</p></div><div class="tooltip-inner simple" ng-show="!user && !desk"><p translate>Click to assign</p></div></div><div class="dropdown-content" ng-show="open" ng-click=" $event.stopPropagation();"><div class="dropdown desk-select" dropdown><button class="dropdown-toggle" dropdown-toggle><span ng-show="!desk.name" translate>Select desk</span> <span ng-show="desk.name">{{desk.name}}</span> <b class="caret"></b></button><div class="dropdown-menu"><ul><li ng-show="desk"><button ng-click="desk = null; user = null" translate>Select desk</button></li><li ng-repeat="desk in desksService.desks._items"><button ng-click="$parent.desk = desk; $parent.user = null;">{{desk.name}}</button></li></ul></div></div><div class="user-select"><div ng-show="desk"><form><label for="assignee-search" translate>Person</label><input type="text" name="assignee-search" ng-model="search" class="input-large searchbox"></form><div class="search-result"><ul class="users-list-embed"><li ng-repeat="user in desksService.deskMembers[desk._id] | filter:search" ng-click="$parent.user = user" ng-class="{\'active\': $parent.user === user}"><figure class="avatar small"><img sd-user-avatar data-src="user.picture_url"></figure><div class="name">{{user.display_name}}</div><i ng-show="$parent.user === user" class="icon-close-small icon-white" ng-click="$parent.user = null; $event.stopPropagation();"></i></li></ul></div></div></div><div class="footer"><span class="clear pull-left" ng-click="desk = null; user = null" ng-show="desk || user" translate>Clear</span> <button class="btn btn-info pull-right" ng-disabled="!desk" ng-click="assign()" translate>Assign</button> <button class="btn pull-right" ng-click="open = false;  $event.stopPropagation();" translate>Cancel</button></div></div></div><div class="assignee-name" ng-hide="hideAssignee"><span ng-show="desk">{{desk.name}} :</span> <span ng-show="user">{{user.display_name}}</span> <span ng-hide="user" translate>Unassigned</span></div></div>'),a.put("scripts/superdesk-planning/views/coverage-type.html",'<div class="coverage-type dropdown" dropdown><button class="dropdown-toggle" dropdown-toggle>{{ coverage.coverage_type }}<b class="caret"></b></button><ul class="dropdown-menu"><li ng-repeat="type in coverageTypes"><button ng-click="coverage.coverage_type = type">{{ type }}</button></li></ul></div>'),a.put("scripts/superdesk-planning/views/item-preview.html",'<div sd-shadow><div class="time-info">{{ \'Created\' | translate }} <time>{{ item._created | reldate }}</time></div><form name="itemEditForm" ng-submit="itemEditForm.$valid && save()"><div class="action-buttons clearfix" ng-class="{show: dirty}"><button type="submit" class="btn btn-info pull-right" ng-disabled="itemEditForm.$invalid || !dirty" translate>Save</button> <button type="button" class="btn pull-right" ng-click="cancel()" ng-disabled="!dirty" translate>Cancel</button></div><textarea class="title" sd-auto-height ng-model="item.headline" placeholder="{{\'Add title\' | translate}}" required></textarea><textarea class="description" sd-auto-height ng-model="item.description_text" placeholder="{{\'Add description\' | translate}}"></textarea></form><div class="coverage-box"><button class="toggle-add" ng-click="addCoverage()"><i class="icon-plus"></i><span translate>Add new</span></button><div sd-toggle-box data-title="{{ \'Coverage\' | translate }}" data-open="true"><div class="coverage" ng-show="coverage"><div class="info"><div sd-assignee-box data-desk-id="coverage.assigned_desk" data-hide-assignee="true" data-user-id="coverage.assigned_user"></div><div class="assignee-name"><span ng-show="coverage.assigned_user">{{userLookup[coverage.assigned_user].display_name}}</span><span ng-hide="coverage.assigned_user" translate>Unassigned</span></div><div sd-coverage-type></div><div class="dropdown more-actions" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots"></i></button><ul class="dropdown-menu pull-right"><!--<li><button><i class="icon-trash"></i><span translate>Remove coverage</span></button></li>--></ul></div></div><textarea class="description" sd-auto-height ng-model="coverage.ed_note" placeholder="{{\'Add description\' | translate}}"></textarea><button class="btn" ng-click="saveCoverage()" ng-disabled="!isDirty(coverage)">Save</button> <button class="btn" ng-click="cancelCoverage()">Cancel</button></div><div class="coverage" ng-repeat="coverage in coverages._items"><div class="info"><div sd-assignee-box data-desk-id="coverage.assigned_desk" data-hide-assignee="true" data-user-id="coverage.assigned_user"></div><div class="assignee-name"><span ng-show="coverage.assigned_user">{{userLookup[coverage.assigned_user].display_name}}</span><span ng-hide="coverage.assigned_user" translate>Unassigned</span></div><div sd-coverage-type></div><div class="dropdown more-actions" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots"></i></button><ul class="dropdown-menu pull-right"><li><button ng-click="removeCoverage(coverage)"><i class="icon-trash"></i><span translate>Remove coverage</span></button></li></ul></div></div><textarea class="description" sd-auto-height ng-model="coverage.ed_note" placeholder="{{\'Add description\' | translate}}"></textarea><button class="btn" ng-click="saveCoverage(coverage)" ng-disabled="!isDirty(coverage)">Save</button> <button class="btn" ng-click="cancelCoverage(coverage)" ng-disabled="!isDirty(coverage)">Cancel</button></div></div></div></div>'),a.put("scripts/superdesk-planning/views/planning.html",'<div class="subnav"><div class="button-stack right-stack"><button class="navbtn"><i class="svg-icon-settings"></i></button></div></div><section class="main-section planning"><div class="preview-layout" ng-class="{closed: !selected.item}"><div class="list-pane"><header><div sd-searchbar></div></header><div class="content"><div sd-shadow><form name="addItemForm" ng-submit="addItemForm.$valid && addItem()"><input type="text" class="add-item" placeholder="{{ \'Add new item\' | translate}}" ng-model="newItem.headline" required></form><div class="items-list"><div sd-list-view data-items="items._items" data-select="preview(item)"><div class="planning-item card"><div class="header"><h6>{{ item.headline }}</h6></div><div class="info"><span ng-show="item.duedate"><i class="icon-desk-time"></i>{{item.duedate}}</span> <span ng-show="item.tasks"><i class="icon-desk-task"></i>{{item.tasks}}</span> <span ng-show="item.attachments"><i class="icon-desk-attach"></i>{{item.attachments}}</span> <span ng-show="item.links"><i class="icon-desk-link"></i>{{item.links}}</span> <span ng-show="item.comments"><i class="icon-desk-comments"></i>{{item.comments}}</span></div></div></div></div></div></div></div><div class="preview-pane" ng-if="selected.item"><header><button ng-click="selected.item = null" class="close-preview"><i class="icon-close-small"></i></button></header><div class="content" sd-preview-item ng-if="selected.item" data-item="selected.item" data-save="save(item)"></div></div></div></section>'),a.put("scripts/superdesk-publish/views/data-consistency.html",'<div id="data-consistency" sd-settings-view ng-init="tab = \'data-consistency\'"><button ng-click="reload()">Refresh</button><i style="float:right">Last refreshed at: {{ lastRefreshedAt | date:\'dd-MM-yyyy HH:mm:ss\' }}</i><hr><table class="table"><thead><tr><th>Collection</th><th>Mongo Records</th><th>Elastic Records</th><th>Identical Records</th><th>Mongo Only</th><th>Elastic Only</th><th>Inconsistent</th><th>Started At</th><th>Completed At</th></tr></thead><tbody><tr ng-repeat="consistency_record in consistency_records"><td>{{ consistency_record.resource_name }}</td><td>{{ consistency_record.mongo }}</td><td>{{ consistency_record.elastic }}</td><td>{{ consistency_record.identical }}</td><td>{{ consistency_record.mongo_only }}</td><td>{{ consistency_record.elastic_only }}</td><td>{{ consistency_record.inconsistent }}</td><td>{{ consistency_record.started_at | dateTimeStringWithSecs}}</td><td>{{ consistency_record.completed_at | dateTimeStringWithSecs }}</td></tr></tbody></table></div>'),
a.put("scripts/superdesk-publish/views/destination.html",'<div class="destination-box"><fieldset><div class="field"><label for="destination-name" translate>Name</label><input type="text" id="destination-name" ng-model="destination.name"></div><div class="field"><label for="destination-format" translate>Format</label><select id="destination-format" class="input" required ng-model="destination.format"><option value=""></option><option value="{{format.value}}" ng-selected="format.value === destination.format" ng-repeat="format in $parent.formats track by format.value">{{:: format.name | translate}}</option></select></div><div class="field"><label for="destination-delivery-type" translate>Delivery type</label><select id="destination-delivery-type" required ng-model="destination.delivery_type" ng-options="key as val.label for (key, val) in types"></select></div><div class="field credentials"><div ng-include="types[destination.delivery_type].templateUrl"></div></div><div class="field" ng-if="actions"><button type="button" class="btn" ng-repeat="action in actions" ng-click="action.fn(destination)"><span translate>{{:: action.label}}</span></button></div></fieldset></div>'),a.put("scripts/superdesk-publish/views/email-config.html",'<div class="field"><label for="recipients" translate>Recipients</label><input type="text" id="recipients" placeholder="{{:: \'Recipients\'|translate }}" ng-model="destination.config.recipients" required ng-change="$parent.setConfig(provider)"></div>'),a.put("scripts/superdesk-publish/views/file-config.html",'<div class="field"><label for="file-path" translate>Output file path</label><input type="text" id="file-path" placeholder="{{:: \'Output file path\'|translate }}" ng-model="destination.config.file_path" required ng-change="$parent.setConfig(file_path)"></div><div class="field"><label for="file-extension" translate>File Extension</label><input type="text" id="file-extension" placeholder="{{:: \'File Extension\'|translate }}" ng-model="destination.config.file_extension" required ng-change="$parent.setConfig(file_extension)"></div>'),a.put("scripts/superdesk-publish/views/ftp-config.html",'<div class="field"><label for="ftp_host" translate>Host</label><input type="text" id="ftp_host" placeholder="{{ :: \'FTP Server URL\'|translate }}" ng-model="destination.config.host" required ng-change="$parent.setConfig(destination)"></div><div class="field"><label for="ftp_username" translate>Username</label><input type="text" id="ftp_username" placeholder="{{ :: \'Username\'|translate }}" ng-model="destination.config.username" ng-change="$parent.setConfig(destination)"></div><div class="field"><label for="ftp_password" translate>Password</label><input type="text" id="ftp_password" placeholder="{{ :: \'Password\'|translate }}" ng-model="destination.config.password" ng-change="$parent.setConfig(destination)"></div><div class="field"><label for="ftp_path" translate>Path</label><input type="text" id="ftp_path" placeholder="{{ :: \'FTP Server Path\'|translate }}" ng-model="destination.config.path" ng-change="$parent.setConfig(destination)"></div><div class="field"><label for="ftp_dest_path" translate>Local Path</label><input type="text" id="ftp_dest_path" placeholder="{{ :: \'Local Path\'|translate }}" ng-model="destination.config.dest_path" required ng-change="$parent.setConfig(destination)"></div>'),a.put("scripts/superdesk-publish/views/http-push-config.html",'<div class="field"><label for="http_host" translate>Resource URL</label><input type="text" id="http_host" placeholder="{{ :: \'Resource URL\'|translate }}" ng-model="destination.config.resource_url" required ng-change="$parent.setConfig(destination)"></div><div class="field"><label for="http_host" translate>Assets URL</label><input type="text" id="http_host" placeholder="{{ :: \'Assets URL\'|translate }}" ng-model="destination.config.assets_url" required ng-change="$parent.setConfig(destination)"></div>'),a.put("scripts/superdesk-publish/views/odbc-config.html",'<div class="field"><label for="connection-string" translate>Connection string</label><input type="text" id="connection-string" placeholder="{{:: \'Connection string\'|translate }}" ng-model="destination.config.connection_string" required ng-change="$parent.setConfig(connection_string)"></div><div class="field"><label for="stored-procedure" translate>Stored Procedure</label><input type="text" id="stored-procedure" placeholder="{{:: \'Stored Procedure\'|translate }}" ng-model="destination.config.stored_procedure" required ng-change="$parent.setConfig(stored_procedure)"></div>'),a.put("scripts/superdesk-publish/views/publish-queue.html",'<div class="subnav" ng-class="{active: multiSelectCount > 0}"><h3 class="page-nav-title" ng-hide="multiSelectCount > 0" translate>Publish Queue</h3><div class="multi-action-bar"><button class="btn" ng-click="cancelSelection(false)" ng-show="multiSelectCount > 0">{{ :: \'Cancel\' | translate}}</button> <span id="multi-select-count" ng-show="multiSelectCount > 0" translate translate-n="multiSelectCount" translate-plural="{{ multiSelectCount }} Items selected">{{ multiSelectCount}} Item selected</span> <button class="btn btn-info pull-right" ng-click="scheduleToSend()" ng-show="multiSelectCount > 0 && showResendBtn">{{ :: \'Resend\' | translate}}</button></div></div><section class="main-section publish-queue"><div class="preview-layout" ng-class="{closed: !selected.preview}"><div class="list-pane"><header><div class="sortbar pull-left"><span class="lab pull-left" translate>Subscriber:</span><div class="dropdown pull-left" dropdown><button class="dropdown-toggle" dropdown-toggle>{{ selectedFilterSubscriber.name }} <b class="caret"></b></button><ul class="dropdown-menu"><li><a href="" ng-click="filterSchedule(null, \'subscriber\')" translate>None</a></li><li ng-repeat="subscriber in subscribers track by subscriber._id"><a href="" ng-click="filterSchedule(subscriber, \'subscriber\')">{{ subscriber.name }}</a></li></ul></div><span class="lab pull-left" translate>Status:</span><div class="dropdown pull-left" dropdown><button class="dropdown-toggle" dropdown-toggle>{{ selectedFilterStatus }} <b class="caret"></b></button><ul class="dropdown-menu"><li><a href="" ng-click="filterStatus(null, \'status\')" translate>None</a></li><li ng-repeat="status in publish_queue_statuses track by $index"><a href="" ng-click="filterStatus(status, \'status\')" translate>{{ :: status }}</a></li></ul></div><div class="flat-searchbar monitoring-flat-searchbar" ng-class="{extended: queueSearch}"><div class="search-handler"><label for="search-input" class="trigger-icon" ng-click="queueSearch = !queueSearch"></label><input id="search-input" type="text" placeholder="{{ :: \'Search\' | translate }}" ng-model="query" ng-model-options="{debounce: 500}" ng-change="search(query)"> <button class="search-close" ng-click="search(query = null)" ng-class="{visible: query}"><i class="icon-close-small"></i></button></div><div class="separator-handler"></div></div></div><div class="refresh-box"><button ng-click="reload()" class="pull-right" tooltip="{{:: \'Refresh\' | translate}}" tooltip-placement="left"><i class="icon-refresh"></i></button> <span class="pull-right" translate>Last refreshed at: {{ lastRefreshedAt | date:\'dd-MM-yyyy HH:mm:ss\' }}</span></div><div sd-pagination-alt class="pagination-box" data-page="page" data-max-page="maxPage"></div></header><div class="content"><div sd-shadow><table class="table styled-table"><thead><tr><th></th><th translate>Sequence No</th><th translate>Unique Name</th><th translate>Headline</th><th class="align-right" translate>Content Type</th><th class="align-right" translate>Publishing Action</th><th class="align-right" translate>Subscriber</th><th class="align-right" translate>Destination</th><th class="align-right" translate>Queued at</th><th class="align-right" translate>Scheduled at</th><th class="align-right" translate>Transmitted at</th><th class="align-right" translate>Status</th><th class="align-right" translate>Message</th><th class="align-right" translate>Action</th></tr></thead><tbody><tr ng-repeat="queue_item in publish_queue track by queue_item._id" class="{{queue_item.state| queueStatus}}" ng-click="preview(queue_item);"><td><span sd-check ng-show="queue_item.state !== \'canceled\'" ng-model="queue_item.selected" ng-change="selectQueuedItem(queue_item)" ng-checked="queue_item.selected"></span></td><td>{{ queue_item.published_seq_num}}</td><td>{{ queue_item.unique_name}}</td><td>{{ queue_item.headline}}</td><td class="align-right">{{ queue_item.content_type}}</td><td class="align-right">{{ queue_item.publishing_action}}</td><td class="align-right">{{subscriberLookup[queue_item.subscriber_id].name}}</td><td class="align-right">{{queue_item.destination.name}}</td><td class="align-right">{{queue_item._created| dateTimeStringWithSecs}}</td><td class="align-right">{{queue_item.publish_schedule| dateTimeStringWithSecs}}</td><td class="align-right">{{queue_item.completed_at| dateTimeStringWithSecs}}</td><td class="align-right">{{queue_item.state}}</td><td class="align-right">{{queue_item.error_message}}</td><td class="align-right"><button class="btn btn-small" ng-if="queue_item.state === \'success\' || queue_item.state === \'error\'" ng-click="scheduleToSend(queue_item)">{{ :: \'Resend\' | translate}}</button></td></tr></tbody></table></div></div></div><div sd-item-preview data-item="selected.preview" data-hide-actions-menu="true" data-close="preview(null)"></div></div></section>'),a.put("scripts/superdesk-publish/views/settings.html",'<div id="publish-settings" sd-settings-view ng-init="tab = \'subscribers\'"><div class="split-content"><ul class="nav nav-tabs"><li ng-class="{active: tab === \'subscribers\'}" ng-show="showSubscribers"><button ng-click="tab = \'subscribers\'" translate>Subscribers</button></li></ul><div class="content"><div ng-if="tab === \'subscribers\'" sd-admin-pub-subscribers></div></div></div></div>'),a.put("scripts/superdesk-publish/views/subscribers.html",'<div ng-hide="hideList" class="split-content"><div class="header"><h2 translate>Subscribers</h2><button id="addSubscriber" class="btn btn-info pull-right" ng-click="edit()"><i class="icon-plus-sign icon-white"></i> <span translate>Add New Subscriber</span></button></div><div class="content"><ul class="pills-list provider-list"><li ng-repeat="subscriber in subscribers._items track by subscriber._id" class="clearfix"><div class="header"><h6 id="subscriberName">{{ subscriber.name }}</h6><span class="label offProvider" ng-if="!subscriber.is_active" translate>Not Active</span><div class="actions"><button ng-click="edit(subscriber)" title="{{:: \'Edit Subscriber\' | translate }}"><i class="icon-pencil"></i></button></div></div></li></ul></div></div><div sd-modal data-model="subscriber" class="subscriber-modal modal-big moz-scroll-fix"><div class="modal-header"><a href="" class="close" ng-click="cancel()"><i class="icon-close-small"></i></a><h3 translate ng-show="subscriber._id">Edit Subscriber "{{ origSubscriber.name }}"</h3><h3 translate ng-hide="subscriber._id">Add New Subscriber</h3></div><div class="modal-body"><form name="editForm"><fieldset><tabset><tab heading="General" class="TabContent"><div class="field"><label class="right">{{:: \'Status\' | translate }} <span tooltip="{{ subscriber.is_active ? \'Deactivate\' : \'Activate\'  | translate }}" tooltip-placement="right"><span class="pull-right" sd-switch ng-model="subscriber.is_active"></span></span></label></div><div class="field"><label for="subscriber-name" translate>Name</label><input type="text" id="subscriber-name" required ng-model="subscriber.name"></div><div class="field"><label for="subscriber-email" translate>E-Mail to broadcast Kill Events</label><input type="email" id="subscriber-email" ng-model="subscriber.email" required></div><div class="field"><label for="subType" translate>Subscriber Type</label><select id="subType" ng-model="subscriber.subscriber_type" ng-options="s.value as s.name for s in subTypes" ng-change="changeFormats(subscriber.subscriber_type)" required><option value=""></option></select></div><div class="field"><label for="media-type" translate>Media Type</label><select id="media-type" class="input" ng-model="subscriber.media_type"><option value="media" translate>Media</option><option value="nonmedia" translate>Non-media</option><option value="" translate>Both</option></select></div><div class="field"><label for="geoRestrictions" translate>Geographical Restrictions</label><select id="geoRestrictions" ng-model="subscriber.geo_restrictions" ng-options="g.name as g.name for g in geoRestrictions"><option value=""></option></select></div><div class="field"><label translate class="right">Content Filter</label><select class="input" ng-model="subscriber.content_filter.filter_id"><option value=""></option><option value="{{filter._id}}" ng-selected="filter._id === subscriber.content_filter.filter_id" ng-repeat="filter in contentFilters track by filter._id">{{:: filter.name}}</option></select></div><div class="field" ng-if="subscriber.content_filter.filter_id"><label translate>Publish Filter Type</label><label class="inline-label" translate><input type="radio" ng-model="subscriber.content_filter.filter_type" value="permitting">Permitting</label><label class="inline-label" translate><input type="radio" ng-model="subscriber.content_filter.filter_type" value="blocking">Blocking</label></div><div class="field"><label translate>Sequence Number Settings</label><span translate>Minimum</span> <input type="number" class="input-mini" ng-model="subscriber.sequence_num_settings.min" min="1" id="subscriber-seq_num_settings.min" required> <span translate>Maximum</span> <input type="number" class="input-small" ng-model="subscriber.sequence_num_settings.max" min="2" id="subscriber-seq_num_settings.max" required></div><fieldset class="separated"><legend translate>Destinations</legend><div sd-destination ng-repeat="destination in destinations" data-destination="destination" data-actions="[{label: \'Delete\', fn: deleteDestination}]"></div><div sd-destination ng-if="newDestination" data-destination="newDestination" data-actions="[{label: \'Save\', fn: saveNewDestination}, {label: \'Cancel\', fn: cancelNewDestination}]"></div><button type="button" class="btn btn-info" ng-click="addNewDestination()" ng-show="newDestination === null"><i class="icon-plus-sign icon-white"></i> <span translate>Add New Destination</span></button></fieldset></tab><tab heading="Critical Errors" class="TabContent"><div class="content privileges-settings"><div class="horizontal"><div class="roles-list"><div ng-repeat="(key, val) in all_errors | orderBy:name" class="field"><label>{{::key}}: {{::val}} <span sd-switch ng-model="subscriber.critical_errors[key]"></span></label></div></div></div></div></tab><tab heading="Applied Global Filters" class="TabContent"><div class="content privileges-settings"><div class="horizontal"><div class="roles-list"><div ng-repeat="gf in globalFilters track by gf._id" class="field"><label>{{:: gf.name}} <span sd-switch ng-model="subscriber.global_filters[gf._id]"></span></label></div></div></div></div></tab></tabset></fieldset></form></div><div class="modal-footer"><button class="btn btn-default" ng-click="cancel()" translate>Cancel</button> <button class="btn btn-primary" ng-click="save()" ng-disabled="editForm.$invalid || destinations.length === 0" translate>Save</button></div></div>'),a.put("scripts/superdesk-scratchpad/views/scratchpad.html",'<div id="scratchpad" sd-droppable data-update="drop" ng-class="{opened: flags[\'scratchpad-open\'], left: flags[\'menu\']}"><div class="header"><div class="title" translate>SCRATCHPAD</div><div class="info">{{ items.length }} {{ :: \'items\' | translate}}</div><button class="trigger pull-right" ng-click="toggle()"><i class="svg-icon-top inverse"></i></button></div><div class="content" ng-if="flags[\'scratchpad-open\']"><div sd-sortable data-update="sort" data-placeholder="\'media-box\'" class="scratchpad-items"><div ng-repeat="item in items" data-index="{{$index}}" style="float: left"><div sd-media-box></div></div></div></div></div>'),a.put("scripts/superdesk-search/views/item-globalsearch.html",'<div class="item-globalsearch" ng-if="flags.enabled"><div class="separator-handler"></div><div class="popup advanced-globalsearch"><div class="content dropdown"><div class="advanced" ng-click="$event.stopPropagation()"><button class="close" tabindex="4" ng-click="close();"><i class="icon-close-small"></i></button><div class="content"><form><fieldset><div class="field"><label>Story Name</label><div class="control"><input type="text" ng-keyup="openOnEnter($event)" ng-model="meta.unique_name" tabindex="1" sd-autofocus ng-if="flags.enabled"></div></div></fieldset></form><div class="actions"><button class="btn btn-info pull-right" ng-click="search()" tabindex="2" id="searchItemByNameBtn" translate>Go</button> <button class="btn pull-right" ng-click="close();" tabindex="3" translate>Cancel</button></div></div></div></div></div></div>'),a.put("scripts/superdesk-search/views/item-preview.html",'<div id="item-preview" class="preview-pane content-item-preview" ng-if="item"><header><ul class="nav nav-tabs"><li ng-class="{active: tab === \'content\'}"><button ng-click="tab = \'content\'"><span translate>Content</span></button></li><li ng-class="{active: tab === \'metadata\'}"><button ng-click="tab = \'metadata\'"><span translate>Metadata</span></button></li><li ng-class="{active: tab === \'related\'}"><button ng-click="tab = \'related\'"><span translate>Duplicates</span></button></li></ul><button ng-click="close()" class="close-preview"><i class="icon-close-small"></i></button></header><div class="content"><div ng-if="tab === \'content\'" sd-media-preview data-item="item"></div><div ng-if="tab === \'metadata\'" sd-media-metadata data-item="item"></div><div ng-if="tab === \'related\'" sd-media-related data-item="item"></div></div></div>'),a.put("scripts/superdesk-search/views/item-search.html",'<form><fieldset ng-if="context"><label><input type="radio" value="local" ng-model="repo.search"> In Superdesk</label><div ng-show="repo.search == \'local\'"><div class="field"><label for="ingest-collection">{{:: \'Ingest\' | translate}} <input type="checkbox" id="ingest-collection" ng-model="repo.ingest" ng-checked="repo.ingest"></label></div><div class="field"><label for="archive-collection">{{:: \'Production\' | translate}} <input type="checkbox" id="archive-collection" ng-model="repo.archive" ng-checked="repo.archive"></label></div><div class="field"><label for="published-collection">{{:: \'Published\' | translate}} <input type="checkbox" id="published-collection" ng-model="repo.published" ng-checked="repo.published"></label></div><div class="field"><label for="archived-collection">{{:: \'Archived\' | translate}} <input type="checkbox" id="archived-collection" ng-model="repo.archived" ng-checked="repo.archived"></label></div></div></fieldset><fieldset ng-if="context"><div ng-repeat="provider in providers"><label ng-if="provider.type == \'search\'"><input type="radio" ng-value="provider.source" ng-model="repo.search"> {{:: provider.name}}</label></div></fieldset><fieldset ng-show="repo.search === \'local\'"><div class="field"><label for="search-headline">{{:: \'Headline\' | translate}}</label><div class="control"><input type="text" id="search-headline" ng-model="meta.headline"></div></div><div class="field"><label for="search-slugline">{{:: \'Slugline\' | translate}}</label><div class="control"><input type="text" id="search-slugline" ng-model="meta.slugline"></div></div><div class="multiple"><div class="field"><label for="search-storyname">{{:: \'Story Name\' | translate}}</label><input type="text" id="search-storyname" ng-model="meta.unique_name"></div><div class="field"><label for="search-storytext">{{:: \'Story Text\' | translate}}</label><input type="text" id="search-storytext" ng-model="meta.body_html"></div></div><div class="field"><label for="search-byline">{{:: \'Byline\' | translate}}</label><input type="text" id="search-byline" ng-model="meta.byline"></div><div class="field" ng-if="repo.archive"><label for="search-creator">{{:: \'Creator\' | translate}}</label><select id="search-creator" ng-model="meta.original_creator" ng-options="user._id  as user.display_name for user in userList"><option value="" label=""></option></select></div><div class="field"><label for="search-subject">{{:: \'Subject\' | translate}}</label><div class="control" id="search-subject"><div sd-meta-terms data-item="subjectitems" data-field="subject" data-unique="qcode" data-list="subjectcodes" data-change="subjectSearch(subjectitems)"></div></div></div><div class="field"><label for="from-desk">{{:: \'From Desk\' | translate}}</label><select id="from-desk" name="from-desk" ng-options="d._id as d.name for d in desks._items" ng-model="selectedDesk.from" ng-change="deskSearch()"><option value="" label=""></option></select></div><div class="field"><label for="to-desk">{{:: \'To Desk\' | translate}}</label><select id="to-desk" name="to-desk" ng-options="d._id as d.name for d in desks._items" ng-model="selectedDesk.to" ng-change="deskSearch()"><option value="" label=""></option></select></div></fieldset><fieldset ng-show="repo.search === \'aapmm\'"><div class="field"><label for="search-slugline">{{:: \'Slugline\' | translate}}</label><div class="control"><input type="text" id="search-slugline" ng-model="meta.slugline"></div></div><div class="field"><label for="search-decsription">{{:: \'Description\' | translate}}</label><div class="control"><input type="text" id="search-description" ng-model="meta.description"></div></div><div class="field"><label for="search-aapkeyword">{{:: \'AAP Image Keyword\' | translate}}</label><div class="control"><input type="text" id="search-aapkeyword" ng-model="meta.aapkeyword"></div></div></fieldset></form><div class="actions"><button class="btn btn-info pull-right" ng-click="search()" ng-disabled="!isSearchEnabled()" translate>Go</button> <button class="btn pull-right" ng-click="focusOnSearch();" translate>Cancel</button></div>'),a.put("scripts/superdesk-search/views/item-searchbar.html",'<div class="item-searchbar" ng-class="{focused: focused}" ng-click="$event.stopPropagation();"><label for="search-input" class="button search-icon"></label><input id="search-input" type="text" placeholder="{{ \'Search\'|translate }}" ng-keyup="searchOnEnter($event)" ng-model="query" tabindex="1" ng-focus="focused = true"> <button class="search-cancel" ng-click="cancel();" ng-if="query"><i class="icon-close-small icon-white"></i></button> <button id="search-button" ng-click="search();" class="button trigger" ng-if="focused" tabindex="2"><i class="svg-icon-right"></i></button></div>'),a.put("scripts/superdesk-search/views/item-sortbar.html",'<div class="sortbar pull-left" ng-show="canSort()"><span class="lab pull-left" translate>Sort:</span><div class="dropdown pull-left" dropdown><button id="order_button" class="dropdown-toggle" dropdown-toggle>{{ active.label }} <b class="caret"></b></button><ul class="dropdown-menu" id="order_selector"><li ng-repeat="option in sortOptions" ng-class="{active: option === selected}"><a href="" ng-click="sort(option.field)">{{ option.label }}</a></li></ul></div><button ng-click="toggleDir()" class="pull-left direction" title="{{active.dir}}"><i class="icon-ascending" ng-if="active.dir === \'asc\'"></i> <i class="icon-descending" ng-if="active.dir === \'desc\'"></i></button></div>'),a.put("scripts/superdesk-search/views/multi-action-bar.html",'<div class="multi-action-bar" ng-if="multi.count"><button class="btn" ng-click="multi.reset()">cancel</button> <span id="multi-select-count" translate translate-n="multi.count" translate-plural="{{ multi.count }} Items selected">{{ multi.count }} Item selected</span><div class="pull-right" ng-if="type === \'archive\' && state !== \'spiked\'"><button class="navbtn strict" ng-click="action.createPackage()" title="{{ :: \'Create Package\' | translate }}"><i class="big-icon-package-create"></i></button> <button class="navbtn strict" ng-if="isOpenItemType(\'composite\')" ng-click="action.addToPackage()" title="{{ :: \'Add to Current Package\' | translate }}"><i class="big-icon-package-add"></i></button></div><div class="dropdown strict highlights-dropdown pull-right" ng-if="type === \'archive\' && state !== \'spiked\'" title="{{ :: \'Mark item\' | translate }}" dropdown><button class="dropdown-toggle navbtn" dropdown-toggle><i class="big-icon-marked-star"></i></button><ul class="dropdown-menu pull-right" sd-multi-mark-highlights-dropdown></ul></div><div class="pull-right" ng-if="type === \'archive\'"><button class="navbtn strict" ng-click="action.multiedit()" ng-if="state !== \'spiked\'" title="{{ :: \'Multiedit\' | translate }}"><i class="big-icon-multiedit"></i></button> <button class="navbtn strict" ng-click="action.spikeItems()" title="{{ :: \'Spike\' | translate }}" ng-if="!spike && !publish && action.canSpikeItems()"><i class="big-icon-spike"></i></button> <button class="navbtn strict" ng-click="action.unspikeItems()" title="{{ :: \'Unspike\' | translate }}" ng-if="state === \'spiked\'"><i class="big-icon-unspike"></i></button></div><div class="pull-right" ng-if="type === \'ingest\'"><button id="fetch-all-btn" class="navbtn strict" title="{{ :: \'Fetch\' | translate }}" ng-click="action.send()"><i class="big-icon-fetch"></i></button> <button id="fetch-all-as-btn" class="navbtn strict" title="{{ :: \'Fetch to\' | translate }}" ng-click="action.sendAs()"><i class="big-icon-fetch-as"></i></button></div></div>'),a.put("scripts/superdesk-search/views/saved-searches.html",'<div class="header"><button class="btn btn-info" ng-click="edit()" translate>Save search</button></div><div class="list"><ul><li ng-repeat="view in views | orderBy:\'name\' " ng-click="select(view)" ng-class="{active: view == selected}">{{ view.name }} <button class="delete" ng-click="remove(view); $event.stopPropagation();"><i class="icon-trash"></i></button></li></ul></div><div class="mini-modal edit-saved-searches" ng-if="editSearch"><div class="title" translate>Save search</div><div class="close" ng-click="cancel()"><i class="icon-close-small"></i></div><div class="content"><form name="viewsForm"><fieldset><div class="field"><label>Name</label><input type="text" class="fullwidth-input" ng-model="editSearch.name" required></div></fieldset></form></div><div class="footer"><button class="btn btn-default" ng-click="cancel()" translate>Cancel</button> <button class="btn btn-primary" ng-click="save(editSearch)" ng-disabled="!viewsForm.$valid" translate>Ok</button></div></div>'),a.put("scripts/superdesk-search/views/search-facets.html",'<div><div class="header"><div class="icon" ng-click="flags.facets = !flags.facets"><i class="icon-filter-large"></i></div><ul><li ng-class="{active: sTab}" ng-click="sTab = true" translate>Advanced Search</li><li ng-show="privileges.saved_searches == 1" ng-class="{active: !sTab}" ng-click="sTab = false" translate>Saved</li></ul><div class="doopen" ng-click="flags.facets = false"><i class="icon-backward-thin"></i></div></div><div class="content" ng-if="sTab"><div sd-search-within></div><div id="search-parameters" sd-toggle-box data-title="{{:: \'Parameters\' | translate }}" data-open="false"><div sd-item-search data-repo="repo" data-context="context"></div></div><div sd-toggle-box data-title="{{ \'Content types\' | translate }}" ng-hide="isEmpty(\'type\')" data-open="true"><ul class="filter-box content-type-filters"><li ng-repeat="(key,value) in aggregations.type" ng-click="toggleFilter(\'type\', key)" ng-class="{checked: hasFilter(\'type\',key)}"><span class="hover-box"><i class="filetype-icon-{{key}}"></i> <span id="filetype-icon-{{key}}" class="sd-checkbox" ng-checked="hasFilter(\'type\',key)"></span></span> <span>{{:: key | translate}} <i>{{:: value }}</i></span></li></ul></div><div sd-toggle-box data-title="{{ \'Desks\' | translate }}" ng-hide="isEmpty(\'desk\')" data-open="true"><ul class="filter-box"><li ng-repeat="(key,value) in aggregations.desk" ng-click="toggleFilter(\'desk\', value.id)"><span class="sd-checkbox" ng-checked="hasFilter(\'desk\', value.id)"></span> <span>{{:: key | translate}} <i>{{:: value.count }}</i></span></li></ul></div><div sd-toggle-box data-title="{{ \'Stages\' | translate }}" ng-hide="isEmpty(\'stage\')" data-open="true"><ul class="filter-box"><li ng-repeat="(key,value) in aggregations.stage" ng-click="toggleFilter(\'stage\', value.id)"><span class="sd-checkbox" ng-checked="hasFilter(\'stage\', key)"></span> <span>{{:: key | translate}} <i>{{:: value.count }}</i></span></li></ul></div><div sd-toggle-box data-title="{{ \'Sources\' | translate }}" ng-hide="isEmpty(\'source\')" data-open="true"><ul class="filter-box"><li ng-repeat="(key,value) in aggregations.source" ng-click="toggleFilter(\'source\', key)"><span class="sd-checkbox" ng-checked="hasFilter(\'source\',key)"></span> <span>{{:: key | translate}} <i>{{:: value }}</i></span></li></ul></div><div sd-toggle-box data-title="{{ \'Credits\' | translate }}" ng-hide="isEmpty(\'credit\')" data-open="true"><ul class="filter-box"><li ng-repeat="(key,value) in aggregations.credit" ng-click="toggleFilter(\'credit\', key)"><span class="sd-checkbox" ng-checked="hasFilter(\'credit\',key)"></span> <span>{{:: key | translate}} <i>{{:: value.count }}</i></span></li></ul></div><div sd-toggle-box data-title="{{ \'Categories\' | translate }}" ng-hide="isEmpty(\'category\')" data-open="true"><ul class="filter-box"><li ng-repeat="(key,value) in aggregations.category" ng-click="toggleFilter(\'category\', key)"><span class="sd-checkbox" ng-checked="hasFilter(\'category\',key)"></span> <span>{{:: key | translate}} <i>{{:: value }}</i></span></li></ul></div><div sd-toggle-box data-title="{{ \'Genres\' | translate }}" ng-hide="isEmpty(\'genre\')" data-open="true"><ul class="filter-box"><li ng-repeat="(key,value) in aggregations.genre" ng-click="toggleFilter(\'genre\', key)"><span class="sd-checkbox" ng-checked="hasFilter(\'genre\',key)"></span> <span>{{:: key | translate}} <i>{{:: value }}</i></span></li></ul></div><div sd-toggle-box data-title="{{ \'Urgency\' | FacetLabels }}" ng-hide="isEmpty(\'urgency\')" data-open="true"><ul class="filter-box"><li ng-repeat="(key,value) in aggregations.urgency" ng-click="toggleFilter(\'urgency\', key)"><span class="sd-checkbox" ng-checked="hasFilter(\'urgency\',key)"></span> <span>{{:: key | translate}} <i>{{:: value }}</i></span></li></ul></div><div sd-toggle-box data-title="{{ \'Priority\' | FacetLabels }}" ng-hide="isEmpty(\'priority\')" data-open="true"><ul class="filter-box"><li ng-repeat="(key,value) in aggregations.priority" ng-click="toggleFilter(\'priority\', key)"><span class="sd-checkbox" ng-checked="hasFilter(\'priority\',key)"></span> <span>{{:: key | translate}} <i>{{:: value }}</i></span></li></ul></div><div sd-toggle-box data-title="{{ \'Dates\' | translate }}" data-open="true"><form class="date-filter"><div class="predefined-dates"><div ng-repeat="(key,value) in aggregations.date"><button ng-click="toggleFilter(\'date\', key)" class="btn btn-mini" ng-class="{active: hasFilter(\'date\',key)}">{{key}}</button></div></div><fieldset ng-show="repo.search === \'local\'"><div class="multiple"><div class="field" sd-date-param data-location="beforefirstcreated"><label for="created_before" translate>Created before</label><div sd-datepicker ng-model="date"></div></div><div class="field" sd-date-param data-location="afterfirstcreated"><label for="created_after" translate>Created after</label><div sd-datepicker ng-model="date"></div></div></div><div class="multiple"><div class="field" sd-date-param data-location="beforefirstcreated"><label for="modified_before" translate>Modified before</label><div sd-datepicker ng-model="date"></div></div><div class="field" sd-date-param data-location="afterfirstcreated"><label for="modified_before" translate>Modified before</label><div sd-datepicker ng-model="date"></div></div></div></fieldset><fieldset ng-show="repo.search === \'aapmm\'"><div class="multiple"><div class="field" sd-date-param data-location="beforefirstcreated"><label for="created_before" translate>Created before</label><div sd-datepicker ng-model="date"></div></div><div class="field" sd-date-param data-location="afterfirstcreated"><label for="created_after" translate>Created after</label><div sd-datepicker ng-model="date"></div></div></div></fieldset></form></div></div><div class="content views" ng-if="!sTab"><div sd-saved-searches></div></div></div>'),
a.put("scripts/superdesk-search/views/search-results.html",'<div class="preview-layout" ng-class="{closed: !selected.preview && !selected.fetch}" ng-init="extras={view: view, activity: {type: spike ? \'spike\' : type, action: \'list\'}, api: api}"><div class="list-pane {{ view || \'mgrid\' }}-view"><header class="search-page-header"><div class="filter-trigger" title="{{ :: \'Filters\' | translate }}" ng-click="flags.facets = true" ng-class="{hidden: flags.facets}"><i class="icon-filter-large"></i></div><div sd-item-sortbar></div><div sd-item-searchbar data-repo="repo" data-context="context" class="searchbar-flex-handler"></div><div class="view-select"><button title="{{ :: \'Switch to grid view\' | translate }}" ng-show="view !== \'mgrid\'" ng-click="setview(\'mgrid\')"><i class="icon-th"></i></button> <button title="{{ :: \'Switch to list view\' | translate }}" ng-show="view !== \'compact\'" ng-click="setview(\'compact\')"><i class="icon-th-list"></i></button></div><div sd-multi-action-bar></div></header><div class="content" sd-updown data-items="items._items" data-select="preview(item)"><div class="loading-indicator" ng-show="loading" translate>loading</div><div sd-search-tags></div><div sd-shadow><ul class="{{view}}-view list-view"><li ng-repeat="item in items._items track by generateTrackIdentifier(item)" class="list-item-view" ng-class="{active: item === selected.preview || item._id === selected.fetch}"><div sd-media-box></div></li></ul></div></div><div sd-item-preview data-item="selected.preview" data-close="preview()" data-open-lightbox="openLightbox" data-open-single-item="openSingleItem"></div><div sd-send-item data-item="selected.fetch" data-mode="monitoring"></div></div></div>'),a.put("scripts/superdesk-search/views/search-tags.html",'<div class="search-tags"><ul><li ng-repeat="(type,keys) in tags.selectedFacets"><div ng-repeat="key in keys"><span>{{type| FacetLabels}}:</span>{{key}}<button ng-click="removeFilter(type, key)"><i class="icon-close-small icon-white"></i></button></div></li><li ng-repeat="parameter in tags.selectedParameters"><div><span>{{parameter}}</span><button ng-click="removeParameter(parameter)"><i class="icon-close-small icon-white"></i></button></div></li><li ng-repeat="parameter in tags.selectedKeywords"><div><span>{{parameter}}</span><button ng-click="removeParameter(parameter)"><i class="icon-close-small icon-white"></i></button></div></li></ul></div>'),a.put("scripts/superdesk-search/views/search-within.html",'<div class="search-within-filter"><input id="search_within" type="text" ng-model="within" placeholder="{{\'Search within\' | translate}}"> <button id="search_within_button" ng-click="searchWithin()" ng-if="within"><i class="svg-icon-right"></i></button></div>'),a.put("scripts/superdesk-search/views/search.html",'<section sd-search-container class="search main-section search-page-container" ng-class="{\'sidebar-open\': flags.facets}"><div sd-search-facets class="archive-sidebar" data-items="items" data-repo="repo" data-context="context"></div><div sd-search-results class="archive-content"></div></section><div sd-media-view data-item="selected.view" data-items="items._items" ng-if="selected.view" data-close="closeLightbox()"></div>'),a.put("scripts/superdesk-settings/views/main.html","<div sd-settings-view></div>"),a.put("scripts/superdesk-settings/views/settings-view.html",'<div><div class="settings-page"><div class="tabbable outer"><ul class="nav-tabs nav-stacked"><li ng-repeat="item in settings | orderBy:\'priority\'" ng-class="{active: currentRoute._id === item._id}"><a ng-href="#{{ item.href }}">{{ item.label }}</a></li></ul><div><div class="tab-content outer"><div class="tab-pane outer" ng-transclude></div></div></div></div></div></div>'),a.put("scripts/superdesk-stream/views/activity-stream.html",'<div class="activity-log"><ul class="activity-list card-list"><li class="activity" ng-class="{\'with-date\': showDateHeader(activity)}" ng-repeat="activity in activities._items track by activity._id"><div class="date" ng-show="showDateHeader(activity)"><span sd-datetime data-date="activity._created"></span></div><div><figure class="avatar"><img sd-user-avatar data-src="activity.user.picture_url" data-initials="activity.user.display_name"></figure><span ng-if="activity.name != \'notify\'"><div class="activity-content"><p><b>{{ :: activity.user.display_name || activity.user.username || \'System\' }}</b> <span sd-activity-message data-activity="activity"></span></p></div><div class="activity-date"><time sd-datetime data-date="activity._created"></time></div></span> <span ng-if="activity.name == \'notify\'"><div class="activity-content"><p><b>{{ :: activity.user.display_name || activity.user.username }}</b> <span translate>commented on</span> <i><a ng-href="#/authoring/{{ :: activity.item.guid }}?_id={{ :: activity.item.guid }}&comments={{ :: activity.data.comment_id }}" title="{{ :: activity.item.headline }}">{{ :: activity.item.slugline || activity.item.headline }}</a></i>:<br>{{ :: activity.data.comment }}</p></div><div class="activity-date"><time sd-datetime date-date="activity._created"></time></div></span></div></li></ul></div><button class="btn activity-load-more" translate ng-click="loadMore()" ng-show="activities._meta.total > max_results">Load more</button>'),a.put("scripts/superdesk-stream/views/workspace-stream.html",'<div class="subnav"></div><section class="main-section workspace-stream"><div class="activity-container" sd-activity-stream data-activities="activities" load-more="loadMore()" data-max-results="max_results"></div></section>'),a.put("scripts/superdesk-templates/views/create-template.html",'<div class="modal-header"><button type="button" class="close" ng-click="$dismiss()"><span class="icon-close-small"></span></button><h3 class="modal-title" translate>Save as template</h3></div><div class="modal-body"><form name="templateForm"><fieldset><div class="field"><label for="template-name" translate>Name</label><div class="control"><input type="text" id="template-name" required ng-model="template.name"><div class="error" ng-show="template._issues.template_name" translate>Sorry, but template name must be unique.</div></div></div><div class="field"><label for="template-type" translate>Type</label><div class="control"><select ng-model="template.type" required ng-options="type._id as type.label for type in template.types"></select></div></div><div class="field"><label for="template-desk" translate>Desk</label><div class="control"><select ng-model="template.desk" ng-options="desk._id as desk.name for desk in template.desks"><option value="" translate>None</option></select></div></div></fieldset></form></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$dismiss()" translate>Cancel</button> <button type="button" class="btn btn-primary" ng-disabled="templateForm.$invalid" ng-click="template.save().then($close)" translate>Save</button></div>'),a.put("scripts/superdesk-templates/views/settings.html",'<div id="templates-settings" sd-settings-view><div class="content"><div sd-templates></div></div></div>'),a.put("scripts/superdesk-templates/views/templates.html",'<div class="split-content"><div class="header"><h2 translate>Templates</h2><button class="btn btn-info pull-right" ng-click="edit()"><i class="icon-plus-sign icon-white"></i> <span translate>Add New Template</span></button></div><div class="content"><div class="flex-grid box wrap-items small-2 medium-4 large-6"><div class="flex-item card-box" ng-repeat="template in content_templates._items track by template._id" ng-if="desks"><div class="card-box__header"><div class="dropdown" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots-vertical"></i></button><ul class="dropdown-menu more-activity-menu pull-right"><li><div class="menu-label" translate>Actions</div></li><li class="divider"></li><li><button ng-click="edit(template)" title="{{:: \'Edit Template\' | translate }}"><i class="icon-pencil"></i>{{:: \'Edit\'| translate}}</button></li><li><button ng-click="remove(template)" title="{{:: \'Remove Template\' | translate }}"><i class="icon-trash"></i>{{:: \'Remove\'| translate}}</button></li></ul></div><div class="card-box__heading">{{ template.template_name }}</div></div><div class="card-box__content"><ul class="card-box__content-list"><li><h4 class="with-value">{{ :: \'Template type\' | translate }} <span class="value-label">{{ template.template_type }}</span></h4></li><li><h4>{{ :: \'Desk / Stage\' | translate }}</h4><span>{{getTemplateDesk(template).name}} / {{getTemplateStage(template).name}}</span></li><li><h4>{{ :: \'Automated item creation\' | translate }}</h4><span ng-repeat="day in template.schedule.day_of_week">{{ :: weekdays[day] }} <span ng-if="$index < template.schedule.day_of_week.length-1">,</span></span> <span class="creation-time"><i class="icon-time"></i> at {{getTime(template.schedule.create_at).getHours()}}:{{getTime(template.schedule.create_at).getMinutes()}}<span></span></span></li></ul></div></div></div></div></div><div sd-modal data-model="template" class="modal-responsive"><div class="modal-header"><a href="" class="close" ng-click="cancel()"><i class="icon-close-small"></i></a><h3 translate ng-show="template._id" translate>Edit Template "{{ origTemplate.template_name }}"</h3><h3 translate ng-hide="template._id" translate>Add New Template</h3></div><div class="modal-body"><form name="templateForm"><div class="main-article"><div class="fieldset"><div class="field"><label for="template-name" translate>Template Name</label><input id="template-name" required ng-model="template.template_name"></div><div class="field"><label for="template-type" translate>Template Type</label><select id="template-type" required ng-model="template.template_type" ng-options="type._id as type.label for type in types"></select></div><div class="field"><label for="template-desk" translate>Desk</label><div class="control"><select id="template-desk" ng-model="template.template_desk" ng-change="updateStages(template.template_desk)"><option value="" translate>None</option><option ng-repeat="desk in desks._items track by desk._id" value="{{ desk._id }}" ng-selected="desk._id === template.template_desk">{{ :: desk.name }}</option></select></div></div><div class="field" ng-if="template.template_desk && stages"><label for="template-stage" translate>Stage</label><div class="control"><select id="template-stage" ng-model="template.template_stage"><option ng-repeat="stage in stages track by stage._id" value="{{ stage._id }}" ng-selected="stage._id === template.template_stage">{{ :: stage.name }}</option></select></div></div><div class="field"><label for="schedule-toggle" translate>Automatically create item</label><div class="control"><span sd-switch ng-model="template.schedule.is_active"></span></div></div><div class="field" ng-if="template.schedule.is_active"><label translate>On</label><div class="day-filter-box clearfix" sd-weekday-picker data-model="template.schedule.day_of_week"></div></div><div class="field" ng-if="template.schedule.is_active"><label translate>At</label><span sd-timepicker-alt data-model="template.schedule.create_at"></span></div></div><div class="fieldset" sd-article-edit></div></div></form></div><div class="modal-footer"><button class="btn btn-default" ng-click="cancel()" translate>Cancel</button> <button class="btn btn-primary" ng-click="save()" ng-disabled="templateForm.$invalid" translate>Save</button></div></div>'),a.put("scripts/superdesk-users/activity/configuration.html",'<div ng-controller="ActivityConfigController" class="widget-config"><form class="form-horizontal"><fieldset><div class="field"><label translate>Number of items</label><div class="control"><select ng-model="configuration.maxItems" class="input-mini"><option value="5">5</option><option value="10">10</option><option value="25">25</option><option value="50">50</option></select></div></div></fieldset></form></div>'),a.put("scripts/superdesk-users/activity/widget-activity.html",'<div ng-controller="ActivityController"><div class="activity-holder"><div sd-shadow><div sd-activity></div></div></div></div>'),a.put("scripts/superdesk-users/import/views/import-user.html",'<form name="importForm" ng-submit="importForm.$valid && importUser(model)"><div class="modal-header"><h3 class="pull-left">{{ activity.label | translate }}</h3><button type="button" class="close" ng-click="reject()"><i class="icon-close-small"></i></button></div><div class="modal-body"><div class="editmode"><div class="details-info form-flat" ng-class="{shifted : error}"><div class="title" translate>Your Credentials</div><fieldset><div sd-info-item><label for="username" translate>username</label><input type="text" name="username" id="username" ng-model="model.username" required></div><div sd-info-item><label for="password" translate>password</label><input type="password" name="password" id="password" ng-model="model.password" required></div><div class="error-holder" ng-if="error.credentials"><p class="alert alert-error" translate>{{error.message || \'Invalid credentials.\'}}</p></div></fieldset><div class="title" translate>User Profile to Import</div><fieldset><div sd-info-item><label for="profile" translate>profile</label><input type="text" name="profile" id="profile" ng-model="model.profile_to_import" required></div><div class="error-holder" ng-if="error.profile_to_import"><p class="alert alert-error" translate>{{error.message || \'Profile Not found\'}}</p></div></fieldset></div></div></div><div class="modal-footer"><button type="submit" class="btn submit" ng-disabled="!importForm.$dirty || !importForm.$valid" translate>Import</button></div></form>'),a.put("scripts/superdesk-users/views/activity-feed.html",'<div class="profile-activity-container"><div class="profile-activity"><div class="activity-header"><h6 translate>Activity Stream</h6></div><div sd-activity></div></div></div>'),a.put("scripts/superdesk-users/views/activity-list.html",'<div class="activity-container" sd-activity-stream data-activities="activityFeed" load-more="loadMore()" data-max-results="max_results"></div>'),a.put("scripts/superdesk-users/views/change-avatar.html",'<div class="modal-header"><h3 class="pull-left">{{ activity.label|translate }}</h3><button type="button" class="close" ng-click="reject()"><i class="icon-close-small"></i></button></div><div class="modal-body split-popup"><aside class="sidebar"><ul><li ng-repeat="method in methods" ng-click="activate(method)" ng-class="{active: active == this}"><i class="avatar-icon-{{ method.id }}"></i> {{ method.label }}</li></ul></aside><section class="main" sd-image-preview="preview.url" data-file="preview.img" data-progress-width="progress.width"><div class="upload-progress" ng-show="progress.width"><div class="bar" style="width: {{ progress.width }}%"></div></div><div class="computer" ng-if="active.id == \'upload\' && !preview.url" ng-hide="progress.width"><div class="dropzone" ng-file-drop="preview.img = $files[0]"><div class="text" translate>Drop it here</div><div class="input-holder"><input type="file" accept="image/*;capture=camera" ng-file-select="preview.img = $files[0]"></div></div></div><div class="camera" ng-if="active.id == \'camera\' && !preview.url"><label translate>Click to capture using camera. Be sure that you allow camera accessibility.</label><video autoplay sd-video-capture="preview.url" data-file="preview.img"></video></div><div class="web" ng-if="active.id == \'web\' && (!preview.cords || progress.width)"><label translate>Enter web url</label><input type="url" ng-model="url" ng-change="preview.url = url"><label translate ng-if="url">Provided image URL is not valid.</label></div><div class="preview" ng-if="preview.url" ng-hide="!preview.cords || progress.width"><label translate>Make sure you\'re looking the best</label><div class="crop-area"><div class="original"><div sd-crop data-src="preview.url" data-cords="preview.cords" data-progress-width="progress.width"></div></div><div class="preview"><div class="preview-large"><img ng-src="{{preview.url}}" class="preview-target-1"></div><div class="preview-round"><img ng-src="{{preview.url}}" class="preview-target-2"></div></div></div></div></section></div><div class="modal-footer"><button type="button" class="btn submit" ng-click="upload(preview)" ng-disabled="!preview.cords || progress.width" translate>Done</button></div>'),a.put("scripts/superdesk-users/views/edit-form.html",'<form name="userForm" class="flat" ng-submit="userForm.$valid && save()"><div class="action-bar clearfix" ng-class="{show:dirty}"><button id="save-edit-btn" type="submit" class="btn btn-info pull-right" ng-disabled="userForm.$invalid || !dirty" translate>Save</button> <button id="cancel-edit-btn" type="button" class="btn pull-right" ng-click="cancel()" ng-disabled="!dirty" translate>Cancel</button></div><div class="profile-pic"><figure class="avatar"><img sd-user-avatar data-src="user.picture_url" data-initials="user.display_name" alt="{{ user.FullName }}"> <a href="" class="change-photo" ng-click="editPicture()" translate>Change Photo</a></figure><span class="disabled-label" ng-if="user._id && !user.is_enabled" translate>disabled</span> <span class="disabled-label" ng-if="user._id && user.is_enabled && !_active" translate>inactive</span></div><div class="profile-info editmode"><div class="header-info"><h2>{{ user.display_name }}</h2><h5>{{ user.username }}</h5><div class="active" ng-show="user.is_enabled" ng-if="!profile && user._id && !dirty" tooltip="{{ _active ? \'Deactivate user\' : \'Activate user\' | translate }}" tooltip-placement="left"><span sd-switch ng-model="$parent._active" ng-click="toggleStatus(_active)"></span></div></div><div class="details-info form-flat" ng-class="{shifted : error}"><div class="title">{{ \'General\' | translate }} <span class="required-info" translate>* mandatory fields</span></div><fieldset class="label-light"><div sd-info-item ng-show="user._id"><label for="display-name" translate>full name</label><input type="text" name="fullName" id="display-name" ng-model="user.display_name" readonly></div><div sd-info-item><label for="first-name" translate>first name</label><input type="text" name="first_name" id="first-name" ng-model="user.first_name" required ng-readonly="user._readonly && user._readonly.first_name"> <i ng-show="userForm.first_name.$error.required" class="required-asteriks">*</i></div><div sd-info-item><label for="last-name" translate>last name</label><input type="text" name="last_name" id="last-name" ng-model="user.last_name" required ng-readonly="user._readonly && user._readonly.last_name"> <i ng-show="userForm.last_name.$error.required" class="required-asteriks">*</i></div><div sd-info-item><label for="username" translate>username</label><input type="text" name="username" id="username" ng-model="user.username" ng-model-options="{\n                        updateOn: \'default blur\',\n                        debounce: {\'default\': 500, \'blur\': 0} }" ng-readonly="user._id" ng-pattern="usernamePattern" sd-user-unique data-unique-field="username" data-exclude="user" required> <i ng-show="userForm.username.$error.required" class="required-asteriks">*</i><div ng-show="userForm.username.$error.unique || error.username.conflict" sd-valid-error translate>sorry, this username is already taken.</div><div ng-show="userForm.username.$error.pattern" sd-valid-info><i class="icon-info-sign-warning"></i> <span translate>please use only letters (a-z), numbers (0-9), dashes (&mdash;), underscores (_), apostrophes (\') and periods (.)</span></div></div><div sd-info-item><label for="sign_off" translate>sign off</label><input type="text" name="sign_off" id="sign_off" ng-model="user.sign_off" ng-pattern="signOffPattern" required> <i ng-show="userForm.sign_off.$error.required" class="required-asteriks">*</i><div ng-show="userForm.sign_off.$error.pattern || error.sign_off.format" sd-valid-info><i class="icon-info-sign-warning"></i> <span translate>Invalid format. Only Alphanumerics are allowed.</span></div></div><div sd-info-item><label for="byline" translate>byline</label><input type="text" name="byline" id="byline" ng-model="user.byline"></div><div sd-info-item class="password" ng-if="features.reset_user_password && user._id && !profile && user.is_enabled && _active" id="password-reset-trigger"><label translate>password</label><i class="change-btn sd-blue" ng-click="show.reset_password = !show.reset_password" ng-show="!show.reset_password">reset password</i></div><div sd-info-item class="password" ng-if="features.reset_user_password && user._id && profile" id="password-change-trigger"><label translate>password</label><i class="change-btn sd-blue" ng-click="show.change_password = !show.change_password" ng-show="!show.change_password">change password</i></div><div sd-info-item><label for="email" translate>email</label><input type="email" name="email" id="email" ng-model="user.email" sd-user-unique data-unique-field="email" data-exclude="user" ng-readonly="user._readonly && user._readonly.email" required> <i ng-show="userForm.email.$error.required" class="required-asteriks">*</i><div ng-show="userForm.email.$error.email || error.email.format" sd-valid-info><i class="icon-info-sign-warning"></i> <span translate>please provide a valid email address</span></div><div ng-show="userForm.email.$error.unique || error.email.unique" sd-valid-error translate>sorry, a user with this email already exists</div></div><div sd-info-item class="user_type" ng-if="privileges.users"><label for="user_type" translate>administrator</label><input type="checkbox" ng-true-value="\'administrator\'" ng-false-value="\'user\'" ng-model="user.user_type" name="user_type" id="user_type"></div><div sd-info-item class="user_role" ng-if="privileges.users"><label for="user_role" translate>role</label><select ng-focus="focused()" ng-model="user.role" name="user_role" id="user_role" ng-options="role._id as role.name for role in roles"></select></div><div sd-info-item class="user_role" ng-if="userDesks && userDesks.length > 0"><label for="user_default_desk" translate>Default Desk</label><select ng-model="user.desk" name="user_default_desk" id="user_default_desk" ng-options="desk._id as desk.name for desk in userDesks"></select></div><div sd-info-item><label for="phone" translate>phone number</label><input type="text" name="phone" id="phone" ng-model="user.phone" ng-pattern="phonePattern" ng-readonly="user._readonly && user._readonly.phone"><div ng-show="userForm.phone.$error.pattern || error.phone.format" sd-valid-info><i class="icon-info-sign-warning"></i> <span translate>please provide number in international format</span></div></div><div sd-info-item ng-show="user._id"><label for="created" translate>member since</label><span id="created" class="info-value" sd-reldate ng-model="user._created"></span></div><div sd-info-item ng-show=""><label for="user_role" translate>user role</label><div sd-select class="info-value" ng-model="user.role" options="role._id as role.name for role in rolesList"></div></div></fieldset></div></div></form><div sd-reset-password class="password-popup mini-modal inline" ng-if="features.reset_user_password && show.reset_password && user._id" ng-class="{shifted : error}"><div class="title">Reset password</div><div class="close" ng-click="show.reset_password = false"><i class="icon-close-small"></i></div><div class="content"><p translate>Do you want to reset the password for user {{ user.full_name }} ?</p></div><div class="footer"><button class="btn btn-small" ng-click="show.reset_password = false" translate>Cancel</button> <button class="btn btn-info btn-small" ng-click="resetPassword()" translate>Reset password</button></div></div><div sd-change-password class="password-popup mini-modal inline" ng-if="features.reset_user_password && show.change_password && user._id" ng-class="{shifted : error}"><div class="title">Change password</div><div class="close" ng-click="show.change_password = false"><i class="icon-close-small"></i></div><form name="changePasswordForm"><div class="content"><div class="field"><label translate>current</label><input name="old" type="password" ng-model="oldPwd" required><p sd-valid-error ng-show="oldPasswordInvalid">sorry, but this is not the original password.</p></div><div class="field"><label translate>new</label><input name="new" type="password" ng-model="newPwd" required ng-minlength="5"><p sd-valid-error ng-show="changePasswordForm.new.$error.minlength">please provide password at least 5 characters long.</p></div><div class="field"><label translate>confirm</label><input name="confirm" type="password" ng-model="_confirm" required sd-password-confirm ng-model="_confirm" data-password="newPwd"><p sd-valid-error ng-show="changePasswordForm.confirm.$error.confirm">confirm doesn\'t match new password yet.</p></div></div><div class="foooter"><button class="btn btn-small" ng-click="show.change_password = false" translate>Cancel</button> <button class="btn btn-info btn-small" ng-click="changePasswordForm.$valid && changePassword(oldPwd, newPwd)" ng-disabled="changePasswordForm.$invalid" translate>Save password</button></div></form></div>'),a.put("scripts/superdesk-users/views/edit.html",'<div class="subnav"><div class="button-stack" ng-if="privileges.users"><a class="navbtn navbtn-info navbtn-hover" href="" ng-click="intent(\'list\', \'user\')"><i class="svg-icon-left inverse"></i> <span class="title" translate>Back to Users list</span></a></div><h3 class="page-nav-title" translate>Users Profile: <b>{{ user | username }}</b></h3></div><section class="main-section user-profile-page"><div class="form-content"><div class="user-details-pane" ng-init="selectedTab = \'overview\'"><header><ul class="nav nav-tabs"><li ng-class="{active: selectedTab === \'overview\'}" ng-click="selectedTab = \'overview\'"><button translate>Overview</button></li><li ng-class="{active: selectedTab === \'preferences\'}" ng-click="$parent.selectedTab = \'preferences\'" ng-if="profile"><button translate>Preferences</button></li><li ng-class="{active: selectedTab === \'privileges\'}" ng-click="$parent.selectedTab = \'privileges\'" ng-if="privileges.users"><button translate>Privileges</button></li></ul></header><div class="content"><div sd-user-edit data-user="user" ng-if="selectedTab === \'overview\'"></div><div sd-user-preferences data-user="user" ng-if="selectedTab === \'preferences\'"></div><div sd-user-privileges data-user="user" ng-if="selectedTab === \'privileges\' && privileges.users"></div></div></div></div><div class="other-content"><div sd-user-activity data-user="user"></div></div></section>'),a.put("scripts/superdesk-users/views/list.html",'<div class="subnav"><h3 class="page-nav-title" translate>Users</h3><div class="button-stack right-stack"><button class="navbtn sd-create-btn" ng-click="createUser()"></button></div></div><section class="main-section users"><div class="preview-layout" ng-class="{closed: !selected.user}"><div class="list-pane"><header><div sd-searchbar></div><div class="separator-handler"></div><div class="online-users"><p><span sd-check ng-model="online_users" name="online_users" id="online_users"></span></p><label translate>show only online users</label></div><div sd-pagination data-items="users"></div></header><div class="content"><div sd-shadow><div class="alert alert-error" ng-if="noRolesWarning" translate>No user roles defined!</div><div class="users-table"><ul class="table-header"><li><div class="row-wrapper"><div class="name" sd-sort data-label="{{ \'Full name\' | translate }}" data-field="full_name"></div><div class="username" sd-sort data-label="{{ \'Username\' | translate }}" data-field="username"></div><div class="role" translate>Role</div><div class="email" sd-sort data-label="{{ \'Email\' | translate }}" data-field="email"></div><div class="created" sd-sort data-label="{{ \'Created\' | translate }}" data-field="_created"></div></div></li></ul><div class="table-title" ng-show="createdUsers.length" translate>Recently added</div><ul class="table-newest" sd-user-list data-roles="roles" data-users="createdUsers" data-selected="selected.user" data-done="afterDelete" ng-if="createdUsers.length"></ul><ul class="table-body" sd-user-list data-roles="roles" data-users="users._items" data-selected="selected.user" data-done="afterDelete"></ul></div></div></div></div><div class="preview-pane" ng-if="selected.user"><header><a id="open-user-profile" href="" ng-click="intent(\'detail\', \'user\', selected.user)" ng-show="selected.user._id" class="btn btn-light pull-left" translate>View full profile</a> <button ng-click="selected.user = null" class="close-preview"><i class="icon-close-small"></i></button></header><div class="content" sd-user-details-pane ng-if="selected.user"><div id="user-profile-edit" sd-user-edit data-user="selected.user" data-onsave="render(user)" data-oncancel="closePreview()"></div></div></div></div></section>'),a.put("scripts/superdesk-users/views/mentions-menu.html",'<ul class="users-list-embed"><li mentio-menu-item="user" ng-repeat="user in items"><figure class="avatar small"><img sd-user-avatar data-src="user.picture_url" data-initials="user.display_name" alt="user.display_name"></figure><span class="name">{{ user.display_name }}</span></li></ul>'),a.put("scripts/superdesk-users/views/mentions.html",'<mentio-menu class="mentio-menu" mentio-for="\'mentio-users\'" mentio-trigger-char="\'@\'" mentio-items="users" mentio-search="searchUsers(term)" mentio-select="selectUser(item)" mentio-template-url="scripts/superdesk-users/views/mentions-menu.html"></mentio-menu>'),a.put("scripts/superdesk-users/views/settings-privileges.html",'<div class="split-content"><div class="header"><h2 translate>Roles privileges</h2><button class="btn btn-info pull-right" ng-click="saveAll(rolesForm)" ng-disabled="!rolesForm.$dirty" translate>Save</button></div><div class="content privileges-settings"><div class="horizontal"><form name="rolesForm"><div class="roles-list" ng-if="roles"><div class="action-line initial"><div class="td name"></div><div ng-repeat="role in roles" class="td role-field">{{role.name}}<span class="label default" ng-if="role.is_default">default</span></div><div class="td blank"></div></div><div ng-repeat="p in privileges" class="action-line"><div class="td name">{{p.label}}</div><div ng-repeat="role in roles" class="td role-field"><input type="checkbox" ng-true-value="1" ng-false-value="0" ng-model="role.privileges[p.name]"></div><div class="td blank"></div></div></div></form></div></div></div>'),a.put("scripts/superdesk-users/views/settings-roles.html",'<div class="split-content"><div class="header"><h2 translate>User Roles</h2><button class="btn btn-info pull-right" ng-click="edit({})"><i class="icon-plus-sign icon-white"></i> {{:: \'Add New Role\' | translate}}</button></div><div class="content user-roles-settings"><ul class="pills-list"><li ng-repeat="role in roles"><div class="header"><h6>{{role.name}}<span class="label default" ng-if="role.is_default" translate>default</span></h6><div class="actions"><button ng-click="edit(role)" title="{{:: \'Edit role\' | translate }}"><i class="icon-pencil"></i></button> <button ng-click="remove(role)" title="{{:: \'Remove role\' | translate }}"><i class="icon-trash"></i></button></div></div></li><div ng-show="!roles.length" class="alert alert-info" translate>No roles created yet.</div></ul><div class="new-role-modal mini-modal inline" ng-if="editRole"><div class="title" ng-show="editRole._id" translate>Edit Role</div><div class="title" ng-show="!editRole._id" translate>New Role</div><div class="close" ng-click="cancel()"><i class="icon-close-small"></i></div><div class="content"><form name="roleForm"><fieldset><div class="field"><input type="text" class="fullwidth-input" placeholder="{{ \'Role Name\'|translate }}" ng-model="editRole.name" required sd-role-unique><div ng-show="roleForm.$error.unique" sd-valid-error translate>sorry, this role name already exists.</div></div><div class="field"><textarea sd-auto-height class="fullwidth-input" placeholder="{{ \'Role Description\'|translate }}" ng-model="editRole.description"></textarea></div><div class="field"><label for="is_default">{{:: \'Default\' | translate }} <input type="checkbox" ng-disabled="defaultRole" name="is_default" id="is_default" ng-model="editRole.is_default"></label></div></fieldset></form></div><div class="footer"><button class="btn btn-default" ng-click="cancel()" translate>Cancel</button> <button class="btn btn-primary" ng-click="save(editRole)" ng-disabled="!roleForm.$valid" translate>Ok</button></div></div></div></div>'),
a.put("scripts/superdesk-users/views/settings.html",'<div sd-settings-view ng-init="rolesTab = true"><div class="split-content"><ul class="nav nav-tabs"><li ng-class="{active: rolesTab}"><button ng-click="rolesTab = true" translate>Roles</button></li><li ng-class="{active: !rolesTab}"><button ng-click="rolesTab = false" translate>Privileges</button></li></ul><div class="content user-roles"><div sd-user-roles ng-if="rolesTab"></div><div sd-roles-privileges ng-if="!rolesTab"></div></div></div></div>'),a.put("scripts/superdesk-users/views/user-details-pane.html",'<div class="user-details-pane" ng-show="user" ng-transclude></div>'),a.put("scripts/superdesk-users/views/user-list-item.html",'<li ng-repeat="user in users" ng-click="select(user)" ng-class="{selected: user === selected, \'inactive\' : !user.is_enabled || !user.is_active}"><figure class="avatar avatar-with-info" ng-class="{\'user-logged\': isLoggedIn(user)}"><div class="logged-info"></div><div class="user-image"><img sd-user-avatar data-src="user.picture_url" data-initials="user.display_name"></div></figure><i class="admin-label icon-settings" ng-if="user.user_type == \'administrator\'" tooltip="{{ :: \'admin\'|translate}}" tooltip-placement="top"></i><div class="row-wrapper" sd-col-width><div class="name">{{ user.display_name }} <span class="disabled-label" ng-if="!user.is_enabled" translate>disabled</span> <span class="disabled-label" ng-if="user.is_enabled && !user.is_active" translate>inactive</span> <span class="disabled-label" ng-if="user.is_enabled && user.is_active && user.needs_activation" translate>pending</span></div><div class="username">{{ user.username }}</div><div class="role">{{ roles[user.role].name }}</div><div class="email">{{ user.email }}</div><div class="created">{{ user._created | reldate}}</div></div><div class="action"><ul class="item-functions" sd-activity-list data-item="user" data-type="user" data-action="edit" data-done="done"></ul></div></li><li class="alert alert-info" ng-show="users.length == null"><p translate>Loading..</p></li><li class="alert alert-info" ng-show="users.length == 0"><p translate>Oops! There are no items.</p></li>'),a.put("scripts/superdesk-users/views/user-preferences.html",'<form name="userPrefs"><div class="action-bar clearfix" ng-class="{show: userPrefs.$dirty }"><button class="btn btn-info pull-right" ng-disabled="!userPrefs.$dirty" ng-click="save()" translate>Save</button> <button class="btn pull-right" ng-click="cancel()" ng-disabled="!userPrefs.$dirty" translate>Cancel</button></div><div class="preferences form-flat inner-content" ng-init="val = true"><div class="title">User settings</div><ul><li class="fieldset" ng-repeat="(id, p) in preferences track by id" ng-if="p.category !== \'article_defaults\' && p.category !== \'categories\'"><div class="legend">{{ p.category }}</div><div sd-info-item><label translate>{{ :: p.label }}</label><span ng-hide="p.allowed" sd-switch ng-model="p.enabled"></span> <span ng-show="p.allowed"><label ng-repeat="i in p.allowed"><input name="allowed" type="radio" ng-model="p.view" ng-value="i">{{ i }}</label></span></div></li><li class="fieldset terms-box"><div class="legend" translate>Article Defaults</div><div class="legend" translate>Dateline</div><div sd-info-item><label translate>{{ :: preferences[\'dateline:located\'].label }}</label><span sd-meta-locators data-list="cities" data-item="preferences[\'dateline:located\']" data-field="located" data-change="changeDatelinePreview(item, city)"></span></div><div class="dateline_preview"><label translate>Preview</label><span>{{ datelinePreview | previewDateline:datelineSource}}</span></div><div sd-info-item><label translate>{{ :: preferences[\'article:default:place\'].label }}</label><span sd-meta-dropdown data-item="preferences[\'article:default:place\']" data-field="place" data-list="locators" data-change="articleDefaultsChanged(item)"></span></div></li><li class="fieldset"><div class="legend">{{ :: preferences[\'categories:preferred\'].category }}</div><div sd-info-item><label translate>{{ :: preferences[\'categories:preferred\'].label }}</label><p class="discreet" translate>By selecting the categories you are interested in, the system will only display these in a menu for setting the content item\'s categories (along with any of its existing categories).</p><div class="actions"><a ng-click="checkAll()" title="{{:: \'Select all categories\' | translate}}" translate>all</a> | <a ng-click="checkNone()" title="{{:: \'Clear all selected\' | translate}}" translate>none</a> | <a ng-click="checkDefault()" title="{{:: \'Select default categories only\' | translate}}" translate>default</a></div><div ng-repeat="cat in categories track by cat.qcode"><input type="checkbox" name="categories" id="cat_{{::cat.qcode}}" value="{{cat.qcode}}" ng-model="cat.selected"><label for="cat_{{::cat.qcode}}">{{:: cat.name | translate}}</label></div></div></li></ul></div></form>'),a.put("scripts/superdesk-users/views/user-privileges.html",'<form name="userPrivileges"><div class="action-bar clearfix" ng-class="{show: userPrivileges.$dirty }"><button class="btn btn-info pull-right" ng-disabled="!userPrivileges.$dirty" ng-click="save()" translate>Save</button> <button class="btn pull-right" ng-click="cancel()" ng-disabled="!userPrivileges.$dirty" translate>Cancel</button></div><div class="privileges-settings form-flat inner-content"><div class="roles-list"><div class="action-line initial"><div class="td name"></div><div class="td role-field" translate>User</div><div class="td role-field" translate>Role</div><div class="td blank"></div></div><div ng-repeat="p in privileges track by p.name" class="action-line"><div class="td name">{{:: p.label }}</div><div class="td role-field"><input type="checkbox" ng-true-value="1" ng-false-value="0" ng-model="user.privileges[p.name]" ng-if="!role.privileges[p.name]"> <input type="checkbox" ng-true-value="1" ng-false-value="0" ng-model="role.privileges[p.name]" ng-disabled="true" ng-if="role.privileges[p.name]"></div><div class="td"><span ng-if="role.privileges[p.name]" class="label">{{:: role.name }}</span></div><div class="td blank"></div></div></div></div></form>'),a.put("scripts/superdesk-vocabularies/views/settings.html",'<div sd-settings-view><div class="split-content"><div class="header"><h2 translate>Vocabularies management</h2></div><div sd-vocabulary-config class="content dictionary-settings" vocabulary="data.vocabulary"></div><div sd-vocabulary-config-modal ng-if="data.vocabulary" vocabulary="data.vocabulary"></div></div></div>'),a.put("scripts/superdesk-vocabularies/views/vocabulary-config-modal.html",'<form name="editForm"><div sd-modal data-model="vocabulary" class="add-vocabulary-popup"><div class="modal-header"><a href="" class="close" ng-click="cancel()"><i class="icon-close-small"></i></a><h3 translate>Edit Vocabulary: {{ :: vocabulary.display_name }}</h3></div><div class="modal-body"><ng-form name="vocabularyForm" class="vocabularyForm"><fieldset><div ng-repeat="(key, value) in model" ng-if="key !== \'is_active\'" class="field vocabularyField"><label translate>{{ :: key }}</label></div><div ng-repeat="item in vocabulary.items track by $index"><div ng-repeat="(key, value) in model" ng-if="key !== \'is_active\'" class="field vocabularyField"><input type="text" ng-model="item[key]" ng-disabled="!item.is_active"></div><span class="pull-right vocabularyStatus" sd-switch ng-model="item.is_active" tooltip="{{ :: \'Enable / Disable\' | translate }}" tooltip-placement="left"></span></div><li class="divider"></li><button id="add-new-btn" class="btn pull-right" ng-click="addItem()" translate>Add</button></fieldset></ng-form></div><div class="modal-footer"><button id="save-edit-btn" type="submit" class="btn btn-info pull-right" ng-click="save()" ng-disabled="editForm.$invalid" translate>Save</button> <button id="cancel-edit-btn" type="button" class="btn pull-right" ng-click="cancel()" translate>Cancel</button></div></div></form>'),a.put("scripts/superdesk-vocabularies/views/vocabulary-config.html",'<div sd-shadow><ul class="pills-list"><li ng-repeat="vocabulary in vocabularies._items"><h6>{{ :: vocabulary.display_name }}</h6>&nbsp; <em><strong>({{ vocabulary.items.length }})</strong></em><div class="actions"><button ng-click="openVocabulary(vocabulary)" title="{{:: \'Edit vocabulary\' | translate }}"><i class="icon-pencil"></i></button></div></li></ul></div>'),a.put("scripts/superdesk-workspace/content/views/sd-content-create.html",'<li><div class="menu-label" translate>Create new item</div></li><li><button id="create_text_article" ng-click="create()"><i class="icon-plus-small icon-round icon-white"></i> {{ :: \'Plain text\' | translate }}</button></li><li><button id="create_preformatted_article" ng-click="create(\'preformatted\')"><i class="icon-plus-small icon-round icon-white"></i> {{ :: \'Preformatted\' | translate }}</button></li><li><button id="create_package" ng-click="createPackage()"><i class="icon-plus-small icon-round icon-white"></i> {{ :: \'Empty Package\' | translate }}</button></li><li ng-if="item"><button id="package_item" ng-click="createPackage(item)"><i class="icon-plus-small icon-round icon-white"></i> {{ :: \'Package current item\' | translate }}</button></li><li class="divider"></li><li><div class="menu-label" translate>From template</div></li><div ng-show="contentTemplates._items.length"><li translate>From template:</li><li ng-repeat="template in contentTemplates._items"><button ng-click="createFromTemplate(template)"><i class="icon-plus-small icon-round icon-white"></i> {{ :: template.template_name }}</button></li></div><div ng-hide="contentTemplates._items.length"><li translate>No recent templates.</li></div><li><button ng-click="displayTemplateSelect = true;" translate>More templates...</button></li><li class="divider" ng-if="openUpload"></li><li ng-if="openUpload"><button ng-click="openUpload()" id="start-upload-btn"><i class="icon-upload blue"></i> {{ :: \'UPLOAD ITEM\' | translate }}</button></li><div sd-template-select data-select-action="createFromTemplate" data-open="displayTemplateSelect"></div>'),a.put("scripts/superdesk-workspace/content/views/sd-template-select.html",'<div sd-modal data-model="open" class="output-channel-modal"><div class="modal-header"><a href="" class="close" ng-click="close()"><i class="icon-close-small"></i></a><h3 translate>Select template</h3></div><div class="modal-body"><form><fieldset><div class="field"><label for="keyword" translate>Keyword</label><input type="text" id="keyword" ng-model="options.keyword" ng-model-options="{ debounce: 300 }"></div><div class="field"><label translate>Templates</label><ul><li ng-repeat="template in templates._items track by template._id"><button class="btn btn-full" ng-click="select(template)"><span class="pull-left">{{ :: template.template_name }}</span></button></li></ul></div></fieldset></form></div><div class="modal-footer"><div sd-pagination-alt class="pagination-box" data-page="options.page" data-max-page="maxPage"></div></div></div>'),a.put("scripts/superdesk-workspace/views/edit-workspace-modal.html",'<div sd-modal data-model="workspace"><div class="modal-header"><h3 ng-hide="workspace._id" translate>Create new Workspace</h3><h3 ng-show="workspace._id" translate>Rename Workspace</h3></div><div class="modal-body"><fieldset><div class="field"><label translate>Workspace name</label><input type="text" class="fullwidth-input" ng-class="{error: errors.name}" ng-model="workspace.name" required><div class="error" ng-show="errors.name" translate>Sorry, given workspace name is in use</div></div></fieldset></div><div class="modal-footer"><button class="btn pull-left" ng-click="cancel()" translate>Cancel</button> <button class="btn btn-primary" ng-disabled="!workspace.name" ng-click="save()" translate>Save</button></div></div>'),a.put("scripts/superdesk-workspace/views/workspace-dropdown.html",'<div id="workspace-dropdown" class="dropdown navbtn"><button id="selected-desk" data-toggle="dropdown" class="dropdown-toggle {{workspaceType}} pull-left"><span class="name" ng-if="selected.name">{{ selected.name | uppercase }}</span> <span class="name" ng-if="!selected" translate>Select Workspace</span> <span class="name" ng-if="!selected.name && workspaceType">{{ :: \'Untitled\' | translate }}</span> <span class="caret"></span></button><ul id="select-desk-menu" class="dropdown-menu" role="menu"><li class="menu-label" translate><div>DESKS</div></li><li class="desk-item" ng-repeat="desk in desks track by desk._id"><button ng-click="selectDesk(desk)" ng-disabled="desk._id === selected._id">{{ :: desk.name }}</button></li><li class="menu-label" translate><div>CUSTOM WORKSPACES</div></li><li class="workspace-item" ng-repeat="workspace in wsList track by workspace._id"><button ng-click="selectWorkspace(workspace)" ng-disabled="workspace._id === selected._id">{{ :: workspace.name }} <span ng-if="!workspace.name">{{ :: \'Untitled\' | translate }}</span></button></li><li><button class="action-btn" ng-click="createWorkspace()" translate><i class="icon-plus-small icon-round icon-white"></i> <span class="circle"></span> {{ :: \'CREATE NEW WORKSPACE\' | translate }}</button></li></ul></div><div sd-edit-workspace data-workspace="edited" data-done="afterSave"></div>'),a.put("scripts/superdesk-workspace/views/workspace-sidenav-items.html",'<li ng-class="{active: currentRoute.href === \'/workspace\'}"><a href="#/workspace" class="big-icon-dashboard" ng-click="hideMonitoring(currentRoute.href === \'/workspace\', $event)" title="{{ :: \'Dashboard\' | translate }}"></a></li><li ng-class="{active: currentRoute.href === \'/workspace/monitoring\'}"><a href="#/workspace/monitoring" class="big-icon-view" ng-click="hideMonitoring(currentRoute.href === \'/workspace/monitoring\', $event)" title="{{ :: \'Monitoring\' | translate }}"></a></li><li ng-class="{active: currentRoute.href === \'/workspace/highlights\'}"><div class="dropdown dropright dropdown-hover highlights-dropdown" dropdown sd-package-highlights-dropdown></div></li><li ng-class="{active: currentRoute.href === \'/workspace/tasks\'}" ng-if="privileges.tasks"><a href="#/workspace/tasks" class="big-icon-tasks" ng-click="hideMonitoring(currentRoute.href === \'/workspace/tasks\', $event)" title="{{ :: \'Tasks\' | translate }}"></a></li><li ng-class="{active: currentRoute.href === \'/workspace/spike-monitoring\'}"><a href="#/workspace/spike-monitoring" class="big-icon-spiked" ng-click="hideMonitoring(currentRoute.href === \'/workspace/spike-monitoring\', $event)" title="{{ :: \'Spike\' | translate }}"></a></li><hr><li ng-class="{active: currentRoute.href === \'/workspace/personal\'}"><a href="#/workspace/personal" class="big-icon-personal" ng-click="hideMonitoring(currentRoute.href === \'/workspace/personal\', $event)" title="{{ :: \'Personal\' | translate }}"></a></li><li ng-class="{active: currentRoute.href === \'/search\'}"><a href="#/search" class="big-icon-global-search" ng-click="hideMonitoring(currentRoute.href === \'/search\', $event)" title="{{ :: \'Search\' | translate }}"></a></li><hr><!-- this is something like deprecated.. don\'t add, only remove --><li ng-class="{active: currentRoute.href === \'/workspace/ingest\'}" ng-if="privileges.ingest"><a href="#/workspace/ingest" class="big-icon-ingest" title="{{ :: \'Ingest\' | translate }}"></a></li><li ng-class="{active: currentRoute.href === \'/workspace/content\'}" ng-if="privileges.archive"><a href="#/workspace/content" class="big-icon-archive" title="{{ :: \'Content\' | translate }}"></a></li>'),a.put("scripts/superdesk-workspace/views/workspace-sidenav.html","<ul sd-workspace-sidenav></ul>"),a.put("scripts/superdesk/activity/views/activity-chooser.html",'<div sd-modal ng-if="chooser-activities" data-model="chooser.activities" class="activity-choose-modal"><ul class="list-group" ng-if="selected"><li class="list-group-item" ng-repeat="activity in chooser.activities" ng-click="chooser.resolve(activity)" ng-class="{active: activity === selected}"><a href="">{{ activity.label }}</a></li></ul><div class="btn-group"><button class="btn btn-inverse" ng-click="chooser.reject()"><i class="icon-close-small icon-white"></i> {{ :: \'Cancel\' | translate }}</button></div></div>'),a.put("scripts/superdesk/activity/views/activity-item.html",'<a title="{{ :: activity.label | translate }}" ng-href="{{ :: $root.link(activity._id, item) }}" ng-if=":: !activity.dropdown" ng-click="run(activity, $event)"><i class="icon-{{ :: activity.icon }} {{!activity.monitor|| !item.actioning[activity._id] || \'actioning\'}}" ng-show=":: activity.icon"></i> <span>{{ :: activity.label | translate }}</span></a><li class="divider" ng-if="activity._id === \'mark.item\'"></li><div ng-if=":: activity.dropdown" class="dropdown dropdown-noarrow" dropdown><a class="dropdown-toggle" title="{{ :: activity.label | translate }}" dropdown-toggle><i class="icon-{{ :: activity.icon }}" ng-show=":: activity.icon"></i> <span>{{ :: activity.label | translate }} <i class="icon-chevron-right-thin submenu-icon"></i></span></a><ul class="dropdown-menu right-submenu"><div ng-include="activity.templateUrl"></div></ul></div>'),a.put("scripts/superdesk/activity/views/activity-list.html",'<li class="item-field" ng-repeat="activity in activities | limitTo:limit" sd-activity-item></li><li ng-if="activities.length > 6 && !preview" class="item-field"><div class="dropdown more-activity-dropdown" sd-dropdown-position dropdown><a class="dropdown-toggle more-activity-toggle" dropdown-toggle><i class="icon-dots-vertical"></i></a><ul class="dropdown-menu"><li class="item-field" ng-repeat="activity in activities | limitTo:-(activities.length-5)" sd-activity-item></li></ul></div></li>'),a.put("scripts/superdesk/activity/views/activity-modal.html",'<div class="modal-backdrop" ng-if="activity"></div><div class="modal in {{activity.cssClass}}" ng-if="activity"><div class="modal-dialog" ng-controller="activity.controller"><div class="modal-content" ng-include="activity.templateUrl"></div></div></div>'),a.put("scripts/superdesk/auth/login-modal.html",'<div class="login-screen" ng-show="active"><div class="login-form-container"><p ng-if="identity._id" class="session-error">{{ \'Your session has expired.\'|translate }}<br>{{ \'Please log in again.\'|translate }}</p><div class="logo-handler" ng-show="!identity.Avatar"><img src="images/superdesk-icon-large.png" alt="Superdesk Logo"></div><div class="form-handler"><figure class="avatar" style="background-image:url(\'{{ identity.Avatar.href || \'images/avatar_200.png\' }}\')" ng-show="identity.Avatar"></figure><form name="loginForm" ng-submit="authenticate()"><fieldset class="inputs"><input type="text" id="login-username" ng-model="username" placeholder="{{ \'username\'|translate }}" class="fullwidth-input" ng-disabled="identity.Id" required> <input type="password" id="login-password" ng-model="password" placeholder="{{ \'password\'|translate }}" class="fullwidth-input login-pass" required></fieldset><fieldset class="buttons"><button ng-disabled="isLoading" id="login-btn" type="submit" class="btn btn-green btn-medium">{{ \'Log In\' | translate }}<div class="spinner" ng-show="isLoading"><div class="dot1"></div><div class="dot2"></div></div></button></fieldset></form><div class="error-handler" ng-switch on="loginError"><p class="error" ng-switch-when="401" translate>Oops! Invalid Username or Password.<br>Please try again.</p><p class="error" ng-switch-when="403" translate>Sorry, but your account has been suspended.</p><p class="error" ng-show="loginError" ng-switch-default translate>Sorry, but can\'t reach the server now.<br>Please try again later.</p><div class="network-error red" ng-show="serverStatus == 1"><span class="icon-unplug"></span><p translate>No server response so far.<br>Let me try again.</p></div><div class="network-error yellow" ng-show="serverStatus > 1"><span class="icon-unplug"></span><p translate>Trying to reconnect...<br>Please wait.</p></div></div><div class="links"><a href="" ng-click="logout()" class="text" ng-show="identity.Id" translate>Sign in as a different user.</a> <a href="/#/reset-password/" class="text" ng-show="features.reset_user_password" translate>Forgot password?</a></div></div></div></div>'),a.put("scripts/superdesk/auth/reset-password.html",'<div class="login-screen"><div class="login-form-container"><div class="logo-handler"><img src="images/superdesk-icon-large.png" alt="Superdesk Logo"></div><div class="form-handler"><form name="sendTokenForm" ng-submit="sendToken()" ng-show="flowStep == 1"><p class="reset-info"><i class="icon-info-sign icon-white"></i> <span translate>Provide your email in order to get \'Reset Token\'. Once you get it, use it to reset your password.</span></p><fieldset class="inputs"><input type="email" id="user-email" ng-model="email" placeholder="{{ \'Email\'|translate }}" class="fullwidth-input" required></fieldset><fieldset class="buttons"><button ng-disabled="isSending || sendTokenForm.$invalid" type="submit" class="btn btn-green btn-medium">{{ \'Get token\' | translate }}<div class="spinner" ng-show="isSending"><div class="dot1"></div><div class="dot2"></div></div></button></fieldset></form><div class="error-handler" ng-switch on="sendTokenError"><p class="error" ng-switch-when="400" translate>Oops! Invalid user Email.<br>Please try again.</p><p class="error" ng-switch-when="403" translate>Sorry, but your account has been suspended.</p><p class="error" ng-show="sendTokenError" ng-switch-default translate>Sorry, but can\'t reach the server now.<br>Please try again later.</p><div class="network-error red" ng-show="serverStatus == 1"><span class="icon-unplug"></span><p translate>No server response so far.<br>Let me try again.</p></div><div class="network-error yellow" ng-show="serverStatus > 1"><span class="icon-unplug"></span><p translate>Trying to reconnect...<br>Please wait.</p></div></div><div ng-show="flowStep == 2"><p class="reset-info"><i class="icon-info-sign icon-white"></i> <span translate>A link was sent to the specified email address. Please use it to reset your password. It is valid a limited amount of time.</span></p></div><form name="resetForm" ng-submit="resetPassword()" ng-show="flowStep == 3"><fieldset class="inputs"><input type="password" name="password" ng-model="password" ng-minlength="5" placeholder="{{ \'Enter new password\'|translate }}" class="fullwidth-input" required><div ng-show="resetForm.password.$error.minlength" sd-valid-info><i class="icon-info-sign-warning"></i> <span translate>password must have at least 5 characters</span></div></fieldset><fieldset class="inputs"><input type="password" name="passwordConfirm" ng-model="passwordConfirm" placeholder="{{ \'Confirm new password\'|translate }}" class="fullwidth-input" sd-password-confirm data-password="password" required> <i ng-show="userForm.passwordConfirm.$error.required" class="required-asteriks">*</i><div ng-show="resetForm.passwordConfirm.$error.confirm" sd-valid-info><i class="icon-info-sign-warning"></i> <span translate>passwords must be same</span></div></fieldset><fieldset class="buttons"><button ng-disabled="isReseting || resetForm.$invalid" type="submit" class="btn btn-green btn-medium">{{ \'Reset password\' | translate }}<div class="spinner" ng-show="isReseting"><div class="dot1"></div><div class="dot2"></div></div></button></fieldset></form><div class="links"><a href="/#/" class="text" translate>Have password? Sign in.</a> <a href="" ng-click="flowStep = 1" class="text" ng-show="flowStep === 2" translate>Don\'t have token? Get it.</a></div><div class="error-handler" ng-switch on="setPasswordError"><p class="error" ng-switch-when="400" translate>The activation token is not valid.<br></p><p class="error" ng-switch-when="403" translate>Sorry, but your account has been suspended.</p><p class="error" ng-show="setPasswordError" ng-switch-default translate>Sorry, but can\'t reach the server now.<br>Please try again later.</p><div class="network-error red" ng-show="serverStatus == 1"><span class="icon-unplug"></span><p translate>No server response so far.<br>Let me try again.</p></div><div class="network-error yellow" ng-show="serverStatus > 1"><span class="icon-unplug"></span><p translate>Trying to reconnect...<br>Please wait.</p></div></div></div></div></div>'),a.put("scripts/superdesk/editor/spellcheck/views/spellcheck-widget.html",'<div ng-controller="Spellcheck as spell"><quote>{{ spell.currentError }}</quote></div>'),a.put("scripts/superdesk/editor/views/editor.html",'<div class="dropdown" dropdown><pre class="text-editor editor-type-text" ng-show="type==\'preformatted\'" spellcheck></pre><div class="text-editor editor-type-html" ng-show="type==\'text\' || !type" spellcheck></div><code class="text-editor-info" ng-if="cursor.line && type == \'preformatted\'"><small translate>Line: {{ cursor.line }}, Column: {{ cursor.column }}</small></code> <button class="dropdown-toggle hide" dropdown-toggle></button><ul class="dropdown-menu"><li ng-repeat="word in suggestions"><button ng-click="replace(word)">{{ :: word }}</button></li><li ng-show="suggestions.length === 0"><button translate>SORRY, NO SUGGESTIONS.</button></li><li class="divider"></li><li><button ng-click="addWordToDictionary()" translate>Add to dictionary</button></li></ul></div>'),a.put("scripts/superdesk/itemList/views/item-list-widget.html",'<div class="widget-mode" ng-show="options.modeEnabled"><span class="text" translate>Mode:</span> <button class="btn btn-mini btn-light" ng-click="options.mode = \'detailed\'" ng-show="options.mode === \'basic\'" translate>Basic</button> <button class="btn btn-mini btn-light" ng-click="options.mode = \'basic\'" ng-show="options.mode === \'detailed\'" translate>Detailed</button></div><div class="main-list" ng-class="{wrap: selected}"><div class="search-box" ng-class="{blank: similar}" ng-show="options.searchEnabled"><input type="text" placeholder="{{ :: \'Search\' | translate }}" ng-show="!options.similar" ng-model="itemListOptions.search" ng-model-options="{debounce: 500}"><div ng-if="options.similar" class="text" translate>Displaying similar items</div><div class="dropdown more-actions" dropdown ng-if="options.item"><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots-vertical"></i></button><div class="dropdown-menu pull-right"><ul><li><button ng-if="options.item" ng-click="options.similar = !options.similar"><i ng-if="options.similar" class="icon-ok"></i> {{ :: \'Display similar\' | translate }}</button></li></ul></div></div></div><div class="filter-box" ng-show="options.mode === \'detailed\'"><span class="text" translate>View</span> <button class="btn btn-light pull-left" ng-if="options.itemTypeEnabled" ng-repeat="itemType in options.itemTypes" ng-click="toggleItemType(itemType)" ng-class="{active: isItemTypeEnabled(itemType)}"><i class="filetype-icon-{{itemType}}"></i></button></div><div class="pagination-box" ng-class="{\'mode-detailed\': options.mode === \'detailed\'}" sd-pagination-alt data-page="itemListOptions.page" data-max-page="maxPage"></div><div class="ingest-list-holder" ng-class="{\'mode-detailed\': options.mode === \'detailed\'}"><div sd-shadow><ul class="ingest-list list-view"><li ng-repeat="item in processedItems track by $index" class="list-item-view"><div class="dropdown more-actions" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots-vertical"></i></button><div class="dropdown-menu pull-right"><span class="pin-info" ng-show="options.pinEnabled && item.pinnedInstance">{{ :: \'pinned from\' | translate }} {{item._type}}</span><ul><li ng-show="options.pinEnabled"><button ng-show="!isPinned(item)" ng-click="pin(item)"><i class="icon-pin"></i> {{ :: \'Pin\' | translate }}</button></li><li ng-show="options.pinEnabled"><button ng-show="item.pinnedInstance && isPinned(item)" ng-click="unpin(item)"><i class="icon-pin"></i> {{ :: \'Unpin\' | translate }}</button></li><li ng-repeat="action in actions"><button ng-click="action.method(item)"><i class="icon-pencil"></i> {{ :: action.title | translate }}</button></li></ul></div></div><div ng-if="options.mode === \'basic\'" class="basic item-block urgency-{{ item.urgency }}" ng-class="{pinned: options.pinEnabled && isPinned(item), \'pinned-instance\': options.pinEnabled && item.pinnedInstance}" ng-click="view(item)"><div class="content"><p><i class="filetype-icon-{{item.type}}"></i><span class="keyword" ng-if="item.slugline">{{ item.slugline }}</span> {{item.headline || item.type}}</p></div></div><div ng-if="options.mode === \'detailed\'" class="item-block urgency-{{ item.urgency }}" ng-class="{pinned: options.pinEnabled && isPinned(item), \'pinned-instance\': options.pinEnabled && item.pinnedInstance}" ng-click="view(item)"><div class="content"><ul class="top-line clearfix"><li><span class="type-icon filetype-icon-{{item.type}}"></span> <span class="urgency-label">{{ item.urgency }}</span></li><li><time sd-datetime data-date="item.versioncreated"></time></li><li ng-show="item.byline"><em translate>by</em>{{ item.byline }}</li><li ng-show="item.provider && options.sizex > 1"><em translate>source</em>{{ item.provider }}</li><li><div class="state-label state-{{item.state}}" ng-class="{state_embargo: item.embargo}">{{item.state}}</div></li></ul><div class="main-line clearfix"><figure class="media" ng-if="item.renditions.thumbnail"><img ng-src="{{ item.renditions.thumbnail.href }}" title="{{ item.description }}"></figure><h5 title="{{ item.headline }}">{{ item.headline }}</h5></div></div></div></li></ul></div></div></div><div class="preview" ng-class="{wrap: !selected}"><div class="nav"><button class="backlink" href="" ng-click="view(null)" translate>Back</button> <button ng-repeat="action in actions" class="{{action.class}} pull-right" ng-click="actions.open.method(selected)"><i class="{{action.icon}}"></i> {{ action.title | translate }}</button></div><div class="content-item-preview"><div class="content"><div sd-media-preview-widget data-item="selected"></div></div></div></div>'),a.put("scripts/superdesk/itemList/views/relatedItem-list-widget.html",'<div class="widget-mode" ng-show="options.modeEnabled"><!-- <span class="text" translate>Mode: </span>\n    <button class="btn btn-mini btn-light" ng-click="options.mode = \'detailed\'" ng-show="options.mode === \'basic\'" translate>Basic</button>\n    <button class="btn btn-mini btn-light" ng-click="options.mode = \'basic\'" ng-show="options.mode === \'detailed\'" translate>Detailed</button> --><time sd-datetime data-date="itemListOptions.creationDateBefore"></time></div><div class="main-list" ng-class="{wrap: selected}"><div class="search-box" ng-class="{blank: related}" ng-show="options.searchEnabled"><input type="text" placeholder="{{ :: \'Search\' | translate }}" ng-model="itemListOptions.keyword" ng-model-options="{debounce: 1000}"><!--   <div ng-if="options.related" class="text" translate>Displaying related items</div>\n        \n        <div class="dropdown more-actions" dropdown ng-if="options.item">\n            <button class="dropdown-toggle" dropdown-toggle><i class="icon-dots-vertical"></i></button>\n            <div class="dropdown-menu pull-right">\n                <ul>\n                    <li>\n                        <button ng-if="options.item" ng-click="options.related = !options.related">\n                            <i ng-if="options.related" class="icon-ok"></i> {{ :: \'Display related\' | translate }}\n                        </button>\n                    </li>\n                </ul>\n            </div>\n        </div>  --></div><!--  <div class="filter-box" ng-show="options.mode === \'detailed\'">\n        <span class="text" translate>View</span>\n        <button class="btn btn-light pull-left" \n            ng-if="options.itemTypeEnabled"\n            ng-repeat="itemType in options.itemTypes" \n            ng-click="toggleItemType(itemType)"\n            ng-class="{active: isItemTypeEnabled(itemType)}">\n                <i class="filetype-icon-{{itemType}}"></i>\n        </button>\n    </div> --><div class="pagination-box" ng-class="{\'mode-detailed\': options.mode === \'detailed\'}" sd-pagination-alt data-page="itemListOptions.page" data-max-page="maxPage"></div><div class="ingest-list-holder" ng-class="{\'mode-detailed\': options.mode === \'detailed\'}"><div sd-shadow><ul class="ingest-list list-view"><li ng-repeat="item in processedItems track by $index" class="list-item-view"><div class="dropdown more-actions" dropdown><button class="dropdown-toggle" dropdown-toggle><i class="icon-dots-vertical"></i></button><div class="dropdown-menu pull-right"><!-- <span class="pin-info" ng-show="options.pinEnabled && item.pinnedInstance">{{ :: \'pinned from\' | translate }} {{item._type}}</span> --><ul><!-- <li ng-show="options.pinEnabled"><button ng-show="!isPinned(item)" ng-click="pin(item)">\n                                    <i class="icon-pin"></i> {{ :: \'Pin\' | translate }}</button>\n                                </li>\n                                <li ng-show="options.pinEnabled"><button ng-show="item.pinnedInstance && isPinned(item)" ng-click="unpin(item)">\n                                    <i class="icon-pin"></i> {{ :: \'Unpin\' | translate }}</button>\n                                </li> --><li ng-repeat="action in actions"><button ng-click="action.method(item)">{{ :: action.title | translate }}</button></li></ul></div></div><div class="basic item-block" ng-click="view(item)"><div class="content"><p><i class="filetype-icon-{{item.type}}"></i><span class="keyword" ng-if="item.slugline">{{ item.slugline }}</span> {{item.headline || item.type}} {{item.anpa_take_key}}</p></div></div><!--  <div ng-if="options.mode === \'detailed\'" class="item-block urgency-{{ item.urgency }}" \n                        ng-class="{pinned: options.pinEnabled && isPinned(item), \'pinned-instance\': options.pinEnabled && item.pinnedInstance}"\n                        ng-click="view(item)">\n                        <div class="content">\n                            <ul class="top-line clearfix">\n                                <li>\n                                    <span class="type-icon filetype-icon-{{item.type}}"></span>\n                                    <span class="urgency-label">{{ item.urgency }}</span>\n                                </li>\n                                <li><time sd-datetime data-date="item.versioncreated"></time></li>\n                                <li ng-show="item.byline"><em translate>by</em>{{ item.byline }}</li>\n                                <li ng-show="item.provider && options.sizex > 1"><em translate>source</em>{{ item.provider }}</li>\n                                <li><div class="state-label state-{{item.state}}">{{item.state}}</div></li>\n                            </ul>\n\n                            <div class="main-line clearfix">\n                                <figure class="media" ng-if="item.renditions.thumbnail">\n                                    <img ng-src="{{ item.renditions.thumbnail.href }}" title="{{ item.description }}" />\n                                </figure>\n                                <h5 title="{{ item.headline }}">{{ item.headline }}</h5>\n                            </div>\n                        </div>\n                    </div> --></li></ul></div></div></div><div class="preview" ng-class="{wrap: !selected}"><div class="nav"><button class="backlink" href="" ng-click="view(null)" translate>Back</button> <button ng-repeat="action in actions" class="{{action.class}} pull-right" ng-click="actions.open.method(selected)"><i class="{{action.icon}}"></i> {{ action.title | translate }}</button></div><div class="content-item-preview"><div class="content"><div sd-media-preview-widget data-item="selected"></div></div></div></div>'),
a.put("scripts/superdesk/list/views/list-view.html",'<ul class="list-view"><li class="panel alert alert-info" ng-show="!items"><p translate>Loading..</p></li><li class="panel alert alert-info" ng-show="items.length == 0"><p translate>Oops! There are no items.</p></li><li class="list-item-view" ng-repeat="item in items track by (item._id + item._type) || $index" ng-click="clickItem(item, $event)" ng-class="{active: item._id === selected._id}"><div class="panel-body" sd-list-item data-item="item"></div></li></ul>'),a.put("scripts/superdesk/list/views/sdPagination.html",'<div class="pull-right sd-pagination" ng-if="total"><span class="page-info pull-left" translate>Page Size:</span><div class="page-info pull-left"><select ng-model="limit" ng-options="item for item in pgsizes" ng-change="setLimit(limit)"></select></div><div class="btn-group pull-right"><button class="btn btn-light" ng-disabled="page <= 1" ng-click="setPage(0)"><i class="icon-backward-thin"></i></button> <button class="btn btn-light" ng-disabled="page <= 1" ng-click="setPage(page - 1)"><i class="icon-chevron-left-thin"></i></button> <button class="btn btn-light" ng-disabled="page >= lastPage" ng-click="setPage(page + 1)"><i class="icon-chevron-right-thin"></i></button> <button class="btn btn-light" ng-disabled="page >= lastPage" ng-click="setPage(lastPage)"><i class="icon-forward-thin"></i></button></div><em class="page-info pull-right" ng-show="page <= lastPage">{{ from }}-{{ to }} {{ \'of\'|translate }} {{ total }}</em></div>'),a.put("scripts/superdesk/list/views/sdPaginationAlt.html",'<div class="sd-pagination"><em class="page-info" ng-show="page <= maxPage">{{\'Page\' | translate}} {{page}} {{\'of\' | translate}} {{maxPage}}</em><div class="btn-group"><button class="btn btn-light" ng-disabled="page <= 1" ng-click="page = 1"><i class="icon-backward-thin"></i></button> <button class="btn btn-light" ng-disabled="page <= 1" ng-click="page = page - 1"><i class="icon-chevron-left-thin"></i></button> <button class="btn btn-light" ng-disabled="page >= maxPage" ng-click="page = page + 1"><i class="icon-chevron-right-thin"></i></button> <button class="btn btn-light" ng-disabled="page >= maxPage" ng-click="page = maxPage"><i class="icon-forward-thin"></i></button></div></div>'),a.put("scripts/superdesk/list/views/searchbar.html",'<div class="flat-searchbar" ng-class="{extended: flags.extended}"><div class="search-handler"><label for="search-input" class="trigger-icon" ng-click="flags.extended = !flags.extended"></label><input id="search-input" type="text" placeholder="{{ :: \'Search\' | translate }}" ng-model="q" ng-model-options="{debounce: 500}" ng-change="search()"> <button class="search-close" ng-click="close()" ng-class="{visible: q}"><i class="icon-close-small"></i></button></div><div class="separator-handler"></div></div>'),a.put("scripts/superdesk/menu/notifications/views/notifications.html",'<div class="notification-pane" ng-class="{show: flags.notifications}"><div class="header" ng-if="flags.notifications"><figure class="avatar medium"><img sd-user-avatar data-src="currentUser.picture_url" data-initials="currentUser.display_name"></figure><div class="user-info"><span class="name">{{currentUser.display_name }}</span> <span class="displayname">{{currentUser.username }}</span></div><div class="actions"><a href="#/profile/" ng-click="flags.notifications = false" translate>Profile</a> <button ng-click="logout()" translate>SIGN OUT</button></div></div><div class="content" ng-if="flags.notifications"><section class="module"><header class="title" translate>Notifications</header><div class="notification-list"><ul><li ng-repeat="notification in notifications._items" ng-class="{unread: notification._unread}" sd-mark-as-read><figure class="avatar"><img sd-user-avatar data-src="notification.user.picture_url" data-initials="notification.user.display_name"></figure><div class="content" ng-if="notification.name == \'notify\'"><time sd-datetime data-date="notification._created"></time><p class="text"><b>{{ notification.user.display_name || notification.user.username }}</b> <span translate>commented on</span> <i><a ng-href="#/authoring/{{ notification.item.guid }}?_id={{ notification.item.guid }}&comments={{ notification.data.comment_id }}" title="{{ notification.item.headline }}">{{ notification.item.slugline || notification.item.headline }}</a></i>:<br>{{ notification.data.comment }}</p></div><div class="content" ng-if="notification.name != \'notify\'"><time sd-datetime data-date="notification._created"></time><p class="text"><b>{{ notification.user.display_name || notification.user.username || "System" }}</b>: <span sd-activity-message data-activity="notification"></span></p></div></li><div class="info" ng-show="notifications._items.length === 0" translate>All good so far.</div><div class="info" ng-show="notifications._items == null" translate>loading..</div></ul></div></section></div></div>'),a.put("scripts/superdesk/menu/views/menu.html",'<div><div id="top-menu" ng-class="{\'menu-open\': flags.menu}"><div class="nav pull-left"><button class="collapse-nav pull-left" ng-click="toggleMenu()"><i class="icon-collapse icon-white"></i></button> <a class="main-link pull-left" ng-hide="currentRoute.topTemplateUrl" ng-href="{{currentRoute | menuGroup}}" translate>{{ currentRoute.label }}</a><div class="top-nav pull-left" ng-include="currentRoute.topTemplateUrl"></div></div><div class="nav pull-right"><button class="current-user pull-right" ng-click="toggleNotifications()"><span class="label label--info circle small" ng-show="notifications.unread">{{ notifications.unread }}</span><figure class="avatar"><img sd-user-avatar data-src="currentUser.picture_url" data-initials="currentUser.display_name" alt="{{currentUser.display_name || currentUser.username }}"></figure></button> <button ng-click="toggleBeta()" class="beta-switch pull-right"><span class="stable" ng-if="!beta" tooltip="{{ :: \'Switch to feature preview\' | translate }}" tooltip-placement="left">stable</span> <span class="beta" ng-if="beta" tooltip="{{ :: \'Turn off feature preview\' | translate }}" tooltip-placement="left">feature preview</span></button></div></div><div id="side-menu" ng-class="{\'menu-open\': flags.menu}" ng-include="currentRoute.sideTemplateUrl"></div><div id="main-menu"><div class="header"></div><div class="content"><ul><li ng-repeat="item in menu | filter:{ adminTools: false } | orderBy:\'priority\'" ng-class="{active: item.isActive}"><a ng-href="#{{ :: item.href }}" title="{{ :: item.description | translate }}">{{ :: item.label | translate }}</a></li><li class="main-menu_group-header">Admin tools</li><li ng-repeat="item in menu | filter:{ adminTools: true } | orderBy:\'priority\'" ng-class="{active: item.isActive}"><a ng-href="#{{ :: item.href }}" title="{{ :: item.description | translate }}">{{ :: item.label | translate }}</a></li></ul></div><div class="footer"><i class="icon-superdesk"></i> <span>Powered by Superdesk technology</span></div></div></div>'),a.put("scripts/superdesk/menu/views/superdesk-view.html",'<div sd-menu-wrapper></div><div sd-notifications></div><!-- todo(vladimir): provide some loading indicator --><div class="loading" ng-if="loading"></div><div id="main-container" ng-class="superdesk.flags" ng-if="superdesk.flags.workspace === true"><div id="workspace-container" ng-view></div><div id="authoring-container" ng-if="superdesk.flags.workspace" sd-authoring-container></div><div id="superdesk-workqueue" ng-if="superdesk.flags.workspace" sd-workqueue></div><div sd-item-preview-container></div></div><div id="main-container" ng-class="superdesk.flags" ng-if="superdesk.flags.workspace === false" ng-view></div><div sd-activity-modal></div><div sd-login-modal></div><div sd-notify></div><div sd-activity-chooser></div><div sd-item-globalsearch data-repo="repo" data-context="context" class="pull-left"></div><div class="hard-error" ng-if="serverStatus"><div class="alert alert-error" translate>Superdesk is experiencing network connection issues:/</div></div>'),a.put("scripts/superdesk/notify/views/notify.html",'<div class="notification-holder"><div ng-repeat="msg in messages" class="alert alert-{{ msg.type }}" ng-click="messages.splice($index, 1)">{{ msg.msg }}</div></div>'),a.put("scripts/superdesk/ui/views/datepicker-wrapper.html",'<div class="datepicker-wrapper" ng-show="open" ng-keydown="keydown($event)"><div class="datepicker-additional"><table><tbody><tr><td><button class="btn btn-mini" ng-click="select(0)" tranlsate>Today</button></td><td><button class="btn btn-mini" ng-click="select(1)" tranlsate>Tomorrow</button></td><td><button class="btn btn-mini" ng-click="select(2)" tranlsate>In 2 days</button></td></tr></tbody></table></div><div class="datepicker-core" ng-transclude></div></div>'),a.put("scripts/superdesk/ui/views/sd-datepicker.html",'<div class="datepicker-input" ng-init="opened = false"><input type="text" class="input-small" ng-model="dt" sd-datepicker-inner opened="opened" ng-disabled="disabled"> <button class="btn btn-default" ng-click="opened = !opened" ng-disabled="disabled"><i class="icon-calendar"></i></button></div>'),a.put("scripts/superdesk/ui/views/sd-timepicker-alt.html",'<div><span class="input-small" ng-show="hasValue">{{ hours|leadingZero }}:{{ minutes|leadingZero }}</span> <span class="input-small" ng-show="!hasValue">--- : ---</span> <button class="btn btn-default" ng-click="toggle()"><i class="icon-time"></i></button> <button class="btn btn-default" ng-show="hasValue" title="{{:: \'Clear Value\' | translate}}" ng-click="clearValue()"><i class="icon-remove"></i></button></div><div class="timepicker-popup" ng-show="open" ng-keydown="keydown({e: $event})" tabindex="0"><div class="timepicker-core"><div class="select-area"><div class="header" translate>Hours</div><ul><li ng-repeat="h in hoursRange" ng-click="setHours(h)" ng-class="{active: hours === h}">{{h | leadingZero}}</li></ul></div><div class="select-area"><div class="header" translate>Minutes</div><ul><li ng-repeat="m in minutesRange" ng-click="setMinutes(m)" ng-class="{active: minutes === m}">{{m | leadingZero}}</li></ul></div><button class="btn btn-info btn-small pull-right" ng-click="toggle()" translate>Done</button></div></div>'),a.put("scripts/superdesk/ui/views/sd-timepicker-popup.html",'<div class="timepicker-popup" ng-show="open" ng-keydown="keydown({e: $event})" tabindex="0"><div class="timepicker-additional"><table><tbody><tr><td><button class="btn btn-mini" ng-click="submit(30)" tranlsate>in 30 min</button></td><td><button class="btn btn-mini" ng-click="submit(60)" tranlsate>in 1 h</button></td><td><button class="btn btn-mini" ng-click="submit(120)" tranlsate>in 2 h</button></td></tr></tbody></table></div><div class="timepicker-core"><div class="select-area"><div class="header" translate>Hours</div><ul><li ng-repeat="h in hours" ng-click="$parent.hour = h" ng-class="{active: hour === h}">{{h | leadingZero}}</li></ul></div><div class="select-area"><div class="header" translate>Minutes</div><ul><li ng-repeat="m in minutes" ng-click="$parent.minute = m" ng-class="{active: minute === m}">{{m | leadingZero}}</li></ul></div><button class="btn btn-info btn-small pull-right" ng-click="submit()" translate>Confirm</button> <button class="btn btn-small pull-right" ng-click="cancel()" translate>Cancel</button></div></div>'),a.put("scripts/superdesk/ui/views/sd-timepicker.html",'<div class="timepicker-input" ng-init="opened = false"><input type="text" class="input-small" ng-model="tt" sd-timepicker-inner data-opened="opened" ng-disabled="disabled"> <button class="btn btn-default" ng-click="opened = !opened" ng-disabled="disabled"><i class="icon-time"></i></button></div>'),a.put("scripts/superdesk/ui/views/toggle-box.html",'<div class="toggle-box toggle-box--{{style}} {{mode}}" ng-class="{\'hidden\': !isOpen}"><div class="toggle-box__header" ng-click="toggleModule()"><div class="toggle-box__chevron"><i class="icon-chevron-right-thin"></i></div><div class="toggle-box__label">{{title}}</div><div class="toggle-box__line"></div></div><div class="toggle-box__content" ng-if="isOpen" ng-transclude></div></div>'),a.put("scripts/superdesk/ui/views/weekday-picker.html",'<button class="btn btn-light pull-left" ng-repeat="day in weekdayList" ng-click="toggleDay(day)" ng-class="{active: isDayChecked(day)}">{{ weekdays[day] }}</button>'),a.put("scripts/superdesk/ui/views/wizard.html",'<ul class="nav nav-tabs"><li ng-repeat="step in steps" ng-class="{active: step.selected}"><button ng-click="goTo(step)" ng-disabled="step.disabled" translate>{{ step.title }}</button></li></ul><div class="steps" ng-transclude></div>'),a.put("scripts/superdesk/ui/views/wizardStep.html",'<div ng-show="selected" class="modal-screen" ng-transclude></div>'),a.put("scripts/superdesk/views/confirmation-modal.html",'<div class="modal-header"><h3 ng-bind-html="headerText"></h3></div><div class="modal-body" ng-bind-html="bodyText"></div><div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">{{ okText }}</button> <button class="btn btn-warning" ng-click="cancel()" ng-show="cancelText">{{ cancelText }}</button> <button class="btn btn-warning" ng-click="additionalCancel()" ng-show="additionalCancelText">{{ additionalCancelText }}</button></div>'),a.put("scripts/superdesk/views/sdSearchList.html",'<div class="search-list"><button ng-disabled="!editable" type="button" class="search-list-button" ng-click="open = !open"><span ng-show="selectedItems.length === 0" translate>Select</span> <span ng-show="selectedItems.length === 1">{{selectedItems[0][labelKey]}}</span> <span ng-show="selectedItems.length > 1">{{selectedItems.length}} {{:: \'selected\'|translate}}</span> <span class="caret"></span></button><div ng-show="open" class="search-list-content"><div><div class="selected-list"><button type="button" ng-click="open = !open" class="close-list">x</button><div ng-show="maxSelectedItems !== 1"><label><span translate>Selected items</span> ({{selectedItems.length}} {{::\'of\'|translate}} <span ng-show="maxSelectedItems">{{maxSelectedItems}}</span> <span ng-hide="maxSelectedItems" translate>many</span>)</label></div><div ng-show="maxSelectedItems === 1"><label translate>Selected item</label></div><ul ng-show="selectedItems.length"><li ng-repeat="item in selectedItems"><button type="button" ng-click="unselectItem(item)" class="select-button">{{item[labelKey]}}</button><div class="selected-helper"><div ng-if="selectedItemsHelperTemplate" onload="data = selectedItemsHelperData" ng-include="selectedItemsHelperTemplate"></div></div></li></ul><button type="button" ng-hide="selectedItems.length" class="select-button" translate>None</button></div><div class="unselected-list"><div class="page-info"><label translate>Items</label><span class="pagination"><button type="button" ng-disabled="page === 1" ng-click="page = page - 1">&lt;</button><label translate>{{page}}/{{maxPage}}</label><button type="button" ng-disabled="page === maxPage" ng-click="page = page + 1">&gt;</button></span> <input type="text" placeholder="{{ :: \'Search\' | translate }}" ng-model="keyword" ng-model-options="{debounce: 500}"></div><ul><li ng-repeat="item in items"><button type="button" ng-click="selectItem(item)" ng-disabled="isSelected(item) || isDisabled(item) || selectedItems.length >= maxSelectedItems" class="select-button">{{item[labelKey]}}</button></li></ul></div></div></div></div>'),a.put("scripts/superdesk/views/sdSearchListSingle.html",'<div sd-search-list data-endpoint="{{endpoint}}" data-page-size="{{pageSize}}" data-label-key="{{labelKey}}" data-search-key="{{searchKey}}" data-criteria="criteria" data-disable-items="disableItems" data-max-selected-items="1" data-selected-items="selectedItems"></div>'),a.put("scripts/superdesk/views/sdSlider.html",'<div class="ui-slider-thumb">{{defaultValue}}</div><span class="ui-slider-label left" translate>low</span> <span class="ui-slider-label right" translate>high</span><div class="ui-slider-indicator"><span style="width:{{100 / (list.length - 1)}}%" ng-repeat="item in list" ng-show="!$first"></span></div>'),a.put("scripts/superdesk/views/sdSort.html",'{{ label }} <i class="icon-chevron-down-thin" ng-show="sort[0] === field && sort[1] == \'desc\'"></i> <i class="icon-chevron-up-thin" ng-show="sort[0] === field && sort[1] == \'asc\'"></i>'),a.put("scripts/superdesk/views/sdTypeahead.html",'<div class="sd-typeahead"><div class="input-term"><input ng-model="term" ng-change="query()" type="text" ng-disabled="disabled" autocomplete="off" ng-click="$event.stopPropagation()"></div><div class="item-list" ng-transclude></div></div>'),a.put("scripts/superdesk/views/sdselect.html",'<div class="sdselect" ng-class="{\'open\': open}"><a class="sdselect-btn" ng-click="toggleSelect()" ng-disabled="disabled" ng-class="{\'error\': !valid()}"><span class="pull-left">{{header}}</span> <span class="caret pull-right"></span></a><div class="sdselect-menu" ng-show="open"><div><div class="sdselect-filter" ng-show="showfilter"><input class="input-block-level" type="text" ng-model="searchText.label" autofocus placeholder="{{ \'Filter\' | translate }}"></div><div class="sdselect-all" ng-show="multiple"><a ng-click="checkAll()" translate>Check all</a> <a ng-click="uncheckAll()" translate>Uncheck all</a></div></div><div class="list-holder"><ul><li ng-repeat="i in items | filter:searchText"><a ng-click="select(i); focus()"><i ng-class="{\'icon-ok\': i.checked, \'icon-empty\': !i.checked}"></i>{{i.label}}</a></li></ul></div></div></div>')}]),function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=a.length,c=_.type(a);return"function"===c||_.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if(_.isFunction(b))return _.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return _.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ha.test(b))return _.filter(b,a,c);b=_.filter(b,a)}return _.grep(a,function(a){return U.call(b,a)>=0!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b=oa[a]={};return _.each(a.match(na)||[],function(a,c){b[c]=!0}),b}function g(){Z.removeEventListener("DOMContentLoaded",g,!1),a.removeEventListener("load",g,!1),_.ready()}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=_.expando+h.uid++}function i(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(ua,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:ta.test(c)?_.parseJSON(c):c}catch(e){}sa.set(a,b,c)}else c=void 0;return c}function j(){return!0}function k(){return!1}function l(){try{return Z.activeElement}catch(a){}}function m(a,b){return _.nodeName(a,"table")&&_.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function n(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function o(a){var b=Ka.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function p(a,b){for(var c=0,d=a.length;d>c;c++)ra.set(a[c],"globalEval",!b||ra.get(b[c],"globalEval"))}function q(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(ra.hasData(a)&&(f=ra.access(a),g=ra.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)_.event.add(b,e,j[e][c])}sa.hasData(a)&&(h=sa.access(a),i=_.extend({},h),sa.set(b,i))}}function r(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&_.nodeName(a,b)?_.merge([a],c):c}function s(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ya.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function t(b,c){var d,e=_(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:_.css(e[0],"display");return e.detach(),f}function u(a){var b=Z,c=Oa[a];return c||(c=t(a,b),"none"!==c&&c||(Na=(Na||_("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Na[0].contentDocument,b.write(),b.close(),c=t(a,b),Na.detach()),Oa[a]=c),c}function v(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||_.contains(a.ownerDocument,a)||(g=_.style(a,b)),Qa.test(g)&&Pa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function w(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function x(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Xa.length;e--;)if(b=Xa[e]+c,b in a)return b;return d}function y(a,b,c){var d=Ta.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=_.css(a,c+wa[f],!0,e)),d?("content"===c&&(g-=_.css(a,"padding"+wa[f],!0,e)),"margin"!==c&&(g-=_.css(a,"border"+wa[f]+"Width",!0,e))):(g+=_.css(a,"padding"+wa[f],!0,e),"padding"!==c&&(g+=_.css(a,"border"+wa[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ra(a),g="border-box"===_.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=v(a,b,f),(0>e||null==e)&&(e=a.style[b]),Qa.test(e))return e;d=g&&(Y.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ra.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&xa(d)&&(f[g]=ra.access(d,"olddisplay",u(d.nodeName)))):(e=xa(d),"none"===c&&e||ra.set(d,"olddisplay",e?c:_.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function C(a,b,c,d,e){return new C.prototype.init(a,b,c,d,e)}function D(){return setTimeout(function(){Ya=void 0}),Ya=_.now()}function E(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=wa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function F(a,b,c){for(var d,e=(cb[b]||[]).concat(cb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function G(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&xa(a),p=ra.get(a,"fxshow");c.queue||(h=_._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,_.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=_.css(a,"display"),k="none"===j?ra.get(a,"olddisplay")||u(a.nodeName):j,"inline"===k&&"none"===_.css(a,"float")&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],$a.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||_.style(a,d)}else j=void 0;if(_.isEmptyObject(m))"inline"===("none"===j?u(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=ra.access(a,"fxshow",{}),f&&(p.hidden=!o),o?_(a).show():l.done(function(){_(a).hide()}),l.done(function(){var b;ra.remove(a,"fxshow");for(b in m)_.style(a,b,m[b])});for(d in m)g=F(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function H(a,b){var c,d,e,f,g;for(c in a)if(d=_.camelCase(c),e=b[d],f=a[c],_.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=_.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function I(a,b,c){var d,e,f=0,g=bb.length,h=_.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Ya||D(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:_.extend({},b),opts:_.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Ya||D(),duration:c.duration,tweens:[],createTween:function(b,c){var d=_.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(H(k,j.opts.specialEasing);g>f;f++)if(d=bb[f].call(j,a,k,j.opts))return d;return _.map(k,F,j),_.isFunction(j.opts.start)&&j.opts.start.call(a,j),_.fx.timer(_.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function J(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(na)||[];if(_.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function K(a,b,c,d){function e(h){var i;return f[h]=!0,_.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===tb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function L(a,b){var c,d,e=_.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&_.extend(!0,a,d),a}function M(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function N(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function O(a,b,c,d){var e;if(_.isArray(b))_.each(b,function(b,e){c||yb.test(a)?d(a,e):O(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==_.type(b))d(a,b);else for(e in b)O(a+"["+e+"]",b[e],c,d)}function P(a){return _.isWindow(a)?a:9===a.nodeType&&a.defaultView}var Q=[],R=Q.slice,S=Q.concat,T=Q.push,U=Q.indexOf,V={},W=V.toString,X=V.hasOwnProperty,Y={},Z=a.document,$="2.1.3",_=function(a,b){return new _.fn.init(a,b)},aa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ba=/^-ms-/,ca=/-([\da-z])/gi,da=function(a,b){return b.toUpperCase()};_.fn=_.prototype={jquery:$,constructor:_,selector:"",length:0,toArray:function(){return R.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:R.call(this)},pushStack:function(a){var b=_.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return _.each(this,a,b)},map:function(a){return this.pushStack(_.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(R.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:T,sort:Q.sort,splice:Q.splice},_.extend=_.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||_.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(_.isPlainObject(d)||(e=_.isArray(d)))?(e?(e=!1,f=c&&_.isArray(c)?c:[]):f=c&&_.isPlainObject(c)?c:{},g[b]=_.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},_.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===_.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!_.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==_.type(a)||a.nodeType||_.isWindow(a)?!1:a.constructor&&!X.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?V[W.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=_.trim(a),a&&(1===a.indexOf("use strict")?(b=Z.createElement("script"),b.text=a,Z.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(ba,"ms-").replace(ca,da)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(aa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?_.merge(d,"string"==typeof a?[a]:a):T.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:U.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return S.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),_.isFunction(a)?(d=R.call(arguments,2),e=function(){return a.apply(b||this,d.concat(R.call(arguments)))},e.guid=a.guid=a.guid||_.guid++,e):void 0},now:Date.now,support:Y}),_.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){V["[object "+b+"]"]=b.toLowerCase()});var ea=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType,"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return c;if(!d&&I){if(11!==h&&(e=sa.exec(a)))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=1!==h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ua,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=ta.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b;
}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea=da.replace("w","w#"),fa="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ea+"))|)"+ca+"*\\]",ga=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fa+")*)|.*)\\)|)",ha=new RegExp(ca+"+","g"),ia=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ja=new RegExp("^"+ca+"*,"+ca+"*"),ka=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),la=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),ma=new RegExp(ga),na=new RegExp("^"+ea+"$"),oa={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da.replace("w","w*")+")"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ga),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=/'|\\/g,va=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(ya){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=ra.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=ra.test(d.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=ra.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ga)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=ra.test(H.compareDocumentPosition),M=b||ra.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?aa(D,a)-aa(D,b):0;if(f===h)return g(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(la,"='$1']"),v.matchesSelector&&I&&(!K||!K.test(c))&&(!J||!J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ha," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ia,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(va,wa),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){(!d||(e=ja.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in w.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(va,wa),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(va,wa),ta.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,ta.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);_.find=ea,_.expr=ea.selectors,_.expr[":"]=_.expr.pseudos,_.unique=ea.uniqueSort,_.text=ea.getText,_.isXMLDoc=ea.isXML,_.contains=ea.contains;var fa=_.expr.match.needsContext,ga=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ha=/^.[^:#\[\.,]*$/;_.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?_.find.matchesSelector(d,a)?[d]:[]:_.find.matches(a,_.grep(b,function(a){return 1===a.nodeType}))},_.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(_(a).filter(function(){for(b=0;c>b;b++)if(_.contains(e[b],this))return!0}));for(b=0;c>b;b++)_.find(a,e[b],d);return d=this.pushStack(c>1?_.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&fa.test(a)?_(a):a||[],!1).length}});var ia,ja=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ka=_.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ja.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||ia).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof _?b[0]:b,_.merge(this,_.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:Z,!0)),ga.test(c[1])&&_.isPlainObject(b))for(c in b)_.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=Z.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=Z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):_.isFunction(a)?"undefined"!=typeof ia.ready?ia.ready(a):a(_):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),_.makeArray(a,this))};ka.prototype=_.fn,ia=_(Z);var la=/^(?:parents|prev(?:Until|All))/,ma={children:!0,contents:!0,next:!0,prev:!0};_.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&_(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),_.fn.extend({has:function(a){var b=_(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(_.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=fa.test(a)||"string"!=typeof a?_(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&_.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?_.unique(f):f)},index:function(a){return a?"string"==typeof a?U.call(_(a),this[0]):U.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(_.unique(_.merge(this.get(),_(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),_.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return _.dir(a,"parentNode")},parentsUntil:function(a,b,c){return _.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return _.dir(a,"nextSibling")},prevAll:function(a){return _.dir(a,"previousSibling")},nextUntil:function(a,b,c){return _.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return _.dir(a,"previousSibling",c)},siblings:function(a){return _.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return _.sibling(a.firstChild)},contents:function(a){return a.contentDocument||_.merge([],a.childNodes)}},function(a,b){_.fn[a]=function(c,d){var e=_.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=_.filter(d,e)),this.length>1&&(ma[a]||_.unique(e),la.test(a)&&e.reverse()),this.pushStack(e)}});var na=/\S+/g,oa={};_.Callbacks=function(a){a="string"==typeof a?oa[a]||f(a):_.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(b=a.memory&&f,c=!0,h=e||0,e=0,g=i.length,d=!0;i&&g>h;h++)if(i[h].apply(f[0],f[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,i&&(j?j.length&&k(j.shift()):b?i=[]:l.disable())},l={add:function(){if(i){var c=i.length;!function f(b){_.each(b,function(b,c){var d=_.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),d?g=i.length:b&&(e=c,k(b))}return this},remove:function(){return i&&_.each(arguments,function(a,b){for(var c;(c=_.inArray(b,i,c))>-1;)i.splice(c,1),d&&(g>=c&&g--,h>=c&&h--)}),this},has:function(a){return a?_.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],g=0,this},disable:function(){return i=j=b=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,b||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return!i||c&&!j||(b=b||[],b=[a,b.slice?b.slice():b],d?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},_.extend({Deferred:function(a){var b=[["resolve","done",_.Callbacks("once memory"),"resolved"],["reject","fail",_.Callbacks("once memory"),"rejected"],["notify","progress",_.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return _.Deferred(function(c){_.each(b,function(b,f){var g=_.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&_.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?_.extend(a,d):d}},e={};return d.pipe=d.then,_.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=R.call(arguments),g=f.length,h=1!==g||a&&_.isFunction(a.promise)?g:0,i=1===h?a:_.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?R.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&_.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var pa;_.fn.ready=function(a){return _.ready.promise().done(a),this},_.extend({isReady:!1,readyWait:1,holdReady:function(a){a?_.readyWait++:_.ready(!0)},ready:function(a){(a===!0?--_.readyWait:_.isReady)||(_.isReady=!0,a!==!0&&--_.readyWait>0||(pa.resolveWith(Z,[_]),_.fn.triggerHandler&&(_(Z).triggerHandler("ready"),_(Z).off("ready"))))}}),_.ready.promise=function(b){return pa||(pa=_.Deferred(),"complete"===Z.readyState?setTimeout(_.ready):(Z.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1))),pa.promise(b)},_.ready.promise();var qa=_.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===_.type(c)){e=!0;for(h in c)_.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,_.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(_(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};_.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},h.uid=1,h.accepts=_.acceptData,h.prototype={key:function(a){if(!h.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=h.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,_.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(_.isEmptyObject(f))_.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,_.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{_.isArray(b)?d=b.concat(b.map(_.camelCase)):(e=_.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(na)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!_.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var ra=new h,sa=new h,ta=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ua=/([A-Z])/g;_.extend({hasData:function(a){return sa.hasData(a)||ra.hasData(a)},data:function(a,b,c){return sa.access(a,b,c)},removeData:function(a,b){sa.remove(a,b)},_data:function(a,b,c){return ra.access(a,b,c)},_removeData:function(a,b){ra.remove(a,b)}}),_.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=sa.get(f),1===f.nodeType&&!ra.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=_.camelCase(d.slice(5)),i(f,d,e[d])));ra.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){sa.set(this,a)}):qa(this,function(b){var c,d=_.camelCase(a);if(f&&void 0===b){if(c=sa.get(f,a),void 0!==c)return c;if(c=sa.get(f,d),void 0!==c)return c;if(c=i(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=sa.get(this,d);sa.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&sa.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){sa.remove(this,a)})}}),_.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ra.get(a,b),c&&(!d||_.isArray(c)?d=ra.access(a,b,_.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=_.queue(a,b),d=c.length,e=c.shift(),f=_._queueHooks(a,b),g=function(){_.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ra.get(a,c)||ra.access(a,c,{empty:_.Callbacks("once memory").add(function(){ra.remove(a,[b+"queue",c])})})}}),_.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?_.queue(this[0],a):void 0===b?this:this.each(function(){var c=_.queue(this,a,b);_._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&_.dequeue(this,a)})},dequeue:function(a){return this.each(function(){_.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=_.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=ra.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var va=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wa=["Top","Right","Bottom","Left"],xa=function(a,b){return a=b||a,"none"===_.css(a,"display")||!_.contains(a.ownerDocument,a)},ya=/^(?:checkbox|radio)$/i;!function(){var a=Z.createDocumentFragment(),b=a.appendChild(Z.createElement("div")),c=Z.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),Y.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var za="undefined";Y.focusinBubbles="onfocusin"in a;var Aa=/^key/,Ba=/^(?:mouse|pointer|contextmenu)|click/,Ca=/^(?:focusinfocus|focusoutblur)$/,Da=/^([^.]*)(?:\.(.+)|)$/;_.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ra.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=_.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof _!==za&&_.event.triggered!==b.type?_.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(na)||[""],j=b.length;j--;)h=Da.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=_.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=_.event.special[n]||{},k=_.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&_.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),_.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ra.hasData(a)&&ra.get(a);if(q&&(i=q.events)){for(b=(b||"").match(na)||[""],j=b.length;j--;)if(h=Da.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=_.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||_.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)_.event.remove(a,n+b[j],c,d,!0);_.isEmptyObject(i)&&(delete q.handle,ra.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||Z],n=X.call(b,"type")?b.type:b,o=X.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||Z,3!==d.nodeType&&8!==d.nodeType&&!Ca.test(n+_.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[_.expando]?b:new _.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:_.makeArray(c,[b]),l=_.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!_.isWindow(d)){for(i=l.delegateType||n,Ca.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||Z)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(ra.get(g,"events")||{})[b.type]&&ra.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&_.acceptData(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!_.acceptData(d)||j&&_.isFunction(d[n])&&!_.isWindow(d)&&(h=d[j],h&&(d[j]=null),_.event.triggered=n,d[n](),_.event.triggered=void 0,h&&(d[j]=h)),b.result}},dispatch:function(a){a=_.event.fix(a);var b,c,d,e,f,g=[],h=R.call(arguments),i=(ra.get(this,"events")||{})[a.type]||[],j=_.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=_.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(f.namespace))&&(a.handleObj=f,a.data=f.data,d=((_.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),
void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?_(e,this).index(i)>=0:_.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||Z,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[_.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ba.test(e)?this.mouseHooks:Aa.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new _.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=Z),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&_.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return _.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=_.extend(new _.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?_.event.trigger(e,null,b):_.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},_.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},_.Event=function(a,b){return this instanceof _.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?j:k):this.type=a,b&&_.extend(this,b),this.timeStamp=a&&a.timeStamp||_.now(),void(this[_.expando]=!0)):new _.Event(a,b)},_.Event.prototype={isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=j,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=j,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=j,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){_.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!_.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),Y.focusinBubbles||_.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){_.event.simulate(b,a.target,_.event.fix(a),!0)};_.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=ra.access(d,b);e||d.addEventListener(a,c,!0),ra.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=ra.access(d,b)-1;e?ra.access(d,b,e):(d.removeEventListener(a,c,!0),ra.remove(d,b))}}}),_.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=k;else if(!d)return this;return 1===e&&(f=d,d=function(a){return _().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=_.guid++)),this.each(function(){_.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,_(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=k),this.each(function(){_.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){_.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?_.event.trigger(a,b,c,!0):void 0}});var Ea=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Fa=/<([\w:]+)/,Ga=/<|&#?\w+;/,Ha=/<(?:script|style|link)/i,Ia=/checked\s*(?:[^=]|=\s*.checked.)/i,Ja=/^$|\/(?:java|ecma)script/i,Ka=/^true\/(.*)/,La=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ma.optgroup=Ma.option,Ma.tbody=Ma.tfoot=Ma.colgroup=Ma.caption=Ma.thead,Ma.th=Ma.td,_.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=_.contains(a.ownerDocument,a);if(!(Y.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||_.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;e>d;d++)s(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;e>d;d++)q(f[d],g[d]);else q(a,h);return g=r(h,"script"),g.length>0&&p(g,!i&&r(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if(e=a[m],e||0===e)if("object"===_.type(e))_.merge(l,e.nodeType?[e]:e);else if(Ga.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(Fa.exec(e)||["",""])[1].toLowerCase(),h=Ma[g]||Ma._default,f.innerHTML=h[1]+e.replace(Ea,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;_.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===_.inArray(e,d))&&(i=_.contains(e.ownerDocument,e),f=r(k.appendChild(e),"script"),i&&p(f),c))for(j=0;e=f[j++];)Ja.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f=_.event.special,g=0;void 0!==(c=a[g]);g++){if(_.acceptData(c)&&(e=c[ra.expando],e&&(b=ra.cache[e]))){if(b.events)for(d in b.events)f[d]?_.event.remove(c,d):_.removeEvent(c,d,b.handle);ra.cache[e]&&delete ra.cache[e]}delete sa.cache[c[sa.expando]]}}}),_.fn.extend({text:function(a){return qa(this,function(a){return void 0===a?_.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?_.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||_.cleanData(r(c)),c.parentNode&&(b&&_.contains(c.ownerDocument,c)&&p(r(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(_.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return _.clone(this,a,b)})},html:function(a){return qa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Ha.test(a)&&!Ma[(Fa.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ea,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(_.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,_.cleanData(r(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=S.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],p=_.isFunction(m);if(p||j>1&&"string"==typeof m&&!Y.checkClone&&Ia.test(m))return this.each(function(c){var d=k.eq(c);p&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(c=_.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(e=_.map(r(c,"script"),n),f=e.length;j>i;i++)g=c,i!==l&&(g=_.clone(g,!0,!0),f&&_.merge(e,r(g,"script"))),b.call(this[i],g,i);if(f)for(h=e[e.length-1].ownerDocument,_.map(e,o),i=0;f>i;i++)g=e[i],Ja.test(g.type||"")&&!ra.access(g,"globalEval")&&_.contains(h,g)&&(g.src?_._evalUrl&&_._evalUrl(g.src):_.globalEval(g.textContent.replace(La,"")))}return this}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){_.fn[a]=function(a){for(var c,d=[],e=_(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),_(e[g])[b](c),T.apply(d,c.get());return this.pushStack(d)}});var Na,Oa={},Pa=/^margin/,Qa=new RegExp("^("+va+")(?!px)[a-z%]+$","i"),Ra=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};!function(){function b(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",g.innerHTML="",e.appendChild(f);var b=a.getComputedStyle(g,null);c="1%"!==b.top,d="4px"===b.width,e.removeChild(f)}var c,d,e=Z.documentElement,f=Z.createElement("div"),g=Z.createElement("div");g.style&&(g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===g.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",f.appendChild(g),a.getComputedStyle&&_.extend(Y,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},reliableMarginRight:function(){var b,c=g.appendChild(Z.createElement("div"));return c.style.cssText=g.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",g.style.width="1px",e.appendChild(f),b=!parseFloat(a.getComputedStyle(c,null).marginRight),e.removeChild(f),g.removeChild(c),b}}))}(),_.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Sa=/^(none|table(?!-c[ea]).+)/,Ta=new RegExp("^("+va+")(.*)$","i"),Ua=new RegExp("^([+-])=("+va+")","i"),Va={position:"absolute",visibility:"hidden",display:"block"},Wa={letterSpacing:"0",fontWeight:"400"},Xa=["Webkit","O","Moz","ms"];_.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=v(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=_.camelCase(b),i=a.style;return b=_.cssProps[h]||(_.cssProps[h]=x(i,h)),g=_.cssHooks[b]||_.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ua.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(_.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||_.cssNumber[h]||(c+="px"),Y.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=_.camelCase(b);return b=_.cssProps[h]||(_.cssProps[h]=x(a.style,h)),g=_.cssHooks[b]||_.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=v(a,b,d)),"normal"===e&&b in Wa&&(e=Wa[b]),""===c||c?(f=parseFloat(e),c===!0||_.isNumeric(f)?f||0:e):e}}),_.each(["height","width"],function(a,b){_.cssHooks[b]={get:function(a,c,d){return c?Sa.test(_.css(a,"display"))&&0===a.offsetWidth?_.swap(a,Va,function(){return A(a,b,d)}):A(a,b,d):void 0},set:function(a,c,d){var e=d&&Ra(a);return y(a,c,d?z(a,b,d,"border-box"===_.css(a,"boxSizing",!1,e),e):0)}}}),_.cssHooks.marginRight=w(Y.reliableMarginRight,function(a,b){return b?_.swap(a,{display:"inline-block"},v,[a,"marginRight"]):void 0}),_.each({margin:"",padding:"",border:"Width"},function(a,b){_.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+wa[d]+b]=f[d]||f[d-2]||f[0];return e}},Pa.test(a)||(_.cssHooks[a+b].set=y)}),_.fn.extend({css:function(a,b){return qa(this,function(a,b,c){var d,e,f={},g=0;if(_.isArray(b)){for(d=Ra(a),e=b.length;e>g;g++)f[b[g]]=_.css(a,b[g],!1,d);return f}return void 0!==c?_.style(a,b,c):_.css(a,b)},a,b,arguments.length>1)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){xa(this)?_(this).show():_(this).hide()})}}),_.Tween=C,C.prototype={constructor:C,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(_.cssNumber[c]?"":"px")},cur:function(){var a=C.propHooks[this.prop];return a&&a.get?a.get(this):C.propHooks._default.get(this)},run:function(a){var b,c=C.propHooks[this.prop];return this.options.duration?this.pos=b=_.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):C.propHooks._default.set(this),this}},C.prototype.init.prototype=C.prototype,C.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=_.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){_.fx.step[a.prop]?_.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[_.cssProps[a.prop]]||_.cssHooks[a.prop])?_.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},_.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},_.fx=C.prototype.init,_.fx.step={};var Ya,Za,$a=/^(?:toggle|show|hide)$/,_a=new RegExp("^(?:([+-])=|)("+va+")([a-z%]*)$","i"),ab=/queueHooks$/,bb=[G],cb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=_a.exec(b),f=e&&e[3]||(_.cssNumber[a]?"":"px"),g=(_.cssNumber[a]||"px"!==f&&+d)&&_a.exec(_.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,_.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};_.Animation=_.extend(I,{tweener:function(a,b){_.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],cb[c]=cb[c]||[],cb[c].unshift(b)},prefilter:function(a,b){b?bb.unshift(a):bb.push(a)}}),_.speed=function(a,b,c){var d=a&&"object"==typeof a?_.extend({},a):{complete:c||!c&&b||_.isFunction(a)&&a,duration:a,easing:c&&b||b&&!_.isFunction(b)&&b};return d.duration=_.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in _.fx.speeds?_.fx.speeds[d.duration]:_.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){_.isFunction(d.old)&&d.old.call(this),d.queue&&_.dequeue(this,d.queue)},d},_.fn.extend({fadeTo:function(a,b,c,d){return this.filter(xa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=_.isEmptyObject(a),f=_.speed(b,c,d),g=function(){var b=I(this,_.extend({},a),f);(e||ra.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=_.timers,g=ra.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ab.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&_.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ra.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=_.timers,g=d?d.length:0;for(c.finish=!0,_.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),_.each(["toggle","show","hide"],function(a,b){var c=_.fn[b];_.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(E(b,!0),a,d,e)}}),_.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){_.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),_.timers=[],_.fx.tick=function(){var a,b=0,c=_.timers;for(Ya=_.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||_.fx.stop(),Ya=void 0},_.fx.timer=function(a){_.timers.push(a),a()?_.fx.start():_.timers.pop()},_.fx.interval=13,_.fx.start=function(){Za||(Za=setInterval(_.fx.tick,_.fx.interval))},_.fx.stop=function(){clearInterval(Za),Za=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(a,b){return a=_.fx?_.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=Z.createElement("input"),b=Z.createElement("select"),c=b.appendChild(Z.createElement("option"));a.type="checkbox",Y.checkOn=""!==a.value,Y.optSelected=c.selected,b.disabled=!0,Y.optDisabled=!c.disabled,a=Z.createElement("input"),a.value="t",a.type="radio",Y.radioValue="t"===a.value}();var db,eb,fb=_.expr.attrHandle;_.fn.extend({attr:function(a,b){return qa(this,_.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){_.removeAttr(this,a)})}}),_.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===za?_.prop(a,b,c):(1===f&&_.isXMLDoc(a)||(b=b.toLowerCase(),d=_.attrHooks[b]||(_.expr.match.bool.test(b)?eb:db)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=_.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void _.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(na);if(f&&1===a.nodeType)for(;c=f[e++];)d=_.propFix[c]||c,_.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!Y.radioValue&&"radio"===b&&_.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),eb={set:function(a,b,c){return b===!1?_.removeAttr(a,c):a.setAttribute(c,c),c}},_.each(_.expr.match.bool.source.match(/\w+/g),function(a,b){var c=fb[b]||_.find.attr;fb[b]=function(a,b,d){var e,f;return d||(f=fb[b],fb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,fb[b]=f),e}});var gb=/^(?:input|select|textarea|button)$/i;_.fn.extend({prop:function(a,b){return qa(this,_.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[_.propFix[a]||a]})}}),_.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!_.isXMLDoc(a),f&&(b=_.propFix[b]||b,e=_.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||gb.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),Y.optSelected||(_.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});var hb=/[\t\r\n\f]/g;_.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(na)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hb," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=_.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(na)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hb," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?_.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):_.isFunction(a)?this.each(function(c){_(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=_(this),f=a.match(na)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===za||"boolean"===c)&&(this.className&&ra.set(this,"__className__",this.className),this.className=this.className||a===!1?"":ra.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(hb," ").indexOf(b)>=0)return!0;return!1}});var ib=/\r/g;_.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=_.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,_(this).val()):a,null==e?e="":"number"==typeof e?e+="":_.isArray(e)&&(e=_.map(e,function(a){return null==a?"":a+""})),b=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=_.valHooks[e.type]||_.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ib,""):null==c?"":c)}}}),_.extend({valHooks:{option:{get:function(a){var b=_.find.attr(a,"value");return null!=b?b:_.trim(_.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(Y.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!_.nodeName(c.parentNode,"optgroup"))){if(b=_(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=_.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=_.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(a,b){return _.isArray(b)?a.checked=_.inArray(_(a).val(),b)>=0:void 0}},Y.checkOn||(_.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),_.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){_.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),_.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var jb=_.now(),kb=/\?/;_.parseJSON=function(a){return JSON.parse(a+"")},_.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&_.error("Invalid XML: "+a),b};var lb=/#.*$/,mb=/([?&])_=[^&]*/,nb=/^(.*?):[ \t]*([^\r\n]*)$/gm,ob=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pb=/^(?:GET|HEAD)$/,qb=/^\/\//,rb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,sb={},tb={},ub="*/".concat("*"),vb=a.location.href,wb=rb.exec(vb.toLowerCase())||[];_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vb,type:"GET",isLocal:ob.test(wb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":_.parseJSON,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?L(L(a,_.ajaxSettings),b):L(_.ajaxSettings,a)},ajaxPrefilter:J(sb),ajaxTransport:J(tb),ajax:function(a,b){function c(a,b,c,g){var i,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),d=void 0,f=g||"",v.readyState=a>0?4:0,i=a>=200&&300>a||304===a,c&&(s=M(l,v,c)),s=N(l,s,v,i),i?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(_.lastModified[e]=u),u=v.getResponseHeader("etag"),u&&(_.etag[e]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,i=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",i?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,j&&n.trigger(i?"ajaxSuccess":"ajaxError",[v,l,i?k:r]),p.fireWith(m,[v,w]),j&&(n.trigger("ajaxComplete",[v,l]),--_.active||_.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=_.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?_(m):_.event,o=_.Deferred(),p=_.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!g)for(g={};b=nb.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return d&&d.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||vb)+"").replace(lb,"").replace(qb,wb[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=_.trim(l.dataType||"*").toLowerCase().match(na)||[""],null==l.crossDomain&&(i=rb.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===wb[1]&&i[2]===wb[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(wb[3]||("http:"===wb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=_.param(l.data,l.traditional)),K(sb,l,b,v),2===t)return v;j=_.event&&l.global,j&&0===_.active++&&_.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!pb.test(l.type),e=l.url,l.hasContent||(l.data&&(e=l.url+=(kb.test(e)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=mb.test(e)?e.replace(mb,"$1_="+jb++):e+(kb.test(e)?"&":"?")+"_="+jb++)),l.ifModified&&(_.lastModified[e]&&v.setRequestHeader("If-Modified-Since",_.lastModified[e]),_.etag[e]&&v.setRequestHeader("If-None-Match",_.etag[e])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+ub+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);if(d=K(tb,l,b,v)){v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,d.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return _.get(a,b,c,"json")},getScript:function(a,b){return _.get(a,void 0,b,"script")}}),_.each(["get","post"],function(a,b){_[b]=function(a,c,d,e){return _.isFunction(c)&&(e=e||d,d=c,c=void 0),_.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),_._evalUrl=function(a){return _.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},_.fn.extend({wrapAll:function(a){var b;return _.isFunction(a)?this.each(function(b){_(this).wrapAll(a.call(this,b))}):(this[0]&&(b=_(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return _.isFunction(a)?this.each(function(b){_(this).wrapInner(a.call(this,b))}):this.each(function(){var b=_(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=_.isFunction(a);return this.each(function(c){_(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){_.nodeName(this,"body")||_(this).replaceWith(this.childNodes)}).end()}}),_.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},_.expr.filters.visible=function(a){return!_.expr.filters.hidden(a)};var xb=/%20/g,yb=/\[\]$/,zb=/\r?\n/g,Ab=/^(?:submit|button|image|reset|file)$/i,Bb=/^(?:input|select|textarea|keygen)/i;_.param=function(a,b){var c,d=[],e=function(a,b){b=_.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=_.ajaxSettings&&_.ajaxSettings.traditional),_.isArray(a)||a.jquery&&!_.isPlainObject(a))_.each(a,function(){e(this.name,this.value)});else for(c in a)O(c,a[c],b,e);return d.join("&").replace(xb,"+")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=_.prop(this,"elements");return a?_.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!_(this).is(":disabled")&&Bb.test(this.nodeName)&&!Ab.test(a)&&(this.checked||!ya.test(a))}).map(function(a,b){var c=_(this).val();return null==c?null:_.isArray(c)?_.map(c,function(a){return{name:b.name,value:a.replace(zb,"\r\n")}}):{name:b.name,value:c.replace(zb,"\r\n")}}).get()}}),_.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cb=0,Db={},Eb={0:200,1223:204},Fb=_.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Db)Db[a]()}),Y.cors=!!Fb&&"withCredentials"in Fb,Y.ajax=Fb=!!Fb,_.ajaxTransport(function(a){var b;return Y.cors||Fb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),
a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Db[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Eb[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Db[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return _.globalEval(a),a}}}),_.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),_.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=_("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),Z.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gb=[],Hb=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gb.pop()||_.expando+"_"+jb++;return this[a]=!0,a}}),_.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=_.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hb,"$1"+e):b.jsonp!==!1&&(b.url+=(kb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||_.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gb.push(e)),g&&_.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),_.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Z;var d=ga.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=_.buildFragment([a],b,e),e&&e.length&&_(e).remove(),_.merge([],d.childNodes))};var Ib=_.fn.load;_.fn.load=function(a,b,c){if("string"!=typeof a&&Ib)return Ib.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=_.trim(a.slice(h)),a=a.slice(0,h)),_.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&_.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?_("<div>").append(_.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){_.fn[b]=function(a){return this.on(b,a)}}),_.expr.filters.animated=function(a){return _.grep(_.timers,function(b){return a===b.elem}).length};var Jb=a.document.documentElement;_.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=_.css(a,"position"),l=_(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=_.css(a,"top"),i=_.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),_.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},_.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){_.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,_.contains(b,d)?(typeof d.getBoundingClientRect!==za&&(e=d.getBoundingClientRect()),c=P(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===_.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),_.nodeName(a[0],"html")||(d=a.offset()),d.top+=_.css(a[0],"borderTopWidth",!0),d.left+=_.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-_.css(c,"marginTop",!0),left:b.left-d.left-_.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Jb;a&&!_.nodeName(a,"html")&&"static"===_.css(a,"position");)a=a.offsetParent;return a||Jb})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;_.fn[b]=function(e){return qa(this,function(b,e,f){var g=P(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),_.each(["top","left"],function(a,b){_.cssHooks[b]=w(Y.pixelPosition,function(a,c){return c?(c=v(a,b),Qa.test(c)?_(a).position()[b]+"px":c):void 0})}),_.each({Height:"height",Width:"width"},function(a,b){_.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){_.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return qa(this,function(b,c,d){var e;return _.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?_.css(b,c,g):_.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),_.fn.size=function(){return this.length},_.fn.andSelf=_.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return _});var Kb=a.jQuery,Lb=a.$;return _.noConflict=function(b){return a.$===_&&(a.$=Lb),b&&a.jQuery===_&&(a.jQuery=Kb),_},typeof b===za&&(a.jQuery=a.$=_),_}),function(a,b,c){"use strict";function d(a,b){return b=b||Error,function(){var c,d,e=2,f=arguments,g=f[0],h="["+(a?a+":":"")+g+"] ",i=f[1];for(h+=i.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1),c=b+e;return c<f.length?sa(f[c]):a}),h+="\nhttp://errors.angularjs.org/1.4.1/"+(a?a+"/":"")+g,d=e,c="?";d<f.length;d++,c="&")h+=c+"p"+(d-e)+"="+encodeURIComponent(sa(f[d]));return new b(h)}}function e(a){if(null==a||B(a))return!1;var b="length"in Object(a)&&a.length;return a.nodeType===Vd&&b?!0:w(a)||Md(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function f(a,b,c){var d,g;if(a)if(z(a))for(d in a)"prototype"==d||"length"==d||"name"==d||a.hasOwnProperty&&!a.hasOwnProperty(d)||b.call(c,a[d],d,a);else if(Md(a)||e(a)){var h="object"!=typeof a;for(d=0,g=a.length;g>d;d++)(h||d in a)&&b.call(c,a[d],d,a)}else if(a.forEach&&a.forEach!==f)a.forEach(b,c,a);else if(v(a))for(d in a)b.call(c,a[d],d,a);else if("function"==typeof a.hasOwnProperty)for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a);else for(d in a)vd.call(a,d)&&b.call(c,a[d],d,a);return a}function g(a,b,c){for(var d=Object.keys(a).sort(),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function h(a){return function(b,c){a(c,b)}}function i(){return++Kd}function j(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function k(a,b,c){for(var d=a.$$hashKey,e=0,f=b.length;f>e;++e){var g=b[e];if(u(g)||z(g))for(var h=Object.keys(g),i=0,l=h.length;l>i;i++){var m=h[i],n=g[m];c&&u(n)?(u(a[m])||(a[m]=Md(n)?[]:{}),k(a[m],[n],!0)):a[m]=n}}return j(a,d),a}function l(a){return k(a,Dd.call(arguments,1),!1)}function m(a){return k(a,Dd.call(arguments,1),!0)}function n(a){return parseInt(a,10)}function o(a,b){return l(Object.create(a),b)}function p(){}function q(a){return a}function r(a){return function(){return a}}function s(a){return"undefined"==typeof a}function t(a){return"undefined"!=typeof a}function u(a){return null!==a&&"object"==typeof a}function v(a){return null!==a&&"object"==typeof a&&!Hd(a)}function w(a){return"string"==typeof a}function x(a){return"number"==typeof a}function y(a){return"[object Date]"===Gd.call(a)}function z(a){return"function"==typeof a}function A(a){return"[object RegExp]"===Gd.call(a)}function B(a){return a&&a.window===a}function C(a){return a&&a.$evalAsync&&a.$watch}function D(a){return"[object File]"===Gd.call(a)}function E(a){return"[object FormData]"===Gd.call(a)}function F(a){return"[object Blob]"===Gd.call(a)}function G(a){return"boolean"==typeof a}function H(a){return a&&z(a.then)}function I(a){return Nd.test(Gd.call(a))}function J(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function K(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function L(a){return ud(a.nodeName||a[0]&&a[0].nodeName)}function M(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),c}function N(a,b,c,d){if(B(a)||C(a))throw Id("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(I(b))throw Id("cpta","Can't copy! TypedArray destination cannot be mutated.");if(b){if(a===b)throw Id("cpi","Can't copy! Source and destination are identical.");c=c||[],d=d||[],u(a)&&(c.push(a),d.push(b));var e;if(Md(a)){b.length=0;for(var g=0;g<a.length;g++)b.push(N(a[g],null,c,d))}else{var h=b.$$hashKey;if(Md(b)?b.length=0:f(b,function(a,c){delete b[c]}),v(a))for(e in a)b[e]=N(a[e],null,c,d);else if(a&&"function"==typeof a.hasOwnProperty)for(e in a)a.hasOwnProperty(e)&&(b[e]=N(a[e],null,c,d));else for(e in a)vd.call(a,e)&&(b[e]=N(a[e],null,c,d));j(b,h)}}else if(b=a,u(a)){var i;if(c&&-1!==(i=c.indexOf(a)))return d[i];if(Md(a))return N(a,[],c,d);if(I(a))b=new a.constructor(a);else if(y(a))b=new Date(a.getTime());else{if(!A(a)){var k=Object.create(Hd(a));return N(a,k,c,d)}b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex}d&&(c.push(a),d.push(b))}return b}function O(a,b){if(Md(a)){b=b||[];for(var c=0,d=a.length;d>c;c++)b[c]=a[c]}else if(u(a)){b=b||{};for(var e in a)("$"!==e.charAt(0)||"$"!==e.charAt(1))&&(b[e]=a[e])}return b||a}function P(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!Md(a)){if(y(a))return y(b)?P(a.getTime(),b.getTime()):!1;if(A(a))return A(b)?a.toString()==b.toString():!1;if(C(a)||C(b)||B(a)||B(b)||Md(b)||y(b)||A(b))return!1;f=pa();for(e in a)if("$"!==e.charAt(0)&&!z(a[e])){if(!P(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!(e in f||"$"===e.charAt(0)||b[e]===c||z(b[e])))return!1;return!0}if(!Md(b))return!1;if((d=a.length)==b.length){for(e=0;d>e;e++)if(!P(a[e],b[e]))return!1;return!0}}return!1}function Q(a,b,c){return a.concat(Dd.call(b,c))}function R(a,b){return Dd.call(a,b||0)}function S(a,b){var c=arguments.length>2?R(arguments,2):[];return!z(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,Q(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function T(a,d){var e=d;return"string"==typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?e=c:B(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":C(d)&&(e="$SCOPE"),e}function U(a,b){return"undefined"==typeof a?c:(x(b)||(b=b?2:null),JSON.stringify(a,T,b))}function V(a){return w(a)?JSON.parse(a):a}function W(a,b){var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function X(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function Y(a,b,c){c=c?-1:1;var d=W(b,a.getTimezoneOffset());return X(a,c*(d-a.getTimezoneOffset()))}function Z(a){a=Ad(a).clone();try{a.empty()}catch(b){}var c=Ad("<div>").append(a).html();try{return a[0].nodeType===Xd?ud(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+ud(b)})}catch(b){return ud(c)}}function $(a){try{return decodeURIComponent(a)}catch(b){}}function _(a){var b,c,d={};return f((a||"").split("&"),function(a){if(a&&(b=a.replace(/\+/g,"%20").split("="),c=$(b[0]),t(c))){var e=t(b[1])?$(b[1]):!0;vd.call(d,c)?Md(d[c])?d[c].push(e):d[c]=[d[c],e]:d[c]=e}}),d}function aa(a){var b=[];return f(a,function(a,c){Md(a)?f(a,function(a){b.push(ca(c,!0)+(a===!0?"":"="+ca(a,!0)))}):b.push(ca(c,!0)+(a===!0?"":"="+ca(a,!0)))}),b.length?b.join("&"):""}function ba(a){return ca(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ca(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function da(a,b){var c,d,e=Sd.length;for(d=0;e>d;++d)if(c=Sd[d]+b,w(c=a.getAttribute(c)))return c;return null}function ea(a,b){var c,d,e={};f(Sd,function(b){var e=b+"app";!c&&a.hasAttribute&&a.hasAttribute(e)&&(c=a,d=a.getAttribute(e))}),f(Sd,function(b){var e,f=b+"app";!c&&(e=a.querySelector("["+f.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(f))}),c&&(e.strictDi=null!==da(c,"strict-di"),b(c,d?[d]:[],e))}function fa(c,d,e){u(e)||(e={});var g={strictDi:!1};e=l(g,e);var h=function(){if(c=Ad(c),c.injector()){var a=c[0]===b?"document":Z(c);throw Id("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"))}d=d||[],d.unshift(["$provide",function(a){a.value("$rootElement",c)}]),e.debugInfoEnabled&&d.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),d.unshift("ng");var f=Za(d,e.strictDi);return f.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),f},i=/^NG_ENABLE_DEBUG_INFO!/,j=/^NG_DEFER_BOOTSTRAP!/;return a&&i.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(i,"")),a&&!j.test(a.name)?h():(a.name=a.name.replace(j,""),Jd.resumeBootstrap=function(a){return f(a,function(a){d.push(a)}),h()},void(z(Jd.resumeDeferredBootstrap)&&Jd.resumeDeferredBootstrap()))}function ga(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function ha(a){var b=Jd.element(a).injector();if(!b)throw Id("test","no injector found for element argument to getTestability");return b.get("$$testability")}function ia(a,b){return b=b||"_",a.replace(Td,function(a,c){return(c?b:"")+a.toLowerCase()})}function ja(){var b;if(!Ud){var d=Rd();Bd=a.jQuery,t(d)&&(Bd=null===d?c:a[d]),Bd&&Bd.fn.on?(Ad=Bd,l(Bd.fn,{scope:ne.scope,isolateScope:ne.isolateScope,controller:ne.controller,injector:ne.injector,inheritedData:ne.inheritedData}),b=Bd.cleanData,Bd.cleanData=function(a){var c;if(Ld)Ld=!1;else for(var d,e=0;null!=(d=a[e]);e++)c=Bd._data(d,"events"),c&&c.$destroy&&Bd(d).triggerHandler("$destroy");b(a)}):Ad=Ba,Jd.element=Ad,Ud=!0}}function ka(a,b,c){if(!a)throw Id("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function la(a,b,c){return c&&Md(a)&&(a=a[a.length-1]),ka(z(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function ma(a,b){if("hasOwnProperty"===a)throw Id("badname","hasOwnProperty is not a valid {0} name",b)}function na(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&z(a)?S(f,a):a}function oa(a){var b=a[0],c=a[a.length-1],d=[b];do{if(b=b.nextSibling,!b)break;d.push(b)}while(b!==c);return Ad(d)}function pa(){return Object.create(null)}function qa(a){function b(a,b,c){return a[b]||(a[b]=c())}var c=d("$injector"),e=d("ng"),f=b(a,"angular",Object);return f.$$minErr=f.$$minErr||d,b(f,"module",function(){var a={};return function(d,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(d,"module"),f&&a.hasOwnProperty(d)&&(a[d]=null),b(a,d,function(){function a(a,b,c,d){return d||(d=e),function(){return d[c||"push"]([a,b,arguments]),k}}function b(a,b){return function(c,f){return f&&z(f)&&(f.$$moduleName=d),e.push([a,b,arguments]),k}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);var e=[],h=[],i=[],j=a("$injector","invoke","push",h),k={_invokeQueue:e,_configBlocks:h,_runBlocks:i,requires:f,name:d,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:j,run:function(a){return i.push(a),this}};return g&&j(g),k})}})}function ra(a){var b=[];return JSON.stringify(a,function(a,c){if(c=T(a,c),u(c)){if(b.indexOf(c)>=0)return"<<already seen>>";b.push(c)}return c})}function sa(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?ra(a):a}function ta(b){l(b,{bootstrap:fa,copy:N,extend:l,merge:m,equals:P,element:Ad,forEach:f,injector:Za,noop:p,bind:S,toJson:U,fromJson:V,identity:q,isUndefined:s,isDefined:t,isString:w,isFunction:z,isObject:u,isNumber:x,isElement:J,isArray:Md,version:_d,isDate:y,lowercase:ud,uppercase:wd,callbacks:{counter:0},getTestability:ha,$$minErr:d,$$csp:Qd,reloadWithDebugInfo:ga}),Cd=qa(a);try{Cd("ngLocale")}catch(c){Cd("ngLocale",[]).provider("$locale",Fb)}Cd("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:qc}),a.provider("$compile",ib).directive({a:kf,input:Bf,textarea:Bf,form:pf,script:tg,select:wg,style:yg,option:xg,ngBind:Ef,ngBindHtml:Gf,ngBindTemplate:Ff,ngClass:If,ngClassEven:Kf,ngClassOdd:Jf,ngCloak:Lf,ngController:Mf,ngForm:qf,ngHide:ng,ngIf:Pf,ngInclude:Qf,ngInit:Sf,ngNonBindable:eg,ngPluralize:ig,ngRepeat:jg,ngShow:mg,ngStyle:og,ngSwitch:pg,ngSwitchWhen:qg,ngSwitchDefault:rg,ngOptions:hg,ngTransclude:sg,ngModel:bg,ngList:Tf,ngChange:Hf,pattern:Ag,ngPattern:Ag,required:zg,ngRequired:zg,minlength:Cg,ngMinlength:Cg,maxlength:Bg,ngMaxlength:Bg,ngValue:Df,ngModelOptions:dg}).directive({ngInclude:Rf}).directive(lf).directive(Nf),a.provider({$anchorScroll:$a,$animate:Ce,$$animateQueue:Be,$$AnimateRunner:Ae,$browser:fb,$cacheFactory:gb,$controller:nb,$document:ob,$exceptionHandler:pb,$filter:Ec,$interpolate:Db,$interval:Eb,$http:zb,$httpParamSerializer:rb,$httpParamSerializerJQLike:sb,$httpBackend:Bb,$location:Tb,$log:Ub,$parse:kc,$rootScope:pc,$q:lc,$$q:mc,$sce:uc,$sceDelegate:tc,$sniffer:vc,$templateCache:hb,$templateRequest:wc,$$testability:xc,$timeout:yc,$window:Bc,$$rAF:oc,$$asyncCallback:db,$$jqLite:Ua,$$HashMap:re,$$cookieReader:Dc})}])}function ua(){return++be}function va(a){return a.replace(ee,function(a,b,c,d){return d?c.toUpperCase():c}).replace(fe,"Moz$1")}function wa(a){return!je.test(a)}function xa(a){var b=a.nodeType;return b===Vd||!b||b===Zd}function ya(a){for(var b in ae[a.ng339])return!0;return!1}function za(a,b){var c,d,e,g,h=b.createDocumentFragment(),i=[];if(wa(a))i.push(b.createTextNode(a));else{for(c=c||h.appendChild(b.createElement("div")),d=(ke.exec(a)||["",""])[1].toLowerCase(),e=me[d]||me._default,c.innerHTML=e[1]+a.replace(le,"<$1></$2>")+e[2],g=e[0];g--;)c=c.lastChild;i=Q(i,c.childNodes),c=h.firstChild,c.textContent=""}return h.textContent="",h.innerHTML="",f(i,function(a){h.appendChild(a)}),h}function Aa(a,c){c=c||b;var d;return(d=ie.exec(a))?[c.createElement(d[1])]:(d=za(a,c))?d.childNodes:[]}function Ba(a){if(a instanceof Ba)return a;var b;if(w(a)&&(a=Od(a),b=!0),!(this instanceof Ba)){if(b&&"<"!=a.charAt(0))throw he("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ba(a)}b?La(this,Aa(a)):La(this,a)}function Ca(a){return a.cloneNode(!0)}function Da(a,b){if(b||Fa(a),a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;e>d;d++)Fa(c[d])}function Ea(a,b,c,d){if(t(d))throw he("offargs","jqLite#off() does not support the `selector` argument");var e=Ga(a),g=e&&e.events,h=e&&e.handle;if(h)if(b)f(b.split(" "),function(b){if(t(c)){var d=g[b];if(M(d||[],c),d&&d.length>0)return}de(a,b,h),delete g[b]});else for(b in g)"$destroy"!==b&&de(a,b,h),delete g[b]}function Fa(a,b){var d=a.ng339,e=d&&ae[d];if(e){if(b)return void delete e.data[b];e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),Ea(a)),delete ae[d],a.ng339=c}}function Ga(a,b){var d=a.ng339,e=d&&ae[d];return b&&!e&&(a.ng339=d=ua(),e=ae[d]={events:{},data:{},handle:c}),e}function Ha(a,b,c){if(xa(a)){var d=t(c),e=!d&&b&&!u(b),f=!b,g=Ga(a,!e),h=g&&g.data;if(d)h[b]=c;else{if(f)return h;if(e)return h&&h[b];l(h,b)}}}function Ia(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function Ja(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",Od((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Od(b)+" "," ")))})}function Ka(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=Od(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",Od(c))}}function La(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;c>d;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Ma(a,b){return Na(a,"$"+(b||"ngController")+"Controller")}function Na(a,b,d){a.nodeType==Zd&&(a=a.documentElement);for(var e=Md(b)?b:[b];a;){for(var f=0,g=e.length;g>f;f++)if((d=Ad.data(a,e[f]))!==c)return d;a=a.parentNode||a.nodeType===$d&&a.host}}function Oa(a){for(Da(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Pa(a,b){b||Da(a);var c=a.parentNode;c&&c.removeChild(a)}function Qa(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):Ad(c).on("load",b)}function Ra(a,b){var c=oe[b.toLowerCase()];return c&&pe[L(a)]&&c}function Sa(a,b){var c=a.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&qe[b]}function Ta(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(s(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===!0},f>1&&(e=O(e));for(var h=0;f>h;h++)c.isImmediatePropagationStopped()||e[h].call(a,c)}};return c.elem=a,c}function Ua(){this.$get=function(){return l(Ba,{hasClass:function(a,b){return a.attr&&(a=a[0]),Ia(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),Ka(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),Ja(a,b)}})}}function Va(a,b){var c=a&&a.$$hashKey;if(c)return"function"==typeof c&&(c=a.$$hashKey()),c;var d=typeof a;return c="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||i)():d+":"+a}function Wa(a,b){if(b){var c=0;this.nextUid=function(){return++c}}f(a,this.put,this)}function Xa(a){var b=a.toString().replace(ve,""),c=b.match(se);return c?"function("+(c[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Ya(a,b,c){var d,e,g,h;if("function"==typeof a){if(!(d=a.$inject)){if(d=[],a.length){if(b)throw w(c)&&c||(c=a.name||Xa(a)),we("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);e=a.toString().replace(ve,""),g=e.match(se),f(g[1].split(te),function(a){a.replace(ue,function(a,b,c){d.push(c)})})}a.$inject=d}}else Md(a)?(h=a.length-1,la(a[h],"fn"),d=a.slice(0,h)):la(a,"fn",!0);return d}function Za(a,b){function d(a){return function(b,c){return u(b)?void f(b,h(a)):a(b,c)}}function e(a,b){if(ma(a,"service"),(z(b)||Md(b))&&(b=y.instantiate(b)),!b.$get)throw we("pget","Provider '{0}' must define $get factory method.",a);return x[a+q]=b}function g(a,b){return function(){var c=B.invoke(b,this);if(s(c))throw we("undef","Provider '{0}' must return a value from $get factory method.",a);return c}}function i(a,b,c){return e(a,{$get:c!==!1?g(a,b):b})}function j(a,b){return i(a,["$injector",function(a){return a.instantiate(b)}])}function k(a,b){return i(a,r(b),!1)}function l(a,b){ma(a,"constant"),x[a]=b,A[a]=b}function m(a,b){var c=y.get(a+q),d=c.$get;c.$get=function(){var a=B.invoke(d,c);return B.invoke(b,null,{$delegate:a})}}function n(a){var b,c=[];return f(a,function(a){function d(a){var b,c;for(b=0,c=a.length;c>b;b++){var d=a[b],e=y.get(d[0]);e[d[1]].apply(e,d[2])}}if(!v.get(a)){v.put(a,!0);try{w(a)?(b=Cd(a),c=c.concat(n(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):z(a)?c.push(y.invoke(a)):Md(a)?c.push(y.invoke(a)):la(a,"module")}catch(e){throw Md(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),we("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e)}}}),c}function o(a,c){function d(b,d){if(a.hasOwnProperty(b)){if(a[b]===p)throw we("cdep","Circular dependency found: {0}",b+" <- "+t.join(" <- "));return a[b]}try{return t.unshift(b),a[b]=p,a[b]=c(b,d)}catch(e){throw a[b]===p&&delete a[b],e}finally{t.shift()}}function e(a,c,e,f){"string"==typeof e&&(f=e,e=null);var g,h,i,j=[],k=Za.$$annotate(a,b,f);for(h=0,g=k.length;g>h;h++){if(i=k[h],"string"!=typeof i)throw we("itkn","Incorrect injection token! Expected service name as string, got {0}",i);j.push(e&&e.hasOwnProperty(i)?e[i]:d(i,f))}return Md(a)&&(a=a[g]),a.apply(c,j)}function f(a,b,c){var d=Object.create((Md(a)?a[a.length-1]:a).prototype||null),f=e(a,d,b,c);return u(f)||z(f)?f:d}return{invoke:e,instantiate:f,get:d,annotate:Za.$$annotate,has:function(b){return x.hasOwnProperty(b+q)||a.hasOwnProperty(b)}}}b=b===!0;var p={},q="Provider",t=[],v=new Wa([],!0),x={$provide:{provider:d(e),factory:d(i),service:d(j),value:d(k),constant:d(l),decorator:m}},y=x.$injector=o(x,function(a,b){throw Jd.isString(b)&&t.push(b),we("unpr","Unknown provider: {0}",t.join(" <- "))}),A={},B=A.$injector=o(A,function(a,b){var d=y.get(a+q,b);return B.invoke(d.$get,d,c,a)});return f(n(a),function(a){a&&B.invoke(a)}),B}function $a(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){return"a"===L(a)?(b=a,!0):void 0}),b}function f(){var a=h.yOffset;if(z(a))a=a();else if(J(a)){var c=a[0],d=b.getComputedStyle(c);a="fixed"!==d.position?0:c.getBoundingClientRect().bottom}else x(a)||(a=0);return a}function g(a){if(a){a.scrollIntoView();var c=f();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else b.scrollTo(0,0)}function h(a){a=w(a)?a:c.hash();var b;a?(b=i.getElementById(a))?g(b):(b=e(i.getElementsByName(a)))?g(b):"top"===a&&g(null):g(null)}var i=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){(a!==b||""!==a)&&Qa(function(){d.$evalAsync(h)})}),h}]}function _a(a,b){return a||b?a?b?(Md(a)&&(a=a.join(" ")),Md(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function ab(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType===ye)return c}}function bb(a){w(a)&&(a=a.split(" "));var b=pa();return f(a,function(a){a.length&&(b[a]=!0)}),b}function cb(a){return u(a)?a:{}}function db(){this.$get=["$$rAF","$timeout",function(a,b){return a.supported?function(b){return a(b)}:function(a){return b(a,0,!1)}}]}function eb(a,b,c,d){function e(a){try{a.apply(null,R(arguments,1))}finally{if(t--,0===t)for(;u.length;)try{u.pop()()}catch(b){c.error(b)}}}function g(a){var b=a.indexOf("#");return-1===b?"":a.substr(b+1)}function h(){j(),k()}function i(){try{return n.state}catch(a){}}function j(){v=i(),v=s(v)?null:v,P(v,C)&&(v=C),C=v}function k(){(x!==l.url()||w!==v)&&(x=l.url(),w=v,f(A,function(a){a(l.url(),v)}))}var l=this,m=(b[0],a.location),n=a.history,o=a.setTimeout,q=a.clearTimeout,r={};l.isMock=!1;var t=0,u=[];l.$$completeOutstandingRequest=e,l.$$incOutstandingRequestCount=function(){t++},l.notifyWhenNoOutstandingRequests=function(a){0===t?a():u.push(a)};var v,w,x=m.href,y=b.find("base"),z=null;j(),w=v,l.url=function(b,c,e){if(s(e)&&(e=null),m!==a.location&&(m=a.location),n!==a.history&&(n=a.history),b){var f=w===e;if(x===b&&(!d.history||f))return l;var h=x&&Kb(x)===Kb(b);return x=b,w=e,!d.history||h&&f?((!h||z)&&(z=b),c?m.replace(b):h?m.hash=g(b):m.href=b):(n[c?"replaceState":"pushState"](e,"",b),j(),w=v),l}return z||m.href.replace(/%27/g,"'")},l.state=function(){return v};var A=[],B=!1,C=null;l.onUrlChange=function(b){return B||(d.history&&Ad(a).on("popstate",h),Ad(a).on("hashchange",h),B=!0),A.push(b),b},l.$$applicationDestroyed=function(){Ad(a).off("hashchange popstate",h)},l.$$checkUrlChange=k,l.baseHref=function(){var a=y.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""},l.defer=function(a,b){var c;return t++,c=o(function(){delete r[c],e(a)},b||0),r[c]=!0,c},l.defer.cancel=function(a){return r[a]?(delete r[a],q(a),e(p),!0):!1}}function fb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new eb(a,d,b,c)}]}function gb(){this.$get=function(){function a(a,c){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=l({},c,{id:a}),i={},j=c&&c.capacity||Number.MAX_VALUE,k={},m=null,n=null;return b[a]={put:function(a,b){if(!s(b)){if(j<Number.MAX_VALUE){var c=k[a]||(k[a]={key:a});e(c)}return a in i||g++,i[a]=b,g>j&&this.remove(n.key),b}},get:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete k[a]}delete i[a],g--},removeAll:function(){i={},g=0,k={},m=n=null},destroy:function(){i=null,h=null,k=null,delete b[a]},info:function(){return l({},h,{size:g})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function hb(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function ib(a,d){function e(a,b,c){var d=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,e={};return f(a,function(a,f){var g=a.match(d);if(!g)throw De("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,f,a,c?"controller bindings definition":"isolate scope definition");e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f}}),e}function g(a,b){var c={isolateScope:null,bindToController:null};if(u(a.scope)&&(a.bindToController===!0?(c.bindToController=e(a.scope,b,!0),c.isolateScope={}):c.isolateScope=e(a.scope,b,!1)),u(a.bindToController)&&(c.bindToController=e(a.bindToController,b,!0)),u(c.bindToController)){var d=a.controller,f=a.controllerAs;if(!d)throw De("noctrl","Cannot bind to controller without directive '{0}'s controller.",b);if(!mb(d,f))throw De("noident","Cannot bind to controller without identifier for directive '{0}'.",b)}return c}function i(a){var b=a.charAt(0);if(!b||b!==ud(b))throw De("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",a);if(a!==a.trim())throw De("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",a)}var j={},k="Directive",m=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,n=/(([\w\-]+)(?:\:([^;]+))?;?)/,s=K("ngSrc,ngSrcset,src,srcset"),v=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,x=/^(on[a-z]+|formaction)$/;this.directive=function A(b,c){return ma(b,"directive"),w(b)?(i(b),ka(c,"directiveFactory"),j.hasOwnProperty(b)||(j[b]=[],a.factory(b+k,["$injector","$exceptionHandler",function(a,c){var d=[];return f(j[b],function(e,f){try{var h=a.invoke(e);z(h)?h={compile:r(h)}:!h.compile&&h.link&&(h.compile=r(h.link)),h.priority=h.priority||0,h.index=f,h.name=h.name||b,h.require=h.require||h.controller&&h.name,h.restrict=h.restrict||"EA";var i=h.$$bindings=g(h,h.name);u(i.isolateScope)&&(h.$$isolateBindings=i.isolateScope),h.$$moduleName=e.$$moduleName,d.push(h)}catch(j){c(j)}}),d}])),j[b].push(c)):f(b,h(A)),this},this.aHrefSanitizationWhitelist=function(a){return t(a)?(d.aHrefSanitizationWhitelist(a),this):d.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return t(a)?(d.imgSrcSanitizationWhitelist(a),this):d.imgSrcSanitizationWhitelist()};var y=!0;this.debugInfoEnabled=function(a){return t(a)?(y=a,this):y},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,d,e,g,h,i,r,t,A,B,D){function E(a,b){try{a.addClass(b)}catch(c){}}function F(a,b,c,d,e){a instanceof Ad||(a=Ad(a)),f(a,function(b,c){
b.nodeType==Xd&&b.nodeValue.match(/\S+/)&&(a[c]=Ad(b).wrap("<span></span>").parent()[0])});var g=H(a,b,a,c,d,e);F.$$addScopeClass(a);var h=null;return function(b,c,d){ka(b,"scope"),d=d||{};var e=d.parentBoundTranscludeFn,f=d.transcludeControllers,i=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude),h||(h=G(i));var j;if(j="html"!==h?Ad($(h,Ad("<div>").append(a).html())):c?ne.clone.call(a):a,f)for(var k in f)j.data("$"+k+"Controller",f[k].instance);return F.$$addScopeInfo(j,b),c&&c(j,b),g&&g(b,j,j,e),j}}function G(a){var b=a&&a[0];return b&&"foreignobject"!==L(b)&&b.toString().match(/SVG/)?"svg":"html"}function H(a,b,d,e,f,g){function h(a,d,e,f){var g,h,i,j,k,l,m,n,q;if(o){var r=d.length;for(q=new Array(r),k=0;k<p.length;k+=3)m=p[k],q[m]=d[m]}else q=d;for(k=0,l=p.length;l>k;)if(i=q[p[k++]],g=p[k++],h=p[k++],g){if(g.scope){j=a.$new(),F.$$addScopeInfo(Ad(i),j);var s=g.$$destroyBindings;s&&(g.$$destroyBindings=null,j.$on("$destroyed",s))}else j=a;n=g.transcludeOnThisElement?I(a,g.transclude,f):!g.templateOnThisElement&&f?f:!f&&b?I(a,b):null,g(h,j,i,e,n,g)}else h&&h(a,i.childNodes,c,f)}for(var i,j,k,l,m,n,o,p=[],q=0;q<a.length;q++)i=new fa,j=J(a[q],[],i,0===q?e:c,f),k=j.length?O(j,a[q],i,b,d,null,[],[],g):null,k&&k.scope&&F.$$addScopeClass(i.$$element),m=k&&k.terminal||!(l=a[q].childNodes)||!l.length?null:H(l,k?(k.transcludeOnThisElement||!k.templateOnThisElement)&&k.transclude:b),(k||m)&&(p.push(q,k,m),n=!0,o=o||k),g=null;return n?h:null}function I(a,b,c){var d=function(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})};return d}function J(a,b,c,d,e){var f,g,h=a.nodeType,i=c.$attr;switch(h){case Vd:S(b,jb(L(a)),"E",d,e);for(var j,k,l,o,p,q,r=a.attributes,s=0,t=r&&r.length;t>s;s++){var v=!1,x=!1;j=r[s],k=j.name,p=Od(j.value),o=jb(k),(q=la.test(o))&&(k=k.replace(Ee,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));var y=o.replace(/(Start|End)$/,"");T(y)&&o===y+"Start"&&(v=k,x=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6)),l=jb(k.toLowerCase()),i[l]=k,(q||!c.hasOwnProperty(l))&&(c[l]=p,Ra(a,l)&&(c[l]=!0)),aa(a,b,p,l,q),S(b,l,"A",d,e,v,x)}if(g=a.className,u(g)&&(g=g.animVal),w(g)&&""!==g)for(;f=n.exec(g);)l=jb(f[2]),S(b,l,"C",d,e)&&(c[l]=Od(f[3])),g=g.substr(f.index+f[0].length);break;case Xd:if(11===zd)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===Xd;)a.nodeValue=a.nodeValue+a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);Y(b,a.nodeValue);break;case Yd:try{f=m.exec(a.nodeValue),f&&(l=jb(f[1]),S(b,l,"M",d,e)&&(c[l]=Od(f[2])))}catch(z){}}return b.sort(W),b}function K(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw De("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType==Vd&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return Ad(d)}function N(a,b,c){return function(d,e,f,g,h){return e=K(e[0],b,c),a(d,e,f,g,h)}}function O(a,d,f,g,h,j,k,l,m){function n(a,b,c,d){a&&(c&&(a=N(a,c,d)),a.require=s.require,a.directiveName=t,(E===s||s.$$isolateScope)&&(a=ca(a,{isolateScope:!0})),k.push(a)),b&&(c&&(b=N(b,c,d)),b.require=s.require,b.directiveName=t,(E===s||s.$$isolateScope)&&(b=ca(b,{isolateScope:!0})),l.push(b))}function o(a,b,c,d){var e;if(w(b)){var f=b.match(v),g=b.substring(f[0].length),h=f[1]||f[3],i="?"===f[2];if("^^"===h?c=c.parent():(e=d&&d[g],e=e&&e.instance),!e){var j="$"+g+"Controller";e=h?c.inheritedData(j):c.data(j)}if(!e&&!i)throw De("ctreq","Controller '{0}', required by directive '{1}', can't be found!",g,a)}else if(Md(b)){e=[];for(var k=0,l=b.length;l>k;k++)e[k]=o(a,b[k],c,d)}return e||null}function p(a,b,c,d,e,f){var g=pa();for(var h in d){var j=d[h],k={$scope:j===E||j.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},l=j.controller;"@"==l&&(l=b[j.name]);var m=i(l,k,!0,j.controllerAs);g[j.name]=m,M||a.data("$"+j.name+"Controller",m.instance)}return g}function q(a,b,e,g,h,i){function j(a,b,d){var e;return C(a)||(d=b,b=a,a=c),M&&(e=u),d||(d=M?w.parent():w),h(a,b,e,d,H)}var m,n,q,s,t,u,v,w,x;if(d===e?(x=f,w=f.$$element):(w=Ad(e),x=new fa(w,f)),E&&(t=b.$new(!0)),h&&(v=j,v.$$boundTransclude=h),D&&(u=p(w,x,v,D,t,b)),E&&(F.$$addScopeInfo(w,t,!0,!(G&&(G===E||G===E.$$originalDirective))),F.$$addScopeClass(w,!0),t.$$isolateBindings=E.$$isolateBindings,ea(b,x,t,t.$$isolateBindings,E,t)),u){var y,z,A=E||r;A&&u[A.name]&&(y=A.$$bindings.bindToController,s=u[A.name],s&&s.identifier&&y&&(z=s,i.$$destroyBindings=ea(b,x,s.instance,y,A)));for(m in u){s=u[m];var B=s();B!==s.instance&&(s.instance=B,w.data("$"+m+"Controller",B),s===z&&(i.$$destroyBindings(),i.$$destroyBindings=ea(b,x,B,y,A)))}}for(m=0,n=k.length;n>m;m++)q=k[m],da(q,q.isolateScope?t:b,w,x,q.require&&o(q.directiveName,q.require,w,u),v);var H=b;for(E&&(E.template||null===E.templateUrl)&&(H=t),a&&a(H,e.childNodes,c,h),m=l.length-1;m>=0;m--)q=l[m],da(q,q.isolateScope?t:b,w,x,q.require&&o(q.directiveName,q.require,w,u),v)}m=m||{};for(var r,s,t,x,y,A,B=-Number.MAX_VALUE,D=m.controllerDirectives,E=m.newIsolateScopeDirective,G=m.templateDirective,H=m.nonTlbTranscludeDirective,I=!1,L=!1,M=m.hasElementTranscludeDirective,O=f.$$element=Ad(d),P=j,S=g,T=0,W=a.length;W>T;T++){s=a[T];var Y=s.$$start,_=s.$$end;if(Y&&(O=K(d,Y,_)),x=c,B>s.priority)break;if((A=s.scope)&&(s.templateUrl||(u(A)?(X("new/isolated scope",E||r,s,O),E=s):X("new/isolated scope",E,s,O)),r=r||s),t=s.name,!s.templateUrl&&s.controller&&(A=s.controller,D=D||pa(),X("'"+t+"' controller",D[t],s,O),D[t]=s),(A=s.transclude)&&(I=!0,s.$$tlb||(X("transclusion",H,s,O),H=s),"element"==A?(M=!0,B=s.priority,x=O,O=f.$$element=Ad(b.createComment(" "+t+": "+f[t]+" ")),d=O[0],ba(h,R(x),d),S=F(x,g,B,P&&P.name,{nonTlbTranscludeDirective:H})):(x=Ad(Ca(d)).contents(),O.empty(),S=F(x,g))),s.template)if(L=!0,X("template",G,s,O),G=s,A=z(s.template)?s.template(O,f):s.template,A=ja(A),s.replace){if(P=s,x=wa(A)?[]:lb($(s.templateNamespace,Od(A))),d=x[0],1!=x.length||d.nodeType!==Vd)throw De("tplrt","Template for directive '{0}' must have exactly one root element. {1}",t,"");ba(h,O,d);var aa={$attr:{}},ga=J(d,[],aa),ha=a.splice(T+1,a.length-(T+1));E&&Q(ga),a=a.concat(ga).concat(ha),U(f,aa),W=a.length}else O.html(A);if(s.templateUrl)L=!0,X("template",G,s,O),G=s,s.replace&&(P=s),q=V(a.splice(T,a.length-T),O,f,h,I&&S,k,l,{controllerDirectives:D,newIsolateScopeDirective:E,templateDirective:G,nonTlbTranscludeDirective:H}),W=a.length;else if(s.compile)try{y=s.compile(O,f,S),z(y)?n(null,y,Y,_):y&&n(y.pre,y.post,Y,_)}catch(ia){e(ia,Z(O))}s.terminal&&(q.terminal=!0,B=Math.max(B,s.priority))}return q.scope=r&&r.scope===!0,q.transcludeOnThisElement=I,q.templateOnThisElement=L,q.transclude=S,m.hasElementTranscludeDirective=M,q}function Q(a){for(var b=0,c=a.length;c>b;b++)a[b]=o(a[b],{$$isolateScope:!0})}function S(b,d,f,g,h,i,l){if(d===h)return null;var m=null;if(j.hasOwnProperty(d))for(var n,p=a.get(d+k),q=0,r=p.length;r>q;q++)try{n=p[q],(g===c||g>n.priority)&&-1!=n.restrict.indexOf(f)&&(i&&(n=o(n,{$$start:i,$$end:l})),b.push(n),m=n)}catch(s){e(s)}return m}function T(b){if(j.hasOwnProperty(b))for(var c,d=a.get(b+k),e=0,f=d.length;f>e;e++)if(c=d[e],c.multiElement)return!0;return!1}function U(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(E(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function V(a,b,c,d,e,h,i,j){var k,l,m=[],n=b[0],p=a.shift(),q=o(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),r=z(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,s=p.templateNamespace;return b.empty(),g(A.getTrustedResourceUrl(r)).then(function(g){var o,t,v,w;if(g=ja(g),p.replace){if(v=wa(g)?[]:lb($(s,Od(g))),o=v[0],1!=v.length||o.nodeType!==Vd)throw De("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,r);t={$attr:{}},ba(d,b,o);var x=J(o,[],t);u(p.scope)&&Q(x),a=x.concat(a),U(c,t)}else o=n,b.html(g);for(a.unshift(q),k=O(a,o,c,e,b,p,h,i,j),f(d,function(a,c){a==o&&(d[c]=b[0])}),l=H(b[0].childNodes,e);m.length;){var y=m.shift(),z=m.shift(),A=m.shift(),B=m.shift(),C=b[0];if(!y.$$destroyed){if(z!==n){var D=z.className;j.hasElementTranscludeDirective&&p.replace||(C=Ca(o)),ba(A,Ad(z),C),E(Ad(C),D)}w=k.transcludeOnThisElement?I(y,k.transclude,B):B,k(l,y,C,d,w,k)}}m=null}),function(a,b,c,d,e){var f=e;b.$$destroyed||(m?m.push(b,c,d,f):(k.transcludeOnThisElement&&(f=I(b,k.transclude,e)),k(l,b,c,d,f,k)))}}function W(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function X(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw De("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,Z(d))}function Y(a,b){var c=d(b,!0);c&&a.push({priority:0,compile:function(a){var b=a.parent(),d=!!b.length;return d&&F.$$addBindingClass(b),function(a,b){var e=b.parent();d||F.$$addBindingClass(e),F.$$addBindingInfo(e,c.expressions),a.$watch(c,function(a){b[0].nodeValue=a})}}})}function $(a,c){switch(a=ud(a||"html")){case"svg":case"math":var d=b.createElement("div");return d.innerHTML="<"+a+">"+c+"</"+a+">",d.childNodes[0].childNodes;default:return c}}function _(a,b){if("srcdoc"==b)return A.HTML;var c=L(a);return"xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b)?A.RESOURCE_URL:void 0}function aa(a,b,c,e,f){var g=_(a,e);f=s[e]||f;var h=d(c,!0,g,f);if(h){if("multiple"===e&&"select"===L(a))throw De("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Z(a));b.push({priority:100,compile:function(){return{pre:function(a,b,i){var j=i.$$observers||(i.$$observers={});if(x.test(e))throw De("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var k=i[e];k!==c&&(h=k&&d(k,!0,g,f),c=k),h&&(i[e]=h(a),(j[e]||(j[e]=[])).$$inter=!0,(i.$$observers&&i.$$observers[e].$$scope||a).$watch(h,function(a,b){"class"===e&&a!=b?i.$updateClass(a,b):i.$set(e,a)}))}}}})}}function ba(a,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(a)for(e=0,f=a.length;f>e;e++)if(a[e]==g){a[e++]=d;for(var j=e,k=j+h-1,l=a.length;l>j;j++,k++)l>k?a[j]=a[k]:delete a[j];a.length-=h-1,a.context===g&&(a.context=d);break}i&&i.replaceChild(d,g);var m=b.createDocumentFragment();m.appendChild(g),Ad.hasData(g)&&(Ad(d).data(Ad(g).data()),Bd?(Ld=!0,Bd.cleanData([g])):delete Ad.cache[g[Ad.expando]]);for(var n=1,o=c.length;o>n;n++){var p=c[n];Ad(p).remove(),m.appendChild(p),delete c[n]}c[0]=d,c.length=1}function ca(a,b){return l(function(){return a.apply(null,arguments)},a,b)}function da(a,b,c,d,f,g){try{a(b,c,d,f,g)}catch(h){e(h,Z(c))}}function ea(a,b,e,g,i,j){var k;f(g,function(f,g){var j,l,m,n,o=f.attrName,q=f.optional,r=f.mode;switch(vd.call(b,o)||(b[o]=c),r){case"@":b[o]||q||(e[g]=c),b.$observe(o,function(a){e[g]=a}),b.$$observers[o].$$scope=a,b[o]&&(e[g]=d(b[o])(a));break;case"=":if(q&&!b[o])return;l=h(b[o]),n=l.literal?P:function(a,b){return a===b||a!==a&&b!==b},m=l.assign||function(){throw j=e[g]=l(a),De("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",b[o],i.name)},j=e[g]=l(a);var s=function(b){return n(b,e[g])||(n(b,j)?m(a,b=e[g]):e[g]=b),j=b};s.$stateful=!0;var t;t=f.collection?a.$watchCollection(b[o],s):a.$watch(h(b[o],s),null,l.literal),k=k||[],k.push(t);break;case"&":if(l=h(b[o]),l===p&&q)break;e[g]=function(b){return l(a,b)}}});var l=k?function(){for(var a=0,b=k.length;b>a;++a)k[a]()}:p;return j&&l!==p?(j.$on("$destroy",l),p):l}var fa=function(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;d>c;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a};fa.prototype={$normalize:jb,$addClass:function(a){a&&a.length>0&&B.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&B.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=kb(a,b);c&&c.length&&B.addClass(this.$$element,c);var d=kb(b,a);d&&d.length&&B.removeClass(this.$$element,d)},$set:function(a,b,d,g){var h,i=this.$$element[0],j=Ra(i,a),k=Sa(i,a),l=a;if(j?(this.$$element.prop(a,b),g=j):k&&(this[k]=b,l=k),this[a]=b,g?this.$attr[a]=g:(g=this.$attr[a],g||(this.$attr[a]=g=ia(a,"-"))),h=L(this.$$element),"a"===h&&"href"===a||"img"===h&&"src"===a)this[a]=b=D(b,"src"===a);else if("img"===h&&"srcset"===a){for(var m="",n=Od(b),o=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(n)?o:/(,)/,q=n.split(p),r=Math.floor(q.length/2),s=0;r>s;s++){var t=2*s;m+=D(Od(q[t]),!0),m+=" "+Od(q[t+1])}var u=Od(q[2*s]).split(/\s/);m+=D(Od(u[0]),!0),2===u.length&&(m+=" "+Od(u[1])),this[a]=b=m}d!==!1&&(null===b||b===c?this.$$element.removeAttr(g):this.$$element.attr(g,b));var v=this.$$observers;v&&f(v[l],function(a){try{a(b)}catch(c){e(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=pa()),e=d[a]||(d[a]=[]);return e.push(b),r.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a])}),function(){M(e,b)}}};var ga=d.startSymbol(),ha=d.endSymbol(),ja="{{"==ga||"}}"==ha?q:function(a){return a.replace(/\{\{/g,ga).replace(/}}/g,ha)},la=/^ngAttr[A-Z]/;return F.$$addBindingInfo=y?function(a,b){var c=a.data("$binding")||[];Md(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:p,F.$$addBindingClass=y?function(a){E(a,"ng-binding")}:p,F.$$addScopeInfo=y?function(a,b,c,d){var e=c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope";a.data(e,b)}:p,F.$$addScopeClass=y?function(a,b){E(a,b?"ng-isolate-scope":"ng-scope")}:p,F}]}function jb(a){return va(a.replace(Ee,""))}function kb(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function lb(a){a=Ad(a);var b=a.length;if(1>=b)return a;for(;b--;){var c=a[b];c.nodeType===Yd&&Ed.call(a,b,1)}return a}function mb(a,b){if(b&&w(b))return b;if(w(a)){var c=Ge.exec(a);if(c)return c[3]}}function nb(){var a={},b=!1;this.register=function(b,c){ma(b,"controller"),u(b)?l(a,b):a[b]=c},this.allowGlobals=function(){b=!0},this.$get=["$injector","$window",function(e,f){function g(a,b,c,e){if(!a||!u(a.$scope))throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,b);a.$scope[b]=c}return function(d,h,i,j){var k,m,n,o;if(i=i===!0,j&&w(j)&&(o=j),w(d)){if(m=d.match(Ge),!m)throw Fe("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",d);n=m[1],o=o||m[3],d=a.hasOwnProperty(n)?a[n]:na(h.$scope,n,!0)||(b?na(f,n,!0):c),la(d,n,!0)}if(i){var p=(Md(d)?d[d.length-1]:d).prototype;k=Object.create(p||null),o&&g(h,o,k,n||d.name);var q;return q=l(function(){var a=e.invoke(d,k,h,n);return a!==k&&(u(a)||z(a))&&(k=a,o&&g(h,o,k,n||d.name)),k},{instance:k,identifier:o})}return k=e.instantiate(d,h,n),o&&g(h,o,k,n||d.name),k}}]}function ob(){this.$get=["$window",function(a){return Ad(a.document)}]}function pb(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function qb(a){return u(a)?y(a)?a.toISOString():U(a):a}function rb(){this.$get=function(){return function(a){if(!a)return"";var b=[];return g(a,function(a,c){null===a||s(a)||(Md(a)?f(a,function(a,d){b.push(ca(c)+"="+ca(qb(a)))}):b.push(ca(c)+"="+ca(qb(a))))}),b.join("&")}}}function sb(){this.$get=function(){return function(a){function b(a,d,e){null===a||s(a)||(Md(a)?f(a,function(a){b(a,d+"[]")}):u(a)&&!y(a)?g(a,function(a,c){b(a,d+(e?"":"[")+c+(e?"":"]"))}):c.push(ca(d)+"="+ca(qb(a))))}if(!a)return"";var c=[];return b(a,"",!0),c.join("&")}}}function tb(a,b){if(w(a)){var c=a.replace(Le,"").trim();if(c){var d=b("Content-Type");(d&&0===d.indexOf(He)||ub(c))&&(a=V(c))}}return a}function ub(a){var b=a.match(Je);return b&&Ke[b[0]].test(a)}function vb(a){function b(a,b){a&&(d[a]=d[a]?d[a]+", "+b:b)}var c,d=pa();return w(a)?f(a.split("\n"),function(a){c=a.indexOf(":"),b(ud(Od(a.substr(0,c))),Od(a.substr(c+1)))}):u(a)&&f(a,function(a,c){b(ud(c),Od(a))}),d}function wb(a){var b;return function(c){if(b||(b=vb(a)),c){var d=b[ud(c)];return void 0===d&&(d=null),d}return b}}function xb(a,b,c,d){return z(d)?d(a,b,c):(f(d,function(d){a=d(a,b,c)}),a)}function yb(a){return a>=200&&300>a}function zb(){var a=this.defaults={transformResponse:[tb],transformRequest:[function(a){return!u(a)||D(a)||F(a)||E(a)?a:U(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:O(Ie),put:O(Ie),patch:O(Ie)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},b=!1;this.useApplyAsync=function(a){return t(a)?(b=!!a,this):b};var e=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(g,h,i,j,k,m){function n(b){function e(a){var b=l({},a);return a.data?b.data=xb(a.data,a.headers,a.status,i.transformResponse):b.data=a.data,yb(a.status)?b:k.reject(b)}function g(a,b){var c,d={};return f(a,function(a,e){z(a)?(c=a(b),null!=c&&(d[e]=c)):d[e]=a}),d}function h(b){var c,d,e,f=a.headers,h=l({},b.headers);f=l({},f.common,f[ud(b.method)]);a:for(c in f){d=ud(c);for(e in h)if(ud(e)===d)continue a;h[c]=f[c]}return g(h,O(b))}if(!Jd.isObject(b))throw d("$http")("badreq","Http request configuration must be an object.  Received: {0}",b);var i=l({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer},b);i.headers=h(b),i.method=wd(i.method),i.paramSerializer=w(i.paramSerializer)?m.get(i.paramSerializer):i.paramSerializer;var j=function(b){var d=b.headers,g=xb(b.data,wb(d),c,b.transformRequest);return s(g)&&f(d,function(a,b){"content-type"===ud(b)&&delete d[b]}),s(b.withCredentials)&&!s(a.withCredentials)&&(b.withCredentials=a.withCredentials),q(b,g).then(e,e)},n=[j,c],o=k.when(i);for(f(x,function(a){(a.request||a.requestError)&&n.unshift(a.request,a.requestError),(a.response||a.responseError)&&n.push(a.response,a.responseError)});n.length;){var p=n.shift(),r=n.shift();o=o.then(p,r)}return o.success=function(a){return la(a,"fn"),o.then(function(b){a(b.data,b.status,b.headers,i)}),o},o.error=function(a){return la(a,"fn"),o.then(null,function(b){a(b.data,b.status,b.headers,i)}),o},o}function o(a){f(arguments,function(a){n[a]=function(b,c){return n(l({},c||{},{method:a,url:b}))}})}function p(a){f(arguments,function(a){n[a]=function(b,c,d){return n(l({},d||{},{method:a,url:b,data:c}))}})}function q(d,e){function f(a,c,d,e){function f(){i(c,a,d,e)}o&&(yb(a)?o.put(y,[a,c,vb(d),e]):o.remove(y)),b?j.$applyAsync(f):(f(),j.$$phase||j.$apply())}function i(a,b,c,e){b=Math.max(b,0),(yb(b)?q.resolve:q.reject)({data:a,status:b,headers:wb(c),config:d,statusText:e})}function l(a){i(a.data,a.status,O(a.headers()),a.statusText)}function m(){var a=n.pendingRequests.indexOf(d);-1!==a&&n.pendingRequests.splice(a,1)}var o,p,q=k.defer(),w=q.promise,x=d.headers,y=r(d.url,d.paramSerializer(d.params));if(n.pendingRequests.push(d),w.then(m,m),!d.cache&&!a.cache||d.cache===!1||"GET"!==d.method&&"JSONP"!==d.method||(o=u(d.cache)?d.cache:u(a.cache)?a.cache:v),o&&(p=o.get(y),t(p)?H(p)?p.then(l,l):Md(p)?i(p[1],p[0],O(p[2]),p[3]):i(p,200,{},"OK"):o.put(y,w)),s(p)){var z=Ac(d.url)?h()[d.xsrfCookieName||a.xsrfCookieName]:c;z&&(x[d.xsrfHeaderName||a.xsrfHeaderName]=z),g(d.method,y,e,f,x,d.timeout,d.withCredentials,d.responseType)}return w}function r(a,b){return b.length>0&&(a+=(-1==a.indexOf("?")?"?":"&")+b),a}var v=i("$http");a.paramSerializer=w(a.paramSerializer)?m.get(a.paramSerializer):a.paramSerializer;var x=[];return f(e,function(a){x.unshift(w(a)?m.get(a):m.invoke(a))}),n.pendingRequests=[],o("get","delete","head","jsonp"),p("post","put","patch"),n.defaults=a,n}]}function Ab(){return new a.XMLHttpRequest}function Bb(){this.$get=["$browser","$window","$document",function(a,b,c){return Cb(a,Ab,a.defer,b.angular.callbacks,c[0])}]}function Cb(a,b,d,e,g){function h(a,b,c){var d=g.createElement("script"),f=null;return d.type="text/javascript",d.src=a,d.async=!0,f=function(a){de(d,"load",f),de(d,"error",f),g.body.removeChild(d),d=null;var h=-1,i="unknown";a&&("load"!==a.type||e[b].called||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},ce(d,"load",f),ce(d,"error",f),g.body.appendChild(d),f}return function(g,i,j,k,l,m,n,o){function q(){u&&u(),v&&v.abort()}function r(b,e,f,g,h){y!==c&&d.cancel(y),u=v=null,b(e,f,g,h),a.$$completeOutstandingRequest(p)}if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==ud(g)){var s="_"+(e.counter++).toString(36);e[s]=function(a){e[s].data=a,e[s].called=!0};var u=h(i.replace("JSON_CALLBACK","angular.callbacks."+s),s,function(a,b){r(k,a,e[s].data,"",b),e[s]=p})}else{var v=b();v.open(g,i,!0),f(l,function(a,b){t(a)&&v.setRequestHeader(b,a)}),v.onload=function(){var a=v.statusText||"",b="response"in v?v.response:v.responseText,c=1223===v.status?204:v.status;0===c&&(c=b?200:"file"==zc(i).protocol?404:0),r(k,c,b,v.getAllResponseHeaders(),a)};var w=function(){r(k,-1,null,null,"")};if(v.onerror=w,v.onabort=w,n&&(v.withCredentials=!0),o)try{v.responseType=o}catch(x){if("json"!==o)throw x}v.send(j)}if(m>0)var y=d(q,m);else H(m)&&m.then(q)}}function Db(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(m,a).replace(n,b)}function h(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=U(a)}return a}function i(f,i,m,n){function o(a){try{return a=C(a),n&&!t(a)?a:h(a)}catch(b){d(Me.interr(f,b))}}n=!!n;for(var p,q,r,u=0,v=[],w=[],x=f.length,y=[],A=[];x>u;){if(-1==(p=f.indexOf(a,u))||-1==(q=f.indexOf(b,p+j))){u!==x&&y.push(g(f.substring(u)));break}u!==p&&y.push(g(f.substring(u,p))),r=f.substring(p+j,q),v.push(r),w.push(c(r,o)),u=q+k,A.push(y.length),y.push("")}if(m&&y.length>1&&Me.throwNoconcat(f),!i||v.length){var B=function(a){for(var b=0,c=v.length;c>b;b++){if(n&&s(a[b]))return;y[A[b]]=a[b]}return y.join("")},C=function(a){return m?e.getTrusted(m,a):e.valueOf(a)};return l(function(a){var b=0,c=v.length,e=new Array(c);try{for(;c>b;b++)e[b]=w[b](a);return B(e)}catch(g){d(Me.interr(f,g))}},{exp:f,expressions:v,$$watchDelegate:function(a,b){var c;return a.$watchGroup(w,function(d,e){var f=B(d);z(b)&&b.call(this,f,d!==e?c:f,a),c=f})}})}}var j=a.length,k=b.length,m=new RegExp(a.replace(/./g,f),"g"),n=new RegExp(b.replace(/./g,f),"g");return i.startSymbol=function(){return a},i.endSymbol=function(){return b},i}]}function Eb(){this.$get=["$rootScope","$window","$q","$$q",function(a,b,c,d){function e(e,g,h,i){var j=arguments.length>4,k=j?R(arguments,4):[],l=b.setInterval,m=b.clearInterval,n=0,o=t(i)&&!i,p=(o?d:c).defer(),q=p.promise;return h=t(h)?h:0,q.then(null,null,j?function(){e.apply(null,k)}:e),q.$$intervalId=l(function(){p.notify(n++),h>0&&n>=h&&(p.resolve(n),m(q.$$intervalId),delete f[q.$$intervalId]),o||a.$apply()},g),f[q.$$intervalId]=p,q}var f={};return e.cancel=function(a){return a&&a.$$intervalId in f?(f[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete f[a.$$intervalId],!0):!1},e}]}function Fb(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(a){return 1===a?"one":"other"}}}}function Gb(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=ba(b[c]);return b.join("/")}function Hb(a,b){var c=zc(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=n(c.port)||Oe[c.protocol]||null}function Ib(a,b){var c="/"!==a.charAt(0);c&&(a="/"+a);var d=zc(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=_(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Jb(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function Kb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function Lb(a){return a.replace(/(#.+)|#$/,"$1")}function Mb(a){return a.substr(0,Kb(a).lastIndexOf("/")+1)}function Nb(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function Ob(a,b){this.$$html5=!0,b=b||"";var d=Mb(a);Hb(a,this),this.$$parse=function(a){var b=Jb(d,a);if(!w(b))throw Pe("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,d);Ib(b,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=aa(this.$$search),b=this.$$hash?"#"+ba(this.$$hash):"";this.$$url=Gb(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$parseLinkUrl=function(e,f){if(f&&"#"===f[0])return this.hash(f.slice(1)),!0;var g,h,i;return(g=Jb(a,e))!==c?(h=g,i=(g=Jb(b,g))!==c?d+(Jb("/",g)||g):a+h):(g=Jb(d,e))!==c?i=d+g:d==e+"/"&&(i=d),i&&this.$$parse(i),!!i}}function Pb(a,b){var c=Mb(a);Hb(a,this),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return 0===b.indexOf(c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f,g=Jb(a,d)||Jb(c,d);"#"===g.charAt(0)?(f=Jb(b,g),s(f)&&(f=g)):f=this.$$html5?g:"",Ib(f,this),this.$$path=e(this.$$path,f,a),this.$$compose()},this.$$compose=function(){var c=aa(this.$$search),d=this.$$hash?"#"+ba(this.$$hash):"";this.$$url=Gb(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$parseLinkUrl=function(b,c){return Kb(a)==Kb(b)?(this.$$parse(b),!0):!1}}function Qb(a,b){this.$$html5=!0,Pb.apply(this,arguments);var c=Mb(a);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a==Kb(d)?f=d:(g=Jb(c,d))?f=a+b+g:c===d+"/"&&(f=c),f&&this.$$parse(f),!!f},this.$$compose=function(){var c=aa(this.$$search),d=this.$$hash?"#"+ba(this.$$hash):"";this.$$url=Gb(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+b+this.$$url}}function Rb(a){return function(){return this[a]}}function Sb(a,b){return function(c){return s(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function Tb(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return t(b)?(a=b,this):a},this.html5Mode=function(a){return G(a)?(b.enabled=a,this):u(a)?(G(a.enabled)&&(b.enabled=a.enabled),G(a.requireBase)&&(b.requireBase=a.requireBase),G(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=j.url(),f=j.$$state;try{d.url(a,b,c),j.$$state=d.state()}catch(g){throw j.url(e),j.$$state=f,g}}function i(a,b){c.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k,l,m=d.baseHref(),n=d.url();if(b.enabled){if(!m&&b.requireBase)throw Pe("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=Nb(n)+(m||"/"),k=e.history?Ob:Qb}else l=Kb(n),k=Pb;j=new k(l,"#"+a),j.$$parseLinkUrl(n,n),j.$$state=d.state();var o=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=Ad(a.target);"a"!==L(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),i=e.attr("href")||e.attr("xlink:href");u(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=zc(h.animVal).href),o.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||j.$$parseLinkUrl(h,i)&&(a.preventDefault(),j.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}),Lb(j.absUrl())!=Lb(n)&&d.url(j.absUrl(),!0);var p=!0;return d.onUrlChange(function(a,b){c.$evalAsync(function(){var d,e=j.absUrl(),f=j.$$state;j.$$parse(a),j.$$state=b,d=c.$broadcast("$locationChangeStart",a,e,b,f).defaultPrevented,j.absUrl()===a&&(d?(j.$$parse(e),j.$$state=f,h(e,!1,f)):(p=!1,i(e,f)))}),c.$$phase||c.$digest()}),c.$watch(function(){var a=Lb(d.url()),b=Lb(j.absUrl()),f=d.state(),g=j.$$replace,k=a!==b||j.$$html5&&e.history&&f!==j.$$state;(p||k)&&(p=!1,c.$evalAsync(function(){var b=j.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,j.$$state,f).defaultPrevented;j.absUrl()===b&&(d?(j.$$parse(a),j.$$state=f):(k&&h(b,g,f===j.$$state?null:j.$$state),i(a,f)))})),j.$$replace=!1}),j}]}function Ub(){var a=!0,b=this;this.debugEnabled=function(b){return t(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||p,g=!1;try{g=!!e.apply}catch(h){}return g?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Vb(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw Re("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function Wb(a,b){if(a){if(a.constructor===a)throw Re("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw Re("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw Re("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw Re("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function Xb(a,b){if(a){if(a.constructor===a)throw Re("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===Se||a===Te||a===Ue)throw Re("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function Yb(a,b){return"undefined"!=typeof a?a:b}function Zb(a,b){return"undefined"==typeof a?b:"undefined"==typeof b?a:a+b}function $b(a,b){var c=a(b);return!c.$stateful}function _b(a,b){var c,d;switch(a.type){case Ye.Program:c=!0,f(a.body,function(a){_b(a.expression,b),c=c&&a.expression.constant}),a.constant=c;break;case Ye.Literal:a.constant=!0,a.toWatch=[];break;case Ye.UnaryExpression:_b(a.argument,b),a.constant=a.argument.constant,a.toWatch=a.argument.toWatch;break;case Ye.BinaryExpression:_b(a.left,b),_b(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case Ye.LogicalExpression:_b(a.left,b),_b(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.constant?[]:[a];break;case Ye.ConditionalExpression:_b(a.test,b),_b(a.alternate,b),_b(a.consequent,b),a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant,a.toWatch=a.constant?[]:[a];break;case Ye.Identifier:a.constant=!1,a.toWatch=[a];break;case Ye.MemberExpression:_b(a.object,b),a.computed&&_b(a.property,b),a.constant=a.object.constant&&(!a.computed||a.property.constant),a.toWatch=[a];break;case Ye.CallExpression:c=a.filter?$b(b,a.callee.name):!1,d=[],f(a.arguments,function(a){_b(a,b),c=c&&a.constant,a.constant||d.push.apply(d,a.toWatch);
}),a.constant=c,a.toWatch=a.filter&&$b(b,a.callee.name)?d:[a];break;case Ye.AssignmentExpression:_b(a.left,b),_b(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=[a];break;case Ye.ArrayExpression:c=!0,d=[],f(a.elements,function(a){_b(a,b),c=c&&a.constant,a.constant||d.push.apply(d,a.toWatch)}),a.constant=c,a.toWatch=d;break;case Ye.ObjectExpression:c=!0,d=[],f(a.properties,function(a){_b(a.value,b),c=c&&a.value.constant,a.value.constant||d.push.apply(d,a.value.toWatch)}),a.constant=c,a.toWatch=d;break;case Ye.ThisExpression:a.constant=!1,a.toWatch=[]}}function ac(a){if(1==a.length){var b=a[0].expression,d=b.toWatch;return 1!==d.length?d:d[0]!==b?d:c}}function bc(a){return a.type===Ye.Identifier||a.type===Ye.MemberExpression}function cc(a){return 1===a.body.length&&bc(a.body[0].expression)?{type:Ye.AssignmentExpression,left:a.body[0].expression,right:{type:Ye.NGValueParameter},operator:"="}:void 0}function dc(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===Ye.Literal||a.body[0].expression.type===Ye.ArrayExpression||a.body[0].expression.type===Ye.ObjectExpression)}function ec(a){return a.constant}function fc(a,b){this.astBuilder=a,this.$filter=b}function gc(a,b){this.astBuilder=a,this.$filter=b}function hc(a,b,c,d){Wb(a,d);for(var e,f=b.split("."),g=0;f.length>1;g++){e=Vb(f.shift(),d);var h=Wb(a[e],d);h||(h={},a[e]=h),a=h}return e=Vb(f.shift(),d),Wb(a[e],d),a[e]=c,c}function ic(a){return"constructor"==a}function jc(a){return z(a.valueOf)?a.valueOf():$e.call(a)}function kc(){var a=pa(),b=pa();this.$get=["$filter","$sniffer",function(d,e){function g(a,b){return null==a||null==b?a===b:"object"==typeof a&&(a=jc(a),"object"==typeof a)?!1:a===b||a!==a&&b!==b}function h(a,b,d,e,f){var h,i=e.inputs;if(1===i.length){var j=g;return i=i[0],a.$watch(function(a){var b=i(a);return g(b,j)||(h=e(a,c,c,[b]),j=b&&jc(b)),h},b,d,f)}for(var k=[],l=[],m=0,n=i.length;n>m;m++)k[m]=g,l[m]=null;return a.$watch(function(a){for(var b=!1,d=0,f=i.length;f>d;d++){var j=i[d](a);(b||(b=!g(j,k[d])))&&(l[d]=j,k[d]=j&&jc(j))}return b&&(h=e(a,c,c,l)),h},b,d,f)}function i(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,z(b)&&b.apply(this,arguments),t(a)&&d.$$postDigest(function(){t(f)&&e()})},c)}function j(a,b,c,d){function e(a){var b=!0;return f(a,function(a){t(a)||(b=!1)}),b}var g,h;return g=a.$watch(function(a){return d(a)},function(a,c,d){h=a,z(b)&&b.call(this,a,c,d),e(a)&&d.$$postDigest(function(){e(h)&&g()})},c)}function k(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(a,c,d){z(b)&&b.apply(this,arguments),e()},c)}function l(a,b){if(!b)return a;var c=a.$$watchDelegate,d=c!==j&&c!==i,e=d?function(c,d,e,f){var g=a(c,d,e,f);return b(g,c,d)}:function(c,d,e,f){var g=a(c,d,e,f),h=b(g,c,d);return t(g)?h:g};return a.$$watchDelegate&&a.$$watchDelegate!==h?e.$$watchDelegate=a.$$watchDelegate:b.$stateful||(e.$$watchDelegate=h,e.inputs=a.inputs?a.inputs:[a]),e}var m={csp:e.csp,expensiveChecks:!1},n={csp:e.csp,expensiveChecks:!0};return function(c,e,f){var g,o,q;switch(typeof c){case"string":c=c.trim(),q=c;var r=f?b:a;if(g=r[q],!g){":"===c.charAt(0)&&":"===c.charAt(1)&&(o=!0,c=c.substring(2));var s=f?n:m,t=new Xe(s),u=new Ze(t,d,s);g=u.parse(c),g.constant?g.$$watchDelegate=k:o?g.$$watchDelegate=g.literal?j:i:g.inputs&&(g.$$watchDelegate=h),r[q]=g}return l(g,e);case"function":return l(c,e);default:return p}}}]}function lc(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return nc(function(b){a.$evalAsync(b)},b)}]}function mc(){this.$get=["$browser","$exceptionHandler",function(a,b){return nc(function(b){a.defer(b)},b)}]}function nc(a,b){function e(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function g(){this.$$state={status:0}}function h(a,b){return function(c){b.call(a,c)}}function i(a){var d,e,f;f=a.pending,a.processScheduled=!1,a.pending=c;for(var g=0,h=f.length;h>g;++g){e=f[g][0],d=f[g][a.status];try{z(d)?e.resolve(d(a.value)):1===a.status?e.resolve(a.value):e.reject(a.value)}catch(i){e.reject(i),b(i)}}}function j(b){!b.processScheduled&&b.pending&&(b.processScheduled=!0,a(function(){i(b)}))}function k(){this.promise=new g,this.resolve=h(this,this.resolve),this.reject=h(this,this.reject),this.notify=h(this,this.notify)}function l(a){var b=new k,c=0,d=Md(a)?[]:{};return f(a,function(a,e){c++,r(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var m=d("$q",TypeError),n=function(){return new k};g.prototype={then:function(a,b,c){var d=new k;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),this.$$state.status>0&&j(this.$$state),d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return q(b,!0,a)},function(b){return q(b,!1,a)},b)}},k.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(m("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){var c,d;d=e(this,this.$$resolve,this.$$reject);try{(u(a)||z(a))&&(c=a&&a.then),z(c)?(this.promise.$$state.status=-1,c.call(a,d[0],d[1],this.notify)):(this.promise.$$state.value=a,this.promise.$$state.status=1,j(this.promise.$$state))}catch(f){d[1](f),b(f)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,j(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;this.promise.$$state.status<=0&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;g>f;f++){e=d[f][0],a=d[f][3];try{e.notify(z(a)?a(c):c)}catch(h){b(h)}}})}};var o=function(a){var b=new k;return b.reject(a),b.promise},p=function(a,b){var c=new k;return b?c.resolve(a):c.reject(a),c.promise},q=function(a,b,c){var d=null;try{z(c)&&(d=c())}catch(e){return p(e,!1)}return H(d)?d.then(function(){return p(a,b)},function(a){return p(a,!1)}):p(a,b)},r=function(a,b,c,d){var e=new k;return e.resolve(a),e.promise.then(b,c,d)},s=r,t=function v(a){function b(a){d.resolve(a)}function c(a){d.reject(a)}if(!z(a))throw m("norslvr","Expected resolverFn, got '{0}'",a);if(!(this instanceof v))return new v(a);var d=new k;return a(b,c),d.promise};return t.defer=n,t.reject=o,t.when=r,t.resolve=s,t.all=l,t}function oc(){this.$get=["$window","$timeout",function(a,b){function c(){for(var a=0;a<k.length;a++){var b=k[a];b&&(k[a]=null,b())}j=k.length=0}function d(a){var b=k.length;return j++,k.push(a),0===b&&(i=h(c)),function(){b>=0&&(k[b]=null,b=null,0===--j&&i&&(i(),i=null,k.length=0))}}var e=a.requestAnimationFrame||a.webkitRequestAnimationFrame,f=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,g=!!e,h=g?function(a){var b=e(a);return function(){f(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};d.supported=g;var i,j=0,k=[];return d}]}function pc(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=i(),this.$$ChildScope=null}return b.prototype=a,b}var b=10,c=d("$rootScope"),g=null,h=null;this.digestTtl=function(a){return arguments.length&&(b=a),b},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,j,k,l){function m(a){a.currentScope.$$destroyed=!0}function n(){this.$id=i(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function o(a){if(y.$$phase)throw c("inprog","{0} already in progress",y.$$phase);y.$$phase=a}function q(){y.$$phase=null}function r(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function t(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function v(){}function w(){for(;C.length;)try{C.shift()()}catch(a){j(a)}h=null}function x(){null===h&&(h=l.defer(function(){y.$apply(w)}))}n.prototype={constructor:n,$new:function(b,c){var d;return c=c||this,b?(d=new n,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(b||c!=this)&&d.$on("$destroy",m),d},$watch:function(a,b,c,d){var e=k(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,c,e,a);var f=this,h=f.$$watchers,i={fn:b,last:v,get:e,exp:d||a,eq:!!c};return g=null,z(b)||(i.fn=p),h||(h=f.$$watchers=[]),h.unshift(i),r(this,1),function(){M(h,i)>=0&&r(f,-1),g=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(e,e,h)):b(e,d,h)}var d=new Array(a.length),e=new Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(e,e,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,f){e[0]=a,d[0]=c,b(e,a===c?e:d,f)}):(f(a,function(a,b){var f=h.$watch(a,function(a,f){e[b]=a,d[b]=f,i||(i=!0,h.$evalAsync(c))});g.push(f)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function c(a){f=a;var b,c,d,h,i;if(!s(f)){if(u(f))if(e(f)){g!==n&&(g=n,q=g.length=0,l++),b=f.length,q!==b&&(l++,g.length=q=b);for(var j=0;b>j;j++)i=g[j],h=f[j],d=i!==i&&h!==h,d||i===h||(l++,g[j]=h)}else{g!==o&&(g=o={},q=0,l++),b=0;for(c in f)f.hasOwnProperty(c)&&(b++,h=f[c],i=g[c],c in g?(d=i!==i&&h!==h,d||i===h||(l++,g[c]=h)):(q++,g[c]=h,l++));if(q>b){l++;for(c in g)f.hasOwnProperty(c)||(q--,delete g[c])}}else g!==f&&(g=f,l++);return l}}function d(){if(p?(p=!1,b(f,f,i)):b(f,h,i),j)if(u(f))if(e(f)){h=new Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else{h={};for(var c in f)vd.call(f,c)&&(h[c]=f[c])}else h=f}c.$stateful=!0;var f,g,h,i=this,j=b.length>1,l=0,m=k(a,c),n=[],o={},p=!0,q=0;return this.$watch(m,d)},$digest:function(){var a,d,e,f,i,k,m,n,p,r,s=b,t=this,u=[];o("$digest"),l.$$checkUrlChange(),this===y&&null!==h&&(l.defer.cancel(h),w()),g=null;do{for(k=!1,n=t;A.length;){try{r=A.shift(),r.scope.$eval(r.expression,r.locals)}catch(x){j(x)}g=null}a:do{if(f=n.$$watchers)for(i=f.length;i--;)try{if(a=f[i])if((d=a.get(n))===(e=a.last)||(a.eq?P(d,e):"number"==typeof d&&"number"==typeof e&&isNaN(d)&&isNaN(e))){if(a===g){k=!1;break a}}else k=!0,g=a,a.last=a.eq?N(d,null):d,a.fn(d,e===v?d:e,n),5>s&&(p=4-s,u[p]||(u[p]=[]),u[p].push({msg:z(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:d,oldVal:e}))}catch(x){j(x)}if(!(m=n.$$watchersCount&&n.$$childHead||n!==t&&n.$$nextSibling))for(;n!==t&&!(m=n.$$nextSibling);)n=n.$parent}while(n=m);if((k||A.length)&&!s--)throw q(),c("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",b,u)}while(k||A.length);for(q();B.length;)try{B.shift()()}catch(x){j(x)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===y&&l.$$applicationDestroyed(),r(this,-this.$$watchersCount);for(var b in this.$$listenerCount)t(this,this.$$listenerCount[b],b);a&&a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a&&a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=p,this.$on=this.$watch=this.$watchGroup=function(){return p},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(a,b){return k(a)(this,b)},$evalAsync:function(a,b){y.$$phase||A.length||l.defer(function(){A.length&&y.$digest()}),A.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){B.push(a)},$apply:function(a){try{return o("$apply"),this.$eval(a)}catch(b){j(b)}finally{q();try{y.$digest()}catch(b){throw j(b),b}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&C.push(b),x()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,t(e,1,a))}},$emit:function(a,b){var c,d,e,f=[],g=this,h=!1,i={name:a,targetScope:g,stopPropagation:function(){h=!0},preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1},k=Q([i],arguments,1);do{for(c=g.$$listeners[a]||f,i.currentScope=g,d=0,e=c.length;e>d;d++)if(c[d])try{c[d].apply(null,k)}catch(l){j(l)}else c.splice(d,1),d--,e--;if(h)return i.currentScope=null,i;g=g.$parent}while(g);return i.currentScope=null,i},$broadcast:function(a,b){var c=this,d=c,e=c,f={name:a,targetScope:c,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1};if(!c.$$listenerCount[a])return f;for(var g,h,i,k=Q([f],arguments,1);d=e;){for(f.currentScope=d,g=d.$$listeners[a]||[],h=0,i=g.length;i>h;h++)if(g[h])try{g[h].apply(null,k)}catch(l){j(l)}else g.splice(h,1),h--,i--;if(!(e=d.$$listenerCount[a]&&d.$$childHead||d!==c&&d.$$nextSibling))for(;d!==c&&!(e=d.$$nextSibling);)d=d.$parent}return f.currentScope=null,f}};var y=new n,A=y.$$asyncQueue=[],B=y.$$postDigestQueue=[],C=y.$$applyAsyncQueue=[];return y}]}function qc(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return t(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return t(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=zc(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function rc(a){if("self"===a)return a;if(w(a)){if(a.indexOf("***")>-1)throw _e("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=Pd(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(A(a))return new RegExp("^"+a.source+"$");throw _e("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function sc(a){var b=[];return t(a)&&f(a,function(a){b.push(rc(a))}),b}function tc(){this.SCE_CONTEXTS=af;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=sc(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=sc(a)),b},this.$get=["$injector",function(d){function e(a,b){return"self"===a?Ac(b):!!a.exec(b.href)}function f(c){var d,f,g=zc(c.toString()),h=!1;for(d=0,f=a.length;f>d;d++)if(e(a[d],g)){h=!0;break}if(h)for(d=0,f=b.length;f>d;d++)if(e(b[d],g)){h=!1;break}return h}function g(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function h(a,b){var d=m.hasOwnProperty(a)?m[a]:null;if(!d)throw _e("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||b===c||""===b)return b;if("string"!=typeof b)throw _e("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new d(b)}function i(a){return a instanceof l?a.$$unwrapTrustedValue():a}function j(a,b){if(null===b||b===c||""===b)return b;var d=m.hasOwnProperty(a)?m[a]:null;if(d&&b instanceof d)return b.$$unwrapTrustedValue();if(a===af.RESOURCE_URL){if(f(b))return b;throw _e("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===af.HTML)return k(b);throw _e("unsafe","Attempting to use an unsafe value in a safe context.")}var k=function(a){throw _e("unsafe","Attempting to use an unsafe value in a safe context.")};d.has("$sanitize")&&(k=d.get("$sanitize"));var l=g(),m={};return m[af.HTML]=g(l),m[af.CSS]=g(l),m[af.URL]=g(l),m[af.JS]=g(l),m[af.RESOURCE_URL]=g(m[af.URL]),{trustAs:h,getTrusted:j,valueOf:i}}]}function uc(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>zd)throw _e("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var d=O(af);d.isEnabled=function(){return a},d.trustAs=c.trustAs,d.getTrusted=c.getTrusted,d.valueOf=c.valueOf,a||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=q),d.parseAs=function(a,c){var e=b(c);return e.literal&&e.constant?e:b(c,function(b){return d.getTrusted(a,b)})};var e=d.parseAs,g=d.getTrusted,h=d.trustAs;return f(af,function(a,b){var c=ud(b);d[va("parse_as_"+c)]=function(b){return e(a,b)},d[va("get_trusted_"+c)]=function(b){return g(a,b)},d[va("trust_as_"+c)]=function(b){return h(a,b)}}),d}]}function vc(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=n((/android (\d+)/.exec(ud((a.navigator||{}).userAgent))||[])[1]),g=/Boxee/i.test((a.navigator||{}).userAgent),h=b[0]||{},i=/^(Moz|webkit|ms)(?=[A-Z])/,j=h.body&&h.body.style,k=!1,l=!1;if(j){for(var m in j)if(d=i.exec(m)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in j&&"webkit"),k=!!("transition"in j||c+"Transition"in j),l=!!("animation"in j||c+"Animation"in j),!f||k&&l||(k=w(j.webkitTransition),l=w(j.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>f||g),hasEvent:function(a){if("input"===a&&11>=zd)return!1;if(s(e[a])){var b=h.createElement("div");e[a]="on"+a in b}return e[a]},csp:Qd(),vendorPrefix:c,transitions:k,animations:l,android:f}}]}function wc(){this.$get=["$templateCache","$http","$q",function(a,b,c){function d(e,f){function g(a){if(!f)throw De("tpload","Failed to load template: {0} (HTTP status: {1} {2})",e,a.status,a.statusText);return c.reject(a)}d.totalPendingRequests++;var h=b.defaults&&b.defaults.transformResponse;Md(h)?h=h.filter(function(a){return a!==tb}):h===tb&&(h=null);var i={cache:a,transformResponse:h};return b.get(e,i)["finally"](function(){d.totalPendingRequests--}).then(function(b){return a.put(e,b.data),b.data},g)}return d.totalPendingRequests=0,d}]}function xc(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var d={};return d.findBindings=function(a,b,c){var d=a.getElementsByClassName("ng-binding"),e=[];return f(d,function(a){var d=Jd.element(a).data("$binding");d&&f(d,function(d){if(c){var f=new RegExp("(^|\\s)"+Pd(b)+"(\\s|\\||$)");f.test(d)&&e.push(a)}else-1!=d.indexOf(b)&&e.push(a)})}),e},d.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);if(h.length)return h}},d.getLocation=function(){return c.url()},d.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},d.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},d}]}function yc(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){z(f)||(i=h,h=f,f=p);var j,k=R(arguments,3),l=t(i)&&!i,m=(l?d:c).defer(),n=m.promise;return j=b.defer(function(){try{m.resolve(f.apply(null,k))}catch(b){m.reject(b),e(b)}finally{delete g[n.$$timeoutId]}l||a.$apply()},h),n.$$timeoutId=j,g[j]=m,n}var g={};return f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},f}]}function zc(a){var b=a;return zd&&(bf.setAttribute("href",b),b=bf.href),bf.setAttribute("href",b),{href:bf.href,protocol:bf.protocol?bf.protocol.replace(/:$/,""):"",host:bf.host,search:bf.search?bf.search.replace(/^\?/,""):"",hash:bf.hash?bf.hash.replace(/^#/,""):"",hostname:bf.hostname,port:bf.port,pathname:"/"===bf.pathname.charAt(0)?bf.pathname:"/"+bf.pathname}}function Ac(a){var b=w(a)?zc(a):a;return b.protocol===cf.protocol&&b.host===cf.host}function Bc(){this.$get=r(a)}function Cc(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var d=a[0]||{},e={},f="";return function(){var a,g,h,i,j,k=d.cookie||"";if(k!==f)for(f=k,a=f.split("; "),e={},h=0;h<a.length;h++)g=a[h],i=g.indexOf("="),i>0&&(j=b(g.substring(0,i)),e[j]===c&&(e[j]=b(g.substring(i+1))));return e}}function Dc(){this.$get=Cc}function Ec(a){function b(d,e){if(u(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",Kc),b("date",Xc),b("filter",Fc),b("json",Yc),b("limitTo",Zc),b("lowercase",hf),b("number",Lc),b("orderBy",$c),b("uppercase",jf)}function Fc(){return function(a,b,c){if(!e(a)){if(null==a)return a;throw d("filter")("notarray","Expected array but received: {0}",a)}var f,g,h=Jc(b);switch(h){case"function":f=b;break;case"boolean":case"null":case"number":case"string":g=!0;case"object":f=Hc(b,c,g);break;default:return a}return Array.prototype.filter.call(a,f)}}function Gc(a){return z(a.toString)&&a.toString!==Object.prototype.toString}function Hc(a,b,c){var d,e=u(a)&&"$"in a;return b===!0?b=P:z(b)||(b=function(a,b){return s(a)?!1:null===a||null===b?a===b:u(b)||u(a)&&!Gc(a)?!1:(a=ud(""+a),b=ud(""+b),-1!==a.indexOf(b))}),d=function(d){return e&&!u(d)?Ic(d,a.$,b,!1):Ic(d,a,b,c)}}function Ic(a,b,c,d,e){var f=Jc(a),g=Jc(b);if("string"===g&&"!"===b.charAt(0))return!Ic(a,b.substring(1),c,d);if(Md(a))return a.some(function(a){return Ic(a,b,c,d)});switch(f){case"object":var h;if(d){for(h in a)if("$"!==h.charAt(0)&&Ic(a[h],b,c,!0))return!0;return e?!1:Ic(a,b,c,!1)}if("object"===g){for(h in b){var i=b[h];if(!z(i)&&!s(i)){var j="$"===h,k=j?a:a[h];if(!Ic(k,i,c,j,j))return!1}}return!0}return c(a,b);case"function":return!1;default:return c(a,b)}}function Jc(a){return null===a?"null":typeof a}function Kc(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return s(c)&&(c=b.CURRENCY_SYM),s(d)&&(d=b.PATTERNS[1].maxFrac),null==a?a:Mc(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function Lc(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Mc(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Mc(a,b,c,d,e){if(u(a))return"";var f=0>a;a=Math.abs(a);var g=a===1/0;if(!g&&!isFinite(a))return"";var h=a+"",i="",j=!1,k=[];if(g&&(i=""),!g&&-1!==h.indexOf("e")){var l=h.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&l[3]>e+1?a=0:(i=h,j=!0)}if(g||j)e>0&&1>a&&(i=a.toFixed(e),a=parseFloat(i));else{var m=(h.split(df)[1]||"").length;s(e)&&(e=Math.min(Math.max(b.minFrac,m),b.maxFrac)),a=+(Math.round(+(a.toString()+"e"+e)).toString()+"e"+-e);var n=(""+a).split(df),o=n[0];n=n[1]||"";var p,q=0,r=b.lgSize,t=b.gSize;if(o.length>=r+t)for(q=o.length-r,p=0;q>p;p++)(q-p)%t===0&&0!==p&&(i+=c),i+=o.charAt(p);for(p=q;p<o.length;p++)(o.length-p)%r===0&&0!==p&&(i+=c),i+=o.charAt(p);for(;n.length<e;)n+="0";e&&"0"!==e&&(i+=d+n.substr(0,e))}return 0===a&&(f=!1),k.push(f?b.negPre:b.posPre,i,f?b.negSuf:b.posSuf),k.join("")}function Nc(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function Oc(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),Nc(f,b,d)}}function Pc(a,b){return function(c,d){var e=c["get"+a](),f=wd(b?"SHORT"+a:a);return d[f][e]}}function Qc(a,b,c){var d=-1*c,e=d>=0?"+":"";return e+=Nc(Math[d>0?"floor":"ceil"](d/60),2)+Nc(Math.abs(d%60),2)}function Rc(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(4>=b?5:12)-b)}function Sc(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function Tc(a){return function(b){var c=Rc(b.getFullYear()),d=Sc(b),e=+d-+c,f=1+Math.round(e/6048e5);return Nc(f,a)}}function Uc(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function Vc(a,b){return a.getFullYear()<=0?b.ERAS[0]:b.ERAS[1]}function Wc(a,b){return a.getFullYear()<=0?b.ERANAMES[0]:b.ERANAMES[1]}function Xc(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=n(b[9]+b[10]),f=n(b[9]+b[11])),g.call(d,n(b[1]),n(b[2])-1,n(b[3]));var i=n(b[4]||0)-e,j=n(b[5]||0)-f,k=n(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,e){var g,h,i="",j=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,w(c)&&(c=gf.test(c)?n(c):b(c)),x(c)&&(c=new Date(c)),!y(c)||!isFinite(c.getTime()))return c;for(;d;)h=ff.exec(d),h?(j=Q(j,h,1),d=j.pop()):(j.push(d),d=null);var k=c.getTimezoneOffset();return e&&(k=W(e,c.getTimezoneOffset()),c=Y(c,e,!0)),f(j,function(b){g=ef[b],i+=g?g(c,a.DATETIME_FORMATS,k):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function Yc(){return function(a,b){return s(b)&&(b=2),U(a,b)}}function Zc(){return function(a,b,c){return b=Math.abs(Number(b))===1/0?Number(b):n(b),isNaN(b)?a:(x(a)&&(a=a.toString()),Md(a)||w(a)?(c=!c||isNaN(c)?0:n(c),c=0>c&&c>=-a.length?a.length+c:c,b>=0?a.slice(c,c+b):0===c?a.slice(b,a.length):a.slice(Math.max(0,c+b),c)):a)}}function $c(a){return function(b,c,d){function f(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0}function g(a,b){return b?function(b,c){return a(c,b)}:a}function h(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function i(a){return null===a?"null":"function"==typeof a.valueOf&&(a=a.valueOf(),h(a))?a:"function"==typeof a.toString&&(a=a.toString(),h(a))?a:""}function j(a,b){var c=typeof a,d=typeof b;return c===d&&"object"===c&&(a=i(a),b=i(b)),c===d?("string"===c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:b>a?-1:1):d>c?-1:1}return e(b)?(c=Md(c)?c:[c],0===c.length&&(c=["+"]),c=c.map(function(b){var c=!1,d=b||q;if(w(b)){if(("+"==b.charAt(0)||"-"==b.charAt(0))&&(c="-"==b.charAt(0),b=b.substring(1)),""===b)return g(j,c);if(d=a(b),d.constant){var e=d();return g(function(a,b){return j(a[e],b[e])},c)}}return g(function(a,b){return j(d(a),d(b))},c)}),Dd.call(b).sort(g(f,d))):b}}function _c(a){return z(a)&&(a={link:a}),a.restrict=a.restrict||"AC",r(a)}function ad(a,b){a.$name=b}function bd(a,b,d,e,g){var h=this,i=[],j=h.$$parentForm=a.parent().controller("form")||mf;h.$error={},h.$$success={},h.$pending=c,h.$name=g(b.name||b.ngForm||"")(d),h.$dirty=!1,h.$pristine=!0,h.$valid=!0,h.$invalid=!1,h.$submitted=!1,j.$addControl(h),h.$rollbackViewValue=function(){f(i,function(a){a.$rollbackViewValue()})},h.$commitViewValue=function(){f(i,function(a){a.$commitViewValue()})},h.$addControl=function(a){ma(a.$name,"input"),i.push(a),a.$name&&(h[a.$name]=a)},h.$$renameControl=function(a,b){var c=a.$name;h[c]===a&&delete h[c],h[b]=a,a.$name=b},h.$removeControl=function(a){a.$name&&h[a.$name]===a&&delete h[a.$name],f(h.$pending,function(b,c){h.$setValidity(c,null,a)}),f(h.$error,function(b,c){h.$setValidity(c,null,a)}),f(h.$$success,function(b,c){h.$setValidity(c,null,a)}),M(i,a)},qd({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];if(d){var e=d.indexOf(c);-1===e&&d.push(c)}else a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(M(d,c),0===d.length&&delete a[b])},parentForm:j,$animate:e}),h.$setDirty=function(){e.removeClass(a,Wf),e.addClass(a,Xf),h.$dirty=!0,h.$pristine=!1,j.$setDirty()},h.$setPristine=function(){e.setClass(a,Wf,Xf+" "+nf),h.$dirty=!1,h.$pristine=!0,h.$submitted=!1,f(i,function(a){a.$setPristine()})},h.$setUntouched=function(){f(i,function(a){a.$setUntouched()})},h.$setSubmitted=function(){e.addClass(a,nf),h.$submitted=!0,j.$setSubmitted()}}function cd(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function dd(a,b,c,d,e,f){ed(a,b,c,d,e,f),cd(d)}function ed(a,b,c,d,e,f){var g=ud(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(a){h=!0}),b.on("compositionend",function(){h=!1,i()})}var i=function(a){if(j&&(f.defer.cancel(j),j=null),!h){var e=b.val(),i=a&&a.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=Od(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,i)}};if(e.hasEvent("input"))b.on("input",i);else{var j,k=function(a,b,c){j||(j=f.defer(function(){j=null,b&&b.value===c||i(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||k(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut",k)}b.on("change",i),d.$render=function(){b.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function fd(a,b){if(y(a))return a;if(w(a)){xf.lastIndex=0;var c=xf.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=Rc(d),k=7*(e-1);return b&&(f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds()),new Date(d,0,j.getDate()+k,f,g,h,i)}}return NaN}function gd(a,b){return function(c,d){var e,g;if(y(c))return c;if(w(c)){if('"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),rf.test(c))return new Date(c);if(a.lastIndex=0,e=a.exec(c))return e.shift(),g=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},f(e,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return NaN}}function hd(a,b,d,e){return function(f,g,h,i,j,k,l){function m(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function n(a){return t(a)?y(a)?a:d(a):c}id(f,g,h,i),ed(f,g,h,i,j,k);var o,p=i&&i.$options&&i.$options.timezone;if(i.$$parserName=a,i.$parsers.push(function(a){if(i.$isEmpty(a))return null;if(b.test(a)){var e=d(a,o);return p&&(e=Y(e,p)),e}return c}),i.$formatters.push(function(a){if(a&&!y(a))throw _f("datefmt","Expected `{0}` to be a date",a);return m(a)?(o=a,o&&p&&(o=Y(o,p,!0)),l("date")(a,e,p)):(o=null,"")}),t(h.min)||h.ngMin){var q;i.$validators.min=function(a){return!m(a)||s(q)||d(a)>=q},h.$observe("min",function(a){q=n(a),i.$validate()})}if(t(h.max)||h.ngMax){var r;i.$validators.max=function(a){return!m(a)||s(r)||d(a)<=r},h.$observe("max",function(a){r=n(a),i.$validate()})}}}function id(a,b,d,e){var f=b[0],g=e.$$hasNativeValidators=u(f.validity);g&&e.$parsers.push(function(a){var d=b.prop(td)||{};return d.badInput&&!d.typeMismatch?c:a})}function jd(a,b,d,e,f,g){if(id(a,b,d,e),ed(a,b,d,e,f,g),e.$$parserName="number",e.$parsers.push(function(a){return e.$isEmpty(a)?null:uf.test(a)?parseFloat(a):c}),e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!x(a))throw _f("numfmt","Expected `{0}` to be a number",a);a=a.toString()}return a}),t(d.min)||d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||s(h)||a>=h},d.$observe("min",function(a){t(a)&&!x(a)&&(a=parseFloat(a,10)),h=x(a)&&!isNaN(a)?a:c,e.$validate()})}if(t(d.max)||d.ngMax){var i;e.$validators.max=function(a){return e.$isEmpty(a)||s(i)||i>=a},d.$observe("max",function(a){t(a)&&!x(a)&&(a=parseFloat(a,10)),i=x(a)&&!isNaN(a)?a:c,e.$validate()})}}function kd(a,b,c,d,e,f){ed(a,b,c,d,e,f),cd(d),d.$$parserName="url",d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||sf.test(c)}}function ld(a,b,c,d,e,f){ed(a,b,c,d,e,f),cd(d),d.$$parserName="email",d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||tf.test(c)}}function md(a,b,c,d){s(c.name)&&b.attr("name",i());var e=function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)};b.on("click",e),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function nd(a,b,c,e,f){var g;if(t(e)){if(g=a(e),!g.constant)throw d("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,e);return g(b)}return f}function od(a,b,c,d,e,f,g,h){var i=nd(h,a,"ngTrueValue",c.ngTrueValue,!0),j=nd(h,a,"ngFalseValue",c.ngFalseValue,!1),k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a===!1},d.$formatters.push(function(a){return P(a,i)}),d.$parsers.push(function(a){return a?i:j})}function pd(a,b){
return a="ngClass"+a,["$animate",function(c){function d(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function e(a){var b=[];return Md(a)?(f(a,function(a){b=b.concat(e(a))}),b):w(a)?a.split(" "):u(a)?(f(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||pa(),d=[];return f(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&d.push(a))}),h.data("$classCounts",c),d.join(" ")}function m(a,b){var e=d(b,a),f=d(a,b);e=l(e,1),f=l(f,-1),e&&e.length&&c.addClass(h,e),f&&f.length&&c.removeClass(h,f)}function n(a){if(b===!0||g.$index%2===b){var c=e(a||[]);if(o){if(!P(a,o)){var d=e(o);m(d,c)}}else j(c)}o=O(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(b){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var f=1&c;if(f!==(1&d)){var h=e(g.$eval(i[a]));f===b?j(h):k(h)}})}}}]}function qd(a){function b(a,b,i){b===c?d("$pending",a,i):e("$pending",a,i),G(b)?b?(l(h.$error,a,i),k(h.$$success,a,i)):(k(h.$error,a,i),l(h.$$success,a,i)):(l(h.$error,a,i),l(h.$$success,a,i)),h.$pending?(f($f,!0),h.$valid=h.$invalid=c,g("",null)):(f($f,!1),h.$valid=rd(h.$error),h.$invalid=!h.$valid,g("",h.$valid));var j;j=h.$pending&&h.$pending[a]?c:h.$error[a]?!1:h.$$success[a]?!0:null,g(a,j),m.$setValidity(a,j,h)}function d(a,b,c){h[a]||(h[a]={}),k(h[a],b,c)}function e(a,b,d){h[a]&&l(h[a],b,d),rd(h[a])&&(h[a]=c)}function f(a,b){b&&!j[a]?(n.addClass(i,a),j[a]=!0):!b&&j[a]&&(n.removeClass(i,a),j[a]=!1)}function g(a,b){a=a?"-"+ia(a,"-"):"",f(Uf+a,b===!0),f(Vf+a,b===!1)}var h=a.ctrl,i=a.$element,j={},k=a.set,l=a.unset,m=a.parentForm,n=a.$animate;j[Vf]=!(j[Uf]=i.hasClass(Uf)),h.$setValidity=b}function rd(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var sd=/^\/(.+)\/([a-z]*)$/,td="validity",ud=function(a){return w(a)?a.toLowerCase():a},vd=Object.prototype.hasOwnProperty,wd=function(a){return w(a)?a.toUpperCase():a},xd=function(a){return w(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},yd=function(a){return w(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(ud=xd,wd=yd);var zd,Ad,Bd,Cd,Dd=[].slice,Ed=[].splice,Fd=[].push,Gd=Object.prototype.toString,Hd=Object.getPrototypeOf,Id=d("ng"),Jd=a.angular||(a.angular={}),Kd=0;zd=b.documentMode,p.$inject=[],q.$inject=[];var Ld,Md=Array.isArray,Nd=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,Od=function(a){return w(a)?a.trim():a},Pd=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Qd=function(){if(t(Qd.isActive_))return Qd.isActive_;var a=!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"));if(!a)try{new Function("")}catch(c){a=!0}return Qd.isActive_=a},Rd=function(){if(t(Rd.name_))return Rd.name_;var a,c,d,e,f=Sd.length;for(c=0;f>c;++c)if(d=Sd[c],a=b.querySelector("["+d.replace(":","\\:")+"jq]")){e=a.getAttribute(d+"jq");break}return Rd.name_=e},Sd=["ng-","data-ng-","ng:","x-ng-"],Td=/[A-Z]/g,Ud=!1,Vd=1,Wd=2,Xd=3,Yd=8,Zd=9,$d=11,_d={full:"1.4.1",major:1,minor:4,dot:1,codeName:"hyperionic-illumination"};Ba.expando="ng339";var ae=Ba.cache={},be=1,ce=function(a,b,c){a.addEventListener(b,c,!1)},de=function(a,b,c){a.removeEventListener(b,c,!1)};Ba._data=function(a){return this.cache[a[this.expando]]||{}};var ee=/([\:\-\_]+(.))/g,fe=/^moz([A-Z])/,ge={mouseleave:"mouseout",mouseenter:"mouseover"},he=d("jqLite"),ie=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,je=/<|&#?\w+;/,ke=/<([\w:]+)/,le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,me={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};me.optgroup=me.option,me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td;var ne=Ba.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),Ba(a).on("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return Ad(a>=0?this[a]:this[this.length+a])},length:0,push:Fd,sort:[].sort,splice:[].splice},oe={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){oe[ud(a)]=a});var pe={};f("input,select,option,textarea,button,form,details".split(","),function(a){pe[a]=!0});var qe={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};f({data:Ha,removeData:Fa,hasData:ya},function(a,b){Ba[b]=a}),f({data:Ha,inheritedData:Na,scope:function(a){return Ad.data(a,"$scope")||Na(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return Ad.data(a,"$isolateScope")||Ad.data(a,"$isolateScopeNoTemplate")},controller:Ma,injector:function(a){return Na(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Ia,css:function(a,b,c){return b=va(b),t(c)?void(a.style[b]=c):a.style[b]},attr:function(a,b,d){var e=a.nodeType;if(e!==Xd&&e!==Wd&&e!==Yd){var f=ud(b);if(oe[f]){if(!t(d))return a[b]||(a.attributes.getNamedItem(b)||p).specified?f:c;d?(a[b]=!0,a.setAttribute(b,f)):(a[b]=!1,a.removeAttribute(f))}else if(t(d))a.setAttribute(b,d);else if(a.getAttribute){var g=a.getAttribute(b,2);return null===g?c:g}}},prop:function(a,b,c){return t(c)?void(a[b]=c):a[b]},text:function(){function a(a,b){if(s(b)){var c=a.nodeType;return c===Vd||c===Xd?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(s(b)){if(a.multiple&&"select"===L(a)){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){return s(b)?a.innerHTML:(Da(a,!0),void(a.innerHTML=b))},empty:Oa},function(a,b){Ba.prototype[b]=function(b,d){var e,f,g=this.length;if(a!==Oa&&(2==a.length&&a!==Ia&&a!==Ma?b:d)===c){if(u(b)){for(e=0;g>e;e++)if(a===Ha)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}for(var h=a.$dv,i=h===c?Math.min(g,1):g,j=0;i>j;j++){var k=a(this[j],b,d);h=h?h+k:k}return h}for(e=0;g>e;e++)a(this[e],b,d);return this}}),f({removeData:Fa,on:function Dg(a,b,c,d){if(t(d))throw he("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(xa(a)){var e=Ga(a,!0),f=e.events,g=e.handle;g||(g=e.handle=Ta(a,f));for(var h=b.indexOf(" ")>=0?b.split(" "):[b],i=h.length;i--;){b=h[i];var j=f[b];j||(f[b]=[],"mouseenter"===b||"mouseleave"===b?Dg(a,ge[b],function(a){var c=this,d=a.relatedTarget;(!d||d!==c&&!c.contains(d))&&g(a,b)}):"$destroy"!==b&&ce(a,b,g),j=f[b]),j.push(c)}}},off:Ea,one:function(a,b,c){a=Ad(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;Da(a),f(new Ba(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){a.nodeType===Vd&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===Vd||c===$d){b=new Ba(b);for(var d=0,e=b.length;e>d;d++){var f=b[d];a.appendChild(f)}}},prepend:function(a,b){if(a.nodeType===Vd){var c=a.firstChild;f(new Ba(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=Ad(b).eq(0).clone()[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:Pa,detach:function(a){Pa(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new Ba(b);for(var e=0,f=b.length;f>e;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}},addClass:Ka,removeClass:Ja,toggleClass:function(a,b,c){b&&f(b.split(" "),function(b){var d=c;s(d)&&(d=!Ia(a,b)),(d?Ka:Ja)(a,b)})},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==$d?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:Ca,triggerHandler:function(a,b,c){var d,e,g,h=b.type||b,i=Ga(a),j=i&&i.events,k=j&&j[h];k&&(d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:p,type:h,target:a},b.type&&(d=l(d,b)),e=O(k),g=c?[d].concat(c):[d],f(e,function(b){d.isImmediatePropagationStopped()||b.apply(a,g)}))}},function(a,b){Ba.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;g>f;f++)s(e)?(e=a(this[f],b,c,d),t(e)&&(e=Ad(e))):La(e,a(this[f],b,c,d));return t(e)?e:this},Ba.prototype.bind=Ba.prototype.on,Ba.prototype.unbind=Ba.prototype.off}),Wa.prototype={put:function(a,b){this[Va(a,this.nextUid)]=b},get:function(a){return this[Va(a,this.nextUid)]},remove:function(a){var b=this[a=Va(a,this.nextUid)];return delete this[a],b}};var re=[function(){this.$get=[function(){return Wa}]}],se=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,te=/,/,ue=/^\s*(_?)(\S+?)\1\s*$/,ve=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,we=d("$injector");Za.$$annotate=Ya;var xe=d("$animate"),ye=1,ze="ng-animate",Ae=function(){this.$get=["$q","$$rAF",function(a,b){function c(){}return c.all=p,c.chain=p,c.prototype={end:p,cancel:p,resume:p,pause:p,complete:p,then:function(c,d){return a(function(a){b(function(){a()})}).then(c,d)}},c}]},Be=function(){var a=new Wa,b=[];this.$get=["$$AnimateRunner","$rootScope",function(c,d){function e(c,e,g){var h=a.get(c);h||(a.put(c,h={}),b.push(c)),e&&f(e.split(" "),function(a){a&&(h[a]=!0)}),g&&f(g.split(" "),function(a){a&&(h[a]=!1)}),b.length>1||d.$$postDigest(function(){f(b,function(b){var c=a.get(b);if(c){var d=bb(b.attr("class")),e="",g="";f(c,function(a,b){var c=!!d[b];a!==c&&(a?e+=(e.length?" ":"")+b:g+=(g.length?" ":"")+b)}),f(b,function(a){e&&Ka(a,e),g&&Ja(a,g)}),a.remove(b)}}),b.length=0})}return{enabled:p,on:p,off:p,pin:p,push:function(a,b,d,f){return f&&f(),d=d||{},d.from&&a.css(d.from),d.to&&a.css(d.to),(d.addClass||d.removeClass)&&e(a,d.addClass,d.removeClass),new c}}}]},Ce=["$provide",function(a){var b=this;this.$$registeredAnimations=Object.create(null),this.register=function(c,d){if(c&&"."!==c.charAt(0))throw xe("notcsel","Expecting class selector starting with '.' got '{0}'.",c);var e=c+"-animation";b.$$registeredAnimations[c.substr(1)]=e,a.factory(e,d)},this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null,this.$$classNameFilter)){var b=new RegExp("(\\s+|\\/)"+ze+"(\\s+|\\/)");if(b.test(this.$$classNameFilter.toString()))throw xe("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',ze)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(a){function b(a,b,c){if(c){var d=ab(c);!d||d.parentNode||d.previousElementSibling||(c=null)}c?c.after(a):b.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(c,d,e,f){return d=d&&Ad(d),e=e&&Ad(e),d=d||e.parent(),b(c,d,e),a.push(c,"enter",cb(f))},move:function(c,d,e,f){return d=d&&Ad(d),e=e&&Ad(e),d=d||e.parent(),b(c,d,e),a.push(c,"move",cb(f))},leave:function(b,c){return a.push(b,"leave",cb(c),function(){b.remove()})},addClass:function(b,c,d){return d=cb(d),d.addClass=_a(d.addclass,c),a.push(b,"addClass",d)},removeClass:function(b,c,d){return d=cb(d),d.removeClass=_a(d.removeClass,c),a.push(b,"removeClass",d)},setClass:function(b,c,d,e){return e=cb(e),e.addClass=_a(e.addClass,c),e.removeClass=_a(e.removeClass,d),a.push(b,"setClass",e)},animate:function(b,c,d,e,f){return f=cb(f),f.from=f.from?l(f.from,c):c,f.to=f.to?l(f.to,d):d,e=e||"ng-inline-animate",f.tempClasses=_a(f.tempClasses,e),a.push(b,"animate",f)}}}]}],De=d("$compile");ib.$inject=["$provide","$$sanitizeUriProvider"];var Ee=/^((?:x|data)[\:\-_])/i,Fe=d("$controller"),Ge=/^(\S+)(\s+as\s+(\w+))?$/,He="application/json",Ie={"Content-Type":He+";charset=utf-8"},Je=/^\[|^\{(?!\{)/,Ke={"[":/]$/,"{":/}$/},Le=/^\)\]\}',?\n/,Me=Jd.$interpolateMinErr=d("$interpolate");Me.throwNoconcat=function(a){throw Me("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",a)},Me.interr=function(a,b){return Me("interr","Can't interpolate: {0}\n{1}",a,b.toString())};var Ne=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Oe={http:80,https:443,ftp:21},Pe=d("$location"),Qe={$$html5:!1,$$replace:!1,absUrl:Rb("$$absUrl"),url:function(a){if(s(a))return this.$$url;var b=Ne.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:Rb("$$protocol"),host:Rb("$$host"),port:Rb("$$port"),path:Sb("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(w(a)||x(a))a=a.toString(),this.$$search=_(a);else{if(!u(a))throw Pe("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a=N(a,{}),f(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:s(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:Sb("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};f([Qb,Pb,Ob],function(a){a.prototype=Object.create(Qe),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==Ob||!this.$$html5)throw Pe("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=s(b)?null:b,this}});var Re=d("$parse"),Se=Function.prototype.call,Te=Function.prototype.apply,Ue=Function.prototype.bind,Ve=pa();f("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Ve[a]=!0});var We={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Xe=function(a){this.options=a};Xe.prototype={constructor:Xe,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;){var b=this.text.charAt(this.index);if('"'===b||"'"===b)this.readString(b);else if(this.isNumber(b)||"."===b&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(b))this.readIdent();else if(this.is(b,"(){}[].,;:?"))this.tokens.push({index:this.index,text:b}),this.index++;else if(this.isWhitespace(b))this.index++;else{var c=b+this.peek(),d=c+this.peek(2),e=Ve[b],f=Ve[c],g=Ve[d];if(e||f||g){var h=g?d:f?c:b;this.tokens.push({index:this.index,text:h,operator:!0}),this.index+=h.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||""===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=t(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw Re("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=ud(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=this.index;this.index<this.text.length;){var b=this.text.charAt(this.index);if(!this.isIdent(b)&&!this.isNumber(b))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=We[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,constant:!0,value:c});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var Ye=function(a,b){this.lexer=a,this.options=b};Ye.Program="Program",Ye.ExpressionStatement="ExpressionStatement",Ye.AssignmentExpression="AssignmentExpression",Ye.ConditionalExpression="ConditionalExpression",Ye.LogicalExpression="LogicalExpression",Ye.BinaryExpression="BinaryExpression",Ye.UnaryExpression="UnaryExpression",Ye.CallExpression="CallExpression",Ye.MemberExpression="MemberExpression",Ye.Identifier="Identifier",Ye.Literal="Literal",Ye.ArrayExpression="ArrayExpression",Ye.Property="Property",Ye.ObjectExpression="ObjectExpression",Ye.ThisExpression="ThisExpression",Ye.NGValueParameter="NGValueParameter",Ye.prototype={ast:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b},program:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:Ye.Program,body:a}},expressionStatement:function(){return{type:Ye.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a,b=this.expression();a=this.expect("|");)b=this.filter(b);return b},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();return this.expect("=")&&(a={type:Ye.AssignmentExpression,left:a,right:this.assignment(),operator:"="}),a},ternary:function(){var a,b,c=this.logicalOR();return this.expect("?")&&(a=this.expression(),this.consume(":"))?(b=this.expression(),{type:Ye.ConditionalExpression,test:c,alternate:a,consequent:b}):c},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:Ye.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:Ye.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a,b=this.relational();a=this.expect("==","!=","===","!==");)b={type:Ye.BinaryExpression,operator:a.text,left:b,right:this.relational()};return b},relational:function(){for(var a,b=this.additive();a=this.expect("<",">","<=",">=");)b={type:Ye.BinaryExpression,operator:a.text,left:b,right:this.additive()};return b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b={type:Ye.BinaryExpression,operator:a.text,left:b,right:this.multiplicative()};return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b={type:Ye.BinaryExpression,operator:a.text,left:b,right:this.unary()};return b},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:Ye.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.constants.hasOwnProperty(this.peek().text)?a=N(this.constants[this.consume().text]):this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:Ye.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:Ye.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:Ye.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){for(var b=[a],c={type:Ye.CallExpression,callee:this.identifier(),arguments:b,filter:!0};this.expect(":");)b.push(this.expression());return c},parseArguments:function(){var a=[];if(")"!==this.peekToken().text)do a.push(this.expression());while(this.expect(","));return a},identifier:function(){var a=this.consume();return a.identifier||this.throwError("is not a valid identifier",a),{type:Ye.Identifier,name:a.text}},constant:function(){return{type:Ye.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Ye.ArrayExpression,elements:a}},object:function(){var a,b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;a={type:Ye.Property,kind:"init"},this.peek().constant?a.key=this.constant():this.peek().identifier?a.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),a.value=this.expression(),b.push(a)}while(this.expect(","));return this.consume("}"),{type:Ye.ObjectExpression,properties:b}},throwError:function(a,b){throw Re("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},consume:function(a){if(0===this.tokens.length)throw Re("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},peekToken:function(){if(0===this.tokens.length)throw Re("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){var f=this.tokens[a],g=f.text;if(g===b||g===c||g===d||g===e||!b&&!c&&!d&&!e)return f}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},constants:{"true":{type:Ye.Literal,value:!0},"false":{type:Ye.Literal,value:!1},"null":{type:Ye.Literal,value:null},undefined:{type:Ye.Literal,value:c},"this":{type:Ye.ThisExpression}}},fc.prototype={compile:function(a,b){var d=this,e=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:b,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},_b(e,d.$filter);var g,h="";if(this.stage="assign",g=cc(e)){this.state.computing="assign";var i=this.nextId();this.recurse(g,i),h="fn.assign="+this.generateFunction("assign","s,v,l")}var j=ac(e.body);d.stage="inputs",f(j,function(a,b){var c="fn"+b;d.state[c]={vars:[],body:[],own:{}},d.state.computing=c;var e=d.nextId();d.recurse(a,e),d.return_(e),d.state.inputs.push(c),a.watchId=b}),this.state.computing="fn",this.stage="main",this.recurse(e);var k='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+h+this.watchFns()+"return fn;",l=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","ifDefined","plus","text",k)(this.$filter,Vb,Wb,Xb,Yb,Zb,a);return this.state=this.stage=c,l.literal=dc(e),l.constant=ec(e),l},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,c=this;return f(b,function(b){a.push("var "+b+"="+c.generateFunction(b,"s"))}),b.length&&a.push("fn.inputs=["+b.join(",")+"];"),a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;return f(this.state.filters,function(c,d){a.push(c+"=$filter("+b.escape(d)+")")}),a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,e,g,h){var i,j,k,l,m=this;if(e=e||p,!h&&t(a.watchId))return b=b||this.nextId(),void this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,e,g,!0));switch(a.type){case Ye.Program:f(a.body,function(b,d){m.recurse(b.expression,c,c,function(a){j=a}),d!==a.body.length-1?m.current().body.push(j,";"):m.return_(j)});break;case Ye.Literal:l=this.escape(a.value),this.assign(b,l),e(l);break;case Ye.UnaryExpression:this.recurse(a.argument,c,c,function(a){j=a}),l=a.operator+"("+this.ifDefined(j,0)+")",this.assign(b,l),e(l);break;case Ye.BinaryExpression:this.recurse(a.left,c,c,function(a){i=a}),this.recurse(a.right,c,c,function(a){j=a}),l="+"===a.operator?this.plus(i,j):"-"===a.operator?this.ifDefined(i,0)+a.operator+this.ifDefined(j,0):"("+i+")"+a.operator+"("+j+")",this.assign(b,l),e(l);break;case Ye.LogicalExpression:b=b||this.nextId(),m.recurse(a.left,b),m.if_("&&"===a.operator?b:m.not(b),m.lazyRecurse(a.right,b)),e(b);break;case Ye.ConditionalExpression:b=b||this.nextId(),m.recurse(a.test,b),m.if_(b,m.lazyRecurse(a.alternate,b),m.lazyRecurse(a.consequent,b)),e(b);break;case Ye.Identifier:b=b||this.nextId(),d&&(d.context="inputs"===m.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name),Vb(a.name),m.if_("inputs"===m.stage||m.not(m.getHasOwnProperty("l",a.name)),function(){m.if_("inputs"===m.stage||"s",function(){g&&1!==g&&m.if_(m.not(m.nonComputedMember("s",a.name)),m.lazyAssign(m.nonComputedMember("s",a.name),"{}")),m.assign(b,m.nonComputedMember("s",a.name))})},b&&m.lazyAssign(b,m.nonComputedMember("l",a.name))),(m.state.expensiveChecks||ic(a.name))&&m.addEnsureSafeObject(b),e(b);break;case Ye.MemberExpression:i=d&&(d.context=this.nextId())||this.nextId(),b=b||this.nextId(),m.recurse(a.object,i,c,function(){m.if_(m.notNull(i),function(){a.computed?(j=m.nextId(),m.recurse(a.property,j),m.addEnsureSafeMemberName(j),g&&1!==g&&m.if_(m.not(m.computedMember(i,j)),m.lazyAssign(m.computedMember(i,j),"{}")),l=m.ensureSafeObject(m.computedMember(i,j)),m.assign(b,l),d&&(d.computed=!0,d.name=j)):(Vb(a.property.name),g&&1!==g&&m.if_(m.not(m.nonComputedMember(i,a.property.name)),m.lazyAssign(m.nonComputedMember(i,a.property.name),"{}")),l=m.nonComputedMember(i,a.property.name),(m.state.expensiveChecks||ic(a.property.name))&&(l=m.ensureSafeObject(l)),m.assign(b,l),d&&(d.computed=!1,d.name=a.property.name))},function(){m.assign(b,"undefined")}),e(b)},!!g);break;case Ye.CallExpression:b=b||this.nextId(),a.filter?(j=m.filter(a.callee.name),k=[],f(a.arguments,function(a){var b=m.nextId();m.recurse(a,b),k.push(b)}),l=j+"("+k.join(",")+")",m.assign(b,l),e(b)):(j=m.nextId(),i={},k=[],m.recurse(a.callee,j,i,function(){m.if_(m.notNull(j),function(){m.addEnsureSafeFunction(j),f(a.arguments,function(a){m.recurse(a,m.nextId(),c,function(a){k.push(m.ensureSafeObject(a))})}),i.name?(m.state.expensiveChecks||m.addEnsureSafeObject(i.context),l=m.member(i.context,i.name,i.computed)+"("+k.join(",")+")"):l=j+"("+k.join(",")+")",l=m.ensureSafeObject(l),m.assign(b,l)},function(){m.assign(b,"undefined")}),e(b)}));break;case Ye.AssignmentExpression:if(j=this.nextId(),i={},!bc(a.left))throw Re("lval","Trying to assing a value to a non l-value");this.recurse(a.left,c,i,function(){m.if_(m.notNull(i.context),function(){m.recurse(a.right,j),m.addEnsureSafeObject(m.member(i.context,i.name,i.computed)),l=m.member(i.context,i.name,i.computed)+a.operator+j,m.assign(b,l),e(b||l)})},1);break;case Ye.ArrayExpression:k=[],f(a.elements,function(a){m.recurse(a,m.nextId(),c,function(a){k.push(a)})}),l="["+k.join(",")+"]",this.assign(b,l),e(l);break;case Ye.ObjectExpression:k=[],f(a.properties,function(a){m.recurse(a.value,m.nextId(),c,function(b){k.push(m.escape(a.key.type===Ye.Identifier?a.key.name:""+a.key.value)+":"+b)})}),l="{"+k.join(",")+"}",this.assign(b,l),e(l);break;case Ye.ThisExpression:this.assign(b,"s"),e("s");break;case Ye.NGValueParameter:this.assign(b,"v"),e("v")}},getHasOwnProperty:function(a,b){var c=a+"."+b,d=this.current().own;return d.hasOwnProperty(c)||(d[c]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")")),d[c]},assign:function(a,b){return a?(this.current().body.push(a,"=",b,";"),a):void 0},filter:function(a){return this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0)),this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,c){if(a===!0)b();else{var d=this.current().body;d.push("if(",a,"){"),b(),d.push("}"),c&&(d.push("else{"),c(),d.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){return a+"."+b},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,c){return c?this.computedMember(a,b):this.nonComputedMember(a,b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},lazyRecurse:function(a,b,c,d,e,f){var g=this;return function(){g.recurse(a,b,c,d,e,f)}},lazyAssign:function(a,b){var c=this;return function(){c.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(w(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(x(a))return a.toString();if(a===!0)return"true";if(a===!1)return"false";if(null===a)return"null";if("undefined"==typeof a)return"undefined";throw Re("esc","IMPOSSIBLE")},nextId:function(a,b){var c="v"+this.state.nextId++;return a||this.current().vars.push(c+(b?"="+b:"")),c},current:function(){return this.state[this.state.computing]}},gc.prototype={compile:function(a,b){var c=this,d=this.astBuilder.ast(a);this.expression=a,this.expensiveChecks=b,_b(d,c.$filter);var e,g;(e=cc(d))&&(g=this.recurse(e));var h,i=ac(d.body);i&&(h=[],f(i,function(a,b){var d=c.recurse(a);a.input=d,h.push(d),a.watchId=b}));var j=[];f(d.body,function(a){j.push(c.recurse(a.expression))});var k=0===d.body.length?function(){}:1===d.body.length?j[0]:function(a,b){var c;return f(j,function(d){c=d(a,b)}),c};return g&&(k.assign=function(a,b,c){return g(a,c,b)}),h&&(k.inputs=h),k.literal=dc(d),k.constant=ec(d),k},recurse:function(a,b,d){var e,g,h,i=this;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case Ye.Literal:return this.value(a.value,b);case Ye.UnaryExpression:return g=this.recurse(a.argument),this["unary"+a.operator](g,b);case Ye.BinaryExpression:return e=this.recurse(a.left),g=this.recurse(a.right),this["binary"+a.operator](e,g,b);case Ye.LogicalExpression:return e=this.recurse(a.left),g=this.recurse(a.right),this["binary"+a.operator](e,g,b);case Ye.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case Ye.Identifier:return Vb(a.name,i.expression),i.identifier(a.name,i.expensiveChecks||ic(a.name),b,d,i.expression);case Ye.MemberExpression:return e=this.recurse(a.object,!1,!!d),a.computed||(Vb(a.property.name,i.expression),g=a.property.name),a.computed&&(g=this.recurse(a.property)),a.computed?this.computedMember(e,g,b,d,i.expression):this.nonComputedMember(e,g,i.expensiveChecks,b,d,i.expression);case Ye.CallExpression:return h=[],f(a.arguments,function(a){h.push(i.recurse(a))}),a.filter&&(g=this.$filter(a.callee.name)),a.filter||(g=this.recurse(a.callee,!0)),a.filter?function(a,d,e,f){for(var i=[],j=0;j<h.length;++j)i.push(h[j](a,d,e,f));
var k=g.apply(c,i,f);return b?{context:c,name:c,value:k}:k}:function(a,c,d,e){var f,j=g(a,c,d,e);if(null!=j.value){Wb(j.context,i.expression),Xb(j.value,i.expression);for(var k=[],l=0;l<h.length;++l)k.push(Wb(h[l](a,c,d,e),i.expression));f=Wb(j.value.apply(j.context,k),i.expression)}return b?{value:f}:f};case Ye.AssignmentExpression:return e=this.recurse(a.left,!0,1),g=this.recurse(a.right),function(a,c,d,f){var h=e(a,c,d,f),j=g(a,c,d,f);return Wb(h.value,i.expression),h.context[h.name]=j,b?{value:j}:j};case Ye.ArrayExpression:return h=[],f(a.elements,function(a){h.push(i.recurse(a))}),function(a,c,d,e){for(var f=[],g=0;g<h.length;++g)f.push(h[g](a,c,d,e));return b?{value:f}:f};case Ye.ObjectExpression:return h=[],f(a.properties,function(a){h.push({key:a.key.type===Ye.Identifier?a.key.name:""+a.key.value,value:i.recurse(a.value)})}),function(a,c,d,e){for(var f={},g=0;g<h.length;++g)f[h[g].key]=h[g].value(a,c,d,e);return b?{value:f}:f};case Ye.ThisExpression:return function(a){return b?{value:a}:a};case Ye.NGValueParameter:return function(a,c,d,e){return b?{value:d}:d}}},"unary+":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=t(g)?+g:0,b?{value:g}:g}},"unary-":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=t(g)?-g:0,b?{value:g}:g}},"unary!":function(a,b){return function(c,d,e,f){var g=!a(c,d,e,f);return b?{value:g}:g}},"binary+":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=Zb(h,i);return c?{value:j}:j}},"binary-":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=(t(h)?h:0)-(t(i)?i:0);return c?{value:j}:j}},"binary*":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)*b(d,e,f,g);return c?{value:h}:h}},"binary/":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)/b(d,e,f,g);return c?{value:h}:h}},"binary%":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)%b(d,e,f,g);return c?{value:h}:h}},"binary===":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)===b(d,e,f,g);return c?{value:h}:h}},"binary!==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!==b(d,e,f,g);return c?{value:h}:h}},"binary==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)==b(d,e,f,g);return c?{value:h}:h}},"binary!=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!=b(d,e,f,g);return c?{value:h}:h}},"binary<":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<b(d,e,f,g);return c?{value:h}:h}},"binary>":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>b(d,e,f,g);return c?{value:h}:h}},"binary<=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<=b(d,e,f,g);return c?{value:h}:h}},"binary>=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>=b(d,e,f,g);return c?{value:h}:h}},"binary&&":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)&&b(d,e,f,g);return c?{value:h}:h}},"binary||":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)||b(d,e,f,g);return c?{value:h}:h}},"ternary?:":function(a,b,c,d){return function(e,f,g,h){var i=a(e,f,g,h)?b(e,f,g,h):c(e,f,g,h);return d?{value:i}:i}},value:function(a,b){return function(){return b?{context:c,name:c,value:a}:a}},identifier:function(a,b,d,e,f){return function(g,h,i,j){var k=h&&a in h?h:g;e&&1!==e&&k&&!k[a]&&(k[a]={});var l=k?k[a]:c;return b&&Wb(l,f),d?{context:k,name:a,value:l}:l}},computedMember:function(a,b,c,d,e){return function(f,g,h,i){var j,k,l=a(f,g,h,i);return null!=l&&(j=b(f,g,h,i),Vb(j,e),d&&1!==d&&l&&!l[j]&&(l[j]={}),k=l[j],Wb(k,e)),c?{context:l,name:j,value:k}:k}},nonComputedMember:function(a,b,d,e,f,g){return function(h,i,j,k){var l=a(h,i,j,k);f&&1!==f&&l&&!l[b]&&(l[b]={});var m=null!=l?l[b]:c;return(d||ic(b))&&Wb(m,g),e?{context:l,name:b,value:m}:m}},inputs:function(a,b){return function(c,d,e,f){return f?f[b]:a(c,d,e)}}};var Ze=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c,this.ast=new Ye(this.lexer),this.astCompiler=c.csp?new gc(this.ast,b):new fc(this.ast,b)};Ze.prototype={constructor:Ze,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};var $e=(pa(),pa(),Object.prototype.valueOf),_e=d("$sce"),af={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},De=d("$compile"),bf=b.createElement("a"),cf=zc(a.location.href);Cc.$inject=["$document"],Ec.$inject=["$provide"],Kc.$inject=["$locale"],Lc.$inject=["$locale"];var df=".",ef={yyyy:Oc("FullYear",4),yy:Oc("FullYear",2,0,!0),y:Oc("FullYear",1),MMMM:Pc("Month"),MMM:Pc("Month",!0),MM:Oc("Month",2,1),M:Oc("Month",1,1),dd:Oc("Date",2),d:Oc("Date",1),HH:Oc("Hours",2),H:Oc("Hours",1),hh:Oc("Hours",2,-12),h:Oc("Hours",1,-12),mm:Oc("Minutes",2),m:Oc("Minutes",1),ss:Oc("Seconds",2),s:Oc("Seconds",1),sss:Oc("Milliseconds",3),EEEE:Pc("Day"),EEE:Pc("Day",!0),a:Uc,Z:Qc,ww:Tc(2),w:Tc(1),G:Vc,GG:Vc,GGG:Vc,GGGG:Wc},ff=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,gf=/^\-?\d+$/;Xc.$inject=["$locale"];var hf=r(ud),jf=r(wd);$c.$inject=["$parse"];var kf=r({restrict:"E",compile:function(a,b){return b.href||b.xlinkHref?void 0:function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===Gd.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),lf={};f(oe,function(a,b){function c(a,c,e){a.$watch(e[d],function(a){e.$set(b,!!a)})}if("multiple"!=a){var d=jb("ng-"+b),e=c;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[d]&&c(a,b,e)}),lf[d]=function(){return{restrict:"A",priority:100,link:e}}}}),f(qe,function(a,b){lf[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"==d.ngPattern.charAt(0)){var e=d.ngPattern.match(sd);if(e)return void d.$set("ngPattern",new RegExp(e[1],e[2]))}a.$watch(d[b],function(a){d.$set(b,a)})}}}}),f(["src","srcset","href"],function(a){var b=jb("ng-"+a);lf[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===Gd.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(zd&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var mf={$addControl:p,$$renameControl:ad,$removeControl:p,$setValidity:p,$setDirty:p,$setPristine:p,$setSubmitted:p},nf="ng-submitted";bd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var of=function(a){return["$timeout",function(b){var d={name:"form",restrict:a?"EAC":"E",controller:bd,compile:function(d,e){d.addClass(Wf).addClass(Uf);var f=e.name?"name":a&&e.ngForm?"ngForm":!1;return{pre:function(a,d,e,g){if(!("action"in e)){var h=function(b){a.$apply(function(){g.$commitViewValue(),g.$setSubmitted()}),b.preventDefault()};ce(d[0],"submit",h),d.on("$destroy",function(){b(function(){de(d[0],"submit",h)},0,!1)})}var i=g.$$parentForm;f&&(hc(a,g.$name,g,g.$name),e.$observe(f,function(b){g.$name!==b&&(hc(a,g.$name,c,g.$name),i.$$renameControl(g,b),hc(a,g.$name,g,g.$name))})),d.on("$destroy",function(){i.$removeControl(g),f&&hc(a,e[f],c,g.$name),l(g,mf)})}}}};return d}]},pf=of(),qf=of(!0),rf=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,sf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,tf=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,uf=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,vf=/^(\d{4})-(\d{2})-(\d{2})$/,wf=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,xf=/^(\d{4})-W(\d\d)$/,yf=/^(\d{4})-(\d\d)$/,zf=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Af={text:dd,date:hd("date",vf,gd(vf,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":hd("datetimelocal",wf,gd(wf,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:hd("time",zf,gd(zf,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:hd("week",xf,fd,"yyyy-Www"),month:hd("month",yf,gd(yf,["yyyy","MM"]),"yyyy-MM"),number:jd,url:kd,email:ld,radio:md,checkbox:od,hidden:p,button:p,submit:p,reset:p,file:p},Bf=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Af[ud(g.type)]||Af.text)(e,f,g,h[0],b,a,c,d)}}}}],Cf=/^(true|false|\d+)$/,Df=function(){return{restrict:"A",priority:100,compile:function(a,b){return Cf.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},Ef=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,d,e){a.$$addBindingInfo(d,e.ngBind),d=d[0],b.$watch(e.ngBind,function(a){d.textContent=a===c?"":a})}}}}],Ff=["$interpolate","$compile",function(a,b){return{compile:function(d){return b.$$addBindingClass(d),function(d,e,f){var g=a(e.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(e,g.expressions),e=e[0],f.$observe("ngBindTemplate",function(a){e.textContent=a===c?"":a})}}}}],Gf=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){d.html(a.getTrustedHtml(f(b))||"")})}}}}],Hf=r({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),If=pd("",!0),Jf=pd("Odd",0),Kf=pd("Even",1),Lf=_c({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),Mf=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Nf={},Of={blur:!0,focus:!0};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=jb("ng-"+a);Nf[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};Of[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var Pf=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" "),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=oa(h.clone),a.leave(j).then(function(){j=null}),h=null))})}}}],Qf=["$templateRequest","$anchorScroll","$animate","$sce",function(a,b,c,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Jd.noop,compile:function(e,f){var g=f.ngInclude||f.src,h=f.onload||"",i=f.autoscroll;return function(e,f,j,k,l){var m,n,o,p=0,q=function(){n&&(n.remove(),n=null),m&&(m.$destroy(),m=null),o&&(c.leave(o).then(function(){n=null}),n=o,o=null)};e.$watch(d.parseAsResourceUrl(g),function(d){var g=function(){!t(i)||i&&!e.$eval(i)||b()},j=++p;d?(a(d,!0).then(function(a){if(j===p){var b=e.$new();k.template=a;var i=l(b,function(a){q(),c.enter(a,null,f).then(g)});m=b,o=i,m.$emit("$includeContentLoaded",d),e.$eval(h)}},function(){j===p&&(q(),e.$emit("$includeContentError",d))}),e.$emit("$includeContentRequested",d)):(q(),k.template=null)})}}}}],Rf=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){return/SVG/.test(d[0].toString())?(d.empty(),void a(za(f.template,b).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),void a(d.contents())(c))}}}],Sf=_c({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),Tf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,e){var g=b.attr(d.$attr.ngList)||", ",h="false"!==d.ngTrim,i=h?Od(g):g,j=function(a){if(!s(a)){var b=[];return a&&f(a.split(i),function(a){a&&b.push(h?Od(a):a)}),b}};e.$parsers.push(j),e.$formatters.push(function(a){return Md(a)?a.join(g):c}),e.$isEmpty=function(a){return!a||!a.length}}}},Uf="ng-valid",Vf="ng-invalid",Wf="ng-pristine",Xf="ng-dirty",Yf="ng-untouched",Zf="ng-touched",$f="ng-pending",_f=new d("ngModel"),ag=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,e,g,h,i,j,k,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=c,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=c,this.$name=l(d.name||"",!1)(a);var m,n=g(d.ngModel),o=n.assign,q=n,r=o,u=null,v=this;this.$$setOptions=function(a){if(v.$options=a,a&&a.getterSetter){var b=g(d.ngModel+"()"),c=g(d.ngModel+"($$$p)");q=function(a){var c=n(a);return z(c)&&(c=b(a)),c},r=function(a,b){z(n(a))?c(a,{$$$p:v.$modelValue}):o(a,v.$modelValue)}}else if(!n.assign)throw _f("nonassign","Expression '{0}' is non-assignable. Element: {1}",d.ngModel,Z(e))},this.$render=p,this.$isEmpty=function(a){return s(a)||""===a||null===a||a!==a};var w=e.inheritedData("$formController")||mf,y=0;qd({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},parentForm:w,$animate:h}),this.$setPristine=function(){v.$dirty=!1,v.$pristine=!0,h.removeClass(e,Xf),h.addClass(e,Wf)},this.$setDirty=function(){v.$dirty=!0,v.$pristine=!1,h.removeClass(e,Wf),h.addClass(e,Xf),w.$setDirty()},this.$setUntouched=function(){v.$touched=!1,v.$untouched=!0,h.setClass(e,Yf,Zf)},this.$setTouched=function(){v.$touched=!0,v.$untouched=!1,h.setClass(e,Zf,Yf)},this.$rollbackViewValue=function(){i.cancel(u),v.$viewValue=v.$$lastCommittedViewValue,v.$render()},this.$validate=function(){if(!x(v.$modelValue)||!isNaN(v.$modelValue)){var a=v.$$lastCommittedViewValue,b=v.$$rawModelValue,d=v.$valid,e=v.$modelValue,f=v.$options&&v.$options.allowInvalid;v.$$runValidators(b,a,function(a){f||d===a||(v.$modelValue=a?b:c,v.$modelValue!==e&&v.$$writeModelToScope())})}},this.$$runValidators=function(a,b,d){function e(){var a=v.$$parserName||"parse";return m!==c?(m||(f(v.$validators,function(a,b){i(b,null)}),f(v.$asyncValidators,function(a,b){i(b,null)})),i(a,m),m):(i(a,null),!0)}function g(){var c=!0;return f(v.$validators,function(d,e){var f=d(a,b);c=c&&f,i(e,f)}),c?!0:(f(v.$asyncValidators,function(a,b){i(b,null)}),!1)}function h(){var d=[],e=!0;f(v.$asyncValidators,function(f,g){var h=f(a,b);if(!H(h))throw _f("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",h);i(g,c),d.push(h.then(function(){i(g,!0)},function(a){e=!1,i(g,!1)}))}),d.length?k.all(d).then(function(){j(e)},p):j(!0)}function i(a,b){l===y&&v.$setValidity(a,b)}function j(a){l===y&&d(a)}y++;var l=y;return e()&&g()?void h():void j(!1)},this.$commitViewValue=function(){var a=v.$viewValue;i.cancel(u),(v.$$lastCommittedViewValue!==a||""===a&&v.$$hasNativeValidators)&&(v.$$lastCommittedViewValue=a,v.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function b(){v.$modelValue!==g&&v.$$writeModelToScope()}var d=v.$$lastCommittedViewValue,e=d;if(m=s(e)?c:!0)for(var f=0;f<v.$parsers.length;f++)if(e=v.$parsers[f](e),s(e)){m=!1;break}x(v.$modelValue)&&isNaN(v.$modelValue)&&(v.$modelValue=q(a));var g=v.$modelValue,h=v.$options&&v.$options.allowInvalid;v.$$rawModelValue=e,h&&(v.$modelValue=e,b()),v.$$runValidators(e,v.$$lastCommittedViewValue,function(a){h||(v.$modelValue=a?e:c,b())})},this.$$writeModelToScope=function(){r(a,v.$modelValue),f(v.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})},this.$setViewValue=function(a,b){v.$viewValue=a,(!v.$options||v.$options.updateOnDefault)&&v.$$debounceViewValueCommit(b)},this.$$debounceViewValueCommit=function(b){var c,d=0,e=v.$options;e&&t(e.debounce)&&(c=e.debounce,x(c)?d=c:x(c[b])?d=c[b]:x(c["default"])&&(d=c["default"])),i.cancel(u),d?u=i(function(){v.$commitViewValue()},d):j.$$phase?v.$commitViewValue():a.$apply(function(){v.$commitViewValue()})},a.$watch(function(){var b=q(a);if(b!==v.$modelValue&&(v.$modelValue===v.$modelValue||b===b)){v.$modelValue=v.$$rawModelValue=b,m=c;for(var d=v.$formatters,e=d.length,f=b;e--;)f=d[e](f);v.$viewValue!==f&&(v.$viewValue=v.$$lastCommittedViewValue=f,v.$render(),v.$$runValidators(b,f,p))}return b})}],bg=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ag,priority:1,compile:function(b){return b.addClass(Wf).addClass(Yf).addClass(Uf),{pre:function(a,b,c,d){var e=d[0],f=d[1]||mf;e.$$setOptions(d[2]&&d[2].$options),f.$addControl(e),c.$observe("name",function(a){e.$name!==a&&f.$$renameControl(e,a)}),a.$on("$destroy",function(){f.$removeControl(e)})},post:function(b,c,d,e){var f=e[0];f.$options&&f.$options.updateOn&&c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)}),c.on("blur",function(c){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],cg=/(\s+|^)default(\s+|$)/,dg=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=N(a.$eval(b.ngModelOptions)),this.$options.updateOn!==c?(this.$options.updateOnDefault=!1,this.$options.updateOn=Od(this.$options.updateOn.replace(cg,function(){return d.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},eg=_c({terminal:!0,priority:1e3}),fg=d("ngOptions"),gg=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,hg=["$compile","$parse",function(a,c){function d(a,b,d){function f(a,b,c,d,e){this.selectValue=a,this.viewValue=b,this.label=c,this.group=d,this.disabled=e}var g=a.match(gg);if(!g)throw fg("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",a,Z(b));var h=g[5]||g[7],i=g[6],j=/ as /.test(g[0])&&g[1],k=g[9],l=c(g[2]?g[1]:h),m=j&&c(j),n=m||l,o=k&&c(k),p=k?function(a,b){return o(d,b)}:function(a){return Va(a)},q=function(a,b){return p(a,w(a,b))},r=c(g[2]||g[1]),s=c(g[3]||""),t=c(g[4]||""),u=c(g[8]),v={},w=i?function(a,b){return v[i]=b,v[h]=a,v}:function(a){return v[h]=a,v};return{trackBy:k,getTrackByValue:q,getWatchables:c(u,function(a){var b=[];return a=a||[],Object.keys(a).forEach(function(c){if("$"!==c.charAt(0)){var e=w(a[c],c),f=p(a[c],e);if(b.push(f),g[2]||g[1]){var h=r(d,e);b.push(h)}if(g[4]){var i=t(d,e);b.push(i)}}}),b}),getOptions:function(){var a,b=[],c={},g=u(d)||[];if(!i&&e(g))a=g;else{a=[];for(var h in g)g.hasOwnProperty(h)&&"$"!==h.charAt(0)&&a.push(h)}for(var j=a.length,l=0;j>l;l++){var m=g===a?l:a[l],o=g[m],v=w(o,m),x=n(d,v),y=p(x,v),z=r(d,v),A=s(d,v),B=t(d,v),C=new f(y,x,z,A,B);b.push(C),c[y]=C}return{items:b,selectValueMap:c,getOptionFromViewValue:function(a){return c[q(a)]},getViewValueFromOption:function(a){return k?Jd.copy(a.viewValue):a.viewValue}}}}}var g=b.createElement("option"),h=b.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(b,c,e,i){function j(a,b){a.element=b,b.disabled=a.disabled,a.value!==b.value&&(b.value=a.selectValue),a.label!==b.label&&(b.label=a.label,b.textContent=a.label)}function k(a,b,c,d){var e;return b&&ud(b.nodeName)===c?e=b:(e=d.cloneNode(!1),b?a.insertBefore(e,b):a.appendChild(e)),e}function l(a){for(var b;a;)b=a.nextSibling,Pa(a),a=b}function m(a){var b=p&&p[0],c=w&&w[0];if(b||c)for(;a&&(a===b||a===c);)a=a.nextSibling;return a}function n(){var a=x&&q.readValue();x=y.getOptions();var b={},d=c[0].firstChild;if(v&&c.prepend(p),d=m(d),x.items.forEach(function(a){var e,f,i;a.group?(e=b[a.group],e||(f=k(c[0],d,"optgroup",h),d=f.nextSibling,f.label=a.group,e=b[a.group]={groupElement:f,currentOptionElement:f.firstChild}),i=k(e.groupElement,e.currentOptionElement,"option",g),j(a,i),e.currentOptionElement=i.nextSibling):(i=k(c[0],d,"option",g),j(a,i),d=i.nextSibling)}),Object.keys(b).forEach(function(a){l(b[a].currentOptionElement)}),l(d),o.$render(),!o.$isEmpty(a)){var e=q.readValue();(y.trackBy?P(a,e):a===e)||(o.$setViewValue(e),o.$render())}}var o=i[1];if(o){for(var p,q=i[0],r=e.multiple,s=0,t=c.children(),u=t.length;u>s;s++)if(""===t[s].value){p=t.eq(s);break}var v=!!p,w=Ad(g.cloneNode(!1));w.val("?");var x,y=d(e.ngOptions,c,b),z=function(){v||c.prepend(p),c.val(""),p.prop("selected",!0),p.attr("selected",!0)},A=function(){v||p.remove()},B=function(){c.prepend(w),c.val("?"),w.prop("selected",!0),w.attr("selected",!0)},C=function(){w.remove()};r?(o.$isEmpty=function(a){return!a||0===a.length},q.writeValue=function(a){x.items.forEach(function(a){a.element.selected=!1}),a&&a.forEach(function(a){var b=x.getOptionFromViewValue(a);b&&!b.disabled&&(b.element.selected=!0)})},q.readValue=function(){var a=c.val()||[],b=[];return f(a,function(a){var c=x.selectValueMap[a];c.disabled||b.push(x.getViewValueFromOption(c))}),b},y.trackBy&&b.$watchCollection(function(){return Md(o.$viewValue)?o.$viewValue.map(function(a){return y.getTrackByValue(a)}):void 0},function(){o.$render()})):(q.writeValue=function(a){var b=x.getOptionFromViewValue(a);b&&!b.disabled?c[0].value!==b.selectValue&&(C(),A(),c[0].value=b.selectValue,b.element.selected=!0,b.element.setAttribute("selected","selected")):null===a||v?(C(),z()):(A(),B())},q.readValue=function(){var a=x.selectValueMap[c.val()];return a&&!a.disabled?(A(),C(),x.getViewValueFromOption(a)):null},y.trackBy&&b.$watch(function(){return y.getTrackByValue(o.$viewValue)},function(){o.$render()})),v?(p.remove(),a(p)(b),p.removeClass("ng-scope")):p=Ad(g.cloneNode(!1)),n(),b.$watchCollection(y.getWatchables,n)}}}}],ig=["$locale","$interpolate","$log",function(a,b,c){var d=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(g,h,i){function j(a){h.text(a||"")}var k,l=i.count,m=i.$attr.when&&h.attr(i.$attr.when),n=i.offset||0,o=g.$eval(m)||{},q={},r=b.startSymbol(),t=b.endSymbol(),u=r+l+"-"+n+t,v=Jd.noop;f(i,function(a,b){var c=e.exec(b);if(c){var d=(c[1]?"-":"")+ud(c[2]);o[d]=h.attr(i.$attr[b])}}),f(o,function(a,c){q[c]=b(a.replace(d,u))}),g.$watch(l,function(b){var d=parseFloat(b),e=isNaN(d);if(e||d in o||(d=a.pluralCat(d-n)),d!==k&&!(e&&x(k)&&isNaN(k))){v();var f=q[d];s(f)?(null!=b&&c.debug("ngPluralize: no rule defined for '"+d+"' in "+m),v=p,j()):v=g.$watch(f,j),k=d}})}}}],jg=["$parse","$animate",function(a,g){var h="$$NG_REMOVED",i=d("ngRepeat"),j=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b))},k=function(a){return a.clone[0]},l=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(d,m){var n=m.ngRepeat,o=b.createComment(" end ngRepeat: "+n+" "),p=n.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);var q=p[1],r=p[2],s=p[3],t=p[4];if(p=q.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!p)throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",q);var u=p[3]||p[1],v=p[2];if(s&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(s)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(s)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",s);var w,x,y,z,A={$id:Va};return t?w=a(t):(y=function(a,b){return Va(b)},z=function(a){return a}),function(a,b,d,m,p){w&&(x=function(b,c,d){return v&&(A[v]=b),A[u]=c,A.$index=d,w(a,A)});var q=pa();a.$watchCollection(r,function(d){var m,r,t,w,A,B,C,D,E,F,G,H,I=b[0],J=pa();if(s&&(a[s]=d),e(d))E=d,D=x||y;else{D=x||z,E=[];for(var K in d)d.hasOwnProperty(K)&&"$"!==K.charAt(0)&&E.push(K)}for(w=E.length,G=new Array(w),m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],C=D(A,B,m),q[C])F=q[C],delete q[C],J[C]=F,G[m]=F;else{if(J[C])throw f(G,function(a){a&&a.scope&&(q[a.id]=a)}),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",n,C,B);G[m]={id:C,scope:c,clone:c},J[C]=!0}for(var L in q){if(F=q[L],H=oa(F.clone),g.leave(H),H[0].parentNode)for(m=0,r=H.length;r>m;m++)H[m][h]=!0;F.scope.$destroy()}for(m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],F=G[m],F.scope){t=I;do t=t.nextSibling;while(t&&t[h]);k(F)!=t&&g.move(oa(F.clone),null,Ad(I)),I=l(F),j(F.scope,m,u,B,v,A,w)}else p(function(a,b){F.scope=b;var c=o.cloneNode(!1);a[a.length++]=c,g.enter(a,null,Ad(I)),I=c,F.clone=a,J[F.id]=F,j(F.scope,m,u,B,v,A,w)});q=J})}}}}],kg="ng-hide",lg="ng-hide-animate",mg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,kg,{tempClasses:lg})})}}}],ng=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,kg,{tempClasses:lg})})}}}],og=_c(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),pg=["$animate",function(a){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,g){var h=e.ngSwitch||e.on,i=[],j=[],k=[],l=[],m=function(a,b){return function(){a.splice(b,1)}};c.$watch(h,function(c){var d,e;for(d=0,e=k.length;e>d;++d)a.cancel(k[d]);for(k.length=0,d=0,e=l.length;e>d;++d){var h=oa(j[d].clone);l[d].$destroy();var n=k[d]=a.leave(h);n.then(m(k,d))}j.length=0,l.length=0,(i=g.cases["!"+c]||g.cases["?"])&&f(i,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.createComment(" end ngSwitchWhen: ");var g={clone:d};j.push(g),a.enter(d,f.parent(),f)})})})}}}],qg=_c({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),rg=_c({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),sg=_c({restrict:"EAC",link:function(a,b,c,e,f){if(!f)throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Z(b));f(function(a){b.empty(),b.append(a)})}}),tg=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],ug={$setViewValue:p,$render:p},vg=["$element","$scope","$attrs",function(a,d,e){var f=this,g=new Wa;f.ngModelCtrl=ug,f.unknownOption=Ad(b.createElement("option")),f.renderUnknownOption=function(b){var c="? "+Va(b)+" ?";f.unknownOption.val(c),a.prepend(f.unknownOption),a.val(c)},d.$on("$destroy",function(){f.renderUnknownOption=p}),f.removeUnknownOption=function(){f.unknownOption.parent()&&f.unknownOption.remove()},f.readValue=function(){return f.removeUnknownOption(),a.val()},f.writeValue=function(b){f.hasOption(b)?(f.removeUnknownOption(),a.val(b),""===b&&f.emptyOption.prop("selected",!0)):null==b&&f.emptyOption?(f.removeUnknownOption(),a.val("")):f.renderUnknownOption(b)},f.addOption=function(a,b){ma(a,'"option value"'),""===a&&(f.emptyOption=b);var c=g.get(a)||0;g.put(a,c+1)},f.removeOption=function(a){var b=g.get(a);b&&(1===b?(g.remove(a),""===a&&(f.emptyOption=c)):g.put(a,b-1))},f.hasOption=function(a){return!!g.get(a)}}],wg=function(){return{restrict:"E",require:["select","?ngModel"],controller:vg,link:function(a,b,c,d){var e=d[1];if(e){var g=d[0];if(g.ngModelCtrl=e,e.$render=function(){g.writeValue(e.$viewValue)},b.on("change",function(){a.$apply(function(){e.$setViewValue(g.readValue())})}),c.multiple){g.readValue=function(){var a=[];return f(b.find("option"),function(b){b.selected&&a.push(b.value)}),a},g.writeValue=function(a){var c=new Wa(a);f(b.find("option"),function(a){a.selected=t(c.get(a.value))})};var h,i=NaN;a.$watch(function(){i!==e.$viewValue||P(h,e.$viewValue)||(h=O(e.$viewValue),e.$render()),i=e.$viewValue}),e.$isEmpty=function(a){return!a||0===a.length}}}}}},xg=["$interpolate",function(a){function b(a){a[0].hasAttribute("selected")&&(a[0].selected=!0)}return{restrict:"E",priority:100,compile:function(c,d){if(s(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.ngModelCtrl&&(e?a.$watch(e,function(a,e){d.$set("value",a),e!==a&&h.removeOption(e),h.addOption(a,c),h.ngModelCtrl.$render(),b(c)}):(h.addOption(d.value,c),h.ngModelCtrl.$render(),b(c)),c.on("$destroy",function(){h.removeOption(d.value),h.ngModelCtrl.$render()}))}}}}],yg=r({restrict:"E",terminal:!1}),zg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},Ag=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,e,f){if(f){var g,h=e.ngPattern||e.pattern;e.$observe("pattern",function(a){if(w(a)&&a.length>0&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",h,a,Z(b));g=a||c,f.$validate()}),f.$validators.pattern=function(a){return f.$isEmpty(a)||s(g)||g.test(a)}}}}},Bg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){var b=n(a);e=isNaN(b)?-1:b,d.$validate()}),d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(b)||b.length<=e}}}}},Cg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=n(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};return a.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(ja(),ta(Jd),void Ad(b).ready(function(){ea(b,fa)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),define("angular",["jquery"],function(a){return function(){var b;return b||a.angular}}(this)),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.transition","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-popup.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/tooltip/tooltip-template-popup.html","template/popover/popover-template.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),
angular.module("ui.bootstrap.collapse",[]).directive("collapse",["$animate",function(a){return{link:function(b,c,d){function e(){c.removeClass("collapse").addClass("collapsing"),a.addClass(c,"in",{to:{height:c[0].scrollHeight+"px"}}).then(f)}function f(){c.removeClass("collapsing"),c.css({height:"auto"})}function g(){c.css({height:c[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing"),a.removeClass(c,"in",{to:{height:"0"}}).then(h)}function h(){c.css({height:"0"}),c.removeClass("collapsing"),c.addClass("collapse")}b.$watch(d.collapse,function(a){a?g():e()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b,this.close=a.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(a){return{require:"alert",link:function(b,c,d,e){a(function(){e.close()},parseInt(d.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("CarouselController",["$scope","$interval","$animate",function(a,b,c){function d(a){if(angular.isUndefined(k[a].index))return k[a];var b;k.length;for(b=0;b<k.length;++b)if(k[b].index==a)return k[b]}function e(){f();var c=+a.interval;!isNaN(c)&&c>0&&(h=b(g,c))}function f(){h&&(b.cancel(h),h=null)}function g(){var b=+a.interval;i&&!isNaN(b)&&b>0?a.next():a.pause()}var h,i,j=this,k=j.slides=a.slides=[],l=-1;j.currentSlide=null;var m=!1;j.select=a.select=function(b,d){function f(){m||(angular.extend(b,{direction:d,active:!0}),angular.extend(j.currentSlide||{},{direction:d,active:!1}),c.enabled()&&!a.noTransition&&b.$element&&(a.$currentTransition=!0,b.$element.one("$animate:close",function(){a.$currentTransition=null})),j.currentSlide=b,l=g,e())}var g=j.indexOfSlide(b);void 0===d&&(d=g>j.getCurrentIndex()?"next":"prev"),b&&b!==j.currentSlide&&f()},a.$on("$destroy",function(){m=!0}),j.getCurrentIndex=function(){return j.currentSlide&&angular.isDefined(j.currentSlide.index)?+j.currentSlide.index:l},j.indexOfSlide=function(a){return angular.isDefined(a.index)?+a.index:k.indexOf(a)},a.next=function(){var b=(j.getCurrentIndex()+1)%k.length;return a.$currentTransition?void 0:j.select(d(b),"next")},a.prev=function(){var b=j.getCurrentIndex()-1<0?k.length-1:j.getCurrentIndex()-1;return a.$currentTransition?void 0:j.select(d(b),"prev")},a.isActive=function(a){return j.currentSlide===a},a.$watch("interval",e),a.$on("$destroy",f),a.play=function(){i||(i=!0,e())},a.pause=function(){a.noPause||(i=!1,f())},j.addSlide=function(b,c){b.$element=c,k.push(b),1===k.length||b.active?(j.select(k[k.length-1]),1==k.length&&a.play()):b.active=!1},j.removeSlide=function(a){angular.isDefined(a.index)&&k.sort(function(a,b){return+a.index>+b.index});var b=k.indexOf(a);k.splice(b,1),k.length>0&&a.active?b>=k.length?j.select(k[b-1]):j.select(k[b]):l>b&&l--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?",index:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}).animation(".item",["$animate",function(a){return{beforeAddClass:function(b,c,d){if("active"==c&&b.parent()&&!b.parent().scope().noTransition){var e=!1,f=b.isolateScope().direction,g="next"==f?"left":"right";return b.addClass(f),a.addClass(b,g).then(function(){e||b.removeClass(g+" "+f),d()}),function(){e=!0}}d()},beforeRemoveClass:function(b,c,d){if("active"==c&&b.parent()&&!b.parent().scope().noTransition){var e=!1,f=b.isolateScope().direction,g="next"==f?"left":"right";return a.addClass(b,g).then(function(){e||b.removeClass(g),d()}),function(){e=!0}}d()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a){var c=[],d=a.split("");return angular.forEach(f,function(b,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++)d[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:b(c,"index")}}function d(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}var e=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.parsers={};var f={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a}},H:{regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a}},mm:{regex:"[0-5][0-9]",apply:function(a){this.minutes=+a}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a}},sss:{regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a}},ss:{regex:"[0-5][0-9]",apply:function(a){this.seconds=+a}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a}}};this.parse=function(b,f,g){if(!angular.isString(b)||!f)return b;f=a.DATETIME_FORMATS[f]||f,f=f.replace(e,"\\$&"),this.parsers[f]||(this.parsers[f]=c(f));var h=this.parsers[f],i=h.regex,j=h.map,k=b.match(i);if(k&&k.length){var l,m;l=g?{year:g.getFullYear(),month:g.getMonth(),date:g.getDate(),hours:g.getHours(),minutes:g.getMinutes(),seconds:g.getSeconds(),milliseconds:g.getMilliseconds()}:{year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0};for(var n=1,o=k.length;o>n;n++){var p=j[n-1];p.apply&&p.apply.call(l,k[n])}return d(l.year,l.month,l.date)&&(m=new Date(l.year,l.month,l.date,l.hours,l.minutes,l.seconds,l.milliseconds||0)),m}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange","shortcutPropagation"],function(c,e){i[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.maxMode=i.maxMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(b.initDate)?(this.activeDate=a.$parent.$eval(b.initDate)||new Date,a.$parent.$watch(b.initDate,function(a){a&&(j.$isEmpty(j.$modelValue)||j.$invalid)&&(i.activeDate=a,i.refreshView())})):this.activeDate=new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$viewValue){var a=new Date(j.$viewValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$viewValue?new Date(j.$viewValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$viewValue?new Date(j.$viewValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date),customClass:this.customClass(a)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$viewValue?new Date(j.$viewValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus()},0,!1)};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),i.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=(11-e.startingDay)%7,p=b.rows.length,q=0;p>q;q++)b.weekNumbers.push(h(b.rows[q][o].date))}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a,b){var c=e.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var d=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(d,1),c=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(c)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a,b){var c=e.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=3;else if("right"===a)c+=1;else if("down"===a)c+=3;else if("pageup"===a||"pagedown"===a){var d=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);e.activeDate.setMonth(c)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a,b){var c=d.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=5:"right"===a?c+=1:"down"===a?c+=5:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*d.step.years:"home"===a?c=e(d.activeDate.getFullYear()):"end"===a&&(c=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(c)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(angular.isNumber(a)&&(a=new Date(a)),a){if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=f.parse(a,o,h.date)||new Date(a);return isNaN(b)?void 0:b}return void 0}return null}function n(a,b){var c=a||b;if(angular.isNumber(c)&&(c=new Date(c)),c){if(angular.isDate(c)&&!isNaN(c))return!0;if(angular.isString(c)){var d=f.parse(c,o)||new Date(c);return!isNaN(d)}return!1}return!0}var o,p=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,q=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"]};var r=!1;if(g.html5Types[j.type]?(o=g.html5Types[j.type],r=!0):(o=j.datepickerPopup||g.datepickerPopup,j.$observe("datepickerPopup",function(a,b){var c=a||g.datepickerPopup;if(c!==o&&(o=c,k.$modelValue=null,!o))throw new Error("datepickerPopup must have a date format specified.")})),!o)throw new Error("datepickerPopup must have a date format specified.");if(r&&j.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");var s=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");s.attr({"ng-model":"date","ng-change":"dateSelection()"});var t=angular.element(s.children()[0]);if(r&&"month"==j.type&&(t.attr("datepicker-mode",'"month"'),t.attr("min-mode","month")),j.datepickerOptions){var u=h.$parent.$eval(j.datepickerOptions);u.initDate&&(h.initDate=u.initDate,t.attr("init-date","initDate"),delete u.initDate),angular.forEach(u,function(a,b){t.attr(l(b),a)})}h.watchData={},angular.forEach(["minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(a){if(j[a]){var c=b(j[a]);if(h.$parent.$watch(c,function(b){h.watchData[a]=b}),t.attr(l(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;h.$watch("watchData."+a,function(a,b){a!==b&&d(h.$parent,a)})}}}),j.dateDisabled&&t.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),j.showWeeks&&t.attr("show-weeks",j.showWeeks),j.customClass&&t.attr("custom-class","customClass({ date: date, mode: mode })"),r?k.$formatters.push(function(a){return h.date=a,a}):(k.$$parserName="date",k.$validators.date=n,k.$parsers.unshift(m),k.$formatters.push(function(a){return h.date=a,k.$isEmpty(a)?a:e(a,o)})),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a);var b=h.date?e(h.date,o):"";i.val(b),k.$setViewValue(b),p&&(h.isOpen=!1,i[0].focus())},k.$viewChangeListeners.push(function(){h.date=f.parse(k.$viewValue,o,h.date)||new Date(k.$viewValue)});var v=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},w=function(a,b){h.keydown(a)};i.bind("keydown",w),h.keydown=function(a){27===a.which?(a.preventDefault(),h.isOpen&&a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=q?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",v)):c.unbind("click",v)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(h.date)?(a=new Date(h.date),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()};var x=a(s)(h);s.remove(),q?c.find("body").append(x):i.after(x),h.$on("$destroy",function(){x.remove(),i.unbind("keydown",w),c.unbind("click",v)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b,c){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document","$rootScope",function(a,b){var c=null;this.open=function(b){c||(a.bind("click",d),a.bind("keydown",e)),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b){c===b&&(c=null,a.unbind("click",d),a.unbind("keydown",e))};var d=function(a){if(c&&(!a||"disabled"!==c.getAutoClose())){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getElement();a&&"outsideClick"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.isOpen=!1,b.$$phase||c.$apply())}}},e=function(a){27===a.which&&(c.focusToggleElement(),d())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate","$position","$document",function(a,b,c,d,e,f,g,h){var i,j=this,k=a.$new(),l=d.openClass,m=angular.noop,n=b.onToggle?c(b.onToggle):angular.noop,o=!1;this.init=function(d){j.$element=d,b.isOpen&&(i=c(b.isOpen),m=i.assign,a.$watch(i,function(a){k.isOpen=!!a})),o=angular.isDefined(b.dropdownAppendToBody),o&&j.dropdownMenu&&(h.find("body").append(j.dropdownMenu),d.on("$destroy",function(){j.dropdownMenu.remove()}))},this.toggle=function(a){return k.isOpen=arguments.length?!!a:!k.isOpen},this.isOpen=function(){return k.isOpen},k.getToggleElement=function(){return j.toggleElement},k.getAutoClose=function(){return b.autoClose||"always"},k.getElement=function(){return j.$element},k.focusToggleElement=function(){j.toggleElement&&j.toggleElement[0].focus()},k.$watch("isOpen",function(b,c){if(o&&j.dropdownMenu){var d=g.positionElements(j.$element,j.dropdownMenu,"bottom-left",!0);j.dropdownMenu.css({top:d.top+"px",left:d.left+"px",display:b?"block":"none"})}f[b?"addClass":"removeClass"](j.$element,l),b?(k.focusToggleElement(),e.open(k)):e.close(k),m(a,b),angular.isDefined(b)&&b!==c&&n(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){k.isOpen=!1}),a.$on("$destroy",function(){k.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownMenu",function(){return{restrict:"AC",require:"?^dropdown",link:function(a,b,c,d){d&&(d.dropdownMenu=b)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){function b(b,c,d){b.animate=!1,a(function(){b.animate=!0})}return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(a,c){return a.addClass(c.backdropClass),b}}}]).directive("modalWindow",["$modalStack","$q",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},c.$isRendered=!0;var f=b.defer();e.$observe("modalRender",function(a){"true"==a&&f.resolve()}),f.promise.then(function(){c.animate=!0;var b=d[0].querySelectorAll("[autofocus]");b.length?b[0].focus():d[0].focus();var e=a.getTop();e&&a.modalRendered(e.key)})}}}]).directive("modalAnimationClass",[function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.modalAnimationClass)}}}]).directive("modalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$modalStack",["$animate","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=o.keys(),c=0;c<b.length;c++)o.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=o.get(a).value;o.remove(a),j(d.modalDomEl,d.modalScope,function(){b.toggleClass(n,o.length()>0),i()})}function i(){if(l&&-1==g()){var a=m;j(l,m,function(){a=null}),l=void 0,m=void 0}}function j(c,d,f){function g(){g.done||(g.done=!0,c.remove(),d.$destroy(),f&&f())}d.animate=!1,c.attr("modal-animation")&&a.enabled()?c.one("$animate:close",function(){e.$evalAsync(g)}):b(g)}function k(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}var l,m,n="modal-open",o=f.createNew(),p={};return e.$watch(g,function(a){m&&(m.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=o.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){p.dismiss(b.key,"escape key press")})))}),p.open=function(a,b){var f=c[0].activeElement;o.add(a,{deferred:b.deferred,renderDeferred:b.renderDeferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var h=c.find("body").eq(0),i=g();if(i>=0&&!l){m=e.$new(!0),m.index=i;var j=angular.element('<div modal-backdrop="modal-backdrop"></div>');j.attr("backdrop-class",b.backdropClass),b.animation&&j.attr("modal-animation","true"),l=d(j)(m),h.append(l)}var k=angular.element('<div modal-window="modal-window"></div>');k.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:o.length()-1,animate:"animate"}).html(b.content),b.animation&&k.attr("modal-animation","true");var p=d(k)(b.scope);o.top().value.modalDomEl=p,o.top().value.modalOpener=f,h.append(p),h.addClass(n)},p.close=function(a,b){var c=o.get(a);return c&&k(c,b,!0)?(c.value.deferred.resolve(b),h(a),c.value.modalOpener.focus(),!0):!c},p.dismiss=function(a,b){var c=o.get(a);return c&&k(c,b,!1)?(c.value.deferred.reject(b),h(a),c.value.modalOpener.focus(),!0):!c},p.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},p.getTop=function(){return o.top()},p.modalRendered=function(a){var b=o.get(a);b&&b.value.renderDeferred.resolve()},p}]).provider("$modal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$modalStack",function(b,c,d,e,f,g){function h(a){return a.template?d.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}function i(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var j={};return j.open=function(b){var e=d.defer(),j=d.defer(),k=d.defer(),l={result:e.promise,opened:j.promise,rendered:k.promise,close:function(a){return g.close(l,a)},dismiss:function(a){return g.dismiss(l,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var m=d.all([h(b)].concat(i(b.resolve)));return m.then(function(a){var d=(b.scope||c).$new();d.$close=l.close,d.$dismiss=l.dismiss;var h,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=l,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),h=f(b.controller,i),b.controllerAs&&(d[b.controllerAs]=h)),g.open(l,{scope:d,deferred:e,renderDeferred:k,content:a[0],animation:b.animation,backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),m.then(function(){j.resolve(!0)},function(a){j.reject(a)}),l},j}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(g,h){e=g,this.config=h,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=h.itemsPerPage,a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){
f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b,c){a.page!==b&&b>0&&b<=a.totalPages&&(c&&c.target&&c.target.blur(),e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages}}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(e,f,g,h,i,j){return function(e,k,l,m){function n(a){var b=a||m.trigger||l,d=c[b]||b;return{show:b,hide:d}}m=angular.extend({},b,d,m);var o=a(e),p=j.startSymbol(),q=j.endSymbol(),r="<div "+o+'-popup title="'+p+"title"+q+'" '+(m.useContentExp?'content-exp="contentExp()" ':'content="'+p+"content"+q+'" ')+'placement="'+p+"placement"+q+'" popup-class="'+p+"popupClass"+q+'" animation="animation" is-open="isOpen"origin-scope="origScope" ></div>';return{restrict:"EA",compile:function(a,b){var c=f(r);return function(a,b,d,f){function j(){F.isOpen?o():l()}function l(){(!E||a.$eval(d[k+"Enable"]))&&(t(),F.popupDelay?B||(B=g(p,F.popupDelay,!1),B.then(function(a){a()})):p()())}function o(){a.$apply(function(){q()})}function p(){return B=null,A&&(g.cancel(A),A=null),(m.useContentExp?F.contentExp():F.content)?(r(),y.css({top:0,left:0,display:"block"}),F.$digest(),G(),F.isOpen=!0,F.$apply(),G):angular.noop}function q(){F.isOpen=!1,g.cancel(B),B=null,F.animation?A||(A=g(s,500)):s()}function r(){y&&s(),z=F.$new(),y=c(z,function(a){C?h.find("body").append(a):b.after(a)}),z.$watch(function(){g(G,0,!1)}),m.useContentExp&&z.$watch("contentExp()",function(a){!a&&F.isOpen&&q()})}function s(){A=null,y&&(y.remove(),y=null),z&&(z.$destroy(),z=null)}function t(){u(),v(),w()}function u(){F.popupClass=d[k+"Class"]}function v(){var a=d[k+"Placement"];F.placement=angular.isDefined(a)?a:m.placement}function w(){var a=d[k+"PopupDelay"],b=parseInt(a,10);F.popupDelay=isNaN(b)?m.popupDelay:b}function x(){var a=d[k+"Trigger"];H(),D=n(a),D.show===D.hide?b.bind(D.show,j):(b.bind(D.show,l),b.bind(D.hide,o))}var y,z,A,B,C=angular.isDefined(m.appendToBody)?m.appendToBody:!1,D=n(void 0),E=angular.isDefined(d[k+"Enable"]),F=a.$new(!0),G=function(){if(y){var a=i.positionElements(b,y,F.placement,C);a.top+="px",a.left+="px",y.css(a)}};F.origScope=a,F.isOpen=!1,F.contentExp=function(){return a.$eval(d[e])},m.useContentExp||d.$observe(e,function(a){F.content=a,!a&&F.isOpen&&q()}),d.$observe("disabled",function(a){a&&F.isOpen&&q()}),d.$observe(k+"Title",function(a){F.title=a});var H=function(){b.unbind(D.show,l),b.unbind(D.hide,o)};x();var I=a.$eval(d[k+"Animation"]);F.animation=angular.isDefined(I)?!!I:m.animation;var J=a.$eval(d[k+"AppendToBody"]);C=angular.isDefined(J)?J:C,C&&a.$on("$locationChangeSuccess",function(){F.isOpen&&q()}),a.$on("$destroy",function(){g.cancel(A),g.cancel(B),H(),s(),F=null})}}}}}]}).directive("tooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.tooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("tooltipClasses",function(){return{restrict:"A",link:function(a,b,c){a.placement&&b.addClass(a.placement),a.popupClass&&b.addClass(a.popupClass),a.animation()&&b.addClass(c.tooltipAnimationClass)}}}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html"}}).directive("tooltipTemplate",["$tooltip",function(a){return a("tooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlPopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html"}}).directive("tooltipHtml",["$tooltip",function(a){return a("tooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).value("tooltipHtmlUnsafeSuppressDeprecated",!1).directive("tooltipHtmlUnsafe",["$tooltip","tooltipHtmlUnsafeSuppressDeprecated","$log",function(a,b,c){return b||c.warn("tooltip-html-unsafe is now deprecated. Use tooltip-html or tooltip-template instead."),a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html"}}).directive("popoverTemplate",["$tooltip",function(a){return a("popoverTemplate","popover","click",{useContentExp:!0})}]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(a.max)?a.max:c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2)}),b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(f)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff},a[b]);return a},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length&&a.active!==!1?a.active=!0:a.active?b.select(a):a.active=!1},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse","$log",function(a,b){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(c,d,e){return function(c,d,f,g){c.$watch("active",function(a){a&&g.select(c)}),c.disabled=!1,f.disable&&c.$parent.$watch(a(f.disable),function(a){c.disabled=!!a}),f.disabled&&(b.warn('Use of "disabled" attribute has been deprecated, please use "disable"'),c.$parent.$watch(a(f.disabled),function(a){c.disabled=!!a})),c.select=function(){c.disabled||(c.active=!0)},g.addTab(c),c.$on("$destroy",function(){g.removeTab(c)}),c.$transcludeFn=e}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b,c,d){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a.toString()}function j(a){k(),o.$setViewValue(new Date(n)),l(a)}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),"m"!==b&&(a.minutes=i(d)),a.meridian=n.getHours()<12?p[0]:p[1]}function m(a){var b=new Date(n.getTime()+6e4*a);n.setHours(b.getHours(),b.getMinutes()),j()}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render,o.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g);var i=angular.isDefined(b.arrowkeys)?a.$parent.$eval(b.arrowkeys):f.arrowkeys;i&&this.setupArrowkeyEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10)});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10)}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c){b.bind("keydown",function(b){38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply())}),c.bind("keydown",function(b){38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply())})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0)},b.bind("blur",function(b){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0)},c.bind("blur",function(b){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var a=o.$viewValue;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l())},a.incrementHours=function(){m(60*q)},a.decrementHours=function(){m(60*-q)},a.incrementMinutes=function(){m(r)},a.decrementMinutes=function(){m(-r)},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.transition",[]).value("$transitionSuppressDeprecated",!1).factory("$transition",["$q","$timeout","$rootScope","$log","$transitionSuppressDeprecated",function(a,b,c,d,e){function f(a){for(var b in a)if(void 0!==h.style[b])return a[b]}e||d.warn("$transition is now deprecated. Use $animate from ngAnimate instead.");var g=function(d,e,f){f=f||{};var h=a.defer(),i=g[f.animation?"animationEndEventName":"transitionEndEventName"],j=function(a){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(e)?d.addClass(e):angular.isFunction(e)?e(d):angular.isObject(e)&&d.css(e),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},h=document.createElement("trans"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},j={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return g.transitionEndEventName=f(i),g.animationEndEventName=f(j),g}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?i.$eval(k.typeaheadAppendToBody):!1,u=i.$eval(k.typeaheadFocusFirst)!==!1,v=b(k.ngModel).assign,w=g.parse(k.typeahead),x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y="typeahead-"+x.$id+"-"+Math.floor(1e4*Math.random());j.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":y});var z=angular.element("<div typeahead-popup></div>");z.attr({id:y,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&z.attr("template-url",k.typeaheadTemplateUrl);var A=function(){x.matches=[],x.activeIdx=-1,j.attr("aria-expanded",!1)},B=function(a){return y+"-option-"+a};x.$watch("activeIdx",function(a){0>a?j.removeAttr("aria-activedescendant"):j.attr("aria-activedescendant",B(a))});var C=function(a){var b={$viewValue:a};q(i,!0),c.when(w.source(i,b)).then(function(c){var d=a===l.$viewValue;if(d&&m)if(c&&c.length>0){x.activeIdx=u?0:-1,x.matches.length=0;for(var e=0;e<c.length;e++)b[w.itemName]=c[e],x.matches.push({id:B(e),label:w.viewMapper(x,b),model:c[e]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight"),j.attr("aria-expanded",!0)}else A();d&&q(i,!1)},function(){A(),q(i,!1)})};A(),x.query=void 0;var D,E=function(a){D=d(function(){C(a)},o)},F=function(){D&&d.cancel(D)};l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(F(),E(a)):C(a):(q(i,!1),F(),A()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return p||l.$setValidity("editable",!0),s?(d.$model=a,s(i,d)):(d[w.itemName]=a,b=w.viewMapper(i,d),d[w.itemName]=void 0,c=w.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,e={};e[w.itemName]=c=x.matches[a].model,b=w.modelMapper(i,e),v(i,b),l.$setValidity("editable",!0),l.$setValidity("parse",!0),r(i,{$item:c,$model:b,$label:w.viewMapper(i,e)}),A(),d(function(){j[0].focus()},0,!1)},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(-1!=x.activeIdx||13!==a.which&&9!==a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx>0?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),A(),x.$digest()))}),j.bind("blur",function(a){m=!1});var G=function(a){j[0]!==a.target&&(A(),x.$digest())};e.bind("click",G),i.$on("$destroy",function(){e.unbind("click",G),t&&H.remove(),z.remove()});var H=a(z)(x);t?e.find("body").append(H):j.after(H)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"template/typeahead/typeahead-match.html";a(g).then(function(a){b(a.trim())(d,function(a){e.replaceWith(a)})})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href="javascript:void(0)" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides | orderBy:\'index\' track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}" ng-class="dt.customClass">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop"\n     modal-animation-class="fade"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    modal-animation-class="fade"\n	ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" modal-transclude></div></div>\n</div>\n');
}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1, $event)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1, $event)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1, $event)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1, $event)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages, $event)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover-window.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover-window.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen, fade: animation }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" tooltip-template-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>\n')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),define("angular-ui",["angular"],function(){}),function(a,b,c){"use strict";function d(){function a(a,c){return b.extend(Object.create(a),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){var f="?"===d?d:null,g="*"===d?d:null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){var f=b.copy(e);if(b.isUndefined(f.reloadOnSearch)&&(f.reloadOnSearch=!0),b.isUndefined(f.caseInsensitiveMatch)&&(f.caseInsensitiveMatch=this.caseInsensitiveMatch),d[a]=b.extend(f,a&&c(a,f)),a){var g="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[g]=b.extend({redirectTo:a},c(g,f))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(a){return"string"==typeof a&&(a={redirectTo:a}),this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(c,e,f,g,h,j,k){function l(a,b){var c=b.keys,d={};if(!b.regexp)return null;var e=b.regexp.exec(a);if(!e)return null;for(var f=1,g=e.length;g>f;++f){var h=c[f-1],i=e[f];h&&i&&(d[h.name]=i)}return d}function m(a){var d=t.current;q=o(),r=q&&d&&q.$$route===d.$$route&&b.equals(q.pathParams,d.pathParams)&&!q.reloadOnSearch&&!s,r||!d&&!q||c.$broadcast("$routeChangeStart",q,d).defaultPrevented&&a&&a.preventDefault()}function n(){var a=t.current,d=q;r?(a.params=d.params,b.copy(a.params,f),c.$broadcast("$routeUpdate",a)):(d||a)&&(s=!1,t.current=d,d&&d.redirectTo&&(b.isString(d.redirectTo)?e.path(p(d.redirectTo,d.params)).search(d.params).replace():e.url(d.redirectTo(d.pathParams,e.path(),e.search())).replace()),g.when(d).then(function(){if(d){var a,c,e=b.extend({},d.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?h.get(a):h.invoke(a,null,null,c)}),b.isDefined(a=d.template)?b.isFunction(a)&&(a=a(d.params)):b.isDefined(c=d.templateUrl)&&(b.isFunction(c)&&(c=c(d.params)),c=k.getTrustedResourceUrl(c),b.isDefined(c)&&(d.loadedTemplateUrl=c,a=j(c))),b.isDefined(a)&&(e.$template=a),g.all(e)}}).then(function(e){d==t.current&&(d&&(d.locals=e,b.copy(d.params,f)),c.$broadcast("$routeChangeSuccess",d,a))},function(b){d==t.current&&c.$broadcast("$routeChangeError",d,a,b)}))}function o(){var c,f;return b.forEach(d,function(d,g){!f&&(c=l(e.path(),d))&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function p(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var q,r,s=!1,t={routes:d,reload:function(){s=!0,c.$evalAsync(function(){m(),n()})},updateParams:function(a){if(!this.current||!this.current.$$route)throw i("norout","Tried updating route when with no current route");a=b.extend({},this.current.params,a),e.path(p(this.current.$$route.originalPath,a)),e.search(a)}};return c.$on("$locationChangeStart",m),c.$on("$locationChangeSuccess",n),t}]}function e(){this.$get=function(){return{}}}function f(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(d.cancel(n),n=null),l&&(l.$destroy(),l=null),m&&(n=d.leave(m),n.then(function(){n=null}),m=null)}function k(){var g=a.current&&a.current.locals,h=g&&g.$template;if(b.isDefined(h)){var k=e.$new(),n=a.current,q=i(k,function(a){d.enter(a,null,m||f).then(function(){!b.isDefined(o)||o&&!e.$eval(o)||c()}),j()});m=q,l=n.scope=k,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function g(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());if(f.controller){g.$scope=d;var i=b(f.controller,g);f.controllerAs&&(d[f.controllerAs]=i),e.data("$ngControllerController",i),e.children().data("$ngControllerController",i)}h(d)}}}var h=b.module("ngRoute",["ng"]).provider("$route",d),i=b.$$minErr("ngRoute");h.provider("$routeParams",e),h.directive("ngView",f),h.directive("ngView",g),f.$inject=["$route","$anchorScroll","$animate"],g.$inject=["$compile","$controller","$route"]}(window,window.angular),define("angular-route",["angular"],function(){}),function(a,b,c){"use strict";function d(a){return null!=a&&""!==a&&"hasOwnProperty"!==a&&h.test("."+a)}function e(a,b){if(!d(b))throw g("badmember",'Dotted member path "@{0}" is invalid.',b);for(var e=b.split("."),f=0,h=e.length;h>f&&a!==c;f++){var i=e[f];a=null!==a?a[i]:c}return a}function f(a,c){c=c||{},b.forEach(c,function(a,b){delete c[b]});for(var d in a)!a.hasOwnProperty(d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(c[d]=a[d]);return c}var g=b.$$minErr("$resource"),h=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;b.module("ngResource",["ng"]).provider("$resource",function(){var a=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$q",function(d,h){function i(a){return j(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function j(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function k(b,c){this.template=b,this.defaults=o({},a.defaults,c),this.urlParams={}}function l(i,j,r,s){function t(a,b){var c={};return b=o({},j,b),n(b,function(b,d){q(b)&&(b=b()),c[d]=b&&b.charAt&&"@"==b.charAt(0)?e(a,b.substr(1)):b}),c}function u(a){return a.resource}function v(a){f(a||{},this)}var w=new k(i,s);return r=o({},a.defaults.actions,r),v.prototype.toJSON=function(){var a=o({},this);return delete a.$promise,delete a.$resolved,a},n(r,function(a,e){var i=/^(POST|PUT|PATCH)$/i.test(a.method);v[e]=function(j,k,l,r){var s,x,y,z={};switch(arguments.length){case 4:y=r,x=l;case 3:case 2:if(!q(k)){z=j,s=k,x=l;break}if(q(j)){x=j,y=k;break}x=k,y=l;case 1:q(j)?x=j:i?s=j:z=j;break;case 0:break;default:throw g("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var A=this instanceof v,B=A?s:a.isArray?[]:new v(s),C={},D=a.interceptor&&a.interceptor.response||u,E=a.interceptor&&a.interceptor.responseError||c;n(a,function(a,b){"params"!=b&&"isArray"!=b&&"interceptor"!=b&&(C[b]=p(a))}),i&&(C.data=s),w.setUrlParams(C,o({},t(s,a.params||{}),z),a.url);var F=d(C).then(function(c){var d=c.data,h=B.$promise;if(d){if(b.isArray(d)!==!!a.isArray)throw g("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",e,a.isArray?"array":"object",b.isArray(d)?"array":"object",C.method,C.url);a.isArray?(B.length=0,n(d,function(a){"object"==typeof a?B.push(new v(a)):B.push(a)})):(f(d,B),B.$promise=h)}return B.$resolved=!0,c.resource=B,c},function(a){return B.$resolved=!0,(y||m)(a),h.reject(a)});return F=F.then(function(a){var b=D(a);return(x||m)(b,a.headers),b},E),A?F:(B.$promise=F,B.$resolved=!1,B)},v.prototype["$"+e]=function(a,b,c){q(a)&&(c=b,b=a,a={});var d=v[e].call(this,a,this,b,c);return d.$promise||d}}),v.bind=function(a){return l(i,o({},j,a),r)},v}var m=b.noop,n=b.forEach,o=b.extend,p=b.copy,q=b.isFunction;return k.prototype={setUrlParams:function(a,c,d){var e,f,h=this,j=d||h.template,k=h.urlParams={};n(j.split(/\W/),function(a){if("hasOwnProperty"===a)throw g("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(a)&&a&&new RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(j)&&(k[a]=!0)}),j=j.replace(/\\:/g,":"),c=c||{},n(h.urlParams,function(a,d){e=c.hasOwnProperty(d)?c[d]:h.defaults[d],b.isDefined(e)&&null!==e?(f=i(e),j=j.replace(new RegExp(":"+d+"(\\W|$)","g"),function(a,b){return f+b})):j=j.replace(new RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),h.defaults.stripTrailingSlashes&&(j=j.replace(/\/+$/,"")||"/"),j=j.replace(/\/\.(?=\w+($|\?))/,"."),a.url=j.replace(/\/\\\./,"/."),n(c,function(b,c){h.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},l}]})}(window,window.angular),define("angular-resource",["angular"],function(){}),function(){var a=function(){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(a)return!0}catch(b){if(void 0!=navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1},b=function(a,b){window.XMLHttpRequest.prototype[a]=b(window.XMLHttpRequest.prototype[a])};if(window.XMLHttpRequest){if(!window.FormData||window.FileAPI&&FileAPI.forceLoad){var c=function(a){if(!a.__listeners){a.upload||(a.upload={}),a.__listeners=[];var b=a.upload.addEventListener;a.upload.addEventListener=function(c,d,e){a.__listeners[c]=d,b&&b.apply(this,arguments)}}};b("open",function(a){return function(b,d,e){c(this),this.__url=d;try{a.apply(this,[b,d,e])}catch(f){f.message.indexOf("Access is denied")>-1&&a.apply(this,[b,"_fix_for_ie_crossdomain__",e])}}}),b("getResponseHeader",function(a){return function(b){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(b):null==a?null:a.apply(this,[b])}}),b("getAllResponseHeaders",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==a?null:a.apply(this)}}),b("abort",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==a?null:a.apply(this)}}),b("setRequestHeader",function(a){return function(b,d){if("__setXHR_"===b){c(this);var e=d(this);e instanceof Function&&e(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[b]=d,a.apply(this,arguments)}}),b("send",function(b){return function(){var c=this;if(arguments[0]&&arguments[0].__isShim){var d=arguments[0],e={url:c.__url,jsonp:!1,cache:!0,complete:function(a,b){c.__completed=!0,!a&&c.__listeners.load&&c.__listeners.load({type:"load",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),!a&&c.__listeners.loadend&&c.__listeners.loadend({type:"loadend",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),"abort"===a&&c.__listeners.abort&&c.__listeners.abort({type:"abort",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),void 0!==b.status&&Object.defineProperty(c,"status",{get:function(){return 0==b.status&&a&&"abort"!==a?500:b.status}}),void 0!==b.statusText&&Object.defineProperty(c,"statusText",{get:function(){return b.statusText}}),Object.defineProperty(c,"readyState",{get:function(){return 4}}),void 0!==b.response&&Object.defineProperty(c,"response",{get:function(){return b.response}});var d=b.responseText||(a&&0==b.status&&"abort"!==a?a:void 0);Object.defineProperty(c,"responseText",{get:function(){return d}}),Object.defineProperty(c,"response",{get:function(){return d}}),a&&Object.defineProperty(c,"err",{get:function(){return a}}),c.__fileApiXHR=b,c.onreadystatechange&&c.onreadystatechange()},fileprogress:function(a){if(a.target=c,c.__listeners.progress&&c.__listeners.progress(a),c.__total=a.total,c.__loaded=a.loaded,a.total===a.loaded){var b=this;setTimeout(function(){c.__completed||(c.getAllResponseHeaders=function(){},b.complete(null,{status:204,statusText:"No Content"}))},1e4)}},headers:c.__requestHeaders};e.data={},e.files={};for(var f=0;f<d.data.length;f++){var g=d.data[f];null!=g.val&&null!=g.val.name&&null!=g.val.size&&null!=g.val.type?e.files[g.key]=g.val:e.data[g.key]=g.val}setTimeout(function(){if(!a())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';c.__fileApiXHR=FileAPI.upload(e)},1)}else b.apply(c,arguments)}})}else b("setRequestHeader",function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}});window.XMLHttpRequest.__isShim=!0}if(!window.FormData||window.FileAPI&&FileAPI.forceLoad){var d=function(b){if(!a())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var c=angular.element(b);if(!(c.attr("disabled")||c.hasClass("js-fileapi-wrapper")||null==b.getAttribute("ng-file-select")&&null==b.getAttribute("data-ng-file-select")))if(FileAPI.wrapInsideDiv){var d=document.createElement("div");d.innerHTML='<div class="js-fileapi-wrapper" style="position:relative; overflow:hidden"></div>',d=d.firstChild;var e=b.parentNode;e.insertBefore(d,b),e.removeChild(b),d.appendChild(b)}else c.addClass("js-fileapi-wrapper"),c.parent()[0].__file_click_fn_delegate_&&((""===c.parent().css("position")||"static"===c.parent().css("position"))&&c.parent().css("position","relative"),c.css("top",0).css("bottom",0).css("left",0).css("right",0).css("width","100%").css("height","100%").css("padding",0).css("margin",0),c.parent().unbind("click",c.parent()[0].__file_click_fn_delegate_))},e=function(a){return function(b){for(var c=FileAPI.getFiles(b),d=0;d<c.length;d++)void 0===c[d].size&&(c[d].size=0),void 0===c[d].name&&(c[d].name="file"),void 0===c[d].type&&(c[d].type="undefined");b.target||(b.target={}),b.target.files=c,b.target.files!=c&&(b.__files_=c),(b.__files_||b.target.files).item=function(a){return(b.__files_||b.target.files)[a]||null},a&&a.apply(this,[b])}},f=function(a,b){return("change"===b.toLowerCase()||"onchange"===b.toLowerCase())&&"file"==a.getAttribute("type")};HTMLInputElement.prototype.addEventListener&&(HTMLInputElement.prototype.addEventListener=function(a){return function(b,c,g,h){f(this,b)?(d(this),a.apply(this,[b,e(c),g,h])):a.apply(this,[b,c,g,h])}}(HTMLInputElement.prototype.addEventListener)),HTMLInputElement.prototype.attachEvent&&(HTMLInputElement.prototype.attachEvent=function(a){return function(b,c){f(this,b)?(d(this),window.jQuery?angular.element(this).bind("change",e(null)):a.apply(this,[b,e(c)])):a.apply(this,[b,c])}}(HTMLInputElement.prototype.attachEvent)),window.FormData=FormData=function(){return{append:function(a,b,c){this.data.push({key:a,val:b,name:c})},data:[],__isShim:!0}},function(){if(window.FileAPI||(window.FileAPI={}),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var b,c,d,e,f,g=document.createElement("script"),h=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)b=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)c=window.FileAPI.jsPath;else for(d=0;d<h.length;d++)if(f=h[d].src,e=f.indexOf("angular-file-upload-shim.js"),-1==e&&(e=f.indexOf("angular-file-upload-shim.min.js")),e>-1){c=f.substring(0,e);break}null==FileAPI.staticPath&&(FileAPI.staticPath=c),g.setAttribute("src",b||c+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(g),FileAPI.hasFlash=a()}}(),FileAPI.disableFileInput=function(a,b){b?a.removeClass("js-fileapi-wrapper"):a.addClass("js-fileapi-wrapper")}}window.FileReader||(window.FileReader=function(){var a=this,b=!1;this.listeners={},this.addEventListener=function(b,c){a.listeners[b]=a.listeners[b]||[],a.listeners[b].push(c)},this.removeEventListener=function(b,c){a.listeners[b]&&a.listeners[b].splice(a.listeners[b].indexOf(c),1)},this.dispatchEvent=function(b){var c=a.listeners[b.type];if(c)for(var d=0;d<c.length;d++)c[d].call(a,b)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var c=function(b,c){var d={type:b,target:a,loaded:c.loaded,total:c.total,error:c.error};return null!=c.result&&(d.target.result=c.result),d},d=function(d){if(b||(b=!0,a.onloadstart&&this.onloadstart(c("loadstart",d))),"load"===d.type){a.onloadend&&a.onloadend(c("loadend",d));var e=c("load",d);a.onload&&a.onload(e),a.dispatchEvent(e)}else if("progress"===d.type){var e=c("progress",d);a.onprogress&&a.onprogress(e),a.dispatchEvent(e)}else{var e=c("error",d);a.onerror&&a.onerror(e),a.dispatchEvent(e)}};this.readAsArrayBuffer=function(a){FileAPI.readAsBinaryString(a,d)},this.readAsBinaryString=function(a){FileAPI.readAsBinaryString(a,d)},this.readAsDataURL=function(a){FileAPI.readAsDataURL(a,d)},this.readAsText=function(a){FileAPI.readAsText(a,d)}})}(),define("angular-file-upload-shim",function(){}),function(){var a=angular.module("angularFileUpload",[]);a.service("$upload",["$http","$q","$timeout",function(a,b,c){function d(d){d.method=d.method||"POST",d.headers=d.headers||{},d.transformRequest=d.transformRequest||function(b,c){return window.ArrayBuffer&&b instanceof window.ArrayBuffer?b:a.defaults.transformRequest[0](b,c)};var e=b.defer();window.XMLHttpRequest.__isShim&&(d.headers.__setXHR_=function(){return function(a){a&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){e.notify(a)},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&e.notify(a)},!1))}}),a(d).then(function(a){e.resolve(a)},function(a){e.reject(a)},function(a){e.notify(a)});var f=e.promise;return f.success=function(a){return f.then(function(b){a(b.data,b.status,b.headers,d)}),f},f.error=function(a){return f.then(null,function(b){a(b.data,b.status,b.headers,d)}),f},f.progress=function(a){return f.then(null,null,function(b){a(b)}),f},f.abort=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),f},f.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(f,arguments),a.apply(f,arguments)}}(d.xhrFn),f},f}this.upload=function(b){b.headers=b.headers||{},b.headers["Content-Type"]=void 0,b.transformRequest=b.transformRequest||a.defaults.transformRequest;var c=new FormData,e=b.transformRequest,f=b.data;return b.transformRequest=function(a,c){if(f)if(b.formDataAppender)for(var d in f){var g=f[d];b.formDataAppender(a,d,g)}else for(var d in f){var g=f[d];if("function"==typeof e)g=e(g,c);else for(var h=0;h<e.length;h++){var i=e[h];"function"==typeof i&&(g=i(g,c))}a.append(d,g)}if(null!=b.file){var j=b.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(b.file))for(var k="[object String]"===Object.prototype.toString.call(j),h=0;h<b.file.length;h++)a.append(k?j:j[h],b.file[h],b.fileName&&b.fileName[h]||b.file[h].name);else a.append(j,b.file,b.fileName||b.file.name)}return a},b.data=c,d(b)},this.http=function(a){return d(a)}}]),a.directive("ngFileSelect",["$parse","$timeout",function(a,b){return function(c,d,e){var f=a(e.ngFileSelect);if("input"!==d[0].tagName.toLowerCase()||"file"!==(d.attr("type")&&d.attr("type").toLowerCase())){for(var g=angular.element('<input type="file">'),h=d[0].attributes,i=0;i<h.length;i++)"type"!==h[i].name.toLowerCase()&&g.attr(h[i].name,h[i].value);e.multiple&&g.attr("multiple","true"),g.css("width","1px").css("height","1px").css("opacity",0).css("position","absolute").css("filter","alpha(opacity=0)").css("padding",0).css("margin",0).css("overflow","hidden"),g.attr("__wrapper_for_parent_",!0),d.append(g),d[0].__file_click_fn_delegate_=function(){g[0].click()},d.bind("click",d[0].__file_click_fn_delegate_),d.css("overflow","hidden"),d=g}d.bind("change",function(a){var d,e,g=[];if(d=a.__files_||a.target.files,null!=d)for(e=0;e<d.length;e++)g.push(d.item(e));b(function(){f(c,{$files:g,$event:a})})})}}]),a.directive("ngFileDropAvailable",["$parse","$timeout",function(a,b){return function(c,d,e){if("draggable"in document.createElement("span")){var f=a(e.ngFileDropAvailable);b(function(){f(c)})}}}]),a.directive("ngFileDrop",["$parse","$timeout","$location",function(a,b,c){return function(d,e,f){function g(a){return/^[\000-\177]*$/.test(a)}function h(a,d){var e=[],f=a.dataTransfer.items;if(f&&f.length>0&&f[0].webkitGetAsEntry&&"file"!=c.protocol()&&f[0].webkitGetAsEntry().isDirectory)for(var h=0;h<f.length;h++){var j=f[h].webkitGetAsEntry();null!=j&&(g(j.name)?i(e,j):f[h].webkitGetAsEntry().isDirectory||e.push(f[h].getAsFile()))}else{var k=a.dataTransfer.files;if(null!=k)for(var h=0;h<k.length;h++)e.push(k.item(h))}!function m(a){b(function(){l?m(10):d(e)},a||0)}()}function i(a,b,c){if(null!=b)if(b.isDirectory){var d=b.createReader();l++,d.readEntries(function(d){for(var e=0;e<d.length;e++)i(a,d[e],(c?c:"")+b.name+"/");l--})}else l++,b.file(function(b){l--,b._relativePath=(c?c:"")+b.name,a.push(b)})}if("draggable"in document.createElement("span")){var j=null;e[0].addEventListener("dragover",function(c){if(c.preventDefault(),b.cancel(j),!e[0].__drag_over_class_)if(f.ngFileDragOverClass&&f.ngFileDragOverClass.search(/\) *$/)>-1){var g=a(f.ngFileDragOverClass)(d,{$event:c});e[0].__drag_over_class_=g}else e[0].__drag_over_class_=f.ngFileDragOverClass||"dragover";e.addClass(e[0].__drag_over_class_)},!1),e[0].addEventListener("dragenter",function(a){a.preventDefault()},!1),e[0].addEventListener("dragleave",function(a){j=b(function(){e.removeClass(e[0].__drag_over_class_),e[0].__drag_over_class_=null},f.ngFileDragOverDelay||1)},!1);var k=a(f.ngFileDrop);e[0].addEventListener("drop",function(a){a.preventDefault(),e.removeClass(e[0].__drag_over_class_),e[0].__drag_over_class_=null,h(a,function(b){k(d,{$files:b,$event:a})})},!1);var l=0}}}])}(),define("angular-file-upload",["angular","angular-file-upload-shim"],function(){}),function(){function a(a,b){if(a!==b){var c=a===a,d=b===b;if(a>b||!c||"undefined"==typeof a&&d)return 1;if(b>a||!d||"undefined"==typeof b&&c)return-1}return 0}function b(a,b,c){if(b!==b)return m(a,c);for(var d=(c||0)-1,e=a.length;++d<e;)if(a[d]===b)return d;return-1}function c(a,b){var c=a.length;for(a.sort(b);c--;)a[c]=a[c].value;return a}function d(a){return"string"==typeof a?a:null==a?"":a+""}function e(a){return a.charCodeAt(0)}function f(a,b){for(var c=-1,d=a.length;++c<d&&b.indexOf(a.charAt(c))>-1;);return c}function g(a,b){for(var c=a.length;c--&&b.indexOf(a.charAt(c))>-1;);return c}function h(b,c){return a(b.criteria,c.criteria)||b.index-c.index}function i(b,c){for(var d=-1,e=b.criteria,f=c.criteria,g=e.length;++d<g;){var h=a(e[d],f[d]);if(h)return h}return b.index-c.index}function j(a){return Ma[a]}function k(a){return Na[a]}function l(a){return"\\"+Qa[a]}function m(a,b,c){for(var d=a.length,e=c?b||d:(b||0)-1;c?e--:++e<d;){var f=a[e];if(f!==f)return e}return-1}function n(a){return a&&"object"==typeof a||!1}function o(a){return 160>=a&&a>=9&&13>=a||32==a||160==a||5760==a||6158==a||a>=8192&&(8202>=a||8232==a||8233==a||8239==a||8287==a||12288==a||65279==a)}function p(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;)a[c]===b&&(a[c]=O,f[++e]=c);return f}function q(a,b){for(var c,d=-1,e=a.length,f=-1,g=[];++d<e;){var h=a[d],i=b?b(h,d,a):h;d&&c===i||(c=i,g[++f]=h)}return g}function r(a){for(var b=-1,c=a.length;++b<c&&o(a.charCodeAt(b)););return b}function s(a){for(var b=a.length;b--&&o(a.charCodeAt(b)););return b}function t(a){return Oa[a]}function u(o){function V(a){if(n(a)&&!Pg(a)){if(a instanceof Z)return a;
if(Tf.call(a,"__wrapped__"))return new Z(a.__wrapped__,a.__chain__,Za(a.__actions__))}return new Z(a)}function Z(a,b,c){this.__actions__=c||[],this.__chain__=!!b,this.__wrapped__=a}function _(a){this.actions=null,this.dir=1,this.dropCount=0,this.filtered=!1,this.iteratees=null,this.takeCount=vg,this.views=null,this.wrapped=a}function Ma(){var a=this.actions,b=this.iteratees,c=this.views,d=new _(this.wrapped);return d.actions=a?Za(a):null,d.dir=this.dir,d.dropCount=this.dropCount,d.filtered=this.filtered,d.iteratees=b?Za(b):null,d.takeCount=this.takeCount,d.views=c?Za(c):null,d}function Na(){if(this.filtered){var a=new _(this);a.dir=-1,a.filtered=!0}else a=this.clone(),a.dir*=-1;return a}function Oa(){var a=this.wrapped.value();if(!Pg(a))return Ub(a,this.actions);var b=this.dir,c=0>b,d=pc(0,a.length,this.views),e=d.start,f=d.end,g=f-e,h=this.dropCount,i=pg(g,this.takeCount-h),j=c?f:e-1,k=this.iteratees,l=k?k.length:0,m=0,n=[];a:for(;g--&&i>m;){j+=b;for(var o=-1,p=a[j];++o<l;){var q=k[o],r=q.iteratee,s=r(p,j,a),t=q.type;if(t==L)p=s;else if(!s){if(t==K)continue a;break a}}h?h--:n[m++]=p}return n}function Pa(){this.__data__={}}function Qa(a){return this.has(a)&&delete this.__data__[a]}function Sa(a){return"__proto__"==a?v:this.__data__[a]}function Ta(a){return"__proto__"!=a&&Tf.call(this.__data__,a)}function Ua(a,b){return"__proto__"!=a&&(this.__data__[a]=b),this}function Va(a){var b=a?a.length:0;for(this.data={hash:lg(null),set:new eg};b--;)this.push(a[b])}function Xa(a,b){var c=a.data,d="string"==typeof b||te(b)?c.set.has(b):c.hash[b];return d?0:-1}function Ya(a){var b=this.data;"string"==typeof a||te(a)?b.set.add(a):b.hash[a]=!0}function Za(a,b){var c=-1,d=a.length;for(b||(b=Ef(d));++c<d;)b[c]=a[c];return b}function $a(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function _a(a,b){for(var c=a.length;c--&&b(a[c],c,a)!==!1;);return a}function ab(a,b){for(var c=-1,d=a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function bb(a,b){for(var c=-1,d=a.length,e=-1,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[++e]=g)}return f}function cb(a,b){for(var c=-1,d=a.length,e=Ef(d);++c<d;)e[c]=b(a[c],c,a);return e}function db(a){for(var b=-1,c=a.length,d=ug;++b<c;){var e=a[b];e>d&&(d=e)}return d}function eb(a){for(var b=-1,c=a.length,d=vg;++b<c;){var e=a[b];d>e&&(d=e)}return d}function fb(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function gb(a,b,c,d){var e=a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function hb(a,b){for(var c=-1,d=a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function ib(a,b){return"undefined"==typeof a?b:a}function jb(a,b,c,d){return"undefined"!=typeof a&&Tf.call(d,c)?a:b}function kb(a,b,c){var d=Tg(b);if(!c)return mb(b,a,d);for(var e=-1,f=d.length;++e<f;){var g=d[e],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&&("undefined"!=typeof h||g in a)||(a[g]=i)}return a}function lb(a,b){for(var c=-1,d=a.length,e=wc(d),f=b.length,g=Ef(f);++c<f;){var h=b[c];e?(h=parseFloat(h),g[c]=uc(h,d)?a[h]:v):g[c]=a[h]}return g}function mb(a,b,c){c||(c=b,b={});for(var d=-1,e=c.length;++d<e;){var f=c[d];b[f]=a[f]}return b}function nb(a,b){for(var c=-1,d=b.length;++c<d;){var e=b[c];a[e]=ic(a[e],x,a)}return a}function ob(a,b,c){var d=typeof a;return"function"==d?"undefined"!=typeof b&&tc(a)?Xb(a,b,c):a:null==a?uf:"object"==d?Jb(a,!c):Mb(a+"")}function pb(a,b,c,d,e,f,g){var h;if(c&&(h=e?c(a,d,e):c(a)),"undefined"!=typeof h)return h;if(!te(a))return a;var i=Pg(a);if(i){if(h=qc(a),!b)return Za(a,h)}else{var j=Vf.call(a),k=j==U;if(j!=X&&j!=P&&(!k||e))return Ka[j]?sc(a,j,b):e?a:{};if(h=rc(k?{}:a),!b)return mb(a,h,Tg(a))}f||(f=[]),g||(g=[]);for(var l=f.length;l--;)if(f[l]==a)return g[l];return f.push(a),g.push(h),(i?$a:Bb)(a,function(d,e){h[e]=pb(d,b,c,e,a,f,g)}),h}function qb(a,b,c,d){if(!se(a))throw new Nf(N);return fg(function(){a.apply(v,Qb(c,d))},b)}function rb(a,c){var d=a?a.length:0,e=[];if(!d)return e;var f=-1,g=oc(),h=g==b,i=h&&c.length>=200&&Fg(c),j=c.length;i&&(g=Xa,h=!1,c=i);a:for(;++f<d;){var k=a[f];if(h&&k===k){for(var l=j;l--;)if(c[l]===k)continue a;e.push(k)}else g(c,k)<0&&e.push(k)}return e}function sb(a,b){var c=a?a.length:0;if(!wc(c))return Bb(a,b);for(var d=-1,e=Fc(a);++d<c&&b(e[d],d,e)!==!1;);return a}function tb(a,b){var c=a?a.length:0;if(!wc(c))return Cb(a,b);for(var d=Fc(a);c--&&b(d[c],c,d)!==!1;);return a}function ub(a,b){var c=!0;return sb(a,function(a,d,e){return c=!!b(a,d,e)}),c}function vb(a,b){var c=[];return sb(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function wb(a,b,c,d){var e;return c(a,function(a,c,f){return b(a,c,f)?(e=d?c:a,!1):void 0}),e}function xb(a,b,c,d){for(var e=(d||0)-1,f=a.length,g=-1,h=[];++e<f;){var i=a[e];if(n(i)&&wc(i.length)&&(Pg(i)||le(i))){b&&(i=xb(i,b,c));var j=-1,k=i.length;for(h.length+=k;++j<k;)h[++g]=i[j]}else c||(h[++g]=i)}return h}function yb(a,b,c){for(var d=-1,e=Fc(a),f=c(a),g=f.length;++d<g;){var h=f[d];if(b(e[h],h,e)===!1)break}return a}function zb(a,b,c){for(var d=Fc(a),e=c(a),f=e.length;f--;){var g=e[f];if(b(d[g],g,d)===!1)break}return a}function Ab(a,b){return yb(a,b,Qe)}function Bb(a,b){return yb(a,b,Tg)}function Cb(a,b){return zb(a,b,Tg)}function Db(a,b){for(var c=-1,d=b.length,e=-1,f=[];++c<d;){var g=b[c];se(a[g])&&(f[++e]=g)}return f}function Eb(a,b,c){var d=-1,e="function"==typeof b,f=a?a.length:0,g=wc(f)?Ef(f):[];return sb(a,function(a){var f=e?b:null!=a&&a[b];g[++d]=f?f.apply(a,c):v}),g}function Fb(a,b,c,d,e,f){if(a===b)return 0!==a||1/a==1/b;var g=typeof a,h=typeof b;return"function"!=g&&"object"!=g&&"function"!=h&&"object"!=h||null==a||null==b?a!==a&&b!==b:Gb(a,b,Fb,c,d,e,f)}function Gb(a,b,c,d,e,f,g){var h=Pg(a),i=Pg(b),j=Q,k=Q;h||(j=Vf.call(a),j==P?j=X:j!=X&&(h=Be(a))),i||(k=Vf.call(b),k==P?k=X:k!=X&&(i=Be(b)));var l=j==X,m=k==X,n=j==k;if(n&&!h&&!l)return kc(a,b,j);var o=l&&Tf.call(a,"__wrapped__"),p=m&&Tf.call(b,"__wrapped__");if(o||p)return c(o?a.value():a,p?b.value():b,d,e,f,g);if(!n)return!1;f||(f=[]),g||(g=[]);for(var q=f.length;q--;)if(f[q]==a)return g[q]==b;f.push(a),g.push(b);var r=(h?jc:lc)(a,b,c,d,e,f,g);return f.pop(),g.pop(),r}function Hb(a,b,c,d,e){var f=b.length;if(null==a)return!f;for(var g=-1,h=!e;++g<f;)if(h&&d[g]?c[g]!==a[b[g]]:!Tf.call(a,b[g]))return!1;for(g=-1;++g<f;){var i=b[g];if(h&&d[g])var j=Tf.call(a,i);else{var k=a[i],l=c[g];j=e?e(k,l,i):v,"undefined"==typeof j&&(j=Fb(l,k,e,!0))}if(!j)return!1}return!0}function Ib(a,b){var c=[];return sb(a,function(a,d,e){c.push(b(a,d,e))}),c}function Jb(a,b){var c=Tg(a),d=c.length;if(1==d){var e=c[0],f=a[e];if(xc(f))return function(a){return null!=a&&f===a[e]&&Tf.call(a,e)}}b&&(a=pb(a,!0));for(var g=Ef(d),h=Ef(d);d--;)f=a[c[d]],g[d]=f,h[d]=xc(f);return function(a){return Hb(a,c,g,h)}}function Kb(a,b,c,d,e){var f=wc(b.length)&&(Pg(b)||Be(b));return(f?$a:Bb)(b,function(b,g,h){if(n(b))return d||(d=[]),e||(e=[]),Lb(a,h,g,Kb,c,d,e);var i=a[g],j=c?c(i,b,g,a,h):v,k="undefined"==typeof j;k&&(j=b),!f&&"undefined"==typeof j||!k&&(j===j?j===i:i!==i)||(a[g]=j)}),a}function Lb(a,b,c,d,e,f,g){for(var h=f.length,i=b[c];h--;)if(f[h]==i)return void(a[c]=g[h]);var j=a[c],k=e?e(j,i,c,a,b):v,l="undefined"==typeof k;l&&(k=i,wc(i.length)&&(Pg(i)||Be(i))?k=Pg(j)?j:j?Za(j):[]:Rg(i)||le(i)?k=le(j)?Ee(j):Rg(j)?j:{}:l=!1),f.push(i),g.push(k),l?a[c]=d(k,i,e,f,g):(k===k?k!==j:j===j)&&(a[c]=k)}function Mb(a){return function(b){return null==b?v:b[a]}}function Nb(b,c){var d=c.length,e=lb(b,c);for(c.sort(a);d--;){var f=parseFloat(c[d]);if(f!=g&&uc(f)){var g=f;gg.call(b,f,1)}}return e}function Ob(a,b){return a+ag(tg()*(b-a+1))}function Pb(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function Qb(a,b,c){var d=-1,e=a.length;b=null==b?0:+b||0,0>b&&(b=-b>e?0:e+b),c="undefined"==typeof c||c>e?e:+c||0,0>c&&(c+=e),e=b>c?0:c-b>>>0,b>>>=0;for(var f=Ef(e);++d<e;)f[d]=a[d+b];return f}function Rb(a,b){var c;return sb(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function Sb(a,c){var d=-1,e=oc(),f=a.length,g=e==b,h=g&&f>=200,i=h&&Fg(),j=[];i?(e=Xa,g=!1):(h=!1,i=c?[]:j);a:for(;++d<f;){var k=a[d],l=c?c(k,d,a):k;if(g&&k===k){for(var m=i.length;m--;)if(i[m]===l)continue a;c&&i.push(l),j.push(k)}else e(i,l)<0&&((c||h)&&i.push(l),j.push(k))}return j}function Tb(a,b){for(var c=-1,d=b.length,e=Ef(d);++c<d;)e[c]=a[b[c]];return e}function Ub(a,b){var c=a;c instanceof _&&(c=c.value());for(var d=-1,e=b.length;++d<e;){var f=[c],g=b[d];cg.apply(f,g.args),c=g.func.apply(g.thisArg,f)}return c}function Vb(a,b,c){var d=0,e=a?a.length:d;if("number"==typeof b&&b===b&&yg>=e){for(;e>d;){var f=d+e>>>1,g=a[f];(c?b>=g:b>g)?d=f+1:e=f}return e}return Wb(a,b,uf,c)}function Wb(a,b,c,d){b=c(b);for(var e=0,f=a?a.length:0,g=b!==b,h="undefined"==typeof b;f>e;){var i=ag((e+f)/2),j=c(a[i]),k=j===j;if(g)var l=k||d;else l=h?k&&(d||"undefined"!=typeof j):d?b>=j:b>j;l?e=i+1:f=i}return pg(f,xg)}function Xb(a,b,c){if("function"!=typeof a)return uf;if("undefined"==typeof b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)};case 5:return function(c,d,e,f,g){return a.call(b,c,d,e,f,g)}}return function(){return a.apply(b,arguments)}}function Yb(a){return Zf.call(a,0)}function Zb(a,b,c){for(var d=c.length,e=-1,f=og(a.length-d,0),g=-1,h=b.length,i=Ef(f+h);++g<h;)i[g]=b[g];for(;++e<d;)i[c[e]]=a[e];for(;f--;)i[g++]=a[e++];return i}function $b(a,b,c){for(var d=-1,e=c.length,f=-1,g=og(a.length-e,0),h=-1,i=b.length,j=Ef(g+i);++f<g;)j[f]=a[f];for(var k=f;++h<i;)j[k+h]=b[h];for(;++d<e;)j[k+c[d]]=a[f++];return j}function _b(a,b){return function(c,d,e){var f=b?b():{};if(d=nc(d,e,3),Pg(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else sb(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function ac(a){return function(){var b=arguments.length,c=arguments[0];if(2>b||null==c)return c;if(b>3&&vc(arguments[1],arguments[2],arguments[3])&&(b=2),b>3&&"function"==typeof arguments[b-2])var d=Xb(arguments[--b-1],arguments[b--],5);else b>2&&"function"==typeof arguments[b-1]&&(d=arguments[--b]);for(var e=0;++e<b;){var f=arguments[e];f&&a(c,f,d)}return c}}function bc(a,b){function c(){return(this instanceof c?d:a).apply(b,arguments)}var d=dc(a);return c}function cc(a){return function(b){for(var c=-1,d=qf(_e(b)),e=d.length,f="";++c<e;)f=a(f,d[c],c);return f}}function dc(a){return function(){var b=Dg(a.prototype),c=a.apply(b,arguments);return te(c)?c:b}}function ec(a,b){return function(c,d,f){f&&vc(c,d,f)&&(d=null);var g=nc(),h=null==d;if(g===ob&&h||(h=!1,d=g(d,f,3)),h){var i=Pg(c);if(i||!Ae(c))return a(i?c:Ec(c));d=e}return mc(c,d,b)}}function fc(a,b,c,d,e,f,g,h,i,j){function k(){for(var u=arguments.length,v=u,w=Ef(u);v--;)w[v]=arguments[v];if(d&&(w=Zb(w,d,e)),f&&(w=$b(w,f,g)),o||r){var z=k.placeholder,A=p(w,z);if(u-=A.length,j>u){var B=h?Za(h):null,E=og(j-u,0),F=o?A:null,G=o?null:A,H=o?w:null,I=o?null:w;b|=o?C:D,b&=~(o?D:C),q||(b&=~(x|y));var J=fc(a,b,c,H,F,I,G,B,i,E);return J.placeholder=z,J}}var K=m?c:this;return n&&(a=K[t]),h&&(w=Bc(w,h)),l&&i<w.length&&(w.length=i),(this instanceof k?s||dc(a):a).apply(K,w)}var l=b&F,m=b&x,n=b&y,o=b&A,q=b&z,r=b&B,s=!n&&dc(a),t=a;return k}function gc(a,b,c){var d=a.length;if(b=+b,d>=b||!mg(b))return"";var e=b-d;return c=null==c?" ":c+"",hf(c,$f(e/c.length)).slice(0,e)}function hc(a,b,c,d){function e(){for(var b=-1,h=arguments.length,i=-1,j=d.length,k=Ef(h+j);++i<j;)k[i]=d[i];for(;h--;)k[i++]=arguments[++b];return(this instanceof e?g:a).apply(f?c:this,k)}var f=b&x,g=dc(a);return e}function ic(a,b,c,d,e,f,g,h){var i=b&y;if(!i&&!se(a))throw new Nf(N);var j=d?d.length:0;if(j||(b&=~(C|D),d=e=null),j-=e?e.length:0,b&D){var k=d,l=e;d=e=null}var m=!i&&Gg(a),n=[a,b,c,d,e,k,l,f,g,h];if(m&&m!==!0&&(yc(n,m),b=n[1],h=n[9]),n[9]=null==h?i?0:a.length:og(h-j,0)||0,b==x)var o=bc(n[0],n[2]);else o=b!=C&&b!=(x|C)||n[4].length?fc.apply(null,n):hc.apply(null,n);var p=m?Eg:Hg;return p(o,n)}function jc(a,b,c,d,e,f,g){var h=-1,i=a.length,j=b.length,k=!0;if(i!=j&&!(e&&j>i))return!1;for(;k&&++h<i;){var l=a[h],m=b[h];if(k=v,d&&(k=e?d(m,l,h):d(l,m,h)),"undefined"==typeof k)if(e)for(var n=j;n--&&(m=b[n],!(k=l&&l===m||c(l,m,d,e,f,g))););else k=l&&l===m||c(l,m,d,e,f,g)}return!!k}function kc(a,b,c){switch(c){case R:case S:return+a==+b;case T:return a.name==b.name&&a.message==b.message;case W:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case Y:case $:return a==b+""}return!1}function lc(a,b,c,d,e,f,g){var h=Tg(a),i=h.length,j=Tg(b),k=j.length;if(i!=k&&!e)return!1;for(var l,m=-1;++m<i;){var n=h[m],o=Tf.call(b,n);if(o){var p=a[n],q=b[n];o=v,d&&(o=e?d(q,p,n):d(p,q,n)),"undefined"==typeof o&&(o=p&&p===q||c(p,q,d,e,f,g))}if(!o)return!1;l||(l="constructor"==n)}if(!l){var r=a.constructor,s=b.constructor;if(r!=s&&"constructor"in a&&"constructor"in b&&!("function"==typeof r&&r instanceof r&&"function"==typeof s&&s instanceof s))return!1}return!0}function mc(a,b,c){var d=c?vg:ug,e=d,f=e;return sb(a,function(a,g,h){var i=b(a,g,h);((c?e>i:i>e)||i===d&&i===f)&&(e=i,f=a)}),f}function nc(a,b,c){var d=V.callback||sf;return d=d===sf?ob:d,c?d(a,b,c):d}function oc(a,c,d){var e=V.indexOf||Sc;return e=e===Sc?b:e,a?e(a,c,d):e}function pc(a,b,c){for(var d=-1,e=c?c.length:0;++d<e;){var f=c[d],g=f.size;switch(f.type){case"drop":a+=g;break;case"dropRight":b-=g;break;case"take":b=pg(b,a+g);break;case"takeRight":a=og(a,b-g)}}return{start:a,end:b}}function qc(a){var b=a.length,c=new a.constructor(b);return b&&"string"==typeof a[0]&&Tf.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function rc(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=Kf),new b}function sc(a,b,c){var d=a.constructor;switch(b){case aa:return Yb(a);case R:case S:return new d(+a);case ba:case ca:case da:case ea:case fa:case ga:case ha:case ia:case ja:var e=a.buffer;return new d(c?Yb(e):e,a.byteOffset,a.length);case W:case $:return new d(a);case Y:var f=new d(a.source,va.exec(a));f.lastIndex=a.lastIndex}return f}function tc(a){var b=V.support,c=!(b.funcNames?a.name:b.funcDecomp);if(!c){var d=Rf.call(a);b.funcNames||(c=!wa.test(d)),c||(c=Da.test(d)||we(a),Eg(a,c))}return c}function uc(a,b){return a=+a,b=null==b?Ag:b,a>-1&&a%1==0&&b>a}function vc(a,b,c){if(!te(c))return!1;var d=typeof b;if("number"==d)var e=c.length,f=wc(e)&&uc(b,e);else f="string"==d&&b in a;return f&&c[b]===a}function wc(a){return"number"==typeof a&&a>-1&&a%1==0&&Ag>=a}function xc(a){return a===a&&(0===a?1/a>0:!te(a))}function yc(a,b){var c=a[1],d=b[1],e=c|d,f=F|E,g=x|y,h=f|g|z|B,i=c&F&&!(d&F),j=c&E&&!(d&E),k=(j?a:b)[7],l=(i?a:b)[8],m=!(c>=E&&d>g||c>g&&d>=E),n=e>=f&&h>=e&&(E>c||(j||i)&&k.length<=l);if(!m&&!n)return a;d&x&&(a[2]=b[2],e|=c&x?0:z);var o=b[3];if(o){var q=a[3];a[3]=q?Zb(q,o,b[4]):Za(o),a[4]=q?p(a[3],O):Za(b[4])}return o=b[5],o&&(q=a[5],a[5]=q?$b(q,o,b[6]):Za(o),a[6]=q?p(a[5],O):Za(b[6])),o=b[7],o&&(a[7]=Za(o)),d&F&&(a[8]=null==a[8]?b[8]:pg(a[8],b[8])),null==a[9]&&(a[9]=b[9]),a[0]=b[0],a[1]=e,a}function zc(a,b){a=Fc(a);for(var c=-1,d=b.length,e={};++c<d;){var f=b[c];f in a&&(e[f]=a[f])}return e}function Ac(a,b){var c={};return Ab(a,function(a,d,e){b(a,d,e)&&(c[d]=a)}),c}function Bc(a,b){for(var c=a.length,d=pg(b.length,c),e=Za(a);d--;){var f=b[d];a[d]=uc(f,c)?e[f]:v}return a}function Cc(a){var b;V.support;if(!n(a)||Vf.call(a)!=X||!Tf.call(a,"constructor")&&(b=a.constructor,"function"==typeof b&&!(b instanceof b)))return!1;var c;return Ab(a,function(a,b){c=b}),"undefined"==typeof c||Tf.call(a,c)}function Dc(a){for(var b=Qe(a),c=b.length,d=c&&a.length,e=V.support,f=d&&wc(d)&&(Pg(a)||e.nonEnumArgs&&le(a)),g=-1,h=[];++g<c;){var i=b[g];(f&&uc(i,d)||Tf.call(a,i))&&h.push(i)}return h}function Ec(a){return null==a?[]:wc(a.length)?te(a)?a:Kf(a):Xe(a)}function Fc(a){return te(a)?a:Kf(a)}function Gc(a,b,c){b=(c?vc(a,b,c):null==b)?1:og(+b||1,1);for(var d=0,e=a?a.length:0,f=-1,g=Ef($f(e/b));e>d;)g[++f]=Qb(a,d,d+=b);return g}function Hc(a){for(var b=-1,c=a?a.length:0,d=-1,e=[];++b<c;){var f=a[b];f&&(e[++d]=f)}return e}function Ic(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Pg(c)||le(c))break}return rb(c,xb(arguments,!1,!0,++a))}function Jc(a,b,c){var d=a?a.length:0;return d?((c?vc(a,b,c):null==b)&&(b=1),Qb(a,0>b?0:b)):[]}function Kc(a,b,c){var d=a?a.length:0;return d?((c?vc(a,b,c):null==b)&&(b=1),b=d-(+b||0),Qb(a,0,0>b?0:b)):[]}function Lc(a,b,c){var d=a?a.length:0;if(!d)return[];for(b=nc(b,c,3);d--&&b(a[d],d,a););return Qb(a,0,d+1)}function Mc(a,b,c){var d=a?a.length:0;if(!d)return[];var e=-1;for(b=nc(b,c,3);++e<d&&b(a[e],e,a););return Qb(a,e)}function Nc(a,b,c){var d=-1,e=a?a.length:0;for(b=nc(b,c,3);++d<e;)if(b(a[d],d,a))return d;return-1}function Oc(a,b,c){var d=a?a.length:0;for(b=nc(b,c,3);d--;)if(b(a[d],d,a))return d;return-1}function Pc(a){return a?a[0]:v}function Qc(a,b,c){var d=a?a.length:0;return c&&vc(a,b,c)&&(b=!1),d?xb(a,b):[]}function Rc(a){var b=a?a.length:0;return b?xb(a,!0):[]}function Sc(a,c,d){var e=a?a.length:0;if(!e)return-1;if("number"==typeof d)d=0>d?og(e+d,0):d||0;else if(d){var f=Vb(a,c),g=a[f];return(c===c?c===g:g!==g)?f:-1}return b(a,c,d)}function Tc(a){return Kc(a,1)}function Uc(){for(var a=[],c=-1,d=arguments.length,e=[],f=oc(),g=f==b;++c<d;){var h=arguments[c];(Pg(h)||le(h))&&(a.push(h),e.push(g&&h.length>=120&&Fg(c&&h)))}d=a.length;var i=a[0],j=-1,k=i?i.length:0,l=[],m=e[0];a:for(;++j<k;)if(h=i[j],(m?Xa(m,h):f(l,h))<0){for(c=d;--c;){var n=e[c];if((n?Xa(n,h):f(a[c],h))<0)continue a}m&&m.push(h),l.push(h)}return l}function Vc(a){var b=a?a.length:0;return b?a[b-1]:v}function Wc(a,b,c){var d=a?a.length:0;if(!d)return-1;var e=d;if("number"==typeof c)e=(0>c?og(d+c,0):pg(c||0,d-1))+1;else if(c){e=Vb(a,b,!0)-1;var f=a[e];return(b===b?b===f:f!==f)?e:-1}if(b!==b)return m(a,e,!0);for(;e--;)if(a[e]===b)return e;return-1}function Xc(){var a=arguments[0];if(!a||!a.length)return a;for(var b=0,c=oc(),d=arguments.length;++b<d;)for(var e=0,f=arguments[b];(e=c(a,f,e))>-1;)gg.call(a,e,1);return a}function Yc(a){return Nb(a||[],xb(arguments,!1,!1,1))}function Zc(a,b,c){var d=-1,e=a?a.length:0,f=[];for(b=nc(b,c,3);++d<e;){var g=a[d];b(g,d,a)&&(f.push(g),gg.call(a,d--,1),e--)}return f}function $c(a){return Jc(a,1)}function _c(a,b,c){var d=a?a.length:0;return d?(c&&"number"!=typeof c&&vc(a,b,c)&&(b=0,c=d),Qb(a,b,c)):[]}function ad(a,b,c,d){var e=nc(c);return e===ob&&null==c?Vb(a,b):Wb(a,b,e(c,d,1))}function bd(a,b,c,d){var e=nc(c);return e===ob&&null==c?Vb(a,b,!0):Wb(a,b,e(c,d,1),!0)}function cd(a,b,c){var d=a?a.length:0;return d?((c?vc(a,b,c):null==b)&&(b=1),Qb(a,0,0>b?0:b)):[]}function dd(a,b,c){var d=a?a.length:0;return d?((c?vc(a,b,c):null==b)&&(b=1),b=d-(+b||0),Qb(a,0>b?0:b)):[]}function ed(a,b,c){var d=a?a.length:0;if(!d)return[];for(b=nc(b,c,3);d--&&b(a[d],d,a););return Qb(a,d+1)}function fd(a,b,c){var d=a?a.length:0;if(!d)return[];var e=-1;for(b=nc(b,c,3);++e<d&&b(a[e],e,a););return Qb(a,0,e)}function gd(){return Sb(xb(arguments,!1,!0))}function hd(a,c,d,e){var f=a?a.length:0;if(!f)return[];"boolean"!=typeof c&&null!=c&&(e=d,d=vc(a,c,e)?null:c,c=!1);var g=nc();return(g!==ob||null!=d)&&(d=g(d,e,3)),c&&oc()==b?q(a,d):Sb(a,d)}function id(a){for(var b=-1,c=(a&&a.length&&db(cb(a,Sf)))>>>0,d=Ef(c);++b<c;)d[b]=cb(a,Mb(b));return d}function jd(a){return rb(a,Qb(arguments,1))}function kd(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(Pg(c)||le(c))var d=d?rb(d,c).concat(rb(c,d)):c}return d?Sb(d):[]}function ld(){for(var a=arguments.length,b=Ef(a);a--;)b[a]=arguments[a];return id(b)}function md(a,b){var c=-1,d=a?a.length:0,e={};for(!d||b||Pg(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function nd(a){var b=V(a);return b.__chain__=!0,b}function od(a,b,c){return b.call(c,a),a}function pd(a,b,c){return b.call(c,a)}function qd(){return nd(this)}function rd(){var a=this.__wrapped__;return a instanceof _?(this.__actions__.length&&(a=new _(this)),new Z(a.reverse())):this.thru(function(a){return a.reverse()})}function sd(){return this.value()+""}function td(){return Ub(this.__wrapped__,this.__actions__)}function ud(a){var b=a?a.length:0;return wc(b)&&(a=Ec(a)),lb(a,xb(arguments,!1,!1,1))}function vd(a,b,c){var d=a?a.length:0;return wc(d)||(a=Xe(a),d=a.length),d?(c="number"==typeof c?0>c?og(d+c,0):c||0:0,"string"==typeof a||!Pg(a)&&Ae(a)?d>c&&a.indexOf(b,c)>-1:oc(a,b,c)>-1):!1}function wd(a,b,c){var d=Pg(a)?ab:ub;return("function"!=typeof b||"undefined"!=typeof c)&&(b=nc(b,c,3)),d(a,b)}function xd(a,b,c){var d=Pg(a)?bb:vb;return b=nc(b,c,3),d(a,b)}function yd(a,b,c){if(Pg(a)){var d=Nc(a,b,c);return d>-1?a[d]:v}return b=nc(b,c,3),wb(a,b,sb)}function zd(a,b,c){return b=nc(b,c,3),wb(a,b,tb)}function Ad(a,b){return yd(a,vf(b))}function Bd(a,b,c){return"function"==typeof b&&"undefined"==typeof c&&Pg(a)?$a(a,b):sb(a,Xb(b,c,3))}function Cd(a,b,c){return"function"==typeof b&&"undefined"==typeof c&&Pg(a)?_a(a,b):tb(a,Xb(b,c,3))}function Dd(a,b){return Eb(a,b,Qb(arguments,2))}function Ed(a,b,c){var d=Pg(a)?cb:Ib;return b=nc(b,c,3),d(a,b)}function Fd(a,b){return Ed(a,zf(b))}function Gd(a,b,c,d){var e=Pg(a)?fb:Pb;return e(a,nc(b,d,4),c,arguments.length<3,sb)}function Hd(a,b,c,d){var e=Pg(a)?gb:Pb;return e(a,nc(b,d,4),c,arguments.length<3,tb)}function Id(a,b,c){var d=Pg(a)?bb:vb;return b=nc(b,c,3),d(a,function(a,c,d){return!b(a,c,d)})}function Jd(a,b,c){if(c?vc(a,b,c):null==b){a=Ec(a);var d=a.length;return d>0?a[Ob(0,d-1)]:v}var e=Kd(a);return e.length=pg(0>b?0:+b||0,e.length),e}function Kd(a){a=Ec(a);for(var b=-1,c=a.length,d=Ef(c);++b<c;){var e=Ob(0,b);b!=e&&(d[b]=d[e]),d[e]=a[b]}return d}function Ld(a){var b=a?a.length:0;return wc(b)?b:Tg(a).length}function Md(a,b,c){var d=Pg(a)?hb:Rb;return("function"!=typeof b||"undefined"!=typeof c)&&(b=nc(b,c,3)),d(a,b)}function Nd(a,b,d){var e=-1,f=a?a.length:0,g=wc(f)?Ef(f):[];return d&&vc(a,b,d)&&(b=null),b=nc(b,d,3),sb(a,function(a,c,d){g[++e]={criteria:b(a,c,d),index:e,value:a}}),c(g,h)}function Od(a){var b=arguments;b.length>3&&vc(b[1],b[2],b[3])&&(b=[a,b[1]]);var d=-1,e=a?a.length:0,f=xb(b,!1,!1,1),g=wc(e)?Ef(e):[];return sb(a,function(a,b,c){for(var e=f.length,h=Ef(e);e--;)h[e]=null==a?v:a[f[e]];g[++d]={criteria:h,index:d,value:a}}),c(g,i)}function Pd(a,b){return xd(a,vf(b))}function Qd(a,b){if(!se(b)){if(!se(a))throw new Nf(N);var c=a;a=b,b=c}return a=mg(a=+a)?a:0,function(){return--a<1?b.apply(this,arguments):void 0}}function Rd(a,b,c){return c&&vc(a,b,c)&&(b=null),b=a&&null==b?a.length:og(+b||0,0),ic(a,F,null,null,null,null,b)}function Sd(a,b){var c;if(!se(b)){if(!se(a))throw new Nf(N);var d=a;a=b,b=d}return function(){return--a>0?c=b.apply(this,arguments):b=null,c}}function Td(a,b){var c=x;if(arguments.length>2){var d=Qb(arguments,2),e=p(d,Td.placeholder);c|=C}return ic(a,c,b,d,e)}function Ud(a){return nb(a,arguments.length>1?xb(arguments,!1,!1,1):Ne(a))}function Vd(a,b){var c=x|y;if(arguments.length>2){var d=Qb(arguments,2),e=p(d,Vd.placeholder);c|=C}return ic(b,c,a,d,e)}function Wd(a,b,c){c&&vc(a,b,c)&&(b=null);var d=ic(a,A,null,null,null,null,null,b);return d.placeholder=Wd.placeholder,d}function Xd(a,b,c){c&&vc(a,b,c)&&(b=null);var d=ic(a,B,null,null,null,null,null,b);return d.placeholder=Xd.placeholder,d}function Yd(a,b,c){function d(){m&&_f(m),i&&_f(i),i=m=n=v}function e(){var c=b-(Og()-k);if(0>=c||c>b){i&&_f(i);var d=n;i=m=n=v,d&&(o=Og(),j=a.apply(l,h),m||i||(h=l=null))}else m=fg(e,c)}function f(){m&&_f(m),i=m=n=v,(q||p!==b)&&(o=Og(),j=a.apply(l,h),m||i||(h=l=null))}function g(){if(h=arguments,k=Og(),l=this,n=q&&(m||!r),p===!1)var c=r&&!m;else{i||r||(o=k);var d=p-(k-o),g=0>=d||d>p;g?(i&&(i=_f(i)),o=k,j=a.apply(l,h)):i||(i=fg(f,d))}return g&&m?m=_f(m):m||b===p||(m=fg(e,b)),c&&(g=!0,j=a.apply(l,h)),!g||m||i||(h=l=null),j}var h,i,j,k,l,m,n,o=0,p=!1,q=!0;if(!se(a))throw new Nf(N);if(b=0>b?0:b,c===!0){var r=!0;q=!1}else te(c)&&(r=c.leading,p="maxWait"in c&&og(+c.maxWait||0,b),q="trailing"in c?c.trailing:q);return g.cancel=d,g}function Zd(a){return qb(a,1,arguments,1)}function $d(a,b){return qb(a,b,arguments,2)}function _d(){var a=arguments,b=a.length;if(!b)return function(){};if(!ab(a,se))throw new Nf(N);return function(){for(var c=0,d=a[c].apply(this,arguments);++c<b;)d=a[c].call(this,d);return d}}function ae(){var a=arguments,b=a.length-1;if(0>b)return function(){};if(!ab(a,se))throw new Nf(N);return function(){for(var c=b,d=a[c].apply(this,arguments);c--;)d=a[c].call(this,d);return d}}function be(a,b){if(!se(a)||b&&!se(b))throw new Nf(N);var c=function(){var d=c.cache,e=b?b.apply(this,arguments):arguments[0];if(d.has(e))return d.get(e);var f=a.apply(this,arguments);return d.set(e,f),f};return c.cache=new be.Cache,c}function ce(a){if(!se(a))throw new Nf(N);return function(){return!a.apply(this,arguments)}}function de(a){return Sd(a,2)}function ee(a){var b=Qb(arguments,1),c=p(b,ee.placeholder);return ic(a,C,null,b,c)}function fe(a){var b=Qb(arguments,1),c=p(b,fe.placeholder);return ic(a,D,null,b,c)}function ge(a){var b=xb(arguments,!1,!1,1);return ic(a,E,null,null,null,b)}function he(a,b,c){var d=!0,e=!0;if(!se(a))throw new Nf(N);return c===!1?d=!1:te(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:e),La.leading=d,La.maxWait=+b,La.trailing=e,Yd(a,b,La)}function ie(a,b){return b=null==b?uf:b,ic(b,C,null,[a],[])}function je(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=vc(a,b,d)?null:b,b=!1),c="function"==typeof c&&Xb(c,d,1),pb(a,b,c)}function ke(a,b,c){return b="function"==typeof b&&Xb(b,c,1),pb(a,!0,b)}function le(a){var b=n(a)?a.length:v;return wc(b)&&Vf.call(a)==P||!1}function me(a){return a===!0||a===!1||n(a)&&Vf.call(a)==R||!1}function ne(a){return n(a)&&Vf.call(a)==S||!1}function oe(a){return a&&1===a.nodeType&&n(a)&&Vf.call(a).indexOf("Element")>-1||!1}function pe(a){if(null==a)return!0;var b=a.length;return wc(b)&&(Pg(a)||Ae(a)||le(a)||n(a)&&se(a.splice))?!b:!Tg(a).length}function qe(a,b,c,d){if(c="function"==typeof c&&Xb(c,d,3),!c&&xc(a)&&xc(b))return a===b;var e=c?c(a,b):v;return"undefined"==typeof e?Fb(a,b,c):!!e}function re(a){return n(a)&&"string"==typeof a.message&&Vf.call(a)==T||!1}function se(a){return"function"==typeof a||!1}function te(a){var b=typeof a;return"function"==b||a&&"object"==b||!1}function ue(a,b,c,d){var e=Tg(b),f=e.length;if(c="function"==typeof c&&Xb(c,d,3),!c&&1==f){var g=e[0],h=b[g];if(xc(h))return null!=a&&h===a[g]&&Tf.call(a,g)}for(var i=Ef(f),j=Ef(f);f--;)h=i[f]=b[e[f]],j[f]=xc(h);return Hb(a,e,i,j,c)}function ve(a){return ye(a)&&a!=+a}function we(a){return null==a?!1:Vf.call(a)==U?Xf.test(Rf.call(a)):n(a)&&ya.test(a)||!1}function xe(a){return null===a}function ye(a){return"number"==typeof a||n(a)&&Vf.call(a)==W||!1}function ze(a){return n(a)&&Vf.call(a)==Y||!1}function Ae(a){return"string"==typeof a||n(a)&&Vf.call(a)==$||!1}function Be(a){return n(a)&&wc(a.length)&&Ja[Vf.call(a)]||!1}function Ce(a){return"undefined"==typeof a}function De(a){var b=a?a.length:0;return wc(b)?b?Za(a):[]:Xe(a)}function Ee(a){return mb(a,Qe(a))}function Fe(a,b,c){var d=Dg(a);return c&&vc(a,b,c)&&(b=null),b?mb(b,d,Tg(b)):d}function Ge(a){if(null==a)return a;var b=Za(arguments);return b.push(ib),Sg.apply(v,b)}function He(a,b,c){return b=nc(b,c,3),wb(a,b,Bb,!0)}function Ie(a,b,c){return b=nc(b,c,3),wb(a,b,Cb,!0)}function Je(a,b,c){return("function"!=typeof b||"undefined"!=typeof c)&&(b=Xb(b,c,3)),yb(a,b,Qe)}function Ke(a,b,c){return b=Xb(b,c,3),zb(a,b,Qe)}function Le(a,b,c){return("function"!=typeof b||"undefined"!=typeof c)&&(b=Xb(b,c,3)),Bb(a,b)}function Me(a,b,c){return b=Xb(b,c,3),zb(a,b,Tg)}function Ne(a){return Db(a,Qe(a))}function Oe(a,b){return a?Tf.call(a,b):!1}function Pe(a,b,c){c&&vc(a,b,c)&&(b=null);for(var d=-1,e=Tg(a),f=e.length,g={};++d<f;){var h=e[d],i=a[h];b?Tf.call(g,i)?g[i].push(h):g[i]=[h]:g[i]=h}return g}function Qe(a){if(null==a)return[];te(a)||(a=Kf(a));var b=a.length;b=b&&wc(b)&&(Pg(a)||Cg.nonEnumArgs&&le(a))&&b||0;for(var c=a.constructor,d=-1,e="function"==typeof c&&c.prototype==a,f=Ef(b),g=b>0;++d<b;)f[d]=d+"";for(var h in a)g&&uc(h,b)||"constructor"==h&&(e||!Tf.call(a,h))||f.push(h);return f}function Re(a,b,c){var d={};return b=nc(b,c,3),Bb(a,function(a,c,e){d[c]=b(a,c,e)}),d}function Se(a,b,c){if(null==a)return{};if("function"!=typeof b){var d=cb(xb(arguments,!1,!1,1),Mf);return zc(a,rb(Qe(a),d))}return b=Xb(b,c,3),Ac(a,function(a,c,d){return!b(a,c,d)})}function Te(a){for(var b=-1,c=Tg(a),d=c.length,e=Ef(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Ue(a,b,c){return null==a?{}:"function"==typeof b?Ac(a,Xb(b,c,3)):zc(a,xb(arguments,!1,!1,1))}function Ve(a,b,c){var d=null==a?v:a[b];return"undefined"==typeof d&&(d=c),se(d)?d.call(a):d}function We(a,b,c,d){var e=Pg(a)||Be(a);if(b=nc(b,d,4),null==c)if(e||te(a)){var f=a.constructor;c=e?Pg(a)?new f:[]:Dg("function"==typeof f&&f.prototype)}else c={};return(e?$a:Bb)(a,function(a,d,e){return b(c,a,d,e)}),c}function Xe(a){return Tb(a,Tg(a))}function Ye(a){return Tb(a,Qe(a))}function Ze(a,b,c){c&&vc(a,b,c)&&(b=c=null);var d=null==a,e=null==b;if(null==c&&(e&&"boolean"==typeof a?(c=a,a=1):"boolean"==typeof b&&(c=b,e=!0)),d&&e&&(b=1,e=!1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=tg();return pg(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return Ob(a,b)}function $e(a){return a=d(a),a&&a.charAt(0).toUpperCase()+a.slice(1)}function _e(a){return a=d(a),a&&a.replace(za,j)}function af(a,b,c){a=d(a),b+="";var e=a.length;return c=("undefined"==typeof c?e:pg(0>c?0:+c||0,e))-b.length,c>=0&&a.indexOf(b,c)==c}function bf(a){return a=d(a),a&&qa.test(a)?a.replace(oa,k):a}function cf(a){return a=d(a),a&&Ca.test(a)?a.replace(Ba,"\\$&"):a}function df(a,b,c){a=d(a),b=+b;var e=a.length;if(e>=b||!mg(b))return a;var f=(b-e)/2,g=ag(f),h=$f(f);return c=gc("",h,c),c.slice(0,g)+a+c}function ef(a,b,c){return a=d(a),a&&gc(a,b,c)+a}function ff(a,b,c){return a=d(a),a&&a+gc(a,b,c)}function gf(a,b,c){return c&&vc(a,b,c)&&(b=0),sg(a,b)}function hf(a,b){var c="";if(a=d(a),b=+b,1>b||!a||!mg(b))return c;do b%2&&(c+=a),b=ag(b/2),a+=a;while(b);return c}function jf(a,b,c){return a=d(a),c=null==c?0:pg(0>c?0:+c||0,a.length),a.lastIndexOf(b,c)==c}function kf(a,b,c){var e=V.templateSettings;c&&vc(a,b,c)&&(b=c=null),a=d(a),b=kb(kb({},c||b),e,jb);var f,g,h=kb(kb({},b.imports),e.imports,jb),i=Tg(h),j=Tb(h,i),k=0,m=b.interpolate||Aa,n="__p += '",o=Lf((b.escape||Aa).source+"|"+m.source+"|"+(m===ta?ua:Aa).source+"|"+(b.evaluate||Aa).source+"|$","g"),p="//# sourceURL="+("sourceURL"in b?b.sourceURL:"lodash.templateSources["+ ++Ia+"]")+"\n";a.replace(o,function(b,c,d,e,h,i){return d||(d=e),n+=a.slice(k,i).replace(Ea,l),c&&(f=!0,n+="' +\n__e("+c+") +\n'"),h&&(g=!0,n+="';\n"+h+";\n__p += '"),d&&(n+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=i+b.length,b}),n+="';\n";var q=b.variable;q||(n="with (obj) {\n"+n+"\n}\n"),n=(g?n.replace(ka,""):n).replace(la,"$1").replace(ma,"$1;"),n="function("+(q||"obj")+") {\n"+(q?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(f?", __e = _.escape":"")+(g?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+n+"return __p\n}";var r=rf(function(){return Hf(i,p+"return "+n).apply(v,j)});if(r.source=n,re(r))throw r;return r}function lf(a,b,c){var e=a;return(a=d(a))?(c?vc(e,b,c):null==b)?a.slice(r(a),s(a)+1):(b=d(b),a.slice(f(a,b),g(a,b)+1)):a}function mf(a,b,c){var e=a;return a=d(a),a?(c?vc(e,b,c):null==b)?a.slice(r(a)):a.slice(f(a,d(b))):a}function nf(a,b,c){var e=a;return a=d(a),a?(c?vc(e,b,c):null==b)?a.slice(0,s(a)+1):a.slice(0,g(a,d(b))+1):a}function of(a,b,c){c&&vc(a,b,c)&&(b=null);var e=G,f=H;if(null!=b)if(te(b)){var g="separator"in b?b.separator:g;e="length"in b?+b.length||0:e,f="omission"in b?d(b.omission):f}else e=+b||0;if(a=d(a),e>=a.length)return a;var h=e-f.length;if(1>h)return f;var i=a.slice(0,h);if(null==g)return i+f;if(ze(g)){if(a.slice(h).search(g)){var j,k,l=a.slice(0,h);for(g.global||(g=Lf(g.source,(va.exec(g)||"")+"g")),g.lastIndex=0;j=g.exec(l);)k=j.index;i=i.slice(0,null==k?h:k)}}else if(a.indexOf(g,h)!=h){var m=i.lastIndexOf(g);m>-1&&(i=i.slice(0,m))}return i+f}function pf(a){return a=d(a),a&&pa.test(a)?a.replace(na,t):a}function qf(a,b,c){return c&&vc(a,b,c)&&(b=null),a=d(a),a.match(b||Fa)||[]}function rf(a){try{return a()}catch(b){return re(b)?b:Gf(b)}}function sf(a,b,c){return c&&vc(a,b,c)&&(b=null),
ob(a,b)}function tf(a){return function(){return a}}function uf(a){return a}function vf(a){return Jb(a,!0)}function wf(a,b,c){if(null==c){var d=te(b),e=d&&Tg(b),f=e&&e.length&&Db(b,e);(f?f.length:d)||(f=!1,c=b,b=a,a=this)}f||(f=Db(b,Tg(b)));var g=!0,h=-1,i=se(a),j=f.length;c===!1?g=!1:te(c)&&"chain"in c&&(g=c.chain);for(;++h<j;){var k=f[h],l=b[k];a[k]=l,i&&(a.prototype[k]=function(b){return function(){var c=this.__chain__;if(g||c){var d=a(this.__wrapped__);return(d.__actions__=Za(this.__actions__)).push({func:b,args:arguments,thisArg:a}),d.__chain__=c,d}var e=[this.value()];return cg.apply(e,arguments),b.apply(a,e)}}(l))}return a}function xf(){return o._=Wf,this}function yf(){}function zf(a){return Mb(a+"")}function Af(a){return function(b){return null==a?v:a[b]}}function Bf(a,b,c){c&&vc(a,b,c)&&(b=c=null),a=+a||0,c=null==c?1:+c||0,null==b?(b=a,a=0):b=+b||0;for(var d=-1,e=og($f((b-a)/(c||1)),0),f=Ef(e);++d<e;)f[d]=a,a+=c;return f}function Cf(a,b,c){if(a=+a,1>a||!mg(a))return[];var d=-1,e=Ef(pg(a,wg));for(b=Xb(b,c,1);++d<a;)wg>d?e[d]=b(d):b(d);return e}function Df(a){var b=++Uf;return d(a)+b}o=o?Wa.defaults(Ra.Object(),o,Wa.pick(Ra,Ha)):Ra;var Ef=o.Array,Ff=o.Date,Gf=o.Error,Hf=o.Function,If=o.Math,Jf=o.Number,Kf=o.Object,Lf=o.RegExp,Mf=o.String,Nf=o.TypeError,Of=Ef.prototype,Pf=Kf.prototype,Qf=(Qf=o.window)&&Qf.document,Rf=Hf.prototype.toString,Sf=Mb("length"),Tf=Pf.hasOwnProperty,Uf=0,Vf=Pf.toString,Wf=o._,Xf=Lf("^"+cf(Vf).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yf=we(Yf=o.ArrayBuffer)&&Yf,Zf=we(Zf=Yf&&new Yf(0).slice)&&Zf,$f=If.ceil,_f=o.clearTimeout,ag=If.floor,bg=we(bg=Kf.getPrototypeOf)&&bg,cg=Of.push,dg=Pf.propertyIsEnumerable,eg=we(eg=o.Set)&&eg,fg=o.setTimeout,gg=Of.splice,hg=we(hg=o.Uint8Array)&&hg,ig=(Of.unshift,we(ig=o.WeakMap)&&ig),jg=function(){try{var a=we(a=o.Float64Array)&&a,b=new a(new Yf(10),0,1)&&a}catch(c){}return b}(),kg=we(kg=Ef.isArray)&&kg,lg=we(lg=Kf.create)&&lg,mg=o.isFinite,ng=we(ng=Kf.keys)&&ng,og=If.max,pg=If.min,qg=we(qg=Ff.now)&&qg,rg=we(rg=Jf.isFinite)&&rg,sg=o.parseInt,tg=If.random,ug=Jf.NEGATIVE_INFINITY,vg=Jf.POSITIVE_INFINITY,wg=If.pow(2,32)-1,xg=wg-1,yg=wg>>>1,zg=jg?jg.BYTES_PER_ELEMENT:0,Ag=If.pow(2,53)-1,Bg=ig&&new ig,Cg=V.support={};!function(a){Cg.funcDecomp=!we(o.WinRTError)&&Da.test(u),Cg.funcNames="string"==typeof Hf.name;try{Cg.dom=11===Qf.createDocumentFragment().nodeType}catch(b){Cg.dom=!1}try{Cg.nonEnumArgs=!dg.call(arguments,1)}catch(b){Cg.nonEnumArgs=!0}}(0,0),V.templateSettings={escape:ra,evaluate:sa,interpolate:ta,variable:"",imports:{_:V}};var Dg=function(){function a(){}return function(b){if(te(b)){a.prototype=b;var c=new a;a.prototype=null}return c||o.Object()}}(),Eg=Bg?function(a,b){return Bg.set(a,b),a}:uf;Zf||(Yb=Yf&&hg?function(a){var b=a.byteLength,c=jg?ag(b/zg):0,d=c*zg,e=new Yf(b);if(c){var f=new jg(e,0,c);f.set(new jg(a,0,c))}return b!=d&&(f=new hg(e,d),f.set(new hg(a,d))),e}:tf(null));var Fg=lg&&eg?function(a){return new Va(a)}:tf(null),Gg=Bg?function(a){return Bg.get(a)}:yf,Hg=function(){var a=0,b=0;return function(c,d){var e=Og(),f=J-(e-b);if(b=e,f>0){if(++a>=I)return c}else a=0;return Eg(c,d)}}(),Ig=_b(function(a,b,c){Tf.call(a,c)?++a[c]:a[c]=1}),Jg=_b(function(a,b,c){Tf.call(a,c)?a[c].push(b):a[c]=[b]}),Kg=_b(function(a,b,c){a[c]=b}),Lg=ec(db),Mg=ec(eb,!0),Ng=_b(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),Og=qg||function(){return(new Ff).getTime()},Pg=kg||function(a){return n(a)&&wc(a.length)&&Vf.call(a)==Q||!1};Cg.dom||(oe=function(a){return a&&1===a.nodeType&&n(a)&&!Rg(a)||!1});var Qg=rg||function(a){return"number"==typeof a&&mg(a)};(se(/x/)||hg&&!se(hg))&&(se=function(a){return Vf.call(a)==U});var Rg=bg?function(a){if(!a||Vf.call(a)!=X)return!1;var b=a.valueOf,c=we(b)&&(c=bg(b))&&bg(c);return c?a==c||bg(a)==c:Cc(a)}:Cc,Sg=ac(kb),Tg=ng?function(a){if(a)var b=a.constructor,c=a.length;return"function"==typeof b&&b.prototype===a||"function"!=typeof a&&c&&wc(c)?Dc(a):te(a)?ng(a):[]}:Dc,Ug=ac(Kb),Vg=cc(function(a,b,c){return b=b.toLowerCase(),c?a+b.charAt(0).toUpperCase()+b.slice(1):b}),Wg=cc(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()});8!=sg(Ga+"08")&&(gf=function(a,b,c){return(c?vc(a,b,c):null==b)?b=0:b&&(b=+b),a=lf(a),sg(a,b||(xa.test(a)?16:10))});var Xg=cc(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()});return Z.prototype=V.prototype,Pa.prototype["delete"]=Qa,Pa.prototype.get=Sa,Pa.prototype.has=Ta,Pa.prototype.set=Ua,Va.prototype.push=Ya,be.Cache=Pa,V.after=Qd,V.ary=Rd,V.assign=Sg,V.at=ud,V.before=Sd,V.bind=Td,V.bindAll=Ud,V.bindKey=Vd,V.callback=sf,V.chain=nd,V.chunk=Gc,V.compact=Hc,V.constant=tf,V.countBy=Ig,V.create=Fe,V.curry=Wd,V.curryRight=Xd,V.debounce=Yd,V.defaults=Ge,V.defer=Zd,V.delay=$d,V.difference=Ic,V.drop=Jc,V.dropRight=Kc,V.dropRightWhile=Lc,V.dropWhile=Mc,V.filter=xd,V.flatten=Qc,V.flattenDeep=Rc,V.flow=_d,V.flowRight=ae,V.forEach=Bd,V.forEachRight=Cd,V.forIn=Je,V.forInRight=Ke,V.forOwn=Le,V.forOwnRight=Me,V.functions=Ne,V.groupBy=Jg,V.indexBy=Kg,V.initial=Tc,V.intersection=Uc,V.invert=Pe,V.invoke=Dd,V.keys=Tg,V.keysIn=Qe,V.map=Ed,V.mapValues=Re,V.matches=vf,V.memoize=be,V.merge=Ug,V.mixin=wf,V.negate=ce,V.omit=Se,V.once=de,V.pairs=Te,V.partial=ee,V.partialRight=fe,V.partition=Ng,V.pick=Ue,V.pluck=Fd,V.property=zf,V.propertyOf=Af,V.pull=Xc,V.pullAt=Yc,V.range=Bf,V.rearg=ge,V.reject=Id,V.remove=Zc,V.rest=$c,V.shuffle=Kd,V.slice=_c,V.sortBy=Nd,V.sortByAll=Od,V.take=cd,V.takeRight=dd,V.takeRightWhile=ed,V.takeWhile=fd,V.tap=od,V.throttle=he,V.thru=pd,V.times=Cf,V.toArray=De,V.toPlainObject=Ee,V.transform=We,V.union=gd,V.uniq=hd,V.unzip=id,V.values=Xe,V.valuesIn=Ye,V.where=Pd,V.without=jd,V.wrap=ie,V.xor=kd,V.zip=ld,V.zipObject=md,V.backflow=ae,V.collect=Ed,V.compose=ae,V.each=Bd,V.eachRight=Cd,V.extend=Sg,V.iteratee=sf,V.methods=Ne,V.object=md,V.select=xd,V.tail=$c,V.unique=hd,wf(V,V),V.attempt=rf,V.camelCase=Vg,V.capitalize=$e,V.clone=je,V.cloneDeep=ke,V.deburr=_e,V.endsWith=af,V.escape=bf,V.escapeRegExp=cf,V.every=wd,V.find=yd,V.findIndex=Nc,V.findKey=He,V.findLast=zd,V.findLastIndex=Oc,V.findLastKey=Ie,V.findWhere=Ad,V.first=Pc,V.has=Oe,V.identity=uf,V.includes=vd,V.indexOf=Sc,V.isArguments=le,V.isArray=Pg,V.isBoolean=me,V.isDate=ne,V.isElement=oe,V.isEmpty=pe,V.isEqual=qe,V.isError=re,V.isFinite=Qg,V.isFunction=se,V.isMatch=ue,V.isNaN=ve,V.isNative=we,V.isNull=xe,V.isNumber=ye,V.isObject=te,V.isPlainObject=Rg,V.isRegExp=ze,V.isString=Ae,V.isTypedArray=Be,V.isUndefined=Ce,V.kebabCase=Wg,V.last=Vc,V.lastIndexOf=Wc,V.max=Lg,V.min=Mg,V.noConflict=xf,V.noop=yf,V.now=Og,V.pad=df,V.padLeft=ef,V.padRight=ff,V.parseInt=gf,V.random=Ze,V.reduce=Gd,V.reduceRight=Hd,V.repeat=hf,V.result=Ve,V.runInContext=u,V.size=Ld,V.snakeCase=Xg,V.some=Md,V.sortedIndex=ad,V.sortedLastIndex=bd,V.startsWith=jf,V.template=kf,V.trim=lf,V.trimLeft=mf,V.trimRight=nf,V.trunc=of,V.unescape=pf,V.uniqueId=Df,V.words=qf,V.all=wd,V.any=Md,V.contains=vd,V.detect=yd,V.foldl=Gd,V.foldr=Hd,V.head=Pc,V.include=vd,V.inject=Gd,wf(V,function(){var a={};return Bb(V,function(b,c){V.prototype[c]||(a[c]=b)}),a}(),!1),V.sample=Jd,V.prototype.sample=function(a){return this.__chain__||null!=a?this.thru(function(b){return Jd(b,a)}):Jd(this.value())},V.VERSION=w,$a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){V[a].placeholder=V}),$a(["filter","map","takeWhile"],function(a,b){var c=b==K;_.prototype[a]=function(a,d){var e=this.clone(),f=e.filtered,g=e.iteratees||(e.iteratees=[]);return e.filtered=f||c||b==M&&e.dir<0,g.push({iteratee:nc(a,d,3),type:b}),e}}),$a(["drop","take"],function(a,b){var c=a+"Count",d=a+"While";_.prototype[a]=function(d){d=null==d?1:og(+d||0,0);var e=this.clone();if(e.filtered){var f=e[c];e[c]=b?pg(f,d):f+d}else{var g=e.views||(e.views=[]);g.push({size:d,type:a+(e.dir<0?"Right":"")})}return e},_.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()},_.prototype[a+"RightWhile"]=function(a,b){return this.reverse()[d](a,b).reverse()}}),$a(["first","last"],function(a,b){var c="take"+(b?"Right":"");_.prototype[a]=function(){return this[c](1).value()[0]}}),$a(["initial","rest"],function(a,b){var c="drop"+(b?"":"Right");_.prototype[a]=function(){return this[c](1)}}),$a(["pluck","where"],function(a,b){var c=b?"filter":"map",d=b?vf:zf;_.prototype[a]=function(a){return this[c](d(a))}}),_.prototype.dropWhile=function(a,b){var c,d,e=this.dir<0;return a=nc(a,b,3),this.filter(function(b,f,g){return c=c&&(e?d>f:f>d),d=f,c||(c=!a(b,f,g))})},_.prototype.reject=function(a,b){return a=nc(a,b,3),this.filter(function(b,c,d){return!a(b,c,d)})},_.prototype.slice=function(a,b){a=null==a?0:+a||0;var c=0>a?this.takeRight(-a):this.drop(a);return"undefined"!=typeof b&&(b=+b||0,c=0>b?c.dropRight(-b):c.take(b-a)),c},Bb(_.prototype,function(a,b){var c=V[b],d=/^(?:first|last)$/.test(b);V.prototype[b]=function(){var b=this.__wrapped__,e=arguments,f=this.__chain__,g=!!this.__actions__.length,h=b instanceof _,i=h&&!g;if(d&&!f)return i?a.call(b):c.call(V,this.value());var j=function(a){var b=[a];return cg.apply(b,e),c.apply(V,b)};if(h||Pg(b)){var k=i?b:new _(this),l=a.apply(k,e);if(!d&&(g||l.actions)){var m=l.actions||(l.actions=[]);m.push({func:pd,args:[j],thisArg:V})}return new Z(l,f)}return this.thru(j)}}),$a(["concat","join","pop","push","shift","sort","splice","unshift"],function(a){var b=Of[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:join|pop|shift)$/.test(a);V.prototype[a]=function(){var a=arguments;return d&&!this.__chain__?b.apply(this.value(),a):this[c](function(c){return b.apply(c,a)})}}),_.prototype.clone=Ma,_.prototype.reverse=Na,_.prototype.value=Oa,V.prototype.chain=qd,V.prototype.reverse=rd,V.prototype.toString=sd,V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=td,V.prototype.collect=V.prototype.map,V.prototype.head=V.prototype.first,V.prototype.select=V.prototype.filter,V.prototype.tail=V.prototype.rest,V}var v,w="3.0.1",x=1,y=2,z=4,A=8,B=16,C=32,D=64,E=128,F=256,G=30,H="...",I=150,J=16,K=0,L=1,M=2,N="Expected a function",O="__lodash_placeholder__",P="[object Arguments]",Q="[object Array]",R="[object Boolean]",S="[object Date]",T="[object Error]",U="[object Function]",V="[object Map]",W="[object Number]",X="[object Object]",Y="[object RegExp]",Z="[object Set]",$="[object String]",_="[object WeakMap]",aa="[object ArrayBuffer]",ba="[object Float32Array]",ca="[object Float64Array]",da="[object Int8Array]",ea="[object Int16Array]",fa="[object Int32Array]",ga="[object Uint8Array]",ha="[object Uint8ClampedArray]",ia="[object Uint16Array]",ja="[object Uint32Array]",ka=/\b__p \+= '';/g,la=/\b(__p \+=) '' \+/g,ma=/(__e\(.*?\)|\b__t\)) \+\n'';/g,na=/&(?:amp|lt|gt|quot|#39|#96);/g,oa=/[&<>"'`]/g,pa=RegExp(na.source),qa=RegExp(oa.source),ra=/<%-([\s\S]+?)%>/g,sa=/<%([\s\S]+?)%>/g,ta=/<%=([\s\S]+?)%>/g,ua=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,va=/\w*$/,wa=/^\s*function[ \n\r\t]+\w/,xa=/^0[xX]/,ya=/^\[object .+?Constructor\]$/,za=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Aa=/($^)/,Ba=/[.*+?^${}()|[\]\/\\]/g,Ca=RegExp(Ba.source),Da=/\bthis\b/,Ea=/['\n\r\u2028\u2029\\]/g,Fa=function(){var a="[A-Z\\xc0-\\xd6\\xd8-\\xde]",b="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(a+"{2,}(?="+a+b+")|"+a+"?"+b+"|"+a+"+|[0-9]+","g")}(),Ga=" 	\f\ufeff\n\r\u2028\u2029",Ha=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],Ia=-1,Ja={};Ja[ba]=Ja[ca]=Ja[da]=Ja[ea]=Ja[fa]=Ja[ga]=Ja[ha]=Ja[ia]=Ja[ja]=!0,Ja[P]=Ja[Q]=Ja[aa]=Ja[R]=Ja[S]=Ja[T]=Ja[U]=Ja[V]=Ja[W]=Ja[X]=Ja[Y]=Ja[Z]=Ja[$]=Ja[_]=!1;var Ka={};Ka[P]=Ka[Q]=Ka[aa]=Ka[R]=Ka[S]=Ka[ba]=Ka[ca]=Ka[da]=Ka[ea]=Ka[fa]=Ka[W]=Ka[X]=Ka[Y]=Ka[$]=Ka[ga]=Ka[ha]=Ka[ia]=Ka[ja]=!0,Ka[T]=Ka[U]=Ka[V]=Ka[Z]=Ka[_]=!1;var La={leading:!1,maxWait:0,trailing:!1},Ma={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Na={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Oa={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Pa={"function":!0,object:!0},Qa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ra=Pa[typeof window]&&window!==(this&&this.window)?window:this,Sa=Pa[typeof exports]&&exports&&!exports.nodeType&&exports,Ta=Pa[typeof module]&&module&&!module.nodeType&&module,Ua=Sa&&Ta&&"object"==typeof global&&global;!Ua||Ua.global!==Ua&&Ua.window!==Ua&&Ua.self!==Ua||(Ra=Ua);var Va=Ta&&Ta.exports===Sa&&Sa,Wa=u();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ra._=Wa,define("lodash",[],function(){return Wa})):Sa&&Ta?Va?(Ta.exports=Wa)._=Wa:Sa._=Wa:Ra._=Wa}.call(this),define("superdesk/activity/activity-list-directive",["lodash"],function(a){"use strict";return["superdesk","activityService","workflowService","asset","notify",function(b,c,d,e,f){return{scope:{item:"=",type:"@",action:"@",done:"&",single:"=",preview:"@"},templateUrl:e.templateUrl("superdesk/activity/views/activity-list.html"),link:function(e,g,h){e.item.actioning={};var i={action:e.action};if(e.type){i.type=e.type;var j=function(c){c&&(e.activities=a.filter(b.findActivities(i,e.item),function(a){return a.monitor&&(e.item.actioning={},e.item.actioning[a._id]=!1,e.$watchCollection("item.actioning",function(b,c){e.item.actioning&&!e.item.actioning[a._id]&&c&&b[a._id]!==c[a._id]&&e.item.error&&e.item.error.data&&e.item.error.data._message&&(f.error(gettext(e.item.error.data._message)),delete e.item.error)})),d.isActionAllowed(e.item,a.action)}),e.preview?e.limit=e.activities.length:e.limit=e.activities.length>6?5:6,e.single&&angular.forEach(e.activities,function(a){a.key&&(a.unbind&&a.unbind(),a.unbind=e.$on("key:"+a.key,function(){e.run(a)}))}))};e.run=function(a,b){e.$root.link(a._id,e.item)||(a.monitor&&(e.item.actioning[a._id]=!0),null!=b&&b.stopPropagation(),c.start(a,{data:{item:e.item}}).then(function(){"function"==typeof e.done&&e.done(e.data)}))},e.$watch("item",j)}}}}]}),define("superdesk/activity/activity-chooser-directive",["lodash","require"],function(a,b){"use strict";return["activityChooser","keyboardManager","asset",function(b,c,d){return{scope:{},templateUrl:d.templateUrl("superdesk/activity/views/activity-chooser.html"),link:function(d,e,f){function g(b,c){var e=a.indexOf(c,d.selected),f=a.max([0,a.min([c.length-1,e+b])]);d.selected=c[f]}var h=-1,i=1;d.chooser=b,d.selected=null,d.$watch(function(){return b.activities},function(e,f){d.selected=e?a.first(e):null,e?(c.push("up",function(){g(h,e)}),c.push("down",function(){g(i,e)}),c.push("enter",function(){b.resolve(d.selected)})):f&&(c.pop("up"),c.pop("down"),c.pop("enter"))}),d.select=function(a){d.selected=a}}}}]}),define("superdesk/activity/activity-modal-directive",["require"],function(a){"use strict";return["activityService","asset",function(a,b){return{scope:!0,templateUrl:b.templateUrl("superdesk/activity/views/activity-modal.html"),link:function(b,c){b.stack=a.activityStack,b.$watch("stack.length",function(a){if(b.activity=null,a){var c=b.stack[a-1];b.activity=c.activity,b.locals=c.locals,b.reject=function(a){return c.defer.reject(a)},b.resolve=function(a){return c.defer.resolve(a)},c.defer.promise["finally"](function(){b.stack.pop()})}})}}}]}),define("superdesk/activity/activity",["angular","lodash","require","./activity-list-directive","./activity-chooser-directive","./activity-modal-directive"],function(a,b,c){"use strict";function d(c){var d={},e={},g={},h={};a.extend(this,f),this.widget=function(b,c){return d[b]=a.extend({_id:b,wcode:b},c),this},this.pane=function(b,c){return h[b]=a.extend({_id:b},c),this},this.activity=function(d,f){var g=a.extend({_id:d,priority:0,when:d,href:d,filters:[],beta:!1,reloadOnSearch:!1,auth:!0,features:{},privileges:{},condition:function(a){return!0}},f),h=b.find(g.filters,function(a){return!a.action});return h&&console.error("Missing filters action for activity",g),"/"===g.when[0]&&(g.template||g.templateUrl)&&c.when(g.when,g),e[d]=g,this},this.permission=function(b,c){return g[b]=a.extend({_id:b},c),this},this.$get=["$q","$route","$rootScope","activityService","activityChooser","betaService","features","privileges","$injector",function(i,j,k,l,m,n,o,p,q){function r(a){return m.choose(a)}function s(b){var c=!0;return a.forEach(b.features,function(a,b){c=c&&o[b]&&a}),c}function t(a){return p.userHasPrivileges(a.privileges)}function u(a){return s(a)&&t(a)}return n.isBeta().then(function(a){b.forEach(e,function(b,d){(b.beta===!0&&!a||!u(b,a))&&c.when(b.when,{redirectTo:"/workspace"})})}),a.extend({widgets:d,activities:e,permissions:g,panes:h,activity:function(a){return e[a]||null},resolve:function(a){var b=this.findActivities(a);switch(b.length){case 0:return i.reject();case 1:return i.when(b[0]);default:return r(b)}},findActivities:function(a,c){var d={};return a.action&&(d.action=a.action),a.type&&(d.type=a.type),b.sortBy(b.filter(this.activities,function(e){function f(){return e.additionalCondition?q.invoke(e.additionalCondition,{},{item:c?c:a.data}):!0}return b.find(e.filters,d)&&u(e)&&e.condition(c)&&f()}),"priority").reverse()},intent:function(a,b,c){var d={action:a,type:b,data:c},e=this;return this.resolve(d).then(function(a){return e.start(a,d)},function(){return k.$broadcast(["intent",d.action||"*",d.type||"*"].join(":"),d),i.reject()})},link:function(a,b){return l.getLink(this.activity(a),b)},start:function(a,b){return l.start(a,b)},getMenu:function(b){return p.loaded.then(function(){var c=[];return a.forEach(e,function(a){a.category===b&&u(a)&&c.push(a)}),c})}},f)}]}function e(a){return{templateUrl:a.templateUrl("superdesk/activity/views/activity-item.html")}}var f={MENU_MAIN:"superdesk.menu.main",MENU_SETTINGS:"superdesk.menu.settings",ACTION_EDIT:"edit",ACTION_LIST:"list",ACTION_VIEW:"view",ACTION_PREVIEW:"preview"};d.$inject=["$routeProvider"];var g=a.module("superdesk.activity",["ngRoute","superdesk.notify","superdesk.features","superdesk.translate","superdesk.services.beta","superdesk.services.modal","superdesk.privileges","superdesk.keyboard"]);return g.provider("superdesk",d),g.service("activityService",["$location","$injector","$q","$timeout","gettext","modal",function(a,c,d,e,f,g){function h(a,c){if("/"===a.href[0]){var d=!0,e=a.href.replace(/:([_a-zA-Z0-9]+)/,function(a,b){return d=d&&c[b],c[b]?c[b]:a});return e=d?e:null,-1===a.href.indexOf("_type")||b.isNull(e)||(e=e.replace(":_type",c._type?c._type:"archive")),e}}var i=[];this.activityStack=i,this.getLink=h,this.start=function(b,e){function j(b,e){var f=h(b,e&&e.data);if(f)return a.path(f),d.when(e);if(b.modal){var g=d.defer();return i.push({defer:g,activity:b,locals:e}),g.promise}return d.when(c.invoke(b.controller,{},e))}return b.confirm?g.confirm(f(b.confirm)).then(function(){return j(b,e)},function(){return d.reject({confirm:1})}):j(b,e)}}]),g.run(["$rootScope","superdesk",function(a,b){a.superdesk=b,a.intent=function(){return b.intent.apply(b,arguments)},a.link=function(){var a=b.link.apply(b,arguments);return a?"#"+a:null}}]),g.service("activityChooser",["$q",function(a){var b;this.choose=function(c){return b=a.defer(),this.activities=c,b.promise},this.resolve=function(a){this.activities=null,b.resolve(a)},this.reject=function(){this.activities=null,b.reject()}}]),g.service("referrer",function(){function a(a){var c;return a&&(c=a.$$route.href.replace("/:_id",""),b.isEqual({},a.pathParams)||(c=c+"/"+a.pathParams._id),b.isEqual({},a.params)||(c+="?",c+=decodeURIComponent($.param(a.params)))),c}this.setReferrer=function(b,c){b&&c&&void 0!==b.$$route&&void 0!==c.$$route&&("/"===b.$$route.originalPath?(this.setReferrerUrl("/workspace"),localStorage.setItem("referrerUrl","/workspace"),sessionStorage.removeItem("previewUrl")):!b.$$route.authoring||c.$$route.authoring&&"packaging"!==c.$$route._id||(this.setReferrerUrl(a(c)),localStorage.setItem("referrerUrl",this.getReferrerUrl()),sessionStorage.removeItem("previewUrl")))};var c;this.setReferrerUrl=function(a){c=a},this.getReferrerUrl=function(){return("undefined"==typeof c||null===c)&&("undefined"==typeof localStorage.getItem("referrerUrl")||null===localStorage.getItem("referrerUrl")?this.setReferrerUrl("/workspace"):c=localStorage.getItem("referrerUrl")),c}}),g.run(["$rootScope","activityService","referrer",function(a,b,c){a.$on("$routeChangeStart",function(){if(b.activityStack.length){var a=b.activityStack.pop();a.defer.reject()}}),a.$on("$routeChangeSuccess",function(a,b,d){c.setReferrer(b,d)})}]),g.directive("sdActivityList",c("./activity-list-directive")),g.directive("sdActivityItem",e),g.directive("sdActivityChooser",c("./activity-chooser-directive")),g.directive("sdActivityModal",c("./activity-modal-directive")),e.$inject=["asset"],g}),define("superdesk/analytics/piwik-tracking",[],function(){"use strict";function a(a){window._paq=window._paq||[],function(){_paq.push(["setSiteId",a.id]),_paq.push(["setTrackerUrl",a.url+"/piwik.php"]);var b=document,c=b.createElement("script"),d=b.getElementsByTagName("script")[0];c.type="text/javascript",c.defer=!0,c.async=!0,c.src=a.url+"/piwik.js",d.parentNode.insertBefore(c,d)}(),this.track=function(a){_paq.push(["trackPageView",a.label])}}return a}),define("superdesk/analytics/google-tracking",[],function(){"use strict";function a(a){!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",a.id,"sourcefabric.org"),this.track=function(a){ga("send","pageview",{page:a._id,title:a.label})}}return a}),define("superdesk/analytics/analytics",["angular","./piwik-tracking","./google-tracking"],function(a,b,c){"use strict";function d(){this.track=a.noop}return a.module("superdesk.analytics",[]).service("analytics",["config",function(a){a.analytics.piwik.url?b.call(this,a.analytics.piwik):a.analytics.ga.id?c.call(this,a.analytics.ga):d.call(this)}]).run(["$rootScope","analytics",function(b,c){b.$on("$routeChangeSuccess",function(b,d){a.isDefined(d)&&c.track(d)})}])}),define("superdesk/api/http-endpoint-factory",["lodash"],function(a){"use strict";function b(b,c,d){function e(a){return d.resource(a.rel)}function f(b,c){var d=a.extend({},b.config.headers||{});return c&&c._etag&&(d["If-Match"]=c._etag),d}function g(a){return c.when(a.url).then(function(c){return a.url=c,b(a)}).then(function(a){return!(a.status>=200&&a.status<300)||a.data&&a.data._status&&"ERR"===a.data._status?c.reject(a):a})}function h(a,b){var c={_status:1,_updated:1,_created:1,_etag:1,_links:1,_id:b?0:1},d={};return angular.forEach(a,function(a,b){c[b]||(d[b]=a)}),d}function i(a,b){this.name=a,this.config=b,this.rel=b.rel}return i.prototype.getByUrl=function(a,b){return g({method:"GET",url:d.item(a),cache:b}).then(function(a){return a.data})},i.prototype.getById=function(b,c){return e(this).then(a.bind(function(a){var d=a.replace(/\/+$/,"")+"/"+b;return g({method:"GET",url:d,cache:c}).then(function(a){return a.data})},this))},i.prototype.query=function(a,b){return g({method:"GET",params:a,url:e(this),headers:f(this),cache:b}).then(function(a){return a.data})},i.prototype.update=function(b,c){c&&c._etag&&(b._etag=c._etag),c||(c=angular.extend({},b));var e=b._links.self.href;return g({method:"PATCH",url:d.item(e),data:h(c,!b._links),headers:f(this,b)}).then(function(c){return a.extend(b,c.data),b})},i.prototype.create=function(b){return g({method:"POST",url:e(this),data:b,headers:f(this)}).then(function(c){return delete c.data._status,a.extend(b,c.data),b})},i.prototype.save=function(b,c){return b._id?this.update(b,c):this.create(a.extend(b,c))},i.prototype.replace=function(b,c){return g({method:"PUT",url:d.item(b),data:c,headers:f(this,c)}).then(function(b){return a.extend(c,b.data),c})},i.prototype.remove=function(a){return g({method:"DELETE",url:d.item(a._links.self.href),headers:f(this,a)}).then(null,function(a){return 404===a.status?c.when(a):c.reject(a)})},i.prototype.getUrl=function(){return e(this)},i.prototype.getHeaders=function(){return f(this)||{}},i}return b.$inject=["$http","$q","urls"],b}),define("superdesk/api/api-service",["angular","lodash","./http-endpoint-factory"],function(a,b,c){"use strict";function d(){function d(d,f,g,h){function i(a){function b(a){return a&&a._status&&"ERR"===a._status}return a.status>=200&&a.status<300&&!b(a.data)}function j(a){return f.when(a.url).then(function(b){return a.url=b,g(a)}).then(function(a){return i(a)?a.data:f.reject(a)})}function k(b,c){var d={_status:1,_updated:1,_created:1,_etag:1,_links:1,_id:c?0:1},e={};return a.forEach(b,function(a,b){d[b]||(e[b]=a)}),e}function l(a){var b={};return a&&a._etag&&(b["If-Match"]=a._etag),b}function m(a,b){this.resource=a,this.parent=b}function n(a,b,c){return p(a,b).url(c)}var o={http:d.invoke(c)};m.prototype.url=function(b){function c(a,b){return a.replace(/<.*>/,b._id)}return h.resource(this.resource).then(a.bind(this,function(a){if(this.parent){var d=c(a,this.parent);if(d!==a)return d}return b&&(a=a+"/"+b),a}))},m.prototype.save=function(b,c,d){return c&&c._etag&&(b._etag=c._etag),j({method:b._links?"PATCH":"POST",url:b._links?h.item(b._links.self.href):this.url(),data:c?k(c,!b._links):k(b,!b._links),params:d,headers:l(b)}).then(function(d){return a.extend(b,c||{}),a.extend(b,d),b})},m.prototype.replace=function(a){return j({method:"PUT",url:this.url(a._id),data:k(a)})},m.prototype.query=function(a,b){return j({method:"GET",url:this.url(),params:a,cache:b})},m.prototype.getById=function(a,b,c){return j({method:"GET",url:this.url(a),params:b,cache:c})},m.prototype.remove=function(a,b){return j({method:"DELETE",url:h.item(a._links.self.href),params:b,headers:l(a)})};var p=function(a,b){return new m(a,b)};return p.find=function(a,b,c,d){return p(a).getById(b,c,d)},p.save=function(a,b,c,d,e){return p(a,d).save(b,c,e)},p.remove=function(a,b,c){var d=c?n(c,a,a._id):h.item(a._links.self.href);return j({method:"DELETE",url:d,params:b,headers:l(a)})},p.update=function(a,b,c){return j({method:"PATCH",url:n(a,b,b._id),data:c,headers:l(b)})},p.query=function(a,b,c){return p(a,c).query(b)},p.get=function(a,b){return j({method:"GET",url:h.item(a),params:b})},a.forEach(e,function(a,c){var e=a.service||b.noop;e.prototype=new o[a.type](c,a.backend),p[c]=d.instantiate(e,{resource:e.prototype})}),p}var e={};this.api=function(a,b){return e[a]=b,this},this.$get=d,d.$inject=["$injector","$q","$http","urls"]}return d}),define("superdesk/api/timeout-interceptor",[],function(){"use strict";function a(a,b,c,d){var e=3e3,f=6e4,g={OK:0},h=/\.html?$/;return c.serverStatus=g.OK,{xrequest:function(b){return h.test(b.url)||d.isUpload(b)||(b._ttl=b._ttl?Math.min(f,2*b._ttl):e,b.timeout=a(function(){b._isTimeout=!0},b._ttl)),b},xresponse:function(b){return b.config.timeout&&(a.cancel(b.config.timeout),c.serverStatus=g.OK),b},xresponseError:function(e){return e.status||d.isUpload(e.config)?(a.cancel(e.config.timeout),c.serverStatus=g.OK,b.reject(e)):(c.serverStatus+=1,d.resend(e.config))}}}return a.$inject=["$timeout","$q","$rootScope","request"],a}),define("superdesk/api/request-service",[],function(){"use strict";function a(a){this.isUpload=function(b){return a.get("upload").isUpload(b)},this.resend=function(b){return this.isUpload(b)?a.get("upload").restart(b):a.get("$http")(b)}}return a.$inject=["$injector"],a}),define("superdesk/api/url-resolver-service",[],function(){"use strict";function a(a,b,c){function d(a){return g+(0===a.indexOf("/")?a:"/"+a)}function e(){return g?a({method:"GET",url:g,cache:!0}).then(function(a){return f={},200===a.status?_.each(a.data._links.child,function(a){f[a.title]=d(a.href)}):b.reject(a),f}):b.reject()}var f,g=c.server.url;this.resource=function(a){return this.links().then(function(){return f[a]?f[a]:b.reject({status:404,resource:a})})},this.item=function(a){return d(a)},this.links=function(){return f?b.when(f):e()}}return a.$inject=["$http","$q","config"],a}),define("superdesk/api/api",["angular","require","./api-service","./timeout-interceptor","./request-service","./url-resolver-service"],function(a,b){"use strict";return a.module("superdesk.api",["superdesk.config"]).provider("api",b("./api-service")).service("request",b("./request-service")).service("urls",b("./url-resolver-service")).config(["$httpProvider",function(a){a.interceptors.push(b("./timeout-interceptor"))}])}),define("superdesk/auth/auth-interceptor",["lodash"],function(a){"use strict";function b(a,b,c,d){function e(b){return a.expire(),a.getIdentity().then(function(){var d=c.get("$http");return d.defaults.headers.common.Authorization=a.token,b.config.headers.Authorization=a.token,c.get("request").resend(b.config)})}return{response:function(a){return 401===a.status?e(a):a},responseError:function(a){return 401!==a.status||((a.data||{})._issues||{}).credentials?b.reject(a):e(a)}}}return b.$inject=["session","$q","$injector","$rootScope"],b}),define("superdesk/auth/auth-service",[],function(){"use strict";function a(a,b,c,d){this.login=function(a,e){function f(a){return b.users.getById(a.user)}return d.authenticate(a,e).then(function(a){return f(a).then(function(b){return c.start(a,b),c.identity})})}}return a.$inject=["$q","api","session","authAdapter"],a}),define("superdesk/auth/session-service",["lodash"],function(a){"use strict";function b(b,c,d,e){function f(a){k&&(k.resolve(a),k=null)}function g(a){a?localStorage.setItem(l,a):localStorage.removeItem(l)}function h(a){a?localStorage.setItem(o,a):localStorage.removeItem(o)}function i(a){a?localStorage.setItem(m,a):localStorage.removeItem(m)}function j(){return localStorage.getItem(l)||null}var k,l="sess:token",m="sess:href",n="sess:user",o="sess:id",p=["session_preferences","user_preferences","allowed_actions","workspace"];this.token=null,this.identity=null,this.sessionId=null,this.getIdentity=function(){return this.identity&&this.token?b.when(this.identity):(k=k?k:b.defer(),k.promise)},this.updateIdentity=function(b){var c=this.identity||{};return a.extend(c,b),this.identity=a.omit(c,p),d.setItem(n,this.identity),this.identity},this.start=function(a,b){this.token=a.token,this.sessionId=a._id,g(a.token),h(a._id),i(a._links&&a._links.self.href),this.identity=null,f(this.updateIdentity(b)),c.$broadcast(e.LOGIN)},this.expire=function(){this.token=null,this.sessionId=null,g(null),h(null),c.$broadcast(e.LOGOUT)},this.clear=function(){this.expire(),this.identity=null,i(null),h(null),d.clear()},this.getSessionHref=function(){return localStorage.getItem(m)},this.testUser=function(a){this.token=1,this.identity={_id:a},this.sessionId="s"+a},c.$watch(j,angular.bind(this,function(a){this.token=a,this.identity=d.getItem(n),this.sessionId=localStorage.getItem(o),this.identity&&this.token&&f(this.identity)}))}return b.$inject=["$q","$rootScope","storage","SESSION_EVENTS"],b}),define("superdesk/auth/basic-auth-adapter",[],function(){"use strict";function a(a,b,c){this.authenticate=function(b,d){return c.resource("auth").then(function(c){return a.post(c,{username:b,password:d}).then(function(b){return b.data.token="Basic "+btoa(b.data.token+":"),a.defaults.headers.common.Authorization=b.data.token,b.data})})}}return a.$inject=["$http","$q","urls"],a}),define("superdesk/auth/login-modal-directive",[],function(){"use strict";function a(a,b,c,d,e){return{replace:!0,templateUrl:d.templateUrl("superdesk/auth/login-modal.html"),link:function(d,f,g){d.features=c,d.authenticate=function(){
d.isLoading=!0,d.loginError=null,b.login(d.username||"",d.password||"").then(function(){d.isLoading=!1,d.password=null,e.current&&e.current.redirectTo&&e.reload()},function(a){d.isLoading=!1,d.loginError=a.status,401===d.loginError&&(d.password=null)})},d.$watchGroup([function(){return a.token},"requiredLogin"],function(b){if(d.isLoading=!1,d.identity=a.identity,d.sessionId=a.sessionId,d.username=a.identity?a.identity.UserName:null,d.password=null,b[0]||b[1]!==!0)d.active=!1;else{d.active=!0;var c=d.username?"password":"username";f.find("#login-"+c).focus()}})}}}return a.$inject=["session","auth","features","asset","$route"],a}),define("superdesk/auth/auth",["angular","require","./auth-interceptor","./auth-service","./session-service","./basic-auth-adapter","./login-modal-directive"],function(a,b,c){"use strict";function d(a,b,c,d,e){a.isSending=!1,a.isReseting=!1;var f=function(){a.email="",a.token="",a.password="",a.passwordConfirm=""};a.sendToken=function(){a.sendTokenError=null,c.resetPassword.create({email:a.email}).then(function(b){d.success(e("Link sent. Please check your email inbox.")),a.flowStep=2},function(b){a.sendTokenError=b.status}),f()},a.resetPassword=function(){a.setPasswordError=null,c.resetPassword.create({token:a.token,password:a.password}).then(function(a){d.success(e("Password is changed. You can login using your new password.")),b.path("/").search({})},function(b){a.setPasswordError=b.status}),f()},f();var g=b.search();g.token?c.resetPassword.create({token:g.token}).then(function(b){a.token=g.token,a.flowStep=3},function(b){a.setPasswordError=b.status,a.flowStep=1}):a.flowStep=1}return d.$inject=["$scope","$location","api","notify","gettext"],a.module("superdesk.session",[]).constant("SESSION_EVENTS",{LOGIN:"login",LOGOUT:"logout"}).service("session",b("./session-service")),a.module("superdesk.auth",["superdesk.features","superdesk.activity","superdesk.session","superdesk.asset"]).service("auth",b("./auth-service")).service("authAdapter",b("./basic-auth-adapter")).directive("sdLoginModal",b("./login-modal-directive")).config(["$httpProvider","superdeskProvider","assetProvider",function(a,b,e){a.interceptors.push(c),b.activity("/reset-password/",{controller:d,templateUrl:e.templateUrl("superdesk/auth/reset-password.html"),auth:!1})}]).config(["apiProvider",function(a){a.api("resetPassword",{type:"http",backend:{rel:"reset_user_password"}}),a.api("auth",{type:"http",backend:{rel:"auth"}})}]).run(["$rootScope","$route","$location","$http","$window","session","api",function(a,b,c,d,e,f,g){a.logout=function(){function a(){f.clear(),e.location.replace("/")}g.auth.getById(f.sessionId).then(function(b){g.auth.remove(b).then(a,a)})},a.$watch(function(){return f.identity},function(b){a.currentUser=f.identity}),a.$watch(function(){return f.token},function(b){b?(d.defaults.headers.common.Authorization=b,a.sessionId=f.sessionId):(delete d.defaults.headers.common.Authorization,a.sessionId=null)})}])}),define("superdesk/beta/beta",["angular","jquery"],function(a,b){"use strict";function c(a,c,d){var e={},f=/sd-beta/,g=/\.html$|\.html\?/i;return{response:function(a){var h=a.config.url;if(!e[h]&&g.test(h)&&f.test(a.data)){var i=b("<div>").append(a.data);return d.isBeta().then(function(d){return d||i.find("[sd-beta]").each(function(){b(this).remove()}),a.data=i.html(),c.put(h,a.data),e[h]=!0,a},function(){return a.data=i.html(),c.put(h,a.data),e[h]=!0,a})}return a}}}var d=a.module("superdesk.services.beta",["superdesk.preferences"]);return d.service("betaService",["$window","$rootScope","$q","preferencesService",function(a,b,c,d){b.beta=null,this.toggleBeta=function(){var c={"feature:preview":{"default":!1,enabled:!b.beta,label:"Enable Feature Preview",type:"bool",category:"feature"}};d.update(c,"feature:preview").then(function(){b.beta=!b.beta,a.location.reload()})},this.isBeta=function(){return null==b.beta?d.get("feature:preview").then(function(a){return b.beta=a&&a.enabled,b.beta},function(){return c.when(!1)}):c.when(b.beta)}}]),d.config(["$httpProvider",function(a){a.interceptors.push(c)}]),c.$inject=["$q","$templateCache","betaService"],d}),define("superdesk/config/config",["angular"],function(a){"use strict";var b={server:{url:null},ws:{url:null}};return a.module("superdesk.config",[]).constant("config",b)}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define("moment",b):a.moment=b()}(this,function(){"use strict";function a(){return Hc.apply(null,arguments)}function b(a){Hc=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return Ca(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!(isNaN(a._d.getTime())||!(b.overflow<0)||b.empty||b.invalidMonth||b.invalidWeekday||b.nullInput||b.invalidFormat||b.userInvalidated),a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=j(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Jc.length>0)for(c in Jc)d=Jc[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(b){m(this,b),this._d=new Date(null!=b._d?b._d.getTime():NaN),Kc===!1&&(Kc=!0,a.updateOffset(this),Kc=!1)}function o(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function p(a){return 0>a?Math.ceil(a):Math.floor(a)}function q(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=p(b)),c}function r(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&q(a[d])!==q(b[d]))&&g++;return g+f}function s(){}function t(a){return a?a.toLowerCase().replace("_","-"):a}function u(a){for(var b,c,d,e,f=0;f<a.length;){for(e=t(a[f]).split("-"),b=e.length,c=t(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=v(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&r(e,c,!0)>=b-1)break;b--}f++}return null}function v(a){var b=null;if(!Lc[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Ic._abbr,require("./locale/"+a),w(b)}catch(c){}return Lc[a]}function w(a,b){var c;return a&&(c="undefined"==typeof b?y(a):x(a,b),c&&(Ic=c)),Ic._abbr}function x(a,b){return null!==b?(b.abbr=a,Lc[a]=Lc[a]||new s,Lc[a].set(b),w(a),Lc[a]):(delete Lc[a],null)}function y(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Ic;if(!c(a)){if(b=v(a))return b;a=[a]}return u(a)}function z(a,b){var c=a.toLowerCase();Mc[c]=Mc[c+"s"]=Mc[b]=a}function A(a){return"string"==typeof a?Mc[a]||Mc[a.toLowerCase()]:void 0}function B(a){var b,c,d={};for(c in a)f(a,c)&&(b=A(c),b&&(d[b]=a[c]));return d}function C(b,c){return function(d){return null!=d?(E(this,b,d),a.updateOffset(this,c),this):D(this,b)}}function D(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function E(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function F(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=A(a),"function"==typeof this[a])return this[a](b);return this}function G(a,b,c){var d=""+Math.abs(a),e=b-d.length,f=a>=0;return(f?c?"+":"":"-")+Math.pow(10,Math.max(0,e)).toString().substr(1)+d}function H(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Qc[a]=e),b&&(Qc[b[0]]=function(){return G(e.apply(this,arguments),b[1],b[2])}),c&&(Qc[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function I(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function J(a){var b,c,d=a.match(Nc);for(b=0,c=d.length;c>b;b++)Qc[d[b]]?d[b]=Qc[d[b]]:d[b]=I(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function K(a,b){return a.isValid()?(b=L(b,a.localeData()),Pc[b]=Pc[b]||J(b),Pc[b](a)):a.localeData().invalidDate()}function L(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Oc.lastIndex=0;d>=0&&Oc.test(a);)a=a.replace(Oc,c),Oc.lastIndex=0,d-=1;return a}function M(a){return"function"==typeof a&&"[object Function]"===Object.prototype.toString.call(a)}function N(a,b,c){dd[a]=M(b)?b:function(a){return a&&c?c:b}}function O(a,b){return f(dd,a)?dd[a](b._strict,b._locale):new RegExp(P(a))}function P(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=q(a)}),c=0;c<a.length;c++)ed[a[c]]=d}function R(a,b){Q(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function S(a,b,c){null!=b&&f(ed,a)&&ed[a](b,c._a,c,a)}function T(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function U(a){return this._months[a.month()]}function V(a){return this._monthsShort[a.month()]}function W(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function X(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),T(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function Y(b){return null!=b?(X(this,b),a.updateOffset(this,!0),this):D(this,"Month")}function Z(){return T(this.year(),this.month())}function $(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[gd]<0||c[gd]>11?gd:c[hd]<1||c[hd]>T(c[fd],c[gd])?hd:c[id]<0||c[id]>24||24===c[id]&&(0!==c[jd]||0!==c[kd]||0!==c[ld])?id:c[jd]<0||c[jd]>59?jd:c[kd]<0||c[kd]>59?kd:c[ld]<0||c[ld]>999?ld:-1,j(a)._overflowDayOfYear&&(fd>b||b>hd)&&(b=hd),j(a).overflow=b),a}function _(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function aa(a,b){var c=!0;return g(function(){return c&&(_(a+"\n"+(new Error).stack),c=!1),b.apply(this,arguments)},b)}function ba(a,b){od[a]||(_(b),od[a]=!0)}function ca(a){var b,c,d=a._i,e=pd.exec(d);if(e){for(j(a).iso=!0,b=0,c=qd.length;c>b;b++)if(qd[b][1].exec(d)){a._f=qd[b][0];break}for(b=0,c=rd.length;c>b;b++)if(rd[b][1].exec(d)){a._f+=(e[6]||" ")+rd[b][0];break}d.match(ad)&&(a._f+="Z"),va(a)}else a._isValid=!1}function da(b){var c=sd.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(ca(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ea(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function fa(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ga(a){return ha(a)?366:365}function ha(a){return a%4===0&&a%100!==0||a%400===0}function ia(){return ha(this.year())}function ja(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Da(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ka(a){return ja(a,this._week.dow,this._week.doy).week}function la(){return this._week.dow}function ma(){return this._week.doy}function na(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function oa(a){var b=ja(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function pa(a,b,c,d,e){var f,g=6+e-d,h=fa(a,0,1+g),i=h.getUTCDay();return e>i&&(i+=7),c=null!=c?1*c:e,f=1+g+7*(b-1)-i+c,{year:f>0?a:a-1,dayOfYear:f>0?f:ga(a-1)+f}}function qa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function ra(a,b,c){return null!=a?a:null!=b?b:c}function sa(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function ta(a){var b,c,d,e,f=[];if(!a._d){for(d=sa(a),a._w&&null==a._a[hd]&&null==a._a[gd]&&ua(a),a._dayOfYear&&(e=ra(a._a[fd],d[fd]),a._dayOfYear>ga(e)&&(j(a)._overflowDayOfYear=!0),c=fa(e,0,a._dayOfYear),a._a[gd]=c.getUTCMonth(),a._a[hd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[id]&&0===a._a[jd]&&0===a._a[kd]&&0===a._a[ld]&&(a._nextDay=!0,a._a[id]=0),a._d=(a._useUTC?fa:ea).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[id]=24)}}function ua(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=ra(b.GG,a._a[fd],ja(Da(),1,4).year),d=ra(b.W,1),e=ra(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=ra(b.gg,a._a[fd],ja(Da(),f,g).year),d=ra(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=pa(c,d,e,g,f),a._a[fd]=h.year,a._dayOfYear=h.dayOfYear}function va(b){if(b._f===a.ISO_8601)return void ca(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=L(b._f,b._locale).match(Nc)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(O(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),Qc[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),S(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[id]<=12&&b._a[id]>0&&(j(b).bigHour=void 0),b._a[id]=wa(b._locale,b._a[id],b._meridiem),ta(b),$(b)}function wa(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function xa(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=m({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],va(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function ya(a){if(!a._d){var b=B(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],ta(a)}}function za(a){var b=new n($(Aa(a)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Aa(a){var b=a._i,e=a._f;return a._locale=a._locale||y(a._l),null===b||void 0===e&&""===b?l({nullInput:!0}):("string"==typeof b&&(a._i=b=a._locale.preparse(b)),o(b)?new n($(b)):(c(e)?xa(a):e?va(a):d(b)?a._d=b:Ba(a),a))}function Ba(b){var f=b._i;void 0===f?b._d=new Date:d(f)?b._d=new Date(+f):"string"==typeof f?da(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ta(b)):"object"==typeof f?ya(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function Ca(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,za(f)}function Da(a,b,c,d){return Ca(a,b,c,d,!1)}function Ea(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Da();for(d=b[0],e=1;e<b.length;++e)(!b[e].isValid()||b[e][a](d))&&(d=b[e]);return d}function Fa(){var a=[].slice.call(arguments,0);return Ea("isBefore",a)}function Ga(){var a=[].slice.call(arguments,0);return Ea("isAfter",a)}function Ha(a){var b=B(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=y(),this._bubble()}function Ia(a){return a instanceof Ha}function Ja(a,b){H(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+G(~~(a/60),2)+b+G(~~a%60,2)})}function Ka(a){var b=(a||"").match(ad)||[],c=b[b.length-1]||[],d=(c+"").match(xd)||["-",0,0],e=+(60*d[1])+q(d[2]);return"+"===d[0]?e:-e}function La(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(o(b)||d(b)?+b:+Da(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Da(b).local()}function Ma(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Na(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Ka(b)),Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ma(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?bb(this,Ya(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ma(this)}function Oa(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Pa(a){return this.utcOffset(0,a)}function Qa(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ma(this),"m")),this}function Ra(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ka(this._i)),this}function Sa(a){return a=a?Da(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Ta(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ua(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var a={};if(m(a,this),a=Aa(a),a._a){var b=a._isUTC?h(a._a):Da(a._a);this._isDSTShifted=this.isValid()&&r(a._a,b.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Va(){return!this._isUTC}function Wa(){return this._isUTC}function Xa(){return this._isUTC&&0===this._offset}function Ya(a,b){var c,d,e,g=a,h=null;return Ia(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=yd.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:q(h[hd])*c,h:q(h[id])*c,m:q(h[jd])*c,s:q(h[kd])*c,ms:q(h[ld])*c}):(h=zd.exec(a))?(c="-"===h[1]?-1:1,g={y:Za(h[2],c),M:Za(h[3],c),d:Za(h[4],c),h:Za(h[5],c),m:Za(h[6],c),s:Za(h[7],c),w:Za(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=_a(Da(g.from),Da(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ha(g),Ia(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function Za(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function $a(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function _a(a,b){var c;return b=La(b,a),a.isBefore(b)?c=$a(a,b):(c=$a(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function ab(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(ba(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Ya(c,d),bb(this,e,a),this}}function bb(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&E(b,"Date",D(b,"Date")+g*d),h&&X(b,D(b,"Month")+h*d),e&&a.updateOffset(b,g||h)}function cb(a,b){var c=a||Da(),d=La(c,this).startOf("day"),e=this.diff(d,"days",!0),f=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(b&&b[f]||this.localeData().calendar(f,this,Da(c)))}function db(){return new n(this)}function eb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this>+a):(c=o(a)?+a:+Da(a),c<+this.clone().startOf(b))}function fb(a,b){var c;return b=A("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+a>+this):(c=o(a)?+a:+Da(a),+this.clone().endOf(b)<c)}function gb(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function hb(a,b){var c;return b=A(b||"millisecond"),"millisecond"===b?(a=o(a)?a:Da(a),+this===+a):(c=+Da(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function ib(a,b,c){var d,e,f=La(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=A(b),"year"===b||"month"===b||"quarter"===b?(e=jb(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:p(e)}function jb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function kb(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function lb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():K(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):K(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function mb(b){var c=K(this,b||a.defaultFormat);return this.localeData().postformat(c)}function nb(a,b){return this.isValid()?Ya({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ob(a){return this.from(Da(),a)}function pb(a,b){return this.isValid()?Ya({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function qb(a){return this.to(Da(),a)}function rb(a){var b;return void 0===a?this._locale._abbr:(b=y(a),null!=b&&(this._locale=b),this)}function sb(){return this._locale}function tb(a){switch(a=A(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function ub(a){return a=A(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function vb(){return+this._d-6e4*(this._offset||0)}function wb(){return Math.floor(+this/1e3)}function xb(){return this._offset?new Date(+this):this._d}function yb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function zb(){var a=this;return{years:a.year(),months:a.month(),date:a.date(),hours:a.hours(),minutes:a.minutes(),seconds:a.seconds(),milliseconds:a.milliseconds()}}function Ab(){return k(this)}function Bb(){return g({},j(this))}function Cb(){return j(this).overflow}function Db(a,b){H(0,[a,a.length],0,b)}function Eb(a,b,c){return ja(Da([a,11,31+b-c]),b,c).week}function Fb(a){var b=ja(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Gb(a){var b=ja(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Hb(){return Eb(this.year(),1,4)}function Ib(){var a=this.localeData()._week;return Eb(this.year(),a.dow,a.doy)}function Jb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Kb(a,b){return"string"!=typeof a?a:isNaN(a)?(a=b.weekdaysParse(a),"number"==typeof a?a:null):parseInt(a,10)}function Lb(a){return this._weekdays[a.day()]}function Mb(a){return this._weekdaysShort[a.day()]}function Nb(a){return this._weekdaysMin[a.day()]}function Ob(a){var b,c,d;for(this._weekdaysParse=this._weekdaysParse||[],b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Pb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Kb(a,this.localeData()),this.add(a-b,"d")):b}function Qb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Rb(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Sb(a,b){H(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Tb(a,b){return b._meridiemParse}function Ub(a){return"p"===(a+"").toLowerCase().charAt(0)}function Vb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Wb(a,b){b[ld]=q(1e3*("0."+a))}function Xb(){return this._isUTC?"UTC":""}function Yb(){return this._isUTC?"Coordinated Universal Time":""}function Zb(a){return Da(1e3*a)}function $b(){return Da.apply(null,arguments).parseZone()}function _b(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function ac(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];return b||!c?b:(this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a])}function bc(){return this._invalidDate}function cc(a){return this._ordinal.replace("%d",a)}function dc(a){return a}function ec(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function fc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function gc(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function hc(a,b,c,d){var e=y(),f=h().set(d,b);return e[c](f,a)}function ic(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return hc(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=hc(a,f,c,e);return g}function jc(a,b){return ic(a,b,"months",12,"month")}function kc(a,b){return ic(a,b,"monthsShort",12,"month")}function lc(a,b){return ic(a,b,"weekdays",7,"day")}function mc(a,b){return ic(a,b,"weekdaysShort",7,"day")}function nc(a,b){return ic(a,b,"weekdaysMin",7,"day")}function oc(){var a=this._data;return this._milliseconds=Wd(this._milliseconds),this._days=Wd(this._days),this._months=Wd(this._months),a.milliseconds=Wd(a.milliseconds),a.seconds=Wd(a.seconds),a.minutes=Wd(a.minutes),a.hours=Wd(a.hours),a.months=Wd(a.months),a.years=Wd(a.years),this}function pc(a,b,c,d){var e=Ya(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function qc(a,b){return pc(this,a,b,1)}function rc(a,b){return pc(this,a,b,-1)}function sc(a){return 0>a?Math.floor(a):Math.ceil(a)}function tc(){var a,b,c,d,e,f=this._milliseconds,g=this._days,h=this._months,i=this._data;return f>=0&&g>=0&&h>=0||0>=f&&0>=g&&0>=h||(f+=864e5*sc(vc(h)+g),g=0,h=0),i.milliseconds=f%1e3,a=p(f/1e3),i.seconds=a%60,b=p(a/60),i.minutes=b%60,c=p(b/60),i.hours=c%24,g+=p(c/24),e=p(uc(g)),h+=e,g-=sc(vc(e)),d=p(h/12),h%=12,i.days=g,i.months=h,i.years=d,this}function uc(a){return 4800*a/146097}function vc(a){return 146097*a/4800}function wc(a){var b,c,d=this._milliseconds;if(a=A(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+uc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(vc(this._months)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function xc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*q(this._months/12)}function yc(a){return function(){return this.as(a)}}function zc(a){return a=A(a),this[a+"s"]()}function Ac(a){return function(){return this._data[a]}}function Bc(){return p(this.days()/7)}function Cc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Dc(a,b,c){var d=Ya(a).abs(),e=ke(d.as("s")),f=ke(d.as("m")),g=ke(d.as("h")),h=ke(d.as("d")),i=ke(d.as("M")),j=ke(d.as("y")),k=e<le.s&&["s",e]||1===f&&["m"]||f<le.m&&["mm",f]||1===g&&["h"]||g<le.h&&["hh",g]||1===h&&["d"]||h<le.d&&["dd",h]||1===i&&["M"]||i<le.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,Cc.apply(null,k)}function Ec(a,b){return void 0===le[a]?!1:void 0===b?le[a]:(le[a]=b,!0)}function Fc(a){var b=this.localeData(),c=Dc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Gc(){var a,b,c,d=me(this._milliseconds)/1e3,e=me(this._days),f=me(this._months);a=p(d/60),b=p(a/60),d%=60,a%=60,c=p(f/12),f%=12;var g=c,h=f,i=e,j=b,k=a,l=d,m=this.asSeconds();return m?(0>m?"-":"")+"P"+(g?g+"Y":"")+(h?h+"M":"")+(i?i+"D":"")+(j||k||l?"T":"")+(j?j+"H":"")+(k?k+"M":"")+(l?l+"S":""):"P0D"}var Hc,Ic,Jc=a.momentProperties=[],Kc=!1,Lc={},Mc={},Nc=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Oc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Pc={},Qc={},Rc=/\d/,Sc=/\d\d/,Tc=/\d{3}/,Uc=/\d{4}/,Vc=/[+-]?\d{6}/,Wc=/\d\d?/,Xc=/\d{1,3}/,Yc=/\d{1,4}/,Zc=/[+-]?\d{1,6}/,$c=/\d+/,_c=/[+-]?\d+/,ad=/Z|[+-]\d\d:?\d\d/gi,bd=/[+-]?\d+(\.\d{1,3})?/,cd=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,dd={},ed={},fd=0,gd=1,hd=2,id=3,jd=4,kd=5,ld=6;H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),H("MMMM",0,0,function(a){return this.localeData().months(this,a)}),z("month","M"),N("M",Wc),N("MM",Wc,Sc),N("MMM",cd),N("MMMM",cd),Q(["M","MM"],function(a,b){b[gd]=q(a)-1}),Q(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[gd]=e:j(c).invalidMonth=a});var md="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),nd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),od={};a.suppressDeprecationWarnings=!1;var pd=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qd=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],rd=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],sd=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=aa("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),z("year","y"),N("Y",_c),N("YY",Wc,Sc),N("YYYY",Yc,Uc),N("YYYYY",Zc,Vc),N("YYYYYY",Zc,Vc),Q(["YYYYY","YYYYYY"],fd),Q("YYYY",function(b,c){c[fd]=2===b.length?a.parseTwoDigitYear(b):q(b)}),Q("YY",function(b,c){c[fd]=a.parseTwoDigitYear(b)}),a.parseTwoDigitYear=function(a){return q(a)+(q(a)>68?1900:2e3)};var td=C("FullYear",!1);H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),N("w",Wc),N("ww",Wc,Sc),N("W",Wc),N("WW",Wc,Sc),R(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=q(a)});var ud={dow:0,doy:6};H("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),N("DDD",Xc),N("DDDD",Tc),Q(["DDD","DDDD"],function(a,b,c){c._dayOfYear=q(a)}),a.ISO_8601=function(){};var vd=aa("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return this>a?this:a}),wd=aa("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Da.apply(null,arguments);return a>this?this:a});Ja("Z",":"),
Ja("ZZ",""),N("Z",ad),N("ZZ",ad),Q(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ka(a)});var xd=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var yd=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,zd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Ya.fn=Ha.prototype;var Ad=ab(1,"add"),Bd=ab(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Cd=aa("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Db("gggg","weekYear"),Db("ggggg","weekYear"),Db("GGGG","isoWeekYear"),Db("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),N("G",_c),N("g",_c),N("GG",Wc,Sc),N("gg",Wc,Sc),N("GGGG",Yc,Uc),N("gggg",Yc,Uc),N("GGGGG",Zc,Vc),N("ggggg",Zc,Vc),R(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=q(a)}),R(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),H("Q",0,0,"quarter"),z("quarter","Q"),N("Q",Rc),Q("Q",function(a,b){b[gd]=3*(q(a)-1)}),H("D",["DD",2],"Do","date"),z("date","D"),N("D",Wc),N("DD",Wc,Sc),N("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),Q(["D","DD"],hd),Q("Do",function(a,b){b[hd]=q(a.match(Wc)[0],10)});var Dd=C("Date",!0);H("d",0,"do","day"),H("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),H("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),H("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),N("d",Wc),N("e",Wc),N("E",Wc),N("dd",cd),N("ddd",cd),N("dddd",cd),R(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:j(c).invalidWeekday=a}),R(["d","e","E"],function(a,b,c,d){b[d]=q(a)});var Ed="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Fd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Gd="Su_Mo_Tu_We_Th_Fr_Sa".split("_");H("H",["HH",2],0,"hour"),H("h",["hh",2],0,function(){return this.hours()%12||12}),Sb("a",!0),Sb("A",!1),z("hour","h"),N("a",Tb),N("A",Tb),N("H",Wc),N("h",Wc),N("HH",Wc,Sc),N("hh",Wc,Sc),Q(["H","HH"],id),Q(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),Q(["h","hh"],function(a,b,c){b[id]=q(a),j(c).bigHour=!0});var Hd=/[ap]\.?m?\.?/i,Id=C("Hours",!0);H("m",["mm",2],0,"minute"),z("minute","m"),N("m",Wc),N("mm",Wc,Sc),Q(["m","mm"],jd);var Jd=C("Minutes",!1);H("s",["ss",2],0,"second"),z("second","s"),N("s",Wc),N("ss",Wc,Sc),Q(["s","ss"],kd);var Kd=C("Seconds",!1);H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),N("S",Xc,Rc),N("SS",Xc,Sc),N("SSS",Xc,Tc);var Ld;for(Ld="SSSS";Ld.length<=9;Ld+="S")N(Ld,$c);for(Ld="S";Ld.length<=9;Ld+="S")Q(Ld,Wb);var Md=C("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var Nd=n.prototype;Nd.add=Ad,Nd.calendar=cb,Nd.clone=db,Nd.diff=ib,Nd.endOf=ub,Nd.format=mb,Nd.from=nb,Nd.fromNow=ob,Nd.to=pb,Nd.toNow=qb,Nd.get=F,Nd.invalidAt=Cb,Nd.isAfter=eb,Nd.isBefore=fb,Nd.isBetween=gb,Nd.isSame=hb,Nd.isValid=Ab,Nd.lang=Cd,Nd.locale=rb,Nd.localeData=sb,Nd.max=wd,Nd.min=vd,Nd.parsingFlags=Bb,Nd.set=F,Nd.startOf=tb,Nd.subtract=Bd,Nd.toArray=yb,Nd.toObject=zb,Nd.toDate=xb,Nd.toISOString=lb,Nd.toJSON=lb,Nd.toString=kb,Nd.unix=wb,Nd.valueOf=vb,Nd.year=td,Nd.isLeapYear=ia,Nd.weekYear=Fb,Nd.isoWeekYear=Gb,Nd.quarter=Nd.quarters=Jb,Nd.month=Y,Nd.daysInMonth=Z,Nd.week=Nd.weeks=na,Nd.isoWeek=Nd.isoWeeks=oa,Nd.weeksInYear=Ib,Nd.isoWeeksInYear=Hb,Nd.date=Dd,Nd.day=Nd.days=Pb,Nd.weekday=Qb,Nd.isoWeekday=Rb,Nd.dayOfYear=qa,Nd.hour=Nd.hours=Id,Nd.minute=Nd.minutes=Jd,Nd.second=Nd.seconds=Kd,Nd.millisecond=Nd.milliseconds=Md,Nd.utcOffset=Na,Nd.utc=Pa,Nd.local=Qa,Nd.parseZone=Ra,Nd.hasAlignedHourOffset=Sa,Nd.isDST=Ta,Nd.isDSTShifted=Ua,Nd.isLocal=Va,Nd.isUtcOffset=Wa,Nd.isUtc=Xa,Nd.isUTC=Xa,Nd.zoneAbbr=Xb,Nd.zoneName=Yb,Nd.dates=aa("dates accessor is deprecated. Use date instead.",Dd),Nd.months=aa("months accessor is deprecated. Use month instead",Y),Nd.years=aa("years accessor is deprecated. Use year instead",td),Nd.zone=aa("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Oa);var Od=Nd,Pd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Qd={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Rd="Invalid date",Sd="%d",Td=/\d{1,2}/,Ud={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Vd=s.prototype;Vd._calendar=Pd,Vd.calendar=_b,Vd._longDateFormat=Qd,Vd.longDateFormat=ac,Vd._invalidDate=Rd,Vd.invalidDate=bc,Vd._ordinal=Sd,Vd.ordinal=cc,Vd._ordinalParse=Td,Vd.preparse=dc,Vd.postformat=dc,Vd._relativeTime=Ud,Vd.relativeTime=ec,Vd.pastFuture=fc,Vd.set=gc,Vd.months=U,Vd._months=md,Vd.monthsShort=V,Vd._monthsShort=nd,Vd.monthsParse=W,Vd.week=ka,Vd._week=ud,Vd.firstDayOfYear=ma,Vd.firstDayOfWeek=la,Vd.weekdays=Lb,Vd._weekdays=Ed,Vd.weekdaysMin=Nb,Vd._weekdaysMin=Gd,Vd.weekdaysShort=Mb,Vd._weekdaysShort=Fd,Vd.weekdaysParse=Ob,Vd.isPM=Ub,Vd._meridiemParse=Hd,Vd.meridiem=Vb,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===q(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=aa("moment.lang is deprecated. Use moment.locale instead.",w),a.langData=aa("moment.langData is deprecated. Use moment.localeData instead.",y);var Wd=Math.abs,Xd=yc("ms"),Yd=yc("s"),Zd=yc("m"),$d=yc("h"),_d=yc("d"),ae=yc("w"),be=yc("M"),ce=yc("y"),de=Ac("milliseconds"),ee=Ac("seconds"),fe=Ac("minutes"),ge=Ac("hours"),he=Ac("days"),ie=Ac("months"),je=Ac("years"),ke=Math.round,le={s:45,m:45,h:22,d:26,M:11},me=Math.abs,ne=Ha.prototype;ne.abs=oc,ne.add=qc,ne.subtract=rc,ne.as=wc,ne.asMilliseconds=Xd,ne.asSeconds=Yd,ne.asMinutes=Zd,ne.asHours=$d,ne.asDays=_d,ne.asWeeks=ae,ne.asMonths=be,ne.asYears=ce,ne.valueOf=xc,ne._bubble=tc,ne.get=zc,ne.milliseconds=de,ne.seconds=ee,ne.minutes=fe,ne.hours=ge,ne.days=he,ne.weeks=Bc,ne.months=ie,ne.years=je,ne.humanize=Fc,ne.toISOString=Gc,ne.toString=Gc,ne.toJSON=Gc,ne.locale=rb,ne.localeData=sb,ne.toIsoString=aa("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Gc),ne.lang=Cd,H("X",0,0,"unix"),H("x",0,0,"valueOf"),N("x",_c),N("X",bd),Q("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),Q("x",function(a,b,c){c._d=new Date(q(a))}),a.version="2.10.6",b(Da),a.fn=Od,a.min=Fa,a.max=Ga,a.utc=h,a.unix=Zb,a.months=jc,a.isDate=d,a.locale=w,a.invalid=l,a.duration=Ya,a.isMoment=o,a.weekdays=lc,a.parseZone=$b,a.localeData=y,a.isDuration=Ia,a.monthsShort=kc,a.weekdaysMin=nc,a.defineLocale=x,a.weekdaysShort=mc,a.normalizeUnits=A,a.relativeTimeThreshold=Ec;var oe=a;return oe}),define("superdesk/datetime/group-dates-directive",["moment"],function(a){"use strict";return function(){var b=null,c="YYYY-M-D",d="D. MMMM YYYY",e="D. MMMM",f="dddd, ",g="[Today], ";return{require:"ngModel",link:function(h,i,j,k){k.$render=function(){var l=a.utc(k.$viewValue[j.sdGroupDates]);if(h.$first||b.format(c)!==l.format(c)){var m,n;n=a().format(c)===l.format(c)?l.format(g):l.format(f),m=a().format("YYYY")===l.format("YYYY")?l.format(e):l.format(d),i.prepend('<div class="date"><span>'+n+m+"</span></div>"),i.addClass("with-date"),b=l}}}}}}),define("superdesk/datetime/reldate-directive",["moment"],function(a){"use strict";return function(){return{require:"ngModel",template:'<time datetime="{{ datetime }}" title="{{ title }}">{{ reldate }}</time>',replate:!0,link:function(b,c,d,e){e.$render=function(){var c=a.utc(e.$viewValue);b.datetime=c.toISOString(),c.local(),b.title=c.format("LLLL"),b.reldate=c.fromNow()}}}}}),define("superdesk/datetime/reldate-directive-complex",["moment"],function(a){"use strict";return function(){var b="YYYY-M-D",c="D. MMMM YYYY [at] HH:mm",d="D. MMMM [at] HH:mm",e="dddd, ",f="[Today], ";return{require:"ngModel",template:'<time datetime="{{ datetime }}"><span>{{ rday }}{{ rdate }}</span></time>',replate:!0,link:function(g,h,i,j){j.$render=function(){var h=a.utc(j.$viewValue);g.datetime=h.toISOString(),h.local(),a().format(b)===h.format(b)?g.rday=h.format(f):g.rday=h.format(e),a().format("YYYY")===h.format("YYYY")?g.rdate=h.format(d):g.rdate=h.format(c)}}}}}),define("superdesk/datetime/absdate-directive",["moment"],function(a){"use strict";return function(){var b="YYYY-M-D",c="D. MMMM YYYY HH:mm",d="D. MMMM HH:mm",e="dddd, ",f="[Today], ";return{require:"ngModel",template:'<time datetime="{{ datetime }}"><span>{{ rday }}{{ rdate }}</span></time>',link:function(g,h,i,j){j.$render=function(){var h=a.utc(j.$viewValue);g.datetime=h.toISOString(),h.local(),a().format(b)===h.format(b)?g.rday=h.format(f):g.rday=h.format(e),a().format("YYYY")===h.format("YYYY")?g.rdate=h.format(d):g.rdate=h.format(c)}}}}}),define("superdesk/datetime/datetime",["angular","moment","require","./group-dates-directive","./reldate-directive","./reldate-directive-complex","./absdate-directive"],function(a,b,c){"use strict";function d(){return{scope:{date:"="},link:function(a,c){function d(a){var d=b(a);c.text(d.fromNow()),c.attr("title",d.format("LLLL"))}a.$watch("date",d)}}}return a.module("superdesk.datetime",[]).directive("sdGroupDates",c("./group-dates-directive")).directive("sdReldate",c("./reldate-directive")).directive("sdReldateComplex",c("./reldate-directive-complex")).directive("sdAbsdate",c("./absdate-directive")).directive("sdDatetime",d).filter("reldate",function(){return function(a){return b(a).fromNow()}}).constant("moment",b).factory("weekdays",["gettext",function(a){return Object.freeze({MON:a("Monday"),TUE:a("Tuesday"),WED:a("Wednesday"),THU:a("Thursday"),FRI:a("Friday"),SAT:a("Saturday"),SUN:a("Sunday")})}])}),define("superdesk/elastic/es",[],function(){"use strict";function a(){function a(a,b){var d=b.page||1;return a.size=b.size||c,a.from=(d-1)*a.size,a}function b(b,c){var d={filtered:{}};return c&&c.length&&(d.filtered.filter={and:c}),b.q&&(d.filtered.query={query_string:{query:b.q}}),a({query:d},b)}var c=25;return b}return a}),define("superdesk/elastic/elastic",["angular","./es"],function(a,b){"use strict";return a.module("superdesk.elastic",[]).service("es",b)}),function(a,b){"use strict";function c(a,b){var c,d;b=b||{},a="raven"+a.substr(0,1).toUpperCase()+a.substr(1),document.createEvent?(c=document.createEvent("HTMLEvents"),c.initEvent(a,!0,!0)):(c=document.createEventObject(),c.eventType=a);for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);if(document.createEvent)document.dispatchEvent(c);else try{document.fireEvent("on"+c.eventType.toLowerCase(),c)}catch(e){}}function d(a){this.name="RavenConfigError",this.message=a}function e(a){var b=L.exec(a),c={},e=7;try{for(;e--;)c[K[e]]=b[e]||""}catch(f){throw new d("Invalid DSN: "+a)}if(c.pass)throw new d("Do not specify your private key in the DSN!");return c}function f(a){return"undefined"==typeof a}function g(a){return"function"==typeof a}function h(a){return"string"==typeof a}function i(a){for(var b in a)return!1;return!0}function j(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function k(a,b){var c,d;if(f(a.length))for(c in a)a.hasOwnProperty(c)&&b.call(null,c,a[c]);else if(d=a.length)for(c=0;d>c;c++)b.call(null,c,a[c])}function l(){if(M)return M;var a=["sentry_version=4","sentry_client=raven-js/"+J.VERSION];return E&&a.push("sentry_key="+E),M="?"+a.join("&")}function m(a,b){var d=[];a.stack&&a.stack.length&&k(a.stack,function(a,b){var c=n(b);c&&d.push(c)}),c("handle",{stackInfo:a,options:b}),p(a.name,a.message,a.url,a.lineno,d,b)}function n(a){if(a.url){var b,c={filename:a.url,lineno:a.line,colno:a.column,"function":a.func||"?"},d=o(a);if(d){var e=["pre_context","context_line","post_context"];for(b=3;b--;)c[e[b]]=d[b]}return c.in_app=!(!I.includePaths.test(c.filename)||/(Raven|TraceKit)\./.test(c["function"])||/raven\.(min\.)js$/.test(c.filename)),c}}function o(a){if(a.context&&I.fetchContext){for(var b=a.context,c=~~(b.length/2),d=b.length,e=!1;d--;)if(b[d].length>300){e=!0;break}if(e){if(f(a.column))return;return[[],b[c].substr(a.column,50),[]]}return[b.slice(0,c),b[c],b.slice(c+1)]}}function p(a,b,c,d,e,f){var g,h;b&&(I.ignoreErrors.test(b)||(e&&e.length?(c=e[0].filename||c,e.reverse(),g={frames:e}):c&&(g={frames:[{filename:c,lineno:d}]}),I.ignoreUrls&&I.ignoreUrls.test(c)||(!I.whitelistUrls||I.whitelistUrls.test(c))&&(h=d?b+" at "+d:b,s(q({exception:{type:a,value:b},stacktrace:g,culprit:c,message:h},f)))))}function q(a,b){return b?(k(b,function(b,c){a[b]=c}),a):a}function r(){var a={url:document.location.href,headers:{"User-Agent":navigator.userAgent}};return document.referrer&&(a.headers.Referer=document.referrer),a}function s(a){u()&&(a=q({project:F,logger:I.logger,site:I.site,platform:"javascript",request:r()},a),a.tags=q(I.tags,a.tags),a.extra=q(I.extra,a.extra),i(a.tags)&&delete a.tags,i(a.extra)&&delete a.extra,D&&(a.user=D),g(I.dataCallback)&&(a=I.dataCallback(a)),(!g(I.shouldSendCallback)||I.shouldSendCallback(a))&&(B=a.event_id||(a.event_id=w()),t(a)))}function t(a){var b=new Image,d=C+l()+"&sentry_data="+encodeURIComponent(JSON.stringify(a));b.onload=function(){c("success",{data:a,src:d})},b.onerror=b.onabort=function(){c("failure",{data:a,src:d})},b.src=d}function u(){return H?C?!0:(a.console&&console.error&&console.error("Error: Raven has not been configured."),!1):!1}function v(a){for(var b,c=[],d=0,e=a.length;e>d;d++)b=a[d],h(b)?c.push(b.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):b&&b.source&&c.push(b.source);return new RegExp(c.join("|"),"i")}function w(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})}var x={remoteFetching:!1,collectWindowErrors:!0,linesOfContext:7},y=[].slice,z="?";x.wrap=function(a){function b(){try{return a.apply(this,arguments)}catch(b){throw x.report(b),b}}return b},x.report=function(){function c(a){h(),o.push(a)}function d(a){for(var b=o.length-1;b>=0;--b)o[b]===a&&o.splice(b,1)}function e(){i(),o=[]}function f(a,b){var c=null;if(!b||x.collectWindowErrors){for(var d in o)if(j(o,d))try{o[d].apply(null,[a].concat(y.call(arguments,2)))}catch(e){c=e}if(c)throw c}}function g(a,b,c,d,e){var g=null;if(r)x.computeStackTrace.augmentStackTraceWithInitialElement(r,b,c,a),k();else if(e)g=x.computeStackTrace(e),f(g,!0);else{var h={url:b,line:c,column:d};h.func=x.computeStackTrace.guessFunctionName(h.url,h.line),h.context=x.computeStackTrace.gatherContext(h.url,h.line),g={message:a,url:document.location.href,stack:[h]},f(g,!0)}return m?m.apply(this,arguments):!1}function h(){n||(m=a.onerror,a.onerror=g,n=!0)}function i(){n&&(a.onerror=m,n=!1,m=b)}function k(){var a=r,b=p;p=null,r=null,q=null,f.apply(null,[a,!1].concat(b))}function l(b,c){var d=y.call(arguments,1);if(r){if(q===b)return;k()}var e=x.computeStackTrace(b);if(r=e,q=b,p=d,a.setTimeout(function(){q===b&&k()},e.incomplete?2e3:0),c!==!1)throw b}var m,n,o=[],p=null,q=null,r=null;return l.subscribe=c,l.unsubscribe=d,l.uninstall=e,l}(),x.computeStackTrace=function(){function b(b){if(!x.remoteFetching)return"";try{var c=function(){try{return new a.XMLHttpRequest}catch(b){return new a.ActiveXObject("Microsoft.XMLHTTP")}},d=c();return d.open("GET",b,!1),d.send(""),d.responseText}catch(e){return""}}function c(a){if(!h(a))return[];if(!j(v,a)){var c="";-1!==a.indexOf(document.domain)&&(c=b(a)),v[a]=c?c.split("\n"):[]}return v[a]}function d(a,b){var d,e=/function ([^(]*)\(([^)]*)\)/,g=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,h="",i=10,j=c(a);if(!j.length)return z;for(var k=0;i>k;++k)if(h=j[b-k]+h,!f(h)){if(d=g.exec(h))return d[1];if(d=e.exec(h))return d[1]}return z}function e(a,b){var d=c(a);if(!d.length)return null;var e=[],g=Math.floor(x.linesOfContext/2),h=g+x.linesOfContext%2,i=Math.max(0,b-g-1),j=Math.min(d.length,b+h-1);b-=1;for(var k=i;j>k;++k)f(d[k])||e.push(d[k]);return e.length>0?e:null}function g(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function i(a){return g(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function k(a,b){for(var d,e,f=0,g=b.length;g>f;++f)if((d=c(b[f])).length&&(d=d.join("\n"),e=a.exec(d)))return{url:b[f],line:d.substring(0,e.index).split("\n").length,column:e.index-d.lastIndexOf("\n",e.index)-1};return null}function l(a,b,d){var e,f=c(b),h=new RegExp("\\b"+g(a)+"\\b");return d-=1,f&&f.length>d&&(e=h.exec(f[d]))?e.index:null}function m(b){for(var c,d,e,f,h=[a.location.href],j=document.getElementsByTagName("script"),l=""+b,m=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,n=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,o=0;o<j.length;++o){var p=j[o];p.src&&h.push(p.src)}if(e=m.exec(l)){var q=e[1]?"\\s+"+e[1]:"",r=e[2].split(",").join("\\s*,\\s*");c=g(e[3]).replace(/;$/,";?"),d=new RegExp("function"+q+"\\s*\\(\\s*"+r+"\\s*\\)\\s*{\\s*"+c+"\\s*}")}else d=new RegExp(g(l).replace(/\s+/g,"\\s+"));if(f=k(d,h))return f;if(e=n.exec(l)){var s=e[1];if(c=i(e[2]),d=new RegExp("on"+s+"=[\\'\"]\\s*"+c+"\\s*[\\'\"]","i"),f=k(d,h[0]))return f;if(d=new RegExp(c),f=k(d,h))return f}return null}function n(a){if(!a.stack)return null;for(var b,c,g=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|https?):.*?):(\d+)(?::(\d+))?\)?\s*$/i,h=/^\s*(\S*)(?:\((.*?)\))?@((?:file|https?).*?):(\d+)(?::(\d+))?\s*$/i,i=a.stack.split("\n"),j=[],k=/^(.*) is undefined$/.exec(a.message),m=0,n=i.length;n>m;++m){if(b=h.exec(i[m]))c={url:b[3],func:b[1]||z,args:b[2]?b[2].split(","):"",line:+b[4],column:b[5]?+b[5]:null};else{if(!(b=g.exec(i[m])))continue;c={url:b[2],func:b[1]||z,line:+b[3],column:b[4]?+b[4]:null}}!c.func&&c.line&&(c.func=d(c.url,c.line)),c.line&&(c.context=e(c.url,c.line)),j.push(c)}return j.length?(j[0].line&&!j[0].column&&k?j[0].column=l(k[1],j[0].url,j[0].line):j[0].column||f(a.columnNumber)||(j[0].column=a.columnNumber+1),{name:a.name,message:a.message,url:document.location.href,stack:j}):null}function o(a){for(var b,c=a.stacktrace,f=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,g=c.split("\n"),h=[],i=0,j=g.length;j>i;i+=2)if(b=f.exec(g[i])){var k={line:+b[1],column:+b[2],func:b[3]||b[4],args:b[5]?b[5].split(","):[],url:b[6]};if(!k.func&&k.line&&(k.func=d(k.url,k.line)),k.line)try{k.context=e(k.url,k.line)}catch(l){}k.context||(k.context=[g[i+1]]),h.push(k)}return h.length?{name:a.name,message:a.message,url:document.location.href,stack:h}:null}function p(b){var f=b.message.split("\n");if(f.length<4)return null;var g,h,l,m,n=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of function script\s*$/i,q=[],r=document.getElementsByTagName("script"),s=[];for(h in r)j(r,h)&&!r[h].src&&s.push(r[h]);for(h=2,l=f.length;l>h;h+=2){var t=null;if(g=n.exec(f[h]))t={url:g[2],func:g[3],line:+g[1]};else if(g=o.exec(f[h])){t={url:g[3],func:g[4]};var u=+g[1],v=s[g[2]-1];if(v&&(m=c(t.url))){m=m.join("\n");var w=m.indexOf(v.innerText);w>=0&&(t.line=u+m.substring(0,w).split("\n").length)}}else if(g=p.exec(f[h])){var x=a.location.href.replace(/#.*$/,""),y=g[1],z=new RegExp(i(f[h+1]));m=k(z,[x]),t={url:x,line:m?m.line:y,func:""}}if(t){t.func||(t.func=d(t.url,t.line));var A=e(t.url,t.line),B=A?A[Math.floor(A.length/2)]:null;A&&B.replace(/^\s*/,"")===f[h+1].replace(/^\s*/,"")?t.context=A:t.context=[f[h+1]],q.push(t)}}return q.length?{name:b.name,message:f[0],url:document.location.href,stack:q}:null}function q(a,b,c,f){var g={url:b,line:c};if(g.url&&g.line){a.incomplete=!1,g.func||(g.func=d(g.url,g.line)),g.context||(g.context=e(g.url,g.line));var h=/ '([^']+)' /.exec(f);if(h&&(g.column=l(h[1],g.url,g.line)),a.stack.length>0&&a.stack[0].url===g.url){if(a.stack[0].line===g.line)return!1;if(!a.stack[0].line&&a.stack[0].func===g.func)return a.stack[0].line=g.line,a.stack[0].context=g.context,!1}return a.stack.unshift(g),a.partial=!0,!0}return a.incomplete=!0,!1}function r(a,b){for(var c,e,f,g=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,h=[],i={},j=!1,k=r.caller;k&&!j;k=k.caller)if(k!==s&&k!==x.report){if(e={url:null,func:z,line:null,column:null},k.name?e.func=k.name:(c=g.exec(k.toString()))&&(e.func=c[1]),f=m(k)){e.url=f.url,e.line=f.line,e.func===z&&(e.func=d(e.url,e.line));var n=/ '([^']+)' /.exec(a.message||a.description);n&&(e.column=l(n[1],f.url,f.line))}i[""+k]?j=!0:i[""+k]=!0,h.push(e)}b&&h.splice(0,b);var o={name:a.name,message:a.message,url:document.location.href,stack:h};return q(o,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description),o}function s(a,b){var c=null;b=null==b?0:+b;try{if(c=o(a))return c}catch(d){if(u)throw d}try{if(c=n(a))return c}catch(d){if(u)throw d}try{if(c=p(a))return c}catch(d){if(u)throw d}try{if(c=r(a,b+1))return c}catch(d){if(u)throw d}return{}}function t(a){a=(null==a?0:+a)+1;try{throw new Error}catch(b){return s(b,a+1)}}var u=!1,v={};return s.augmentStackTraceWithInitialElement=q,s.guessFunctionName=d,s.gatherContext=e,s.ofCaller=t,s}();var A,B,C,D,E,F,G=a.Raven,H=!(!a.JSON||!a.JSON.stringify),I={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],collectWindowErrors:!0,tags:{},extra:{}},J={VERSION:"1.1.11",TraceKit:x,afterLoad:function(){var b=a.RavenConfig;b&&this.config(b.dsn,b.config).install()},noConflict:function(){return a.Raven=G,J},config:function(a,b){if(!a)return J;var c=e(a),d=c.path.lastIndexOf("/"),f=c.path.substr(1,d);return b&&k(b,function(a,b){I[a]=b}),I.ignoreErrors.push("Script error."),I.ignoreErrors.push("Script error"),I.ignoreErrors=v(I.ignoreErrors),I.ignoreUrls=I.ignoreUrls.length?v(I.ignoreUrls):!1,I.whitelistUrls=I.whitelistUrls.length?v(I.whitelistUrls):!1,I.includePaths=v(I.includePaths),E=c.user,F=c.path.substr(d+1),C="//"+c.host+(c.port?":"+c.port:"")+"/"+f+"api/"+F+"/store/",c.protocol&&(C=c.protocol+":"+C),I.fetchContext&&(x.remoteFetching=!0),I.linesOfContext&&(x.linesOfContext=I.linesOfContext),x.collectWindowErrors=!!I.collectWindowErrors,J},install:function(){return u()&&x.report.subscribe(m),J},context:function(a,c,d){return g(a)&&(d=c||[],c=a,a=b),J.wrap(a,c).apply(this,d)},wrap:function(a,c){function d(){for(var b=[],d=arguments.length,e=!a||a&&a.deep!==!1;d--;)b[d]=e?J.wrap(a,arguments[d]):arguments[d];try{return c.apply(this,b)}catch(f){throw J.captureException(f,a),f}}if(f(c)&&!g(a))return a;if(g(a)&&(c=a,a=b),!g(c))return c;if(c.__raven__)return c;for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);return d.__raven__=!0,d},uninstall:function(){return x.report.uninstall(),J},captureException:function(a,b){if(h(a))return J.captureMessage(a,b);A=a;try{x.report(a,b)}catch(c){if(a!==c)throw c}return J},captureMessage:function(a,b){return s(q({message:a},b)),J},setUser:function(a){return D=a,J},lastException:function(){return A},lastEventId:function(){return B}},K="source protocol user pass host port path".split(" "),L=/^(?:(\w+):)?\/\/(\w+)(:\w+)?@([\w\.-]+)(?::(\d+))?(\/.*)/;d.prototype=new Error,d.prototype.constructor=d;var M;J.afterLoad(),a.Raven=J,"function"==typeof define&&define.amd&&define("raven",[],function(){return J})}(window),define("raven-js",function(a){return function(){var b;return b||a.Raven}}(this)),define("superdesk/error/error",["angular","raven-js"],function(a,b){"use strict";function c(a){return{responseError:function(c){return c.status>=500&&c.status<600&&b.captureException(new Error("HTTP response error"),{tags:{component:"server"},extra:{config:c.config,status:c.status}}),a.reject(c)}}}var d=a.module("superdesk.error",[]);return d.config(["config","$httpProvider",function(a,e){a.raven&&a.raven.dsn&&(b.config(a.raven.dsn,{logger:"javascript-client"}).install(),e.interceptors.push(c),d.factory("$exceptionHandler",function(){return function(a,c){throw b.captureException(a,{tags:{component:"ui"},extra:a}),a}}))}]),c.$inject=["$q"],d}),define("superdesk/notify/notify",["angular","require"],function(a,b){"use strict";return a.module("superdesk.notify",["superdesk.translate"]).service("notify",["$timeout","gettext",function(b,c){function d(){var d={info:3e3,success:3e3,error:5e3};this.messages=[],this.pop=function(){return this.messages.pop()},this.addMessage=function(a,c,e){var f=this;null==e&&(e=d[a]),this.messages.push({type:a,msg:c}),e&&b(function(){f.pop()},e)},a.forEach(["info","success","error"],function(a){var b=this;this[a]=function(c,d){b.addMessage(a,c,d)}},this),this.startSaving=function(){this.info(c("Saving.."))},this.stopSaving=function(){this.pop()}}return new d}]).directive("sdNotify",["notify",function(a){return{scope:!0,templateUrl:"scripts/superdesk/notify/views/notify.html",link:function(b,c,d){b.messages=a.messages}}}])}),define("superdesk/upload/upload-service",[],function(){"use strict";function a(a,b){this.start=function(a){return a.isUpload=!0,b.upload(a)},this.restart=function(a){return b.http(a)},this.isUpload=function(a){return a.isUpload||!1}}return a.$inject=["$q","$upload"],a}),define("superdesk/upload/image-preview-directive",[],function(){"use strict";return[function(){var a=/^image\//;return{scope:{file:"=",sdImagePreview:"=",progressWidth:"="},link:function(b,c){function d(a){void 0!==b.progressWidth&&(b.progressWidth=a)}function e(a){b.$apply(function(){b.sdImagePreview=a.target.result,d(50)})}b.$watch("file",function(b){if(b&&a.test(b.type)){var c=new FileReader;c.onload=e,c.readAsDataURL(b),d(30)}})}}}]}),define("superdesk/upload/video-capture-directive",["angular"],function(a){"use strict";return function(){var b=window.URL||window.webkitURL;return navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,{scope:{sdVideoCapture:"=",file:"="},link:function(c,d){var e=null,f=a.element('<canvas style="display:none"></canvas>'),g=f[0].getContext("2d"),h=!1;d.after(f),navigator.getMedia({video:!0,audio:!1},function(a){return h?void a.stop():(e=a,void(navigator.mozGetUserMedia?d[0].mozSrcObject=a:d[0].src=b.createObjectURL(a)))},function(a){console.error("There was an error when getting media: "+a)}),d.click(function(a){var b=d[0];f[0].width=b.videoWidth,f[0].height=b.videoHeight,g.drawImage(b,0,0),c.$apply(function(){c.sdVideoCapture=f[0].toDataURL("image/jpeg",.95)})}),c.$on("$destroy",function(){try{h=!0,d[0].pause(),e.stop()}catch(a){}})}}}}),function(a){a.Jcrop=function(b,c){function d(a){return Math.round(a)+"px"}function e(a){return J.baseClass+"-"+a}function f(){return a.fx.step.hasOwnProperty("backgroundColor")}function g(b){var c=a(b).offset();return[c.left,c.top]}function h(a){return[a.pageX-I[0],a.pageY-I[1]]}function i(b){"object"!=typeof b&&(b={}),J=a.extend(J,b),a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){"function"!=typeof J[b]&&(J[b]=function(){})})}function j(a,b,c){if(I=g(R),oa.setCursor("move"===a?a:a+"-resize"),"move"===a)return oa.activateHandlers(l(b),q,c);var d=la.getFixed(),e=m(a),f=la.getCorner(m(e));la.setPressed(la.getCorner(e)),la.setCurrent(f),oa.activateHandlers(k(a,d),q,c)}function k(a,b){return function(c){if(J.aspectRatio)switch(a){case"e":c[1]=b.y+1;break;case"w":c[1]=b.y+1;break;case"n":c[0]=b.x+1;break;case"s":c[0]=b.x+1}else switch(a){case"e":c[1]=b.y2;break;case"w":c[1]=b.y2;break;case"n":c[0]=b.x2;break;case"s":c[0]=b.x2}la.setCurrent(c),na.update()}}function l(a){var b=a;return pa.watchKeys(),function(a){la.moveOffset([a[0]-b[0],a[1]-b[1]]),b=a,na.update()}}function m(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function n(a){return function(b){return J.disabled?!1:"move"!==a||J.allowMove?(I=g(R),da=!0,j(a,h(b)),b.stopPropagation(),b.preventDefault(),!1):!1}}function o(a,b,c){var d=a.width(),e=a.height();d>b&&b>0&&(d=b,e=b/a.width()*a.height()),e>c&&c>0&&(e=c,d=c/a.height()*a.width()),ba=a.width()/d,ca=a.height()/e,a.width(d).height(e)}function p(a){return{x:a.x*ba,y:a.y*ca,x2:a.x2*ba,y2:a.y2*ca,w:a.w*ba,h:a.h*ca}}function q(a){var b=la.getFixed();b.w>J.minSelect[0]&&b.h>J.minSelect[1]?(na.enableHandles(),na.done()):na.release(),oa.setCursor(J.allowSelect?"crosshair":"default")}function r(a){if(J.disabled)return!1;if(!J.allowSelect)return!1;da=!0,I=g(R),na.disableHandles(),oa.setCursor("crosshair");var b=h(a);return la.setPressed(b),na.update(),oa.activateHandlers(s,q,"touch"===a.type.substring(0,5)),pa.watchKeys(),a.stopPropagation(),a.preventDefault(),!1}function s(a){la.setCurrent(a),na.update()}function t(){var b=a("<div></div>").addClass(e("tracker"));return L&&b.css({opacity:0,backgroundColor:"white"}),b}function u(a){U.removeClass().addClass(e("holder")).addClass(a)}function v(a,b){function c(){window.setTimeout(s,l)}var d=a[0]/ba,e=a[1]/ca,f=a[2]/ba,g=a[3]/ca;if(!ea){var h=la.flipCoords(d,e,f,g),i=la.getFixed(),j=[i.x,i.y,i.x2,i.y2],k=j,l=J.animationDelay,m=h[0]-j[0],n=h[1]-j[1],o=h[2]-j[2],p=h[3]-j[3],q=0,r=J.swingSpeed;d=k[0],e=k[1],f=k[2],g=k[3],na.animMode(!0);var s=function(){return function(){q+=(100-q)/r,k[0]=Math.round(d+q/100*m),k[1]=Math.round(e+q/100*n),k[2]=Math.round(f+q/100*o),k[3]=Math.round(g+q/100*p),q>=99.8&&(q=100),100>q?(x(k),c()):(na.done(),na.animMode(!1),"function"==typeof b&&b.call(qa))}}();c()}}function w(a){x([a[0]/ba,a[1]/ca,a[2]/ba,a[3]/ca]),J.onSelect.call(qa,p(la.getFixed())),na.enableHandles()}function x(a){la.setPressed([a[0],a[1]]),la.setCurrent([a[2],a[3]]),na.update()}function y(){return p(la.getFixed())}function z(){return la.getFixed()}function A(a){i(a),H()}function B(){J.disabled=!0,na.disableHandles(),na.setCursor("default"),oa.setCursor("default")}function C(){J.disabled=!1,H()}function D(){na.done(),oa.activateHandlers(null,null)}function E(){U.remove(),O.show(),O.css("visibility","visible"),a(b).removeData("Jcrop")}function F(a,b){na.release(),B();var c=new Image;c.onload=function(){var d=c.width,e=c.height,f=J.boxWidth,g=J.boxHeight;R.width(d).height(e),R.attr("src",a),V.attr("src",a),o(R,f,g),S=R.width(),T=R.height(),V.width(S).height(T),ha.width(S+2*ga).height(T+2*ga),U.width(S).height(T),ma.resize(S,T),C(),"function"==typeof b&&b.call(qa)},c.src=a}function G(a,b,c){var d=b||J.bgColor;J.bgFade&&f()&&J.fadeTime&&!c?a.animate({backgroundColor:d},{queue:!1,duration:J.fadeTime}):a.css("backgroundColor",d)}function H(a){J.allowResize?a?na.enableOnly():na.enableHandles():na.disableHandles(),oa.setCursor(J.allowSelect?"crosshair":"default"),na.setCursor(J.allowMove?"move":"default"),J.hasOwnProperty("trueSize")&&(ba=J.trueSize[0]/S,ca=J.trueSize[1]/T),J.hasOwnProperty("setSelect")&&(w(J.setSelect),na.done(),delete J.setSelect),ma.refresh(),J.bgColor!=ia&&(G(J.shade?ma.getShades():U,J.shade?J.shadeColor||J.bgColor:J.bgColor),ia=J.bgColor),ja!=J.bgOpacity&&(ja=J.bgOpacity,J.shade?ma.refresh():na.setBgOpacity(ja)),Z=J.maxSize[0]||0,$=J.maxSize[1]||0,_=J.minSize[0]||0,aa=J.minSize[1]||0,J.hasOwnProperty("outerImage")&&(R.attr("src",J.outerImage),delete J.outerImage),na.refresh()}var I,J=a.extend({},a.Jcrop.defaults),K=navigator.userAgent.toLowerCase(),L=/msie/.test(K),M=/msie [1-6]\./.test(K);
"object"!=typeof b&&(b=a(b)[0]),"object"!=typeof c&&(c={}),i(c);var N={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},O=a(b),P=!0;if("IMG"==b.tagName){if(0!=O[0].width&&0!=O[0].height)O.width(O[0].width),O.height(O[0].height);else{var Q=new Image;Q.src=O[0].src,O.width(Q.width),O.height(Q.height)}var R=O.clone().removeAttr("id").css(N).show();R.width(O.width()),R.height(O.height()),O.after(R).hide()}else R=O.css(N).show(),P=!1,null===J.shade&&(J.shade=!0);o(R,J.boxWidth,J.boxHeight);var S=R.width(),T=R.height(),U=a("<div />").width(S).height(T).addClass(e("holder")).css({position:"relative",backgroundColor:J.bgColor}).insertAfter(O).append(R);J.addClass&&U.addClass(J.addClass);var V=a("<div />"),W=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),X=a("<div />").width("100%").height("100%").css("zIndex",320),Y=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=la.getFixed();J.onDblClick.call(qa,a)}).insertBefore(R).append(W,X);P&&(V=a("<img />").attr("src",R.attr("src")).css(N).width(S).height(T),W.append(V)),M&&Y.css({overflowY:"hidden"});var Z,$,_,aa,ba,ca,da,ea,fa,ga=J.boundary,ha=t().width(S+2*ga).height(T+2*ga).css({position:"absolute",top:d(-ga),left:d(-ga),zIndex:290}).mousedown(r),ia=J.bgColor,ja=J.bgOpacity;I=g(R);var ka=function(){function a(){var a,b={},c=["touchstart","touchmove","touchend"],d=document.createElement("div");try{for(a=0;a<c.length;a++){var e=c[a];e="on"+e;var f=e in d;f||(d.setAttribute(e,"return;"),f="function"==typeof d[e]),b[c[a]]=f}return b.touchstart&&b.touchend&&b.touchmove}catch(g){return!1}}function b(){return J.touchSupport===!0||J.touchSupport===!1?J.touchSupport:a()}return{createDragger:function(a){return function(b){return J.disabled?!1:"move"!==a||J.allowMove?(I=g(R),da=!0,j(a,h(ka.cfilter(b)),!0),b.stopPropagation(),b.preventDefault(),!1):!1}},newSelection:function(a){return r(ka.cfilter(a))},cfilter:function(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,a},isSupported:a,support:b()}}(),la=function(){function a(a){a=g(a),o=m=a[0],p=n=a[1]}function b(a){a=g(a),k=a[0]-o,l=a[1]-p,o=a[0],p=a[1]}function c(){return[k,l]}function d(a){var b=a[0],c=a[1];0>m+b&&(b-=b+m),0>n+c&&(c-=c+n),p+c>T&&(c+=T-(p+c)),o+b>S&&(b+=S-(o+b)),m+=b,o+=b,n+=c,p+=c}function e(a){var b=f();switch(a){case"ne":return[b.x2,b.y];case"nw":return[b.x,b.y];case"se":return[b.x2,b.y2];case"sw":return[b.x,b.y2]}}function f(){if(!J.aspectRatio)return i();var a,b,c,d,e=J.aspectRatio,f=J.minSize[0]/ba,g=J.maxSize[0]/ba,k=J.maxSize[1]/ca,l=o-m,q=p-n,r=Math.abs(l),s=Math.abs(q),t=r/s;return 0===g&&(g=10*S),0===k&&(k=10*T),e>t?(b=p,c=s*e,a=0>l?m-c:c+m,0>a?(a=0,d=Math.abs((a-m)/e),b=0>q?n-d:d+n):a>S&&(a=S,d=Math.abs((a-m)/e),b=0>q?n-d:d+n)):(a=o,d=r/e,b=0>q?n-d:n+d,0>b?(b=0,c=Math.abs((b-n)*e),a=0>l?m-c:c+m):b>T&&(b=T,c=Math.abs(b-n)*e,a=0>l?m-c:c+m)),a>m?(f>a-m?a=m+f:a-m>g&&(a=m+g),b=b>n?n+(a-m)/e:n-(a-m)/e):m>a&&(f>m-a?a=m-f:m-a>g&&(a=m-g),b=b>n?n+(m-a)/e:n-(m-a)/e),0>a?(m-=a,a=0):a>S&&(m-=a-S,a=S),0>b?(n-=b,b=0):b>T&&(n-=b-T,b=T),j(h(m,n,a,b))}function g(a){return a[0]<0&&(a[0]=0),a[1]<0&&(a[1]=0),a[0]>S&&(a[0]=S),a[1]>T&&(a[1]=T),[Math.round(a[0]),Math.round(a[1])]}function h(a,b,c,d){var e=a,f=c,g=b,h=d;return a>c&&(e=c,f=a),b>d&&(g=d,h=b),[e,g,f,h]}function i(){var a,b=o-m,c=p-n;return Z&&Math.abs(b)>Z&&(o=b>0?m+Z:m-Z),$&&Math.abs(c)>$&&(p=c>0?n+$:n-$),aa/ca&&Math.abs(c)<aa/ca&&(p=c>0?n+aa/ca:n-aa/ca),_/ba&&Math.abs(b)<_/ba&&(o=b>0?m+_/ba:m-_/ba),0>m&&(o-=m,m-=m),0>n&&(p-=n,n-=n),0>o&&(m-=o,o-=o),0>p&&(n-=p,p-=p),o>S&&(a=o-S,m-=a,o-=a),p>T&&(a=p-T,n-=a,p-=a),m>S&&(a=m-T,p-=a,n-=a),n>T&&(a=n-T,p-=a,n-=a),j(h(m,n,o,p))}function j(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var k,l,m=0,n=0,o=0,p=0;return{flipCoords:h,setPressed:a,setCurrent:b,getOffset:c,moveOffset:d,getCorner:e,getFixed:f}}(),ma=function(){function b(a,b){o.left.css({height:d(b)}),o.right.css({height:d(b)})}function c(){return e(la.getFixed())}function e(a){o.top.css({left:d(a.x),width:d(a.w),height:d(a.y)}),o.bottom.css({top:d(a.y2),left:d(a.x),width:d(a.w),height:d(T-a.y2)}),o.right.css({left:d(a.x2),width:d(S-a.x2)}),o.left.css({width:d(a.x)})}function f(){return a("<div />").css({position:"absolute",backgroundColor:J.shadeColor||J.bgColor}).appendTo(n)}function g(){m||(m=!0,n.insertBefore(R),c(),na.setBgOpacity(1,0,1),V.hide(),h(J.shadeColor||J.bgColor,1),na.isAwake()?j(J.bgOpacity,1):j(1,1))}function h(a,b){G(l(),a,b)}function i(){m&&(n.remove(),V.show(),m=!1,na.isAwake()?na.setBgOpacity(J.bgOpacity,1,1):(na.setBgOpacity(1,1,1),na.disableHandles()),G(U,0,1))}function j(a,b){m&&(J.bgFade&&!b?n.animate({opacity:1-a},{queue:!1,duration:J.fadeTime}):n.css({opacity:1-a}))}function k(){J.shade?g():i(),na.isAwake()&&j(J.bgOpacity)}function l(){return n.children()}var m=!1,n=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),o={top:f(),left:f().height(T),right:f().height(T),bottom:f()};return{update:c,updateRaw:e,getShades:l,setBgColor:h,enable:g,disable:i,resize:b,refresh:k,opacity:j}}(),na=function(){function b(b){var c=a("<div />").css({position:"absolute",opacity:J.borderOpacity}).addClass(e(b));return W.append(c),c}function c(b,c){var d=a("<div />").mousedown(n(b)).css({cursor:b+"-resize",position:"absolute",zIndex:c}).addClass("ord-"+b);return ka.support&&d.bind("touchstart.jcrop",ka.createDragger(b)),X.append(d),d}function f(a){var b=J.handleSize,d=c(a,B++).css({opacity:J.handleOpacity}).addClass(e("handle"));return b&&d.width(b).height(b),d}function g(a){return c(a,B++).addClass("jcrop-dragbar")}function h(a){var b;for(b=0;b<a.length;b++)E[a[b]]=g(a[b])}function i(a){var c,d;for(d=0;d<a.length;d++){switch(a[d]){case"n":c="hline";break;case"s":c="hline bottom";break;case"e":c="vline right";break;case"w":c="vline"}C[a[d]]=b(c)}}function j(a){var b;for(b=0;b<a.length;b++)D[a[b]]=f(a[b])}function k(a,b){J.shade||V.css({top:d(-b),left:d(-a)}),Y.css({top:d(b),left:d(a)})}function l(a,b){Y.width(Math.round(a)).height(Math.round(b))}function m(){var a=la.getFixed();la.setPressed([a.x,a.y]),la.setCurrent([a.x2,a.y2]),o()}function o(a){return A?q(a):void 0}function q(a){var b=la.getFixed();l(b.w,b.h),k(b.x,b.y),J.shade&&ma.updateRaw(b),A||s(),a?J.onSelect.call(qa,p(b)):J.onChange.call(qa,p(b))}function r(a,b,c){(A||b)&&(J.bgFade&&!c?R.animate({opacity:a},{queue:!1,duration:J.fadeTime}):R.css("opacity",a))}function s(){Y.show(),J.shade?ma.opacity(ja):r(ja,!0),A=!0}function u(){x(),Y.hide(),J.shade?ma.opacity(1):r(1),A=!1,J.onRelease.call(qa)}function v(){F&&X.show()}function w(){return F=!0,J.allowResize?(X.show(),!0):void 0}function x(){F=!1,X.hide()}function y(a){a?(ea=!0,x()):(ea=!1,w())}function z(){y(!1),m()}var A,B=370,C={},D={},E={},F=!1;J.dragEdges&&a.isArray(J.createDragbars)&&h(J.createDragbars),a.isArray(J.createHandles)&&j(J.createHandles),J.drawBorders&&a.isArray(J.createBorders)&&i(J.createBorders),a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var G=t().mousedown(n("move")).css({cursor:"move",position:"absolute",zIndex:360});return ka.support&&G.bind("touchstart.jcrop",ka.createDragger("move")),W.append(G),x(),{updateVisible:o,update:q,release:u,refresh:m,isAwake:function(){return A},setCursor:function(a){G.css("cursor",a)},enableHandles:w,enableOnly:function(){F=!0},showHandles:v,disableHandles:x,animMode:y,setBgOpacity:r,done:z}}(),oa=function(){function b(b){ha.css({zIndex:450}),b?a(document).bind("touchmove.jcrop",g).bind("touchend.jcrop",i):m&&a(document).bind("mousemove.jcrop",d).bind("mouseup.jcrop",e)}function c(){ha.css({zIndex:290}),a(document).unbind(".jcrop")}function d(a){return k(h(a)),!1}function e(a){return a.preventDefault(),a.stopPropagation(),da&&(da=!1,l(h(a)),na.isAwake()&&J.onSelect.call(qa,p(la.getFixed())),c(),k=function(){},l=function(){}),!1}function f(a,c,d){return da=!0,k=a,l=c,b(d),!1}function g(a){return k(h(ka.cfilter(a))),!1}function i(a){return e(ka.cfilter(a))}function j(a){ha.css("cursor",a)}var k=function(){},l=function(){},m=J.trackDocument;return m||ha.mousemove(d).mouseup(e).mouseout(e),R.before(ha),{activateHandlers:f,setCursor:j}}(),pa=function(){function b(){J.keySupport&&(f.show(),f.focus())}function c(a){f.hide()}function d(a,b,c){J.allowMove&&(la.moveOffset([b,c]),na.updateVisible(!0)),a.preventDefault(),a.stopPropagation()}function e(a){if(a.ctrlKey||a.metaKey)return!0;fa=a.shiftKey?!0:!1;var b=fa?10:1;switch(a.keyCode){case 37:d(a,-b,0);break;case 39:d(a,b,0);break;case 38:d(a,0,-b);break;case 40:d(a,0,b);break;case 27:J.allowSelect&&na.release();break;case 9:return!0}return!1}var f=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),g=a("<div />").css({position:"absolute",overflow:"hidden"}).append(f);return J.keySupport&&(f.keydown(e).blur(c),M||!J.fixedSupport?(f.css({position:"absolute",left:"-20px"}),g.append(f).insertBefore(R)):f.insertBefore(R)),{watchKeys:b}}();ka.support&&ha.bind("touchstart.jcrop",ka.newSelection),X.hide(),H(!0);var qa={setImage:F,animateTo:v,setSelect:w,setOptions:A,tellSelect:y,tellScaled:z,setClass:u,disable:B,enable:C,cancel:D,release:na.release,destroy:E,focus:pa.watchKeys,getBounds:function(){return[S*ba,T*ca]},getWidgetSize:function(){return[S,T]},getScaleFactor:function(){return[ba,ca]},getOptions:function(){return J},ui:{holder:U,selection:Y}};return L&&U.bind("selectstart",function(){return!1}),O.data("Jcrop",qa),qa},a.fn.Jcrop=function(b,c){var d;return this.each(function(){if(a(this).data("Jcrop")){if("api"===b)return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(b)}else"IMG"==this.tagName?a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d)}):(a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d))}),this},a.Jcrop.Loader=function(b,c,d){function e(){g.complete?(f.unbind(".jcloader"),a.isFunction(c)&&c.call(g)):window.setTimeout(e,50)}var f=a(b),g=f[0];f.bind("load.jcloader",e).bind("error.jcloader",function(b){f.unbind(".jcloader"),a.isFunction(d)&&d.call(g)}),g.complete&&a.isFunction(c)&&(f.unbind(".jcloader"),c.call(g))},a.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),define("bower_components/jcrop/js/jquery.Jcrop",["jquery"],function(){}),define("superdesk/upload/crop-directive",["lodash","bower_components/jcrop/js/jquery.Jcrop"],function(a){"use strict";return["notify","gettext",function(b,c){return{scope:{src:"=",cords:"=",progressWidth:"="},link:function(d,e){function f(a,b,c,d,e,f,g){$(a).css({width:Math.round(b*d)+"px",height:Math.round(c*e)+"px",marginLeft:"-"+Math.round(b*f)+"px",marginTop:"-"+Math.round(c*g)+"px"})}var g,h,i,j=a.throttle(function(a){d.$apply(function(){d.cords=a;var b=120/d.cords.w,c=120/d.cords.h;f(".preview-target-1",b,c,h,i,d.cords.x,d.cords.y),f(".preview-target-2",b/2,c/2,h,i,d.cords.x,d.cords.y)})},300);d.$watch("src",function(a){if(e.empty(),a){var f=new Image;f.onload=function(){d.progressWidth=80;var a=[this.width,this.height];return this.width<200||this.height<200?void d.$apply(function(){b.pop(),b.error(c("Sorry, but avatar must be at least 200x200 pixels big.")),d.src=null,d.progressWidth=0}):(e.append(f),$(f).Jcrop({aspectRatio:1,minSize:[200,200],trueSize:a,boxWidth:300,boxHeight:225,setSelect:[0,0,Math.min.apply(a),Math.min.apply(a)],allowSelect:!1,onChange:j},function(){g=this.getBounds(),h=g[0],i=g[1]}),void(d.progressWidth=0))},f.src=a}})}}}]}),define("superdesk/upload/image-crop-directive",["lodash","bower_components/jcrop/js/jquery.Jcrop"],function(a){"use strict";return["notify","gettext","$timeout","imageFactory",function(a,b,c,d){return{scope:{src:"=",cords:"=",boxWidth:"=",boxHeight:"=",aspectRatio:"=",minimumSize:"=",cropSelect:"=",showMinSizeError:"="},link:function(e,f){function g(a){return s.length=0,s.push(a.CropLeft),s.push(a.CropTop),s.push(a.CropRight),s.push(a.CropBottom),s}function h(a){c.cancel(r)}function i(a){e.$apply(function(){e.cords=a;var b=o/e.cords.w,c=p/e.cords.h;j(".preview-target-1",b,c,m,n,e.cords.x,e.cords.y)})}function j(a,b,c,d,e,f,g){$(a).css({width:Math.round(b*d)+"px",height:Math.round(c*e)+"px",marginLeft:"-"+Math.round(b*f)+"px",marginTop:"-"+Math.round(c*g)+"px"})}function k(c){(c.width<q[0]||c.height<q[1])&&e.$apply(function(){throw a.pop(),a.error(b("Sorry, but image must be at least "+q[0]+"x"+q[1])),e.src=null,e.$parent.preview.progress=null,new Error("sdImageCrop: Sorry, but image must be at least "+q[0]+"x"+q[1])})}var l,m,n,o,p,q,r,s=[];if(q=e.minimumSize?e.minimumSize:[200,200],s=e.cropSelect?g(e.cropSelect):[0,0,e.boxWidth,e.boxHeight],!e.aspectRatio)throw a.error(b('sdImageCrop: attribute "aspect-ratio" is mandatory')),new Error('sdImageCrop: attribute "aspect-ratio" is mandatory');"1.33"===e.aspectRatio.toFixed(2)?(o=300,p=225):"1.78"===e.aspectRatio.toFixed(2)?(o=300,p=169):(o=300,p=300);var t=function(a){h(a),r=c(i(a),300,!1)};e.$watch("src",function(a){if(f.empty(),a){var b=d.makeInstance();b.onload=function(){e.$parent.preview.progress=!0;var a=[this.width,this.height];e.showMinSizeError&&k(this),f.append(b),$(b).Jcrop({aspectRatio:e.aspectRatio,minSize:q,trueSize:a,boxWidth:e.boxWidth,boxHeight:e.boxHeight,setSelect:s,allowSelect:!1,addClass:"jcrop-dark",onChange:t},function(){l=this.getBounds(),m=l[0],n=l[1],t(e.cords)})},b.src=a}})}}}]}),define("superdesk/upload/upload",["angular","require","./upload-service","./image-preview-directive","./video-capture-directive","./crop-directive","./image-crop-directive"],function(a,b){"use strict";function c(){var b={"video/mpeg":"video/mp4"};return{scope:{renditions:"="},link:function(c,d,e){function f(){d[0].pause()}function g(){d[0].load()}function h(c){a.element("<source>").attr("src",c.href).attr("type",b[c.mimetype]||c.mimetype).appendTo(d)}c.$watch("renditions",function(b){f(),d.empty(),a.forEach(b,h),g()}),c.$on("$destroy",f)}}}function d(){function a(a,b){return 0===a.type.indexOf(b.replace("*",""))}return{require:"ngModel",link:function(b,c,d,e){e.$validators.fileType=function(b,c){var e=b||c;return!e||!d.accept||a(e,d.accept)}}}}return a.module("superdesk.upload",["angularFileUpload","superdesk.imageFactory"]).service("upload",b("./upload-service")).directive("sdImagePreview",b("./image-preview-directive")).directive("sdVideoCapture",b("./video-capture-directive")).directive("sdCrop",b("./crop-directive")).directive("sdImageCrop",b("./image-crop-directive")).directive("sdSources",c).directive("sdFileTypeValidator",d)}),define("superdesk/ui/autoheight-directive",["angular"],function(a){"use strict";return["$window",function(b){return{require:"ngModel",restrict:"A, C",link:function(c,d,e,f){function g(){v=k,o=b.getComputedStyle(k),p="border-box"===o.getPropertyValue("box-sizing")||"border-box"===o.getPropertyValue("-moz-box-sizing")||"border-box"===o.getPropertyValue("-webkit-box-sizing"),q=p?{width:parseInt(o.getPropertyValue("border-right-width"),10)+parseInt(o.getPropertyValue("padding-right"),10)+parseInt(o.getPropertyValue("padding-left"),10)+parseInt(o.getPropertyValue("border-left-width"),10),height:parseInt(o.getPropertyValue("border-top-width"),10)+parseInt(o.getPropertyValue("padding-top"),10)+parseInt(o.getPropertyValue("padding-bottom"),10)+parseInt(o.getPropertyValue("border-bottom-width"),10)}:{width:0,height:0},r=parseInt(o.getPropertyValue("min-height"),10),s=parseInt(o.getPropertyValue("height"),10),t=Math.max(r,s)-q.height,u=parseInt(o.getPropertyValue("max-height"),10)}function h(){o=b.getComputedStyle(k),n=y,a.forEach(B,function(a){n+=a+":"+o[a]+";"}),A.setAttribute("style",n)}function i(){var a,c,d,e,f;v!==k&&g(),h(),w||(w=!0,A.value=k.value,A.style.overflowY=k.style.overflowY,a=""===k.style.height?"auto":parseInt(k.style.height,10),c=b.getComputedStyle(k).getPropertyValue("width"),"px"===c.substr(c.length-2,2)&&(e=parseInt(c,10)-q.width,A.style.width=e+"px"),d=A.scrollHeight,d>u?(d=u,f="scroll"):t>d&&(d=t),d+=q.height,k.style.overflowY=f||"hidden",a!==d&&(k.style.height=d+"px"),_.delay(function(){w=!1},1))}function j(){w=!1,i()}var k=d[0],l=d;if("TEXTAREA"===k.nodeName&&b.getComputedStyle){l.css({overflow:"hidden","overflow-y":"hidden","word-wrap":"break-word"});var m=k.value;k.value="",k.value=m;var n,o,p,q,r,s,t,u,v,w,x=a.element(b),y="position: absolute; top: -999px; right: auto; bottom: auto; left: 0 ;overflow: hidden; -webkit-box-sizing: content-box;-moz-box-sizing: content-box; box-sizing: content-box;min-height: 0 !important; height: 0 !important; padding: 0;word-wrap: break-word; border: 0;",z=a.element('<textarea tabindex="-1" style="'+y+'"/>').attr("elastic",!0),A=z[0],B=["font-family","font-size","font-weight","font-style","letter-spacing","line-height","text-transform","word-spacing","text-indent"];l.attr("elastic")||(A.parentNode!==document.body&&a.element(document.body).append(A),l.css({resize:"none"}),l.attr("elastic",!0),"onpropertychange"in k&&"oninput"in k?k.oninput=k.onkeyup=i:k.oninput=i,x.bind("resize",j),c.$watch(function(){return f.$modelValue},function(a,b){a!==b&&j()}),_.defer(i),c.$on("$destroy",function(){z.remove(),x.unbind("resize",j)}))}}}}]}),define("superdesk/ui/ui",["angular","require","moment","./autoheight-directive"],function(a,b,c){"use strict";function d(){return{templateUrl:"scripts/superdesk/ui/views/toggle-box.html",transclude:!0,scope:!0,link:function(a,b,c){a.title=c.title,a.isOpen="true"===c.open,a.icon=c.icon,a.mode=c.mode,a.style=c.style,a.toggleModule=function(){a.isOpen=!a.isOpen}}}}function e(b){return{link:function(c,d,e){function f(){var b=a.element('<div class="scroll-shadow"><div class="inner"></div></div>');d.parent().prepend(b),d.on("scroll",function(){$(this).scrollTop()>0?b.addClass("shadow"):b.removeClass("shadow")})}d.addClass("shadow-list-holder"),c.$on("$destroy",function(){d.off("scroll")}),b(f,1,!1)}}}function f(){return function(a,b){return a.replace(/(?:\r\n|\r|\n)/g,b||"<br/>")}}function g(){var a={},b={};return a.defaultName="defaultWizard",a.addWizard=function(a,c){b[a]=c},a.removeWizard=function(a){delete b[a]},a.wizard=function(c){var d=c||a.defaultName;return b[d]},a}function h(){return{templateUrl:"scripts/superdesk/ui/views/wizard.html",scope:{currentStep:"=",finish:"&",name:"@"},transclude:!0,controller:["$scope","$element","WizardHandler",function(a,b,c){function d(){_.each(a.steps,function(a){a.selected=!1}),a.selectedStep=null}c.addWizard(a.name||c.defaultName,this),a.$on("$destroy",function(){c.removeWizard(a.name||c.defaultName)}),a.selectedStep=null,a.steps=[];var e;this.addStep=function(b){a.steps.push(b),e||(e=a.$watch("currentStep",function(b){b&&(a.selectedStep&&a.selectedStep.code!==b||!a.selectedStep)&&a.goTo(_.findWhere(a.steps,{code:b}))}))},a.goTo=function(b){d(),a.selectedStep=b,_.isUndefined(a.currentStep)||(a.currentStep=b.code),b.selected=!0},this.goTo=function(b){var c;c=_.isNumber(b)?a.steps[b]:_.findWhere(a.steps,{code:b}),a.goTo(c)},this.next=function(){var b=_.indexOf(a.steps,a.selectedStep);b===a.steps.length-1?this.finish():a.goTo(a.steps[b+1])},this.previous=function(){var b=_.indexOf(a.steps,a.selectedStep);a.goTo(a.steps[b-1])},this.finish=function(){a.finish&&a.finish()}}]}}function i(){return{templateUrl:"scripts/superdesk/ui/views/wizardStep.html",scope:{title:"@",code:"@",disabled:"="},transclude:!0,require:"^sdWizard",link:function(a,b,c,d){d.addStep(a)}}}function j(){return{restrict:"C",template:'<i class="svg-icon-plus"></i><span class="circle"></span>'}}function k(){return{link:function(a,b){_.defer(function(){b.focus()})}}}function l(){return{link:function(a,b){function c(){var a=b[0],c=a.value.length;if(c!==a.valLength){c<a.valLength&&(a.style.height="0px");var e=Math.max(d,a.scrollHeight);a.style.overflow=a.scrollHeight>e?"auto":"hidden",a.style.height=e+1+"px",a.valLength=c}}var d=b.outerHeight();c(),b.on("keyup change",function(){c()})}}}function m(a){return{link:function(b,c){function d(){k=c.children(".dropdown-menu"),i=k.hasClass("pull-right"),j=c.hasClass("dropright")||c.hasClass("dropleft")}function e(b){var c=a.height();return b.pageY>c-h}function f(a){return a.pageX<h}function g(b){var c=a.width();return c-b.pageX<h}var h=300,i=null,j=null,k=null;c.bind("click",function(a){null===k&&d(),e(a)?c.addClass("dropup"):c.removeClass("dropup"),i&&(f(a)?k.removeClass("pull-right"):k.addClass("pull-right"),g(a)?k.addClass("pull-right"):k.removeClass("pull-right")),j&&(f(a)?c.removeClass("dropleft").addClass("dropright"):c.addClass("dropleft").removeClass("dropright"),g(a)?c.removeClass("dropright").addClass("dropleft"):c.addClass("dropright").removeClass("dropleft"))})}}}function n(a){return{require:"dropdown",link:function(b,c,d,e){var f=c.find(".icon-dots-vertical");b.$watch(e.isOpen,function(c){if(c){var d=a.positionElements(f,e.dropdownMenu,"bottom-right",!0),g={top:d.top+"px",display:c?"block":"none",opacity:"1"};g.left="auto",g.right=Math.max(5,window.innerWidth-d.left),e.dropdownMenu.css({opacity:"0"}),b.$applyAsync(function(){e.dropdownMenu.css(g);var a=window.innerHeight-30,b=e.dropdownMenu.outerHeight();a-d.top<b&&(d.top-110<b?g={top:"110px",right:g.right+30}:g.top=d.top-b-f.outerHeight()-15,e.dropdownMenu.css({top:g.top,right:g.right}))})}})}}}function o(a){var b={};return b.position=function(b,c,d){var e=10,f=d.offset(),g=d.outerHeight(),h=a.height(),i=a.width(),j={top:0,left:0};return f.top+g+c+e>h?j.top=f.top-c:j.top=f.top+g,f.left+b+e>i?j.left=i-e-b:j.left=f.left,j},b}function p(){return{transclude:!0,templateUrl:"scripts/superdesk/ui/views/datepicker-wrapper.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}function q(){return{scope:{dt:"=ngModel",disabled:"=ngDisabled"},templateUrl:"scripts/superdesk/ui/views/sd-datepicker.html"}}function r(b,d,e,f){var g='<div sd-datepicker-wrapper ng-model="date" ng-change="dateSelection()"><div datepicker format-day="d" show-weeks="false"></div></div>';return{require:"ngModel",scope:{open:"=opened"},link:function(h,i,j,k){var l="DD/MM/YYYY",m=27,n=40,o=a.element(g);k.$parsers.unshift(function(a){return a?a.dpdate?(k.$setValidity("date",!0),c.utc(a.dpdate).format()):f.isValidDate(a)&&c(a,l).isValid()?(k.$setValidity("date",!0),c(a,l).utc().format()):(k.$setValidity("date",!1),null):(k.$setValidity("date",!0),null)}),h.dateSelection=function(b){a.isDefined(b)&&(h.date=b),k.$setViewValue({dpdate:h.date,viewdate:c(h.date).format(l)}),k.$render(),h.close()},h.select=function(a){var b=c().startOf("day").add(a,"days");h.dateSelection(b)},k.$render=function(){i.val(k.$viewValue.viewdate),h.date=k.$viewValue.dpdate},k.$formatters.unshift(function(a){var b,d="Invalid Date";return a?c(a).isValid()&&(b=c.utc(a).toDate(),d=c(a).format(l)):d="",{dpdate:b,viewdate:d}});var p=function(a){var b=i.parent().find("button"),c=b.find("i");h.open&&a.target!==b[0]&&a.target!==c[0]&&h.$apply(function(){h.open=!1})};h.$watch("open",function(a){a?(r.offset(e.position(260,270,i)),h.$broadcast("datepicker.focus"),d.bind("click",p)):d.unbind("click",p)});var q=function(a){h.keydown(a)};i.bind("keydown",q),h.keydown=function(a){a.which===m?(a.preventDefault(),a.stopPropagation(),h.close()):a.which!==n||h.open||(h.open=!0)},h.close=function(){h.open=!1,i[0].focus()};var r=b(o)(h);o.remove(),d.find("body").append(r),h.$on("$destroy",function(){r.remove(),i.unbind("keydown",q),d.unbind("click",p)})}}}function s(){return{scope:{tt:"=ngModel",disabled:"=ngDisabled"},templateUrl:"scripts/superdesk/ui/views/sd-timepicker.html",link:function(a){}}}function t(b,d,e,f){var g='<div sd-timepicker-popup data-open="open" data-time="time" data-select="timeSelection({time: time})" data-keydown="keydown(e)"></div>';return{scope:{open:"=opened"},require:"ngModel",link:function(h,i,j,k){function l(a){return c(a,m).add(c().utcOffset(),"minutes").format(m)}var m="HH:mm:ss",n=27,o=40,p=a.element(g);k.$parsers.unshift(function(a){return a?a.tptime?(k.$setValidity("time",!0),a.tptime):f.isValidTime(a)?(k.$setValidity("time",!0),h.time=c(a,m).utc().format(m),h.time):(k.$setValidity("time",!1),null):(k.$setValidity("time",!0),null)}),h.timeSelection=function(b){a.isDefined(b)&&(h.time=b.time,k.$setViewValue({tptime:b.time,viewtime:l(b.time)}),k.$render()),h.close()},k.$render=function(){i.val(k.$viewValue.viewtime),h.time=k.$viewValue.tptime},k.$formatters.unshift(function(a){var b,c="Invalid Time";return a?f.isValidTime(a)&&(b=a,c=l(a)):c="",{tptime:b,viewtime:c}}),h.$watch("open",function(a){a?(s.offset(e.position(200,310,i)),h.$broadcast("timepicker.focus"),d.bind("click",q)):d.unbind("click",q)});var q=function(a){var b=i.parent().find("button"),c=b.find("i");h.open&&a.target!==b[0]&&a.target!==c[0]&&h.$apply(function(){h.open=!1})},r=function(a){h.keydown(a)};i.bind("keydown",r),h.keydown=function(a){a.which===n?(a.preventDefault(),a.stopPropagation(),h.close()):a.which!==o||h.open||(h.open=!0)},h.close=function(){h.open=!1,i[0].focus()};var s=b(p)(h);p.remove(),d.find("body").append(s),h.$on("$destroy",function(){s.remove()})}}}function u(a){return{templateUrl:"scripts/superdesk/ui/views/sd-timepicker-popup.html",scope:{open:"=",select:"&",keydown:"&",time:"="},link:function(b,d){var e="HH:mm:ss",f=".timepicker-popup",g=function(){a(function(){d.find(f).focus()},0,!1)};b.$on("timepicker.focus",g),d.bind("click",function(a){a.preventDefault(),a.stopPropagation()}),b.hours=_.range(24),b.minutes=_.range(0,60,5),b.$watch("time",function(a,d){var f;f=a?c(a,e).add(c().utcOffset(),"minutes"):c(),b.hour=f.hour(),b.minute=f.minute()-f.minute()%5+5,b.second=f.second()}),b.submit=function(a){var d,f;d=a?c().add(a,"minutes").format(e):b.hour+":"+b.minute+":"+b.second,f=c(d,e).utc().format(e),b.select({time:f})},b.cancel=function(){b.select()}}}}function v(a){function b(a,b,c){c=c||1;for(var d=[],e=a;b>=e;e+=c)d.push(e);return d}var c=5;return{scope:{model:"=",noUtcConvert:"@"},templateUrl:"scripts/superdesk/ui/views/sd-timepicker-alt.html",link:function(d){function e(){d.hasValue?(d.hours=k.getHours(),d.minutes=k.getMinutes(),d.model=j?f():g(k)):(d.hours=0,d.minutes=0,d.model="")}function f(){var a=k.getUTCHours().toString(),b=k.getUTCMinutes().toString();return("00"+a).slice(-2)+("00"+b).slice(-2)}function g(a){var b=("00"+a.getHours()).slice(-2),c=("00"+a.getMinutes()).slice(-2);return b+c}var h,i,j,k=new Date;j="true"!==(d.noUtcConvert||"").toLowerCase(),d.open=!1,d.hoursRange=b(0,23),d.minutesRange=b(0,59,c),a.$promise.then(function(){d.timeZones=a.getTzNames()}),d.model?(h=d.model.substr(0,2),i=d.model.substr(2,2),j?(k.setUTCHours(h),k.setUTCMinutes(i)):(k.setHours(h),k.setMinutes(i))):(k.setHours(0),k.setMinutes(0)),d.hasValue=!!d.model,d.setHours=function(a){k.setHours(a),d.hasValue=!0,e()},d.setMinutes=function(a){k.setMinutes(a),d.hasValue=!0,e()},d.toggle=function(){d.open=!d.open},d.clearValue=function(){k.setHours(0),k.setMinutes(0),d.hasValue=!1,e()},e()}}}function w(){return function(a){return 10>a&&(a="0"+a),a}}function x(){this.isValidTime=function(a){for(var b,c,d,e=0,f=0;f<a.length;f++){var g=a.substring(f,f+1);if(("0">g||g>"9")&&":"!==g)return!1;":"===g&&e++}return 2!==e?!1:(b=a.substring(0,a.indexOf(":")),2!==b.length||parseFloat(b)<0||parseFloat(b)>23?!1:(c=a.substring(a.indexOf(":")+1,a.lastIndexOf(":")),2!==c.length||parseFloat(c)<0||parseFloat(c)>59?!1:(d=a.substring(a.lastIndexOf(":")+1,a.length),2!==d.length||parseFloat(d)<0||parseFloat(d)>59?!1:!0)))},this.isValidDate=function(a){var b=/^(0?[1-9]|[12][0-9]|3[01])\/(0?[1-9]|1[012])\/(19\d{2}|[2-9]\d{3})$/,c=new RegExp(b);return c.test(a)},this.mergeDateTime=function(a,b){var d=c(a).format("YYYY-MM-DD"),e=c(b,"HH:mm:ss").add(c().utcOffset(),"minute").format("HH:mm:ss"),f=d+" "+e;return c(f,"YYYY-MM-DD HH:mm:ss").utc()}}function y(a){return{templateUrl:"scripts/superdesk/ui/views/weekday-picker.html",scope:{model:"="},link:function(b){b.weekdays=a,b.weekdayList=Object.keys(a),b.model=b.model||[],b.isDayChecked=function(a){return-1!==b.model.indexOf(a)},b.toggleDay=function(a){b.isDayChecked(a)?b.model.splice(b.model.indexOf(a),1):b.model.push(a)}}}}return e.$inject=["$timeout"],g.$inject=[],h.$inject=[],i.$inject=[],j.$inject=[],k.$inject=[],l.$inject=[],m.$inject=["$document"],n.$inject=["$position"],o.$inject=["$document"],r.$inject=["$compile","$document","popupService","datetimeHelper"],t.$inject=["$compile","$document","popupService","datetimeHelper"],u.$inject=["$timeout"],v.$inject=["tzdata"],x.$inject=[],y.$inject=["weekdays"],a.module("superdesk.ui",["superdesk.dashboard.world-clock"]).directive("sdShadow",e).directive("sdAutoHeight",b("./autoheight-directive")).directive("sdToggleBox",d).filter("nl2el",f).factory("WizardHandler",g).directive("sdWizard",h).directive("sdWizardStep",i).directive("sdCreateBtn",j).directive("sdAutofocus",k).directive("sdAutoexpand",l).directive("sdDatepickerInner",r).directive("sdDatepickerWrapper",p).directive("sdDatepicker",q).directive("sdTimepickerInner",t).directive("sdTimepickerPopup",u).directive("sdTimepicker",s).directive("sdTimepickerAlt",v).service("popupService",o).service("datetimeHelper",x).filter("leadingZero",w).directive("sdDropdownPosition",m).directive("sdDropdownPositionRight",n).directive("sdWeekdayPicker",y)}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("moment-timezone",["moment"],b):"object"==typeof exports?module.exports=b(require("moment")):b(a.moment)}(this,function(a){"use strict";function b(a){return a>96?a-87:a>64?a-29:a-48}function c(a){var c,d=0,e=a.split("."),f=e[0],g=e[1]||"",h=1,i=0,j=1;for(45===a.charCodeAt(0)&&(d=1,j=-1),d;d<f.length;d++)c=b(f.charCodeAt(d)),i=60*i+c;for(d=0;d<g.length;d++)h/=60,c=b(g.charCodeAt(d)),i+=c*h;return i*j}function d(a){for(var b=0;b<a.length;b++)a[b]=c(a[b])}function e(a,b){for(var c=0;b>c;c++)a[c]=Math.round((a[c-1]||0)+6e4*a[c]);a[b-1]=1/0}function f(a,b){var c,d=[];for(c=0;c<b.length;c++)d[c]=a[b[c]];return d}function g(a){var b=a.split("|"),c=b[2].split(" "),g=b[3].split(""),h=b[4].split(" ");return d(c),d(g),d(h),e(h,g.length),{name:b[0],abbrs:f(b[1].split(" "),g),offsets:f(c,g),untils:h}}function h(a){a&&this._set(g(a))}function i(a){return(a||"").toLowerCase().replace(/\//g,"_")}function j(a){var b,c,d;for("string"==typeof a&&(a=[a]),b=0;b<a.length;b++)c=a[b].split("|")[0],d=i(c),v[d]=a[b],x[d]=c}function k(a,b){a=i(a);var c,d=v[a];return d instanceof h?d:"string"==typeof d?(d=new h(d),v[a]=d,d):w[a]&&b!==k&&(c=k(w[a],k))?(d=v[a]=new h,d._set(c),d.name=x[a],d):null}function l(){var a,b=[];for(a in x)x.hasOwnProperty(a)&&(v[a]||v[w[a]])&&x[a]&&b.push(x[a]);return b.sort()}function m(a){var b,c,d,e;for("string"==typeof a&&(a=[a]),b=0;b<a.length;b++)c=a[b].split("|"),d=i(c[0]),e=i(c[1]),w[d]=e,x[d]=c[0],w[e]=d,x[e]=c[1]}function n(a){j(a.zones),m(a.links),r.dataVersion=a.version}function o(a){return o.didShowError||(o.didShowError=!0,q("moment.tz.zoneExists('"+a+"') has been deprecated in favor of !moment.tz.zone('"+a+"')")),!!k(a)}function p(a){return!(!a._a||void 0!==a._tzm)}function q(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a)}function r(b){var c=Array.prototype.slice.call(arguments,0,-1),d=arguments[arguments.length-1],e=k(d),f=a.utc.apply(null,c);return e&&!a.isMoment(b)&&p(f)&&f.add(e.parse(f),"minutes"),f.tz(d),f}function s(a){
return function(){return this._z?this._z.abbr(this):a.call(this)}}function t(a){return function(){return this._z=null,a.apply(this,arguments)}}if(void 0!==a.tz)return q("Moment Timezone "+a.tz.version+" was already loaded "+(a.tz.dataVersion?"with data from ":"without any data")+a.tz.dataVersion),a;var u="0.4.0",v={},w={},x={},y=a.version.split("."),z=+y[0],A=+y[1];(2>z||2===z&&6>A)&&q("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+a.version+". See momentjs.com"),h.prototype={_set:function(a){this.name=a.name,this.abbrs=a.abbrs,this.untils=a.untils,this.offsets=a.offsets},_index:function(a){var b,c=+a,d=this.untils;for(b=0;b<d.length;b++)if(c<d[b])return b},parse:function(a){var b,c,d,e,f=+a,g=this.offsets,h=this.untils,i=h.length-1;for(e=0;i>e;e++)if(b=g[e],c=g[e+1],d=g[e?e-1:e],c>b&&r.moveAmbiguousForward?b=c:b>d&&r.moveInvalidForward&&(b=d),f<h[e]-6e4*b)return g[e];return g[i]},abbr:function(a){return this.abbrs[this._index(a)]},offset:function(a){return this.offsets[this._index(a)]}},r.version=u,r.dataVersion="",r._zones=v,r._links=w,r._names=x,r.add=j,r.link=m,r.load=n,r.zone=k,r.zoneExists=o,r.names=l,r.Zone=h,r.unpack=g,r.unpackBase60=c,r.needsOffset=p,r.moveInvalidForward=!0,r.moveAmbiguousForward=!1;var B=a.fn;a.tz=r,a.defaultZone=null,a.updateOffset=function(b,c){var d,e=a.defaultZone;void 0===b._z&&(e&&p(b)&&!b._isUTC&&(b._d=a.utc(b._a)._d,b.utc().add(e.parse(b),"minutes")),b._z=e),b._z&&(d=b._z.offset(b),Math.abs(d)<16&&(d/=60),void 0!==b.utcOffset?b.utcOffset(-d,c):b.zone(d,c))},B.tz=function(b){return b?(this._z=k(b),this._z?a.updateOffset(this):q("Moment Timezone has no data for "+b+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},B.zoneName=s(B.zoneName),B.zoneAbbr=s(B.zoneAbbr),B.utc=t(B.utc),a.tz.setDefault=function(b){return(2>z||2===z&&9>A)&&q("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+a.version+"."),a.defaultZone=b?k(b):null,a};var C=a.momentProperties;return"[object Array]"===Object.prototype.toString.call(C)?(C.push("_z"),C.push("_a")):C&&(C._z=null),n({version:"2015d",zones:["Africa/Abidjan|GMT|0|0|","Africa/Addis_Ababa|EAT|-30|0|","Africa/Algiers|CET|-10|0|","Africa/Bangui|WAT|-10|0|","Africa/Blantyre|CAT|-20|0|","Africa/Cairo|EET EEST|-20 -30|010101010|1Cby0 Fb0 c10 8n0 8Nd0 gL0 e10 mn0","Africa/Casablanca|WET WEST|0 -10|01010101010101010101010101010101010101010|1Cco0 Db0 1zd0 Lz0 1Nf0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uo0 e00 DA0 11A0 rA0 e00 Jc0 WM0 m00 gM0 M00 WM0 jc0 e00 RA0 11A0 dA0 e00 Uo0 11A0 800 gM0 Xc0","Africa/Ceuta|CET CEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Africa/Johannesburg|SAST|-20|0|","Africa/Tripoli|EET CET CEST|-20 -10 -20|0120|1IlA0 TA0 1o00","Africa/Windhoek|WAST WAT|-20 -10|01010101010101010101010|1C1c0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 11B0","America/Adak|HST HDT|a0 90|01010101010101010101010|1BR00 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1BQX0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Anguilla|AST|40|0|","America/Araguaina|BRT BRST|30 20|010|1IdD0 Lz0","America/Argentina/Buenos_Aires|ART|30|0|","America/Asuncion|PYST PYT|30 40|01010101010101010101010|1C430 1a10 1fz0 1a10 1fz0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0","America/Atikokan|EST|50|0|","America/Bahia|BRT BRST|30 20|010|1FJf0 Rb0","America/Bahia_Banderas|MST CDT CST|70 50 60|01212121212121212121212|1C1l0 1nW0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Belem|BRT|30|0|","America/Belize|CST|60|0|","America/Boa_Vista|AMT|40|0|","America/Bogota|COT|50|0|","America/Boise|MST MDT|70 60|01010101010101010101010|1BQV0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Campo_Grande|AMST AMT|30 40|01010101010101010101010|1BIr0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Cancun|CST CDT EST|60 50 50|010101010102|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 Dd0","America/Caracas|VET|4u|0|","America/Cayenne|GFT|30|0|","America/Chicago|CST CDT|60 50|01010101010101010101010|1BQU0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1C1l0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Creston|MST|70|0|","America/Dawson|PST PDT|80 70|01010101010101010101010|1BQW0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Detroit|EST EDT|50 40|01010101010101010101010|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Eirunepe|AMT ACT|40 50|01|1KLE0","America/Glace_Bay|AST ADT|40 30|01010101010101010101010|1BQS0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Godthab|WGT WGST|30 20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/Goose_Bay|AST ADT|40 30|01010101010101010101010|1BQQ1 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Grand_Turk|EST EDT AST|50 40 40|0101010101012|1BQT0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Guayaquil|ECT|50|0|","America/Guyana|GYT|40|0|","America/Havana|CST CDT|50 40|01010101010101010101010|1BQR0 1wo0 U00 1zc0 U00 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0","America/La_Paz|BOT|40|0|","America/Lima|PET|50|0|","America/Merida|CST CDT|60 50|01010101010101010101010|1C1k0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Metlakatla|PST|80|0|","America/Miquelon|PMST PMDT|30 20|01010101010101010101010|1BQR0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Montevideo|UYST UYT|20 30|01010101010101010101010|1BQQ0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 14n0 1ld0 14n0 1ld0 14n0 1o10 11z0 1o10 11z0 1o10","America/Noronha|FNT|20|0|","America/North_Dakota/Beulah|MST MDT CST CDT|70 60 60 50|01232323232323232323232|1BQV0 1zb0 Oo0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Paramaribo|SRT|30|0|","America/Port-au-Prince|EST EDT|50 40|0101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","America/Santa_Isabel|PST PDT|80 70|01010101010101010101010|1C1m0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0","America/Santiago|CLST CLT CLT|30 40 30|010101010102|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0","America/Sao_Paulo|BRST BRT|20 30|01010101010101010101010|1BIq0 1zd0 On0 1zd0 Rb0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1C10 Lz0 1C10 Lz0 1C10","America/Scoresbysund|EGT EGST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1BQPv 1zb0 Op0 1zcX Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0","Antarctica/Casey|CAST AWST|-b0 -80|0101|1BN30 40P0 KL0","Antarctica/Davis|DAVT DAVT|-50 -70|0101|1BPw0 3Wn0 KN0","Antarctica/DumontDUrville|DDUT|-a0|0|","Antarctica/Macquarie|AEDT MIST|-b0 -b0|01|1C140","Antarctica/Mawson|MAWT|-50|0|","Antarctica/McMurdo|NZDT NZST|-d0 -c0|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Antarctica/Rothera|ROTT|30|0|","Antarctica/Syowa|SYOT|-30|0|","Antarctica/Troll|UTC CEST|0 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Antarctica/Vostok|VOST|-60|0|","Asia/Aden|AST|-30|0|","Asia/Almaty|ALMT|-60|0|","Asia/Amman|EET EEST|-20 -30|010101010101010101010|1BVy0 1qM0 11A0 1o00 11A0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0","Asia/Anadyr|ANAT ANAST ANAT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Aqtau|AQTT|-50|0|","Asia/Ashgabat|TMT|-50|0|","Asia/Baku|AZT AZST|-40 -50|01010101010101010101010|1BWo0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Bangkok|ICT|-70|0|","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1BWm0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0","Asia/Bishkek|KGT|-60|0|","Asia/Brunei|BNT|-80|0|","Asia/Calcutta|IST|-5u|0|","Asia/Chita|YAKT YAKST YAKT IRKT|-90 -a0 -a0 -80|01023|1BWh0 1qM0 WM0 8Hz0","Asia/Choibalsan|CHOT CHOST|-80 -90|0101010101010|1O8G0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Chongqing|CST|-80|0|","Asia/Dacca|BDT|-60|0|","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1C0m0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0","Asia/Dili|TLT|-90|0|","Asia/Dubai|GST|-40|0|","Asia/Dushanbe|TJT|-50|0|","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1BVW1 SKX 1xd1 MKX 1AN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0","Asia/Hebron|EET EEST|-20 -30|0101010101010101010101010|1BVy0 Tb0 1xd1 MKX bB0 cn0 1cN0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1210 1nz0 14N0 1nz0 1210 1nz0 1210 1nz0 1210 1nz0","Asia/Hong_Kong|HKT|-80|0|","Asia/Hovd|HOVT HOVST|-70 -80|0101010101010|1O8H0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Irkutsk|IRKT IRKST IRKT|-80 -90 -90|01020|1BWi0 1qM0 WM0 8Hz0","Asia/Istanbul|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 Xc0 1qo0 WM0 1qM0 11A0 1o00 1200 1nA0 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Jakarta|WIB|-70|0|","Asia/Jayapura|WIT|-90|0|","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1BVA0 17X0 1kp0 1dz0 1c10 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0","Asia/Kabul|AFT|-4u|0|","Asia/Kamchatka|PETT PETST PETT|-c0 -c0 -b0|0120|1BWe0 1qN0 WM0","Asia/Karachi|PKT|-50|0|","Asia/Kashgar|XJT|-60|0|","Asia/Kathmandu|NPT|-5J|0|","Asia/Khandyga|VLAT VLAST VLAT YAKT YAKT|-a0 -b0 -b0 -a0 -90|010234|1BWg0 1qM0 WM0 17V0 7zD0","Asia/Krasnoyarsk|KRAT KRAST KRAT|-70 -80 -80|01020|1BWj0 1qM0 WM0 8Hz0","Asia/Kuala_Lumpur|MYT|-80|0|","Asia/Magadan|MAGT MAGST MAGT MAGT|-b0 -c0 -c0 -a0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Makassar|WITA|-80|0|","Asia/Manila|PHT|-80|0|","Asia/Nicosia|EET EEST|-20 -30|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Asia/Novokuznetsk|KRAT NOVST NOVT NOVT|-70 -70 -60 -70|01230|1BWj0 1qN0 WM0 8Hz0","Asia/Novosibirsk|NOVT NOVST NOVT|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Omsk|OMST OMSST OMST|-60 -70 -70|01020|1BWk0 1qM0 WM0 8Hz0","Asia/Oral|ORAT|-50|0|","Asia/Pyongyang|KST|-90|0|","Asia/Qyzylorda|QYZT|-60|0|","Asia/Rangoon|MMT|-6u|0|","Asia/Sakhalin|SAKT SAKST SAKT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Samarkand|UZT|-50|0|","Asia/Singapore|SGT|-80|0|","Asia/Srednekolymsk|MAGT MAGST MAGT SRET|-b0 -c0 -c0 -b0|01023|1BWf0 1qM0 WM0 8Hz0","Asia/Tbilisi|GET|-40|0|","Asia/Tehran|IRST IRDT|-3u -4u|01010101010101010101010|1BTUu 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0","Asia/Thimbu|BTT|-60|0|","Asia/Tokyo|JST|-90|0|","Asia/Ulaanbaatar|ULAT ULAST|-80 -90|0101010101010|1O8G0 1cJ0 1cP0 1cJ0 1cP0 1fx0 1cP0 1cJ0 1cP0 1cJ0 1cP0 1cJ0","Asia/Ust-Nera|MAGT MAGST MAGT VLAT VLAT|-b0 -c0 -c0 -b0 -a0|010234|1BWf0 1qM0 WM0 17V0 7zD0","Asia/Vladivostok|VLAT VLAST VLAT|-a0 -b0 -b0|01020|1BWg0 1qM0 WM0 8Hz0","Asia/Yakutsk|YAKT YAKST YAKT|-90 -a0 -a0|01020|1BWh0 1qM0 WM0 8Hz0","Asia/Yekaterinburg|YEKT YEKST YEKT|-50 -60 -60|01020|1BWl0 1qM0 WM0 8Hz0","Asia/Yerevan|AMT AMST|-40 -50|01010|1BWm0 1qM0 WM0 1qM0","Atlantic/Azores|AZOT AZOST|10 0|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Canary|WET WEST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Atlantic/Cape_Verde|CVT|10|0|","Atlantic/South_Georgia|GST|20|0|","Atlantic/Stanley|FKST FKT|30 40|010|1C6R0 U10","Australia/ACT|AEDT AEST|-b0 -a0|01010101010101010101010|1C140 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1C14u 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0","Australia/Brisbane|AEST|-a0|0|","Australia/Darwin|ACST|-9u|0|","Australia/Eucla|ACWST|-8J|0|","Australia/LHI|LHDT LHST|-b0 -au|01010101010101010101010|1C130 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu","Australia/Perth|AWST|-80|0|","Chile/EasterIsland|EASST EAST EAST|50 60 50|010101010102|1C1f0 1fB0 1nX0 G10 1EL0 Op0 1zb0 Rd0 1wn0 Rd0 1wn0","Eire|GMT IST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Etc/GMT+1|GMT+1|10|0|","Etc/GMT+10|GMT+10|a0|0|","Etc/GMT+11|GMT+11|b0|0|","Etc/GMT+12|GMT+12|c0|0|","Etc/GMT+2|GMT+2|20|0|","Etc/GMT+3|GMT+3|30|0|","Etc/GMT+4|GMT+4|40|0|","Etc/GMT+5|GMT+5|50|0|","Etc/GMT+6|GMT+6|60|0|","Etc/GMT+7|GMT+7|70|0|","Etc/GMT+8|GMT+8|80|0|","Etc/GMT+9|GMT+9|90|0|","Etc/GMT-1|GMT-1|-10|0|","Etc/GMT-10|GMT-10|-a0|0|","Etc/GMT-11|GMT-11|-b0|0|","Etc/GMT-12|GMT-12|-c0|0|","Etc/GMT-13|GMT-13|-d0|0|","Etc/GMT-14|GMT-14|-e0|0|","Etc/GMT-2|GMT-2|-20|0|","Etc/GMT-3|GMT-3|-30|0|","Etc/GMT-4|GMT-4|-40|0|","Etc/GMT-5|GMT-5|-50|0|","Etc/GMT-6|GMT-6|-60|0|","Etc/GMT-7|GMT-7|-70|0|","Etc/GMT-8|GMT-8|-80|0|","Etc/GMT-9|GMT-9|-90|0|","Etc/UCT|UCT|0|0|","Etc/UTC|UTC|0|0|","Europe/Belfast|GMT BST|0 -10|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","Europe/Kaliningrad|EET EEST FET|-20 -30 -30|01020|1BWo0 1qM0 WM0 8Hz0","Europe/Minsk|EET EEST FET MSK|-20 -30 -30 -30|01023|1BWo0 1qM0 WM0 8Hy0","Europe/Moscow|MSK MSD MSK|-30 -40 -40|01020|1BWn0 1qM0 WM0 8Hz0","Europe/Samara|SAMT SAMST SAMT|-40 -40 -30|0120|1BWm0 1qN0 WM0","Europe/Simferopol|EET EEST MSK MSK|-20 -30 -40 -30|01010101023|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11z0 1nW0","HST|HST|a0|0|","Indian/Chagos|IOT|-60|0|","Indian/Christmas|CXT|-70|0|","Indian/Cocos|CCT|-6u|0|","Indian/Kerguelen|TFT|-50|0|","Indian/Mahe|SCT|-40|0|","Indian/Maldives|MVT|-50|0|","Indian/Mauritius|MUT|-40|0|","Indian/Reunion|RET|-40|0|","Kwajalein|MHT|-c0|0|","MET|MET MEST|-10 -20|01010101010101010101010|1BWp0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00","NZ-CHAT|CHADT CHAST|-dJ -cJ|01010101010101010101010|1C120 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Apia|SST SDT WSDT WSST|b0 a0 -e0 -d0|01012323232323232323232|1Dbn0 1ff0 1a00 CI0 AQ0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00","Pacific/Bougainville|PGT BST|-a0 -b0|01|1NwE0","Pacific/Chuuk|CHUT|-a0|0|","Pacific/Efate|VUT|-b0|0|","Pacific/Enderbury|PHOT|-d0|0|","Pacific/Fakaofo|TKT TKT|b0 -d0|01|1Gfn0","Pacific/Fiji|FJST FJT|-d0 -c0|01010101010101010101010|1BWe0 1o00 Rc0 1wo0 Ao0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 xA0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0 uM0 1SM0","Pacific/Funafuti|TVT|-c0|0|","Pacific/Galapagos|GALT|60|0|","Pacific/Gambier|GAMT|90|0|","Pacific/Guadalcanal|SBT|-b0|0|","Pacific/Guam|ChST|-a0|0|","Pacific/Kiritimati|LINT|-e0|0|","Pacific/Kosrae|KOST|-b0|0|","Pacific/Marquesas|MART|9u|0|","Pacific/Midway|SST|b0|0|","Pacific/Nauru|NRT|-c0|0|","Pacific/Niue|NUT|b0|0|","Pacific/Norfolk|NFT|-bu|0|","Pacific/Noumea|NCT|-b0|0|","Pacific/Palau|PWT|-90|0|","Pacific/Pohnpei|PONT|-b0|0|","Pacific/Port_Moresby|PGT|-a0|0|","Pacific/Rarotonga|CKT|a0|0|","Pacific/Tahiti|TAHT|a0|0|","Pacific/Tarawa|GILT|-c0|0|","Pacific/Tongatapu|TOT|-d0|0|","Pacific/Wake|WAKT|-c0|0|","Pacific/Wallis|WFT|-c0|0|"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Sao_Tome","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Addis_Ababa|Africa/Asmara","Africa/Addis_Ababa|Africa/Asmera","Africa/Addis_Ababa|Africa/Dar_es_Salaam","Africa/Addis_Ababa|Africa/Djibouti","Africa/Addis_Ababa|Africa/Juba","Africa/Addis_Ababa|Africa/Kampala","Africa/Addis_Ababa|Africa/Khartoum","Africa/Addis_Ababa|Africa/Mogadishu","Africa/Addis_Ababa|Africa/Nairobi","Africa/Addis_Ababa|Indian/Antananarivo","Africa/Addis_Ababa|Indian/Comoro","Africa/Addis_Ababa|Indian/Mayotte","Africa/Algiers|Africa/Tunis","Africa/Bangui|Africa/Brazzaville","Africa/Bangui|Africa/Douala","Africa/Bangui|Africa/Kinshasa","Africa/Bangui|Africa/Lagos","Africa/Bangui|Africa/Libreville","Africa/Bangui|Africa/Luanda","Africa/Bangui|Africa/Malabo","Africa/Bangui|Africa/Ndjamena","Africa/Bangui|Africa/Niamey","Africa/Bangui|Africa/Porto-Novo","Africa/Blantyre|Africa/Bujumbura","Africa/Blantyre|Africa/Gaborone","Africa/Blantyre|Africa/Harare","Africa/Blantyre|Africa/Kigali","Africa/Blantyre|Africa/Lubumbashi","Africa/Blantyre|Africa/Lusaka","Africa/Blantyre|Africa/Maputo","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Ceuta|Arctic/Longyearbyen","Africa/Ceuta|Atlantic/Jan_Mayen","Africa/Ceuta|CET","Africa/Ceuta|Europe/Amsterdam","Africa/Ceuta|Europe/Andorra","Africa/Ceuta|Europe/Belgrade","Africa/Ceuta|Europe/Berlin","Africa/Ceuta|Europe/Bratislava","Africa/Ceuta|Europe/Brussels","Africa/Ceuta|Europe/Budapest","Africa/Ceuta|Europe/Busingen","Africa/Ceuta|Europe/Copenhagen","Africa/Ceuta|Europe/Gibraltar","Africa/Ceuta|Europe/Ljubljana","Africa/Ceuta|Europe/Luxembourg","Africa/Ceuta|Europe/Madrid","Africa/Ceuta|Europe/Malta","Africa/Ceuta|Europe/Monaco","Africa/Ceuta|Europe/Oslo","Africa/Ceuta|Europe/Paris","Africa/Ceuta|Europe/Podgorica","Africa/Ceuta|Europe/Prague","Africa/Ceuta|Europe/Rome","Africa/Ceuta|Europe/San_Marino","Africa/Ceuta|Europe/Sarajevo","Africa/Ceuta|Europe/Skopje","Africa/Ceuta|Europe/Stockholm","Africa/Ceuta|Europe/Tirane","Africa/Ceuta|Europe/Vaduz","Africa/Ceuta|Europe/Vatican","Africa/Ceuta|Europe/Vienna","Africa/Ceuta|Europe/Warsaw","Africa/Ceuta|Europe/Zagreb","Africa/Ceuta|Europe/Zurich","Africa/Ceuta|Poland","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Anguilla|America/Antigua","America/Anguilla|America/Aruba","America/Anguilla|America/Barbados","America/Anguilla|America/Blanc-Sablon","America/Anguilla|America/Curacao","America/Anguilla|America/Dominica","America/Anguilla|America/Grenada","America/Anguilla|America/Guadeloupe","America/Anguilla|America/Kralendijk","America/Anguilla|America/Lower_Princes","America/Anguilla|America/Marigot","America/Anguilla|America/Martinique","America/Anguilla|America/Montserrat","America/Anguilla|America/Port_of_Spain","America/Anguilla|America/Puerto_Rico","America/Anguilla|America/Santo_Domingo","America/Anguilla|America/St_Barthelemy","America/Anguilla|America/St_Kitts","America/Anguilla|America/St_Lucia","America/Anguilla|America/St_Thomas","America/Anguilla|America/St_Vincent","America/Anguilla|America/Tortola","America/Anguilla|America/Virgin","America/Argentina/Buenos_Aires|America/Argentina/Catamarca","America/Argentina/Buenos_Aires|America/Argentina/ComodRivadavia","America/Argentina/Buenos_Aires|America/Argentina/Cordoba","America/Argentina/Buenos_Aires|America/Argentina/Jujuy","America/Argentina/Buenos_Aires|America/Argentina/La_Rioja","America/Argentina/Buenos_Aires|America/Argentina/Mendoza","America/Argentina/Buenos_Aires|America/Argentina/Rio_Gallegos","America/Argentina/Buenos_Aires|America/Argentina/Salta","America/Argentina/Buenos_Aires|America/Argentina/San_Juan","America/Argentina/Buenos_Aires|America/Argentina/San_Luis","America/Argentina/Buenos_Aires|America/Argentina/Tucuman","America/Argentina/Buenos_Aires|America/Argentina/Ushuaia","America/Argentina/Buenos_Aires|America/Buenos_Aires","America/Argentina/Buenos_Aires|America/Catamarca","America/Argentina/Buenos_Aires|America/Cordoba","America/Argentina/Buenos_Aires|America/Jujuy","America/Argentina/Buenos_Aires|America/Mendoza","America/Argentina/Buenos_Aires|America/Rosario","America/Atikokan|America/Cayman","America/Atikokan|America/Coral_Harbour","America/Atikokan|America/Jamaica","America/Atikokan|America/Panama","America/Atikokan|EST","America/Atikokan|Jamaica","America/Belem|America/Fortaleza","America/Belem|America/Maceio","America/Belem|America/Recife","America/Belem|America/Santarem","America/Belize|America/Costa_Rica","America/Belize|America/El_Salvador","America/Belize|America/Guatemala","America/Belize|America/Managua","America/Belize|America/Regina","America/Belize|America/Swift_Current","America/Belize|America/Tegucigalpa","America/Belize|Canada/East-Saskatchewan","America/Belize|Canada/Saskatchewan","America/Boa_Vista|America/Manaus","America/Boa_Vista|America/Porto_Velho","America/Boa_Vista|Brazil/West","America/Boise|America/Cambridge_Bay","America/Boise|America/Denver","America/Boise|America/Edmonton","America/Boise|America/Inuvik","America/Boise|America/Ojinaga","America/Boise|America/Shiprock","America/Boise|America/Yellowknife","America/Boise|Canada/Mountain","America/Boise|MST7MDT","America/Boise|Navajo","America/Boise|US/Mountain","America/Campo_Grande|America/Cuiaba","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Creston|America/Dawson_Creek","America/Creston|America/Hermosillo","America/Creston|America/Phoenix","America/Creston|MST","America/Creston|US/Arizona","America/Dawson|America/Ensenada","America/Dawson|America/Los_Angeles","America/Dawson|America/Tijuana","America/Dawson|America/Vancouver","America/Dawson|America/Whitehorse","America/Dawson|Canada/Pacific","America/Dawson|Canada/Yukon","America/Dawson|Mexico/BajaNorte","America/Dawson|PST8PDT","America/Dawson|US/Pacific","America/Dawson|US/Pacific-New","America/Detroit|America/Fort_Wayne","America/Detroit|America/Indiana/Indianapolis","America/Detroit|America/Indiana/Marengo","America/Detroit|America/Indiana/Petersburg","America/Detroit|America/Indiana/Vevay","America/Detroit|America/Indiana/Vincennes","America/Detroit|America/Indiana/Winamac","America/Detroit|America/Indianapolis","America/Detroit|America/Iqaluit","America/Detroit|America/Kentucky/Louisville","America/Detroit|America/Kentucky/Monticello","America/Detroit|America/Louisville","America/Detroit|America/Montreal","America/Detroit|America/Nassau","America/Detroit|America/New_York","America/Detroit|America/Nipigon","America/Detroit|America/Pangnirtung","America/Detroit|America/Thunder_Bay","America/Detroit|America/Toronto","America/Detroit|Canada/Eastern","America/Detroit|EST5EDT","America/Detroit|US/East-Indiana","America/Detroit|US/Eastern","America/Detroit|US/Michigan","America/Eirunepe|America/Porto_Acre","America/Eirunepe|America/Rio_Branco","America/Eirunepe|Brazil/Acre","America/Glace_Bay|America/Halifax","America/Glace_Bay|America/Moncton","America/Glace_Bay|America/Thule","America/Glace_Bay|Atlantic/Bermuda","America/Glace_Bay|Canada/Atlantic","America/Havana|Cuba","America/Merida|America/Mexico_City","America/Merida|America/Monterrey","America/Merida|Mexico/General","America/Metlakatla|Pacific/Pitcairn","America/Noronha|Brazil/DeNoronha","America/Santiago|Antarctica/Palmer","America/Santiago|Chile/Continental","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","Antarctica/McMurdo|Antarctica/South_Pole","Antarctica/McMurdo|NZ","Antarctica/McMurdo|Pacific/Auckland","Asia/Aden|Asia/Baghdad","Asia/Aden|Asia/Bahrain","Asia/Aden|Asia/Kuwait","Asia/Aden|Asia/Qatar","Asia/Aden|Asia/Riyadh","Asia/Aqtau|Asia/Aqtobe","Asia/Ashgabat|Asia/Ashkhabad","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Calcutta|Asia/Colombo","Asia/Calcutta|Asia/Kolkata","Asia/Chongqing|Asia/Chungking","Asia/Chongqing|Asia/Harbin","Asia/Chongqing|Asia/Macao","Asia/Chongqing|Asia/Macau","Asia/Chongqing|Asia/Shanghai","Asia/Chongqing|Asia/Taipei","Asia/Chongqing|PRC","Asia/Chongqing|ROC","Asia/Dacca|Asia/Dhaka","Asia/Dubai|Asia/Muscat","Asia/Hong_Kong|Hongkong","Asia/Istanbul|Europe/Istanbul","Asia/Istanbul|Turkey","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kashgar|Asia/Urumqi","Asia/Kathmandu|Asia/Katmandu","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Makassar|Asia/Ujung_Pandang","Asia/Nicosia|EET","Asia/Nicosia|Europe/Athens","Asia/Nicosia|Europe/Bucharest","Asia/Nicosia|Europe/Chisinau","Asia/Nicosia|Europe/Helsinki","Asia/Nicosia|Europe/Kiev","Asia/Nicosia|Europe/Mariehamn","Asia/Nicosia|Europe/Nicosia","Asia/Nicosia|Europe/Riga","Asia/Nicosia|Europe/Sofia","Asia/Nicosia|Europe/Tallinn","Asia/Nicosia|Europe/Tiraspol","Asia/Nicosia|Europe/Uzhgorod","Asia/Nicosia|Europe/Vilnius","Asia/Nicosia|Europe/Zaporozhye","Asia/Pyongyang|Asia/Seoul","Asia/Pyongyang|ROK","Asia/Samarkand|Asia/Tashkent","Asia/Singapore|Singapore","Asia/Tehran|Iran","Asia/Thimbu|Asia/Thimphu","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Atlantic/Canary|Atlantic/Faeroe","Atlantic/Canary|Atlantic/Faroe","Atlantic/Canary|Atlantic/Madeira","Atlantic/Canary|Europe/Lisbon","Atlantic/Canary|Portugal","Atlantic/Canary|WET","Australia/ACT|Australia/Canberra","Australia/ACT|Australia/Currie","Australia/ACT|Australia/Hobart","Australia/ACT|Australia/Melbourne","Australia/ACT|Australia/NSW","Australia/ACT|Australia/Sydney","Australia/ACT|Australia/Tasmania","Australia/ACT|Australia/Victoria","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/LHI|Australia/Lord_Howe","Australia/Perth|Australia/West","Chile/EasterIsland|Pacific/Easter","Eire|Europe/Dublin","Etc/UCT|UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Belfast|Europe/Guernsey","Europe/Belfast|Europe/Isle_of_Man","Europe/Belfast|Europe/Jersey","Europe/Belfast|Europe/London","Europe/Belfast|GB","Europe/Belfast|GB-Eire","Europe/Moscow|Europe/Volgograd","Europe/Moscow|W-SU","HST|Pacific/Honolulu","HST|Pacific/Johnston","HST|US/Hawaii","Kwajalein|Pacific/Kwajalein","Kwajalein|Pacific/Majuro","NZ-CHAT|Pacific/Chatham","Pacific/Chuuk|Pacific/Truk","Pacific/Chuuk|Pacific/Yap","Pacific/Guam|Pacific/Saipan","Pacific/Midway|Pacific/Pago_Pago","Pacific/Midway|Pacific/Samoa","Pacific/Midway|US/Samoa","Pacific/Pohnpei|Pacific/Ponape"]}),a}),define("superdesk/filters",["angular","lodash","moment","moment-timezone"],function(a,b,c){"use strict";return a.module("superdesk.filters",[]).filter("any",function(){return function(a,c){return b.any(a,c)}}).filter("body",function(){return function(a){for(var b=$(a),c=[],d=0;d<b.length;d++){var e=$(b[d]);e.is("p")&&c.push(e[0].outerHTML)}return c.join("\n")}}).filter("mergeWords",function(){return function(a,c){var d=[];return b.forEach(a,function(a){var b=null==c?a:a[c];b&&d.push(b)}),d.join(", ")}}).filter("splitWords",function(){return function(a){var c=[];return b.forEach(a.split(","),function(a){var b=a.replace(/^\s+|\s+$/g,"");c.push({name:b})}),c}}).filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]).filter("filterObject",["$filter",function(b){return function(c,d){var e=[];return a.forEach(c,function(a){e.push(a)}),b("filter")(e,d)}}]).filter("menuGroup",function(){return function(a){return a&&a.category?"#"+a.href:"#/"}}).filter("truncateString",function(){return function(a,c,d){return b.trunc(a,{length:c,omission:d||"..."})}}).filter("formatDateTimeString",[function(){return function(b,d){var e=a.isDefined(b)?c(b).utc():c.utc();return a.isDefined(d)?e.format(d):e.format()}}]).filter("dateTimeString",["$filter",function(a){return function(b){return null!==b?a("date")(b,"dd.MM.yyyy HH:mm"):void 0}}]).filter("dateTimeStringWithSecs",["$filter",function(a){return function(b){return null!==b?a("date")(b,"dd.MM.yyyy HH:mm:ss"):void 0}}]).filter("queueStatus",["$filter",function(a){return function(a){return"pending"===a?"warning":"success"===a?"success":"error"===a?"danger":void 0}}]).filter("mergeTargets",function(){return function(a){var c=[];return b.forEach(a,function(a){c.push(a.allow===!1?"Not "+a.name:a.name)}),c.join(", ")}}).filter("previewDateline",["$filter",function(d){return function(e,f,g){if(b.isObject(e)&&a.isDefined(e.city)){var h=a.isDefined(g)?c.utc(g):c.utc(),i="";a.isDefined(e)&&"UTC"!==e.tz&&(h=h.tz(e.tz));var j=h.month()+1;return i=9===j?"Sept ":j>=3&&7>=j?h.format("MMMM"):h.format("MMM"),d("formatDatelineToLocMMMDDSrc")(e,i,h.format("DD"),f)}return""}}]).filter("daysInAMonth",function(){return function(a){for(var b=a?c(a+1,"MM"):c(),d=[],e=b.startOf("month").date();e<=b.endOf("month").date();e++)d.push(10>e?"0"+e:e.toString());return d}}).filter("formatDatelineToMMDD",function(){return function(b,d){var e=c.utc(b);return a.isDefined(d)&&"UTC"!==d.tz&&(e=e.tz(d.tz)),{month:e.month().toString(),day:e.format("DD")}}}).filter("formatDatelineToLocMMMDDSrc",function(){return function(a,c,d,e){e||(e="");var f=a.city_code,g=a.dateline.split(",");return b.indexOf(g,"state")&&f.concat(", ",a.state_code),b.indexOf(g,"country")&&f.concat(", ",a.country_code),f.toUpperCase().concat(", ",c," ",d," ",e," -")}}).filter("relativeUTCTimestamp",function(){return function(a,b,d){var e="UTC"===a.tz?c.utc():c().tz(a.tz);return e.month(b).date(d),e.toISOString()}}).filter("sortByName",function(){return function(a,c){return c||(c="name"),a=b.sortBy(a,function(a){return a[c].toLowerCase();
})}})}),define("superdesk/services/data",["angular","lodash"],function(a,b){"use strict";return a.module("superdesk.services.data",[]).service("LocationStateAdapter",["$location",function(a){this.get=function(b){return arguments.length?a.search()[b]:a.search()},this.set=function(b,c){return a.search(b,c)}}]).factory("DataAdapter",["$rootScope","em","LocationStateAdapter",function(c,d,e){return function(f,g){function h(){var c=a.extend({},m,k.get());return a.extend(c.where,b.pick(k.get(),m.filters)),c.hasOwnProperty("_id")&&delete c._id,c}function i(a){a.time=Date.now()-a.start,a.time>500&&console.info("Slow query",a)}var j=this,k=e,l=a.noop,m={page:1};this.query=function(b){j.loading=!0;var c={resource:f,criteria:b,start:Date.now()},e=d.getRepository(f).matching(b);return e.then(function(b){j.loading=!1,i(c),a.extend(j,b)}),e},this.page=function(a){switch(arguments.length){case 0:return k.get("page")||m.page;case 1:this._items&&k.set("page",a!==m.page?a:null)}},this.search=function(a,b){switch(arguments.length){case 0:return k.get("q");case 1:this._items&&(k.set("q",a),k.set("df",b),k.set("page",null))}return this},this.where=function(a,b){switch(arguments.length){case 1:return k.get(a)||null;case 2:k.set(a,b||null),k.set("page",null)}return this},this.find=function(a){return console.info("find",f,a),d.find(f,a)},this.reset=function(b){l(),m=a.extend({max_results:25,page:1,where:{},sort:[],filters:[],ttl:0},b),l=c.$watchCollection(function(){return h()},function(a){j.query(a)})},this.reload=function(){j.query(h())},g&&this.reset(g)}}])}),angular.module("gettext",[]),angular.module("gettext").constant("gettext",function(a){return a}),angular.module("gettext").factory("gettextCatalog",["gettextPlurals","$http","$cacheFactory","$interpolate","$rootScope",function(a,b,c,d,e){function f(){e.$broadcast("gettextLanguageChanged")}var g,h="$$noContext",i="<span>test</span>",j=angular.element("<span>"+i+"</span>").html()!==i,k=function(a){return g.debug&&g.currentLanguage!==g.baseLanguage?g.debugPrefix+a:a},l=function(a){return g.showTranslatedMarkers?g.translatedMarkerPrefix+a+g.translatedMarkerSuffix:a};return g={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:c("strings"),setCurrentLanguage:function(a){this.currentLanguage=a,f()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(a,b){this.strings[a]||(this.strings[a]={});for(var c in b){var d=b[c];if(j&&(c=angular.element("<span>"+c+"</span>").html()),angular.isString(d)||angular.isArray(d)){var e={};e[h]=d,d=e}for(var g in d){var i=d[g];d[g]=angular.isArray(i)?i:[i]}this.strings[a][c]=d}f()},getStringForm:function(a,b,c){var d=this.strings[this.currentLanguage]||{},e=d[a]||{},f=e[c||h]||[];return f[b]},getString:function(a,b,c){return a=this.getStringForm(a,0,c)||k(a),a=b?d(a)(b):a,l(a)},getPlural:function(b,c,e,f,g){var h=a(this.currentLanguage,b);return c=this.getStringForm(c,h,g)||k(1===b?c:e),f&&(f.$count=b,c=d(c)(f)),l(c)},loadRemote:function(a){return b({method:"GET",url:a,cache:g.cache}).success(function(a){for(var b in a)g.setStrings(b,a[b])})}}}]),angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window",function(a,b,c,d,e){function f(a,b,c){if(!a)throw new Error("You should add a "+b+" attribute whenever you add a "+c+" attribute.")}var g=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s*/,"").replace(/\s*$/,""):a}}(),h=parseInt((/msie (\d+)/.exec(angular.lowercase(e.navigator.userAgent))||[])[1],10);return{restrict:"AE",terminal:!0,compile:function(e,i){f(!i.translatePlural||i.translateN,"translate-n","translate-plural"),f(!i.translateN||i.translatePlural,"translate-plural","translate-n");var j=g(e.html()),k=i.translatePlural,l=i.translateContext;return 8>=h&&"<!--IE fix-->"===j.slice(-13)&&(j=j.slice(0,-13)),{post:function(e,f,g){function h(){var b;k?(e=m||(m=e.$new()),e.$count=i(e),b=a.getPlural(e.$count,j,k,null,l)):b=a.getString(j,null,l);var g=angular.element("<span>"+b+"</span>");d(g.contents())(e);var h=f.contents(),n=g.contents();c.enter(n,f),c.leave(h)}var i=b(g.translateN),m=null;g.translateN&&e.$watch(g.translateN,h),e.$on("gettextLanguageChanged",h),h()}}}}}]),angular.module("gettext").filter("translate",["gettextCatalog",function(a){function b(b,c){return a.getString(b,null,c)}return b.$stateful=!0,b}]),angular.module("gettext").factory("gettextPlurals",function(){return function(a,b){switch(a){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return b%10!=1||b%100==11?1:0;case"jv":return 0!=b?1:0;case"mk":return 1==b||b%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return b>1?1:0;case"lv":return b%10==1&&b%100!=11?0:0!=b?1:2;case"lt":return b%10==1&&b%100!=11?0:b%10>=2&&(10>b%100||b%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return b%10==1&&b%100!=11?0:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?1:2;case"mnk":return 0==b?0:1==b?1:2;case"ro":return 1==b?0:0==b||b%100>0&&20>b%100?1:2;case"pl":return 1==b?0:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?1:2;case"cs":case"sk":return 1==b?0:b>=2&&4>=b?1:2;case"sl":return b%100==1?1:b%100==2?2:b%100==3||b%100==4?3:0;case"mt":return 1==b?0:0==b||b%100>1&&11>b%100?1:b%100>10&&20>b%100?2:3;case"gd":return 1==b||11==b?0:2==b||12==b?1:b>2&&20>b?2:3;case"cy":return 1==b?0:2==b?1:8!=b&&11!=b?2:3;case"kw":return 1==b?0:2==b?1:3==b?2:3;case"ga":return 1==b?0:2==b?1:7>b?2:11>b?3:4;case"ar":return 0==b?0:1==b?1:2==b?2:b%100>=3&&10>=b%100?3:b%100>=11?4:5;default:return 1!=b?1:0}}}),define("angular-gettext",["angular"],function(){}),angular.module("gettext").run(["gettextCatalog",function(a){}]),define("translations",["angular-gettext"],function(){}),define("superdesk/services/translate",["angular","translations","angular-gettext"],function(a){"use strict";return a.module("superdesk.translate",["gettext"]).run(["gettextCatalog","$location",function(a,b){var c=b.search();"lang"in c&&(a.currentLanguage=c.lang,a.debug=!0)}]).factory("gettext",["gettextCatalog",function(a){return function(b){return a.getString(b)}}])}),define("superdesk/services/storage",["angular"],function(a){"use strict";return a.module("superdesk.services.storage",[]).service("storage",function(){this.getItem=function(b){return a.fromJson(localStorage.getItem(b))},this.setItem=function(b,c){localStorage.setItem(b,a.toJson(c))},this.removeItem=function(a){localStorage.removeItem(a)},this.clear=function(){localStorage.clear()}})}),define("superdesk/services/preferencesService",["angular"],function(a){"use strict";return a.module("superdesk.preferences",["superdesk.notify","superdesk.session"]).service("preferencesService",["$injector","$rootScope","$q","session","notify","gettext",function(b,c,d,e,f,g){function h(a){function c(){return g.find("preferences",e.sessionId,null,a)}function f(a){return n=a,m(n),n}var g=b.get("api");n=null,o=e.getIdentity().then(c).then(null,function(a){return a&&404===a.status?c():d.reject(a)}).then(f)}function i(a){return a?t[a]?n[p][a]:n[q][a]:n[p]}function j(b,e){return a.extend(n[b],e),u||(u={},v=d.defer(),c.$applyAsync(k)),u[b]=u[b]||{},a.extend(u[b],e),v.promise}function k(){var a=b.get("api"),c=u;return u=null,a.save("preferences",n,c).then(function(a){return n._etag=a._etag,v.resolve(a),a},function(a){console.error(a),f.error(g("User preference could not be saved...")),v.reject(a)})["finally"](function(){v=null})}function l(a,b){b&&!a&&(o=null)}function m(b){a.forEach([p,q,r,s],function(a){null==b[a]&&(b[a]={})})}var n,o,p="user_preferences",q="session_preferences",r="active_privileges",s="allowed_actions",t={"feature:preview":1,"archive:view":1,"email:notification":1,"workqueue:items":1,"dashboard:ingest":1,"agg:view":1,"workspace:active":1,"categories:preferred":1};c.$watch(function(){return e.token},l),this.getPrivileges=function(){return this.get().then(function(){return n[r]||{}})},this.getActions=function(){return this.get().then(function(){return n[s]||[]})},this.get=function(a,b){function c(){return i(a)}return(!o||b)&&h(!b),o.then(c)},this.update=function(a,b){return b?t[b]?j(p,a,b):j(q,a,b):j(p,a)};var u,v}])}),define("superdesk/services/permissionsService",["angular"],function(a){"use strict";return a.module("superdesk.services.permissions",[]).service("permissionsService",["$q","$rootScope","em",function(a,b,c){this.isUserAllowed=function(d,e){var f=this,g=a.defer();return e||(e=b.currentUser),e.role?"string"==typeof e.role?c.repository("user_roles").find(e.role).then(function(a){g.resolve(f.isRoleAllowed(d,a))}):g.resolve(this.isRoleAllowed(d,e.role)):g.resolve(!1),g.promise},this._isRoleAllowedSingle=function(b,d,e){var f=this,g=a.defer();return e.permissions&&e.permissions[b]&&e.permissions[b][d]?g.resolve(!0):e["extends"]&&c.repository("user_roles").find(e["extends"]).then(function(a){g.resolve(f._isRoleAllowedSingle(b,d,a))}),g.promise},this.isRoleAllowed=function(b,c){var d=this,e=a.defer(),f=[];return _.forEach(b,function(a,b){_.forEach(a,function(a,e){f.push(d._isRoleAllowedSingle(b,e,c))})}),a.all(f).then(function(a){-1===a.indexOf(!1)?e.resolve(!0):e.resolve(!1)}),e.promise}}])}),define("superdesk/services/entity",["angular","lodash"],function(a,b){"use strict";return a.module("superdesk.services.entity",[]).service("locationParams",["$location","$route",function(c,d){return{defaults:{},reset:function(a){return this.defaults=b.extend(a,{page:1}),this.params=b.extend({},this.defaults,d.current.params),this.params},get:function(a){return this.params&&this.params[a]?this.params[a]:null},set:function(b,d){var e=b in this.defaults&&a.equals(this.defaults[b],d)?null:d;return c.search(b,e),this},getQuery:function(){return this.makeQuery(this.params,this.defaults)},makeQuery:function(c,d){d=d||{};var e=[];b.forEach(c,function(c,f){a.equals(d[f],c)||(b.isArray(c)===!1&&(c=[c]),b.forEach(c,function(a){e.push(encodeURIComponent(f)+"="+encodeURIComponent(a))}))},this);var f=0===e.length?"":"?"+e.join("&");return f},path:function(a){c.path(a)},reload:function(){d.reload()},replace:function(){c.replace()}}}]).service("em",["server",function(a){function b(b){this.find=function(c){return a.readById(b,c)},this.matching=function(c){return c||(c={}),a.list(b,c)},this.all=function(){return this.matching()}}var c={};this.getRepository=function(a){return a in c||(c[a]=new b(a)),c[a]},this.repository=this.getRepository,this["delete"]=function(b){return a["delete"](b)},this.update=function(b,c){return a.update(b,c)},this.create=function(b,c){return a.create(b,c)},this.remove=function(a){return this["delete"](a)},this.save=function(a,b){return"_etag"in b?this.update(b):this.create(a,b)},this.find=function(a,b){return this.repository(a).find(b)}}])}),define("superdesk/services/server",["lodash","angular"],function(a,b){"use strict";return b.module("superdesk.services.server",[]).service("server",["$q","$http","config",function(c,d,e){return{_makeUrl:function(){for(var a=e.server.url,b=0;b<arguments.length;b++)a+="/"+arguments[b];return a},_wrapUrl:function(a){return 0===e.server.url.indexOf("https")?"https://"+a:"http://"+a},_cleanData:function(b){var c=a.cloneDeep(b),d=["_id","_links","etag","updated","created"];return a.forEach(d,function(a){delete c[a]}),c},_all:function(b,d,e){var f=this,g=c.defer();if(void 0!==e){var h=d;d=e}var i=[];return a.forEach(d,function(a){void 0!==h?i.push(f[b](h,a)):i.push(f[b](a))}),c.all(i).then(function(a){g.resolve(a)}),g.promise},_http:function(b,e,f,g){var h=c.defer();b=b.toLowerCase();var i={method:b,url:e,params:f,cache:!1};if("patch"===b)var j=g.created;return("delete"===b||"patch"===b)&&(i.headers={"If-Match":g.etag}),("post"===b||"patch"===b)&&(i.data=this._cleanData(g)),d(i).success(function(c){if("post"===b)h.resolve(c);else if("patch"===b){var d=["_id","_links","etag","updated"];a.forEach(d,function(a){g[a]=c[a]}),g.created=j,h.resolve(g)}else h.resolve(c)}).error(function(a){h.reject(a)}),h.promise},createAll:function(a,b){return this._all("create",a,b)},readAll:function(a){return this._all("read",a)},updateAll:function(a){return this._all("update",a)},deleteAll:function(a){return this._all("delete",a)},create:function(a,b){return this._http("post",this._makeUrl(a),null,b)},list:function(a,b){return this._http("get",this._makeUrl(a),this._convertParams(b))},_convertParams:function(c){var d=a.extend({},a.pick(c,["filter","max_results","page","embedded","where","q","df"]));if("sort"in c&&(d.sort="[("+b.toJson(c.sort[0])+","+("asc"===c.sort[1]?1:-1)+")]"),"perPage"in c&&(d.max_results=c.perPage),c.search){var e={};e[c.searchField]=c.search,b.extend(d.where,e)}return d},read:function(a){return this._http("get",this._wrapUrl(a._links.self.href))},readById:function(a,b){return this._http("get",this._makeUrl(a,b))},update:function(a,b){return b&&(b._id=a._id,b.created=a.created,b.updated=a.updated,b.etag=a.etag),this._http("patch",this._wrapUrl(a._links.self.href),{},a)},"delete":function(a){return this._http("delete",this._wrapUrl(a._links.self.href),{},a)}}}])}),define("superdesk/services/dragDropService",["angular"],function(a){"use strict";return a.module("superdesk.services.dragdrop",[]).service("dragDropService",[function(){this.item=null}])}),define("superdesk/services/modalService",["angular"],function(a){"use strict";return a.module("superdesk.services.modal",["ui.bootstrap","superdesk.asset"]).service("modal",["$q","$modal","$sce","asset",function(a,b,c,d){this.confirm=function(e,f,g,h,i){f=f||gettext("Confirm"),g=g||gettext("OK"),h=null!=h?h:gettext("Cancel"),i=null!=i?i:null;var j=a.defer();return b.open({templateUrl:d.templateUrl("superdesk/views/confirmation-modal.html"),controller:["$scope","$modalInstance",function(a,b){a.headerText=c.trustAsHtml(f),a.bodyText=c.trustAsHtml(e),a.okText=g,a.cancelText=h,a.additionalCancelText=i,a.ok=function(){j.resolve(!0),b.close()},a.cancel=function(){j.reject(),b.dismiss()},a.additionalCancel=function(){b.dismiss()},a.close=function(){b.dismiss()}}]}),j.promise}}]).directive("sdModal",["$document",function(b){return{template:['<div class="modal">','<div class="modal-dialog" ng-if="model"><div class="modal-content" ng-transclude></div></div>',"</div>"].join(""),transclude:!0,scope:{model:"="},link:function(c,d,e){function f(){return h&&g}var g,h=!1;c.$watch("model",function(){c.model?(h||(g=d.children(),g.addClass(d.attr("class")),g.appendTo(b.find("body")),h=!0),g.modal("show")):f()&&g.modal("hide")}),$(document).on("hidden.bs.modal",".modal",function(){c.model=!1,c.$evalAsync()}),c.$on("$destroy",function(){f()&&(g.modal("hide"),g.remove()),a.element(document.body).find(".modal-backdrop").remove()})}}}])}),define("superdesk/services/workflowService",["lodash","angular","./preferencesService"],function(a,b){"use strict";return b.module("superdesk.workflow",[]).run(["workflowService",b.noop]).service("workflowService",["preferencesService","$rootScope",function(c,d){var e=[];this.isActionAllowed=function(b,c){if(a.isUndefined(c)||a.isUndefined(b.state))return!0;var d=a.find(e,function(a){return a.name===c});if(d){if(!a.isEmpty(d.include_states))return a.findIndex(d.include_states,function(a){return b.state===a})>=0;if(!a.isEmpty(d.exclude_states))return-1===a.findIndex(d.exclude_states,function(a){return b.state===a})}return!1},this.setActions=function(a){e=a},c.getActions().then(this.setActions),d.isActionAllowed=b.bind(this,this.isActionAllowed)}])}),define("superdesk/services/all",["require","./data","./translate","./storage","./preferencesService","./permissionsService","./entity","./server","./dragDropService","./modalService","./workflowService"],function(a){"use strict";return[a("./data").name,a("./modalService").name,a("./dragDropService").name,a("./server").name,a("./entity").name,a("./permissionsService").name,a("./storage").name,a("./preferencesService").name,a("./translate").name,a("./workflowService").name]}),define("superdesk/directives/sdAutofocus",["angular"],function(a){"use strict";return a.module("superdesk.directives.autofocus",[]).directive("sdAutoFocus",function(){return{link:function(a,b,c){b.focus()}}})}),define("superdesk/directives/sdDebounceThrottle",["jquery","angular"],function(a,b){"use strict";var c=function(a){var b=1e3,c=_[a];return{require:"ngModel",link:function(a,d,e,f){""!==e.interval&&void 0!==e.interval&&(b=e.interval),d.off("input").off("keydown").off("change"),d.on("input",c(function(){a.$apply(function(){f.$setViewValue(d.val())})},b))}}};return b.module("superdesk.directives.throttle",[]).directive("sdDebounce",function(){return c("debounce")}).directive("sdThrottle",function(){return c("throttle")})}),define("superdesk/directives/sdSort",["angular"],function(a){"use strict";return a.module("superdesk.directives.sort",["superdesk.asset"]).directive("sdSort",["$location","asset",function(a,b){return{scope:{label:"@",field:"@"},templateUrl:b.templateUrl("superdesk/views/sdSort.html"),link:function(b,c,d){b.loc=a,b.sort=b.loc.search().sort,b.$watch("(loc.search()).sort",function(a){b.sort=a}),c.click(function(){b.$apply(function(){b.sort&&b.field===b.sort[0]?a.search("sort",[b.field,"asc"===b.sort[1]?"desc":"asc"]):a.search("sort",[b.field,"asc"])})}),c.addClass("sortable")}}}])}),define("superdesk/directives/sdCheck",["angular"],function(a){"use strict";var b=function(a,b){a.toggleClass("checked",!!b),a.attr("checked",!!b)};return a.module("superdesk.check.directives",[]).directive("sdCheck",function(){return{require:"ngModel",replace:!0,template:'<span class="sd-checkbox"></span>',link:function(a,c,d,e){e.$render=function(){b(c,e.$viewValue)},a.$watch(d.ngModel,function(){b(c,e.$viewValue)}),c.on("click",function(b){return a.$apply(function(){e.$setViewValue(!e.$viewValue)}),!1})}}}).directive("sdCheckAll",function(){var a="_checked";return{require:"ngModel",replace:!0,template:'<span class="sd-checkbox"></span>',link:function(c,d,e,f){var g=!1;void 0!==e.checkAttribute&&(a=e.checkAttribute),c.$watch(e.ngModel,function(c){c&&(g=_.every(f.$viewValue,a)&&f.$viewValue.length>0,b(d,g))},!0),d.on("click",function(){g=!g;var e=f.$viewValue;_.forEach(e,function(b){b[a]=g}),c.$apply(function(){f.$setViewValue(e)}),b(d,g)})}}}).directive("sdSwitchInverted",function(){return{require:"ngModel",replace:!0,template:['<span class="sd-toggle">','<span class="inner"></span>',"</span>"].join(""),link:function(a,c,d,e){e.$render=function(){b(c,e.$viewValue)},a.$watch(d.ngModel,function(){b(c,!e.$viewValue)}),c.on("click",function(b){return a.$apply(function(){e.$setViewValue(!e.$viewValue)}),!1})}}}).directive("sdSwitch",function(){return{require:"ngModel",replace:!0,template:['<span class="sd-toggle">','<span class="inner"></span>',"</span>"].join(""),link:function(a,c,d,e){e.$render=function(){b(c,e.$viewValue)},a.$watch(d.ngModel,function(){b(c,e.$viewValue)}),c.on("click",function(b){return a.$apply(function(){e.$setViewValue(!e.$viewValue)}),!1})}}})}),define("superdesk/directives/sdWithParams",["angular"],function(a){"use strict";return a.module("superdesk.links",[]).directive("sdWithParams",["locationParams",function(a){return{compile:function(b,c,d){if(c.exclude){var e=c.exclude.split(","),f=a.makeQuery(_.omit(a.params,e),a.defaults);c.$set("href",c.href.trim()+f)}else c.$set("href",c.href.trim()+a.getQuery())}}}])}),define("superdesk/directives/sdConfirm",["angular"],function(a){"use strict";return a.module("superdesk.confirm.directives",[]).directive("sdConfirm",["$window",function(a){return{scope:{msg:"@sdConfirm",confirmAction:"&"},link:function(b,c,d){c.click(function(c){a.confirm(b.msg)&&b.confirmAction()})}}}])}),define("superdesk/directives/sdSelect",["angular"],function(a){"use strict";return a.module("superdesk.select.directives",["superdesk.asset"]).factory("optionParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error("Expected typeahead specification in form of _modelValue_ (as _label_)? for _item_ in _collection_ but got "+c+".");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("sdSelect",["$parse","$document","$compile","optionParser",function(b,c,d,e){return{restrict:"A",require:"ngModel",link:function(c,f,g,h){function i(){t.items.length=0;var b=q.source(c);if(a.isDefined(b))for(var d=0;d<b.length;d++){var e={};e[q.itemName]=b[d],t.items.push({label:q.viewMapper(e),model:q.modelMapper(e),checked:!1})}}function j(){if(k(h.$modelValue))return t.header="Select",t.header;if(r)t.header=h.$modelValue.length+" selected";else{var a={};a[q.itemName]=h.$modelValue,t.header=q.viewMapper(a)}}function k(a){if(!a)return!0;if(a.length&&a.length>0)return!1;for(var b in a)if(a[b])return!1;return!0}function l(a){a.checked?t.uncheckAll():(t.uncheckAll(),a.checked=!a.checked),n(!1)}function m(a){a.checked=!a.checked,n(!0)}function n(b){var c;b?(c=[],a.forEach(t.items,function(a){a.checked&&c.push(a.model)})):a.forEach(t.items,function(a){return a.checked?(c=a.model,!1):void 0}),h.$setViewValue(c)}function o(b){a.isArray(b)?a.forEach(b,function(b){a.forEach(t.items,function(c){a.equals(c.model,b)&&(c.checked=!0)})}):a.forEach(t.items,function(c){return a.equals(c.model,b)?(c.checked=!0,!1):void 0})}var p=g.options,q=e.parse(p),r=g.multiple?!0:!1,s=!1,t=c.$new(),u=g.change||a.noop;t.items=[],t.header="Select",t.multiple=r,t.disabled=!1,t.showfilter=g.showfilter?!0:!1,c.$on("$destroy",function(){t.$destroy()});var v=a.element("<div sd-select-popup></div>");(g.required||g.ngRequired)&&(s=!0),g.$observe("required",function(a){s=a}),t.$watch(function(){return b(g.disabled)(c)},function(a){t.disabled=a}),t.$watch(function(){return b(g.multiple)(c)},function(a){r=a||!1}),t.$watch(function(){return q.source(c)},function(b){a.isDefined(b)&&i()},!0),t.$watch(function(){return h.$modelValue},function(b,c){a.isDefined(b)&&(o(b),t.$eval(u)),j(),h.$setValidity("required",t.valid())},!0),i(),f.append(d(v)(t)),t.valid=function(){if(!s)return!0;var b=h.$modelValue;return a.isArray(b)&&b.length>0||!a.isArray(b)&&null!==b},t.checkAll=function(){r&&(a.forEach(t.items,function(a){a.checked=!0}),n(!0))},t.uncheckAll=function(){a.forEach(t.items,function(a){a.checked=!1}),n(!0)},t.select=function(a){r===!1?(l(a),t.toggleSelect()):m(a)}}}}]).directive("sdSelectPopup",["$document","asset",function(a,b){return{restrict:"A",scope:!1,replace:!0,templateUrl:b.templateUrl("superdesk/views/sdselect.html"),link:function(a,b,c){a.open=!1,a.toggleSelect=function(){a.open=!a.open,a.open&&a.focus()},a.focus=function(){var a=b.find("input")[0];a.focus()}}}}])}),define("superdesk/directives/sdPermissions",["angular"],function(a){"use strict";return a.module("superdesk.permissions.directives",[]).directive("sdPermissions",["permissions","permissionsService",function(a,b){return{scope:{model:"=",permission:"@",role:"=",user:"="},link:function(c,d,e){if(c.model=!1,a[c.permission]){var f=a[c.permission].permissions;c.role?c.model=b.isRoleAllowed(f,c.role):c.user?b.isUserAllowed(f,c.user).then(function(a){c.model=a}):b.isUserAllowed(f).then(function(a){c.model=a})}}}}])}),define("superdesk/directives/sdUserAvatar",["angular"],function(a){"use strict";return a.module("superdesk.avatar",[]).directive("sdUserAvatar",function(){return{scope:{src:"=",initials:"="},link:function(a,b,c){function d(){if(a.src)b.attr("src",a.src).show(),e.addClass("no-bg");else if(a.initials){var c=a.initials.replace(/\W*(\w)\w*/g,"$1").toUpperCase();b.hide().parent().html(c),e.addClass("initials")}else b.hide(),e.removeClass("no-bg")}var e=b.parents("figure");b.on("error",function(a){b.hide()}),a.$watch("src",d),a.$watch("initials",d)}}})}),define("superdesk/directives/sdDragDrop",["jquery","angular"],function(a,b){"use strict";return b.module("superdesk.dragdrop.directives",[]).directive("sdSortable",[function(){return{scope:{update:"=",placeholder:"="},link:function(b,c,d){c.sortable({tolerance:"intersect",placeholder:b.placeholder,start:function(b,c){a(b.target).data("ui-sortable").floating=!0},update:function(a,c){b.update()}}),c.disableSelection()}}}]).directive("sdDraggable",["dragDropService",function(a){return{scope:{item:"=",container:"=",cursor:"="},link:function(b,c,d){c.draggable({helper:"clone",appendTo:b.container,start:function(c,d){a.item=b.item}}),b.$watch("cursor",function(a){a?c.draggable("option","cursorAt",{left:5,top:5}):c.draggable("option","cursorAt",!1)})}}}]).directive("sdDroppable",["dragDropService",function(a){return{scope:{update:"="},link:function(b,c,d){c.droppable({accept:":not(.ui-sortable-helper)",drop:function(c,d){b.update(a.item),a.item=null}})}}}])}),define("superdesk/directives/sdTypeahead",["angular"],function(a){"use strict";return a.module("superdesk.typeahead.directives",[]).directive("sdTypeahead",["$timeout",function(a){return{restrict:"A",transclude:!0,replace:!0,templateUrl:"scripts/superdesk/views/sdTypeahead.html",scope:{search:"&",select:"&",items:"=",term:"=",alwaysVisible:"=",disabled:"=",blur:"&"},controller:["$scope",function(a){a.items=[],a.hide=!0,this.activate=function(b){a.active=b},this.activateNextItem=function(){var b=a.items.indexOf(a.active);this.activate(a.items[(b+1)%a.items.length])},this.activatePreviousItem=function(){var b=a.items.indexOf(a.active);this.activate(a.items[0===b?a.items.length-1:b-1])},this.isActive=function(b){return a.active===b},this.selectActive=function(){this.select(a.active)},this.select=function(b){a.hide||(a.hide=!0,a.focused=!1,a.select({item:b}))},a.isVisible=function(){return!a.hide&&(a.focused||a.mousedOver)&&a.items.length>0},a.query=function(){a.hide=!1,a.search({term:a.term})}}],link:function(b,c,d,e){var f=c.find(".input-term > input"),g=c.find(".item-list");f.bind("focus",function(){b.$apply(function(){b.focused=!0})}),f.bind("blur",function(){b.$apply(function(){b.focused=!1,"function"!=typeof b.blur||b.hide||b.blur({item:b.active})})}),g.bind("mouseover",function(){b.$apply(function(){b.mousedOver=!0})}),g.bind("mouseleave",function(){b.$apply(function(){b.mousedOver=!1})}),f.bind("keyup",function(a){13===a.keyCode&&b.$apply(function(){e.selectActive()}),27===a.keyCode&&b.$apply(function(){b.hide=!0})}),f.bind("keydown",function(a){(13===a.keyCode||27===a.keyCode)&&a.preventDefault(),40===a.keyCode&&(a.preventDefault(),b.$apply(function(){e.activateNextItem()})),38===a.keyCode&&(a.preventDefault(),b.$apply(function(){e.activatePreviousItem()}))}),b.$watch("items",function(a){e.activate(a.length?a[0]:null)}),b.$watch("focused",function(b){b&&a(function(){f.focus()},0,!1)}),b.$watch("isVisible()",function(a){a||b.alwaysVisible?(g.show(),b.hide=!1):(g.hide(),b.active=null)})}}}]).directive("typeaheadItem",function(){return{require:"^sdTypeahead",link:function(a,b,c,d){var e=a.$eval(c.typeaheadItem);a.$watch(function(){return d.isActive(e)},function(a){a?b.addClass("active"):b.removeClass("active")}),b.bind("mouseenter",function(b){a.$apply(function(){d.activate(e)})}),b.bind("click",function(b){a.$apply(function(){d.select(e)})})}}})}),define("superdesk/directives/sdSlider",["angular"],function(a){"use strict";return a.module("superdesk.slider.directives",[]).directive("sdSlider",function(){return{transclude:!0,templateUrl:"scripts/superdesk/views/sdSlider.html",scope:{value:"=",list:"=",unique:"@",field:"@",disabled:"=",invert:"=",update:"&"},link:function(a,b,c,d){a.$watch("list",function(b){if(!b)return!1;var c=a.invert?-Math.abs(parseInt(a.value)):parseInt(a.value),d=a.invert?-Math.abs(parseInt(a.list[a.list.length-1][a.unique])):parseInt(a.list[0][a.unique]),e=a.invert?-Math.abs(parseInt(a.list[0][a.unique])):parseInt(a.list[a.list.length-1][a.unique]);c||(c=d),$('[sd-slider][data-field="'+a.field+'"]').slider({range:"max",min:d,max:e,value:c,disabled:a.disabled,create:function(){$(this).find(".ui-slider-thumb").css("left",100*(c-d)/(e-d)+"%").text(a.invert?Math.abs(c):c)},slide:function(b,c){$(this).find(".ui-slider-thumb").css("left",100*(c.value-d)/(e-d)+"%").text(a.invert?Math.abs(c.value):c.value),a.update({item:a.invert?a.list[Math.abs(c.value)-1]:a.list[c.value]-1,field:a.field})},start:function(){$(this).find(".ui-slider-thumb").addClass("ui-slider-thumb-active")},stop:function(){$(this).find(".ui-slider-thumb").removeClass("ui-slider-thumb-active")}})})}}})}),define("superdesk/directives/sdSearchList",["angular"],function(a){"use strict";return a.module("superdesk.directives.searchList",["superdesk.asset"]).directive("sdSearchList",["asset","api",function(a,b){var c={pageSize:25};return{scope:{endpoint:"@",pageSize:"@",labelKey:"@",searchKey:"@",maxSelectedItems:"=",criteria:"=",disabledItems:"=",selectedItems:"=",selectedItemsHelperTemplate:"=",selectedItemsHelperData:"="},templateUrl:a.templateUrl("superdesk/views/sdSearchList.html"),link:function(a,d,e){a.open=!1,a.page=1,a.maxPage=0,a.items=null,a.keyword=null,a.editable=!0,null!=a.$parent._editable&&(a.editable=a.$parent._editable);var f=function(){var d=a.criteria||{};if(a.keyword&&a.searchKey){var e={};e[a.searchKey]={$regex:a.keyword,$options:"-i"},d.where=JSON.stringify({$or:[e]})}b[a.endpoint].query(_.assign({},d,{max_results:a.pageSize,page:a.page})).then(function(b){var d=a.pageSize||c.pageSize;a.maxPage=Math.ceil(b._meta.total/d)||0,a.items=b._items})},g=_.debounce(f,500);a.$watch("keyword",function(){a.page=1,g()}),a.$watch("page",g),a.selectItem=function(b){a.selectedItems=a.selectedItems||[],a.selectedItems.push(b),a.selectedItems=_.uniq(a.selectedItems),1===a.maxSelectedItems&&(a.open=!1)},a.unselectItem=function(b){_.remove(a.selectedItems,function(a){return a._id===b._id})},a.isSelected=function(b){return a.selectedItems?-1!==_.findIndex(a.selectedItems,function(a){return a._id===b._id}):!1},a.isDisabled=function(b){return a.disabledItems?-1!==_.findIndex(a.disabledItems,function(a){return a._id===b._id}):!1}}}}]).directive("sdSearchListSingle",["asset",function(a){return{scope:{endpoint:"@",pageSize:"@",labelKey:"@",searchKey:"@",criteria:"=",disabledItems:"=",selectedItem:"="},templateUrl:a.templateUrl("superdesk/views/sdSearchListSingle.html"),link:function(a,b,c){a.selectedItems=[],a.$watch("selectedItems",function(){Array.isArray(a.selectedItems)&&(a.selectedItem=_.last(a.selectedItems))})}}}])}),define("superdesk/directives/all",["require","./sdAutofocus","./sdDebounceThrottle","./sdSort","./sdCheck","./sdWithParams","./sdConfirm","./sdSelect","./sdPermissions","./sdUserAvatar","./sdDragDrop","./sdTypeahead","./sdSlider","./sdSearchList"],function(a){"use strict";return[a("./sdAutofocus").name,a("./sdDebounceThrottle").name,a("./sdSort").name,a("./sdWithParams").name,a("./sdCheck").name,a("./sdConfirm").name,a("./sdSelect").name,a("./sdPermissions").name,a("./sdUserAvatar").name,a("./sdDragDrop").name,a("./sdTypeahead").name,a("./sdSlider").name,a("./sdSearchList").name]}),define("superdesk/superdesk",["angular","require","angular-ui","angular-route","angular-resource","angular-file-upload","./activity/activity","./analytics/analytics","./api/api","./auth/auth","./beta/beta","./config/config","./datetime/datetime","./elastic/elastic","./error/error","./notify/notify","./upload/upload","./ui/ui","./filters","./services/all","./directives/all"],function(a,b){"use strict";var c=["ngRoute","ngResource","ui.bootstrap","angularFileUpload",b("./activity/activity").name,b("./analytics/analytics").name,b("./api/api").name,b("./auth/auth").name,b("./beta/beta").name,b("./config/config").name,b("./datetime/datetime").name,b("./elastic/elastic").name,b("./error/error").name,b("./notify/notify").name,b("./upload/upload").name,b("./ui/ui").name,"superdesk.menu"];
c.push(b("./filters").name),c.push.apply(c,b("./services/all")),c.push.apply(c,b("./directives/all")),a.module("superdesk.loading",[]).run(["$rootScope","$route","$location","$http","session","preferencesService",function(b,c,d,e,f,g){function h(a){for(var b=_.values(c.routes),d=b.length-1;d>=0;d--)if(b[d].regexp.test(a))return b[d].auth;return!1}var i=a.noop;b.loading=!0,g.get().then(function(){i(),e.defaults.headers.common.Authorization=f.token,b.loading=!1,b.$applyAsync(c.reload)}),i=b.$on("$locationChangeStart",function(a){b.requiredLogin=h(d.path()),b.loading&&b.requiredLogin&&a.preventDefault()})}]);try{a.module("superdesk.templates-cache")}catch(d){a.module("superdesk.templates-cache",[])}finally{c.push("superdesk.templates-cache")}return a.module("superdesk",c)});